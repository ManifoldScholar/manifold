{"version":3,"sources":["webpack:///./src/global/components/form/CodeArea/darkTheme.js","webpack:///./src/global/components/form/CodeArea/lightTheme.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/links.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/images.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/iframes.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/textBlocks.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/general.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/getters.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/shared.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/spans.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/layoutBlocks.js","webpack:///./src/global/components/form/ContentEditor/plugins/withInlines.js","webpack:///./src/global/components/form/ContentEditor/plugins/withImages.js","webpack:///./src/global/components/form/ContentEditor/plugins/withShortcuts.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/listIndents.js","webpack:///./src/global/components/form/ContentEditor/plugins/withHtmlAwareBreaks.js","webpack:///./src/global/components/form/ContentEditor/plugins/index.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Leaf.js","webpack:///./src/global/components/form/ContentEditor/hotkeys/handlers.js","webpack:///./src/global/components/form/ContentEditor/contexts/htmlBreadcrumbsContext.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/styles.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/HtmlLabel.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/removeNode.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Image.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Void.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Element.js","webpack:///./src/global/components/form/ContentEditor/hotkeys/index.js","webpack:///./src/global/components/form/ContentEditor/components/HtmlEditor.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/index.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/content.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/BlockButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/MarkButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/LinkForm.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/Modal.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/utils.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/LinkButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/ImageForm.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/ImageButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/IframeForm.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/IframeButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/BlockSelect.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/FunctionButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/SpanButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/ToolbarRTE.js","webpack:///./src/global/components/form/ContentEditor/components/controls/ToolbarHTML.js","webpack:///./src/global/components/form/ContentEditor/components/controls/Toggle/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/Toggle/index.js","webpack:///./src/global/components/form/ContentEditor/components/controls/ToggleBar.js","webpack:///./src/global/components/form/ContentEditor/components/styles.js","webpack:///./src/global/components/form/ContentEditor/components/EditorControls.js","webpack:///./src/global/components/form/ContentEditor/components/Editor.js","webpack:///./src/global/components/form/ContentEditor/components/Wrapper.js"],"names":["window","ace","define","acequire","_exports","module","exports","isDark","cssClass","cssText","importCssString","unwrapLink","editor","Transforms","unwrapNodes","match","n","Editor","isEditor","Element","isElement","type","ReactEditor","focus","wrapLink","url","text","selection","isCollapsed","Range","link","htmlAttrs","href","children","insertNodes","wrapNodes","split","collapse","edge","insertImage","alt","image","src","slateOnly","node","above","isEmpty","removeNodes","insertIframe","title","embed","LIST_TYPES","toggleTextBlock","format","path","Node","parent","anchor","substring","offset","at","handleLiTextChild","removeMark","includes","p","isEqual","class","undefined","withoutNormalizing","setNodes","addMark","clearSlate","Array","length","keys","forEach","e","setSelectionAtPoint","select","formatNodeLabel","label","nodeName","id","replaceAll","getListItemNode","getListNode","getCommonBlock","condition","range","unhangRange","voids","common","isBlock","getAncestors","iterator","list","next","value","key","findKey","isElementActive","nearest","isTextBlockActive","block","isMarkActive","marks","get","isLinkActive","nodes","isEmptyAndChildless","onlyChildIsEmptyText","has","unwrapNode","parentPath","Path","newParent","hasBlocks","liftNodes","unwrapSpan","toggleOrWrapNode","insertOrWrapSpan","formatIsContainer","nestableElements","formatIsText","rteElements","wrapLayoutBlock","toggleMark","withInlines","insertText","isInline","element","display","mathMLElements","inlineNodes","isImage","isImageUrl","isVideo","isVideoUrl","isLink","isValidUrl","withImages","insertData","data","getData","files","item","reader","FileReader","addEventListener","result","readAsDataURL","SHORTCUTS","INLINE_SHORTCUTS","withShortcuts","endsWith","start","blockType","string","slice","delete","shortcut","first","textNode","textNodePath","beforeText","indexOf","startIndex","endIndex","target","contentAnchor","contentFocus","distance","unit","reverse","getTextLocation","str","textContent","lastPath","nodePath","isTextNode","nextStr","nextPath","getIndentSelectionLocation","textIterator","nestListItem","srcPath","destPath","isArray","liftListItem","unwrap","moveNodes","to","targetPath","handleInlineItemChildren","findListChild","decreaseIndent","canUnwrapRoot","parentLi","listNode","listNodePath","listParent","isWrappedList","nodeStart","SlateEditor","listStart","Point","equals","destIndex","pop","withHtmlAwareBreaks","insertBreak","deleteBackward","inline","liIsEmpty","removeEmptyInline","isBefore","inlinePath","maybeUnwrapSlateOnlyNode","li","nearestBlock","blockToTransform","transformPath","withPlugins","withVoids","SlateLeaf","attributes","leaf","leafChildren","bold","italic","underline","strikethrough","code","handleImageHotkey","preventDefault","button","document","getElementsByName","click","handleIframeHotkey","HtmlBreadcrumbsContext","createContext","useHtmlBreadcrumbs","useContext","ButtonGroup","$visible","respond","InteriorButton","buttonUnstyled","$color","Content","$selected","defaultFocusStyle","ImageWrapper","VoidOuter","VoidInner","VoidLabel","formLabelPrimary","HrOuter","HrInner","COLOR_MAP","green","light","dark","blue","yellow","ElementLabel","EditableElementLabel","ClassInput","TagButtons","DeleteButton","LiftButton","getHtmlOutlineStyles","darkMode","color","outline","outlineColor","borderRadius","borderTopLeftRadius","outlineOffset","position","HtmlLabel","visible","useSlateStatic","inputRef","useRef","t","useTranslation","editing","editingCrumb","useEffect","current","findPath","disableDelete","disableLift","tagAndId","formattedClass","trim","contentEditable","ref","defaultValue","onChange","persist","debounce","mode","doUpdate","updateClassName","onClick","aria-label","disabled","IconComposer","icon","size","c","childPath","nc","nestedChildPath","hasBlockChildren","pathCounter","removeNode","ImageRenderer","as","showHtml","focused","useFocused","selected","useSelected","wrapperClassName","classNames","className","epubType","style","data-epub-type","width","height","VoidRenderer","theme","srcdoc","shadowRoot","shadow","attachShadow","container","createElement","containerClass","setAttribute","appendChild","innerHTML","childNodes","svgProps","flexShrink","SlateElement","selectedCrumb","renderedElements","markElements","Tag","captureHotKeys","shiftKey","insertSoftBreak","listType","index","selectionPath","prevItemPath","prevItem","subListNode","subListPath","increaseIndent","metaKey","ctrlKey","altKey","keyCode","handleLinkHotkey","HtmlEditor","props","aceRef","nextRef","prevRef","rest","editorProps","$blockScrolling","minLines","maxLines","wrapEnabled","showPrintMargin","onLoad","once","session","getUndoManager","reset","commands","removeCommand","renderer","setPadding","setScrollMargin","textInput","getElement","querySelector","scrollBy","onFocus","gotoLine","editorOptions","enableAutoIndent","name","bindKey","win","mac","exec","Wrapper","Label","headingTertiary","Header","Description","HotKey","HotKeyLabel","TextPlaceholder","Key","Keys","TooltipContent","description","hotkeys","map","hk","k","i","h1","h2","h3","h4","h5","h6","ol","ul","blockquote","pre","undo","redo","img","iframe","Button","defaultTransitionProps","SelectTooltipWrapper","TooltipIcon","SelectWrapper","Select","SpanButton","SelectIcon","StylesButton","BlockButton","useSlate","Tooltip","content","xOffset","yOffset","delay","data-active","event","tabIndex","forwardRef","MarkButton","isFirst","Form","CloseButton","$primary","defaultHoverStyle","CloseText","utilityPrimary","CloseIcon","Utility","ModalHeader","HeaderIcon","Heading","ModalBody","Modal","Dialog","fluidScale","InsertLinkForm","urlRef","textRef","defaultValues","InsertModal","form","resolve","reject","heading","resolveLabel","uid","useUID","handleRejectClick","buttonClasses","maxWidth","showCloseButton","closeOnOverlayClick","labelledBy","describedBy","onEsc","data-id","displayName","propTypes","PropTypes","func","isRequired","options","object","message","oneOfType","onModalClose","close","selectionToUse","setTimeout","LinkButton","active","useConfirmation","confirm","confirmation","addLink","inputElement","callback","closeCallback","InsertImageForm","altRef","ImageButton","addImage","updateImage","attrs","from","InsertIframeForm","titleRef","IframeButton","addIframe","updateIframe","BlockSelect","ariaLabel","renderOptions","o","hidden","opts","isActive","reduce","obj","Object","find","getActiveBlock","FunctionButton","tooltip","Styled","renderButton","Toolbar","ToolGroup","ToolbarSpacer","ToggleBar","BreadcrumbsBar","$darkMode","Breadcrumbs","Breadcrumb","Spacer","ShowHideButton","ToolbarRTE","onClickUndo","onClickRedo","menu","useMenuBarState","orientation","loop","wrap","useSlateSelection","ancestors","setSelectedCrumb","setEditingCrumb","onToggleHtmlOutlines","useCallback","handleHoverFocus","a","clearHoverFocus","sort","b","tag","onMouseEnter","onMouseLeave","onBlur","ToolbarHTML","toggleStyles","cssVisible","controlsRef","$padding","$active","MobileLabel","Toggle","padding","left","right","iconSize","mobileLabel","htmlMode","onClickEditorToggle","onClickDarkModeToggle","EditorSecondary","EditableWrapper","$cssVisible","Editable","BaseEditable","Controls","HTMLError","InputError","EditorControls","errors","localHtml","localSlate","setLocalHtml","onChangeHtml","setLocalSlate","stylesheets","hasErrors","setHasErrors","warnErrors","setWarnErrors","formErrors","toggleHtmlMode","useState","showCss","toggleCss","setDarkMode","activeElement","toDOMPoint","rect","parentElement","getBoundingClientRect","buttons","getElementById","controls","buttonsRect","controlsRect","bottom","top","y","scrollIntoView","behavior","s","styles","join","renderElement","renderLeaf","codeAreaProps","readOnly","onValidate","messages","errorFound","msg","wrapperClasses","source","pointer","detail","val","stopPropagation","json","serializeToSlate","html","formatHtml","serializeToHtml","toggleEditorView","HistoryEditor","placeholder","spellCheck","onKeyDown","dangerouslySetInnerHTML","__html","EditorWrapper","setFormValue","set","initialHtmlValue","initialSlateValue","editorRef","withReact","withHistory","createEditor","prevSlate","prevHtml","setFormValueFromSlate","throttle","setFormValueFromHtml","removeFormatting","FieldWrapper","fallbackRender","resetErrorBoundary","Provider","changes","history","undos","selectionBefore","arrayOf","sectionId","sectionBody"],"mappings":"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","file":"build/chunk-11-bb3f53fcbc3d936a1f91.js","sourcesContent":["/* eslint-disable max-len, no-unused-vars */\nwindow.ace.define(\n  \"ace/theme/idle_fingers\",\n  [\"require\", \"exports\", \"module\", \"ace/lib/dom\"],\n  (acequire, _exports, module) => {\n    exports = _exports;\n    exports.isDark = true;\n    exports.cssClass = \"ace-idle-fingers\";\n    exports.cssText = `\n      .ace-idle-fingers .ace_gutter {\n        background: #3b3b3b;\n        color: rgb(153,153,153);\n      }\n\n      .ace-idle-fingers .ace_print-margin {\n        width: 1px;\n        background: #3b3b3b;\n      }\n\n      .ace-idle-fingers {\n        color: var(--color-base-neutral10);\n        border: 1px solid #555555;\n      }\n\n      .ace-idle-fingers .ace_cursor {\n        color: #91FF00;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selection {\n        background: rgba(90, 100, 126, 0.88);\n      }\n\n      .ace-idle-fingers.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #323232;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_step {\n        background: rgb(102, 82, 0);\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid #404040;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_active-line {\n        background:  var(--color-base-neutral110);\n      }\n\n      .ace-idle-fingers .ace_gutter-active-line {\n        background-color: #353637\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(90, 100, 126, 0.88)\n      }\n\n      .ace-idle-fingers .ace_invisible {\n        color: var(--color-base-neutral40);\n      }\n\n      .ace-idle-fingers .ace_keyword,\n      .ace-idle-fingers .ace_meta {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_constant,\n      .ace-idle-fingers .ace_constant.ace_character,\n      .ace-idle-fingers .ace_constant.ace_character.ace_escape,\n      .ace-idle-fingers .ace_constant.ace_other,\n      .ace-idle-fingers .ace_support.ace_constant {\n        color: var(--color-base-blue45);\n      }\n\n      .ace-idle-fingers .ace_invalid:not(.ace_invisible) {\n        color: var(--color-base-neutral40);\n        background: var(--color-base-red45);\n      }\n\n      .ace-idle-fingers .ace_fold {\n        background-color: #CC7833;\n        border-color: #FFFFFF;\n      }\n\n      .ace-idle-fingers .ace_support.ace_function {\n        color: #B83426;\n      }\n\n      .ace-idle-fingers .ace_variable.ace_parameter {\n        font-style: italic;\n      }\n\n      .ace-idle-fingers .ace_string {\n        color: var(--color-base-green20);\n      }\n\n      .ace-idle-fingers .ace_string.ace_regexp {\n        color: #CCCC33;\n      }\n\n      .ace-idle-fingers .ace_comment {\n        font-style: italic;\n        color: #BC9458;\n      }\n\n      .ace-idle-fingers .ace_meta.ace_tag {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_entity.ace_name {\n        color: #FFC66D;\n      }\n\n      .ace-idle-fingers .ace_collab.ace_user1 {\n        color: #323232;\n        background-color: #FFF980;\n      }\n\n      .ace-idle-fingers .ace_indent-guide {\n        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMwMjLyZYiPj/8PAAreAwAI1g0AAAAAElFTkSuQmCC) right repeat-y\n      }\n    `;\n    const dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n  }\n);\n/* eslint-enable max-len, no-unused-vars */\n","/* eslint-disable max-len, no-unused-vars */\nwindow.ace.define(\n  \"ace/theme/kuroir\",\n  [\"require\", \"exports\", \"module\", \"ace/lib/dom\"],\n  (acequire, _exports, module) => {\n    exports = _exports;\n    exports.isDark = false;\n    exports.cssClass = \"ace-kuroir\";\n    exports.cssText = `\n      .ace-kuroir .ace_gutter {\n        background: var(--color-base-neutral30);\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_print-margin {\n        width: 1px;\n        background: #e8e8e8;\n      }\n\n      .ace-kuroir {\n        background-color: #E8E9E8;\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_cursor {\n        color: #202020;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selection {\n        background: var(--color-base-yellow20);\n      }\n\n      .ace-kuroir.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #E8E9E8;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_step {\n        background: rgb(198, 219, 174);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid rgba(0, 0, 0, 0.29);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_active-line {\n        background: var(--color-base-yellow45);\n      }\n\n      .ace-kuroir .ace_gutter-active-line {\n        background-color: rgba(245, 228, 37, .5);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(245, 170, 0, 0.57);\n      }\n\n      .ace-kuroir .ace_invisible {\n        color: #BFBFBF\n      }\n\n      .ace-kuroir .ace_fold {\n        border-color: #363636;\n      }\n\n      .ace-kuroir .ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_constant.ace_numeric {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support.ace_type {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_function {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_keyword {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_storage {\n        color:#A52A2A;\n      }\n\n      .ace-kuroir .ace_invalid.ace_illegal {\n        color:#FD1224;\n        background-color:rgba(255, 6, 0, 0.15);\n      }\n\n      .ace-kuroir .ace_invalid.ace_deprecated {\n        text-decoration:underline;\n        font-style:italic;\n        color:#FD1732;\n        background-color:#E8E9E8;\n      }\n\n      .ace-kuroir .ace_string {\n        color: var(--color-base-green75);\n      }\n\n      .ace-kuroir .ace_string.ace_regexp {\n        color:#417E00;\n        background-color:#C9D4BE; }\n\n      .ace-kuroir .ace_comment {\n        color:rgba(148, 148, 148, 0.91);\n        background-color:rgba(220, 220, 220, 0.56);\n      }\n\n      .ace-kuroir .ace_variable {\n        color: var(--color-text-neutral100);\n      }\n\n      .ace-kuroir .ace_meta.ace_tag {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_markup.ace_heading {\n        color:#B8012D;\n        background-color:rgba(191, 97, 51, 0.051);\n      }\n\n      .ace-kuroir .ace_markup.ace_list {\n        color:#8F5B26;\n      }\n\n      .ace-kuroir .ace_indent-guide {\n          background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\n      }\n\n      .ace-kuroir .ace_indent-guide-active {\n        background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\n      }\n    `;\n    const dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n  }\n);\n/* eslint-enable max-len, no-unused-vars */\n","import { Transforms, Editor, Range, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const unwrapLink = editor => {\n  Transforms.unwrapNodes(editor, {\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n.type === \"a\"\n  });\n  ReactEditor.focus(editor);\n};\n\nexport const wrapLink = (editor, url, text) => {\n  const { selection } = editor ?? {};\n  if (!selection) return;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n  const link = {\n    type: \"a\",\n    htmlAttrs: { href: url },\n    children: isCollapsed ? [{ text: text ?? url }] : []\n  };\n\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, link);\n  } else {\n    Transforms.wrapNodes(editor, link, { split: true });\n    Transforms.collapse(editor, { edge: \"end\" });\n  }\n\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const insertImage = (editor, url, alt) => {\n  const text = { text: \"\", slateOnly: true };\n  const image = {\n    type: \"img\",\n    htmlAttrs: { src: url, alt: alt ?? \"\" },\n    children: [text]\n  };\n  const [node] = Editor.above(editor, editor.selection);\n  if (Editor.isEmpty(editor, node)) {\n    Transforms.removeNodes(editor);\n  }\n  Transforms.insertNodes(editor, image);\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const insertIframe = (editor, url, title) => {\n  const text = { text: \"\", slateOnly: true };\n  const embed = {\n    type: \"iframe\",\n    htmlAttrs: { src: url, title },\n    children: [text]\n  };\n  const [node] = Editor.above(editor, editor.selection);\n  if (Editor.isEmpty(editor, node)) {\n    Transforms.removeNodes(editor);\n  }\n  Transforms.insertNodes(editor, embed);\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Element, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\n\nconst LIST_TYPES = [\"ol\", \"ul\"];\n\nconst handleLiTextChild = ({ editor, node, path, format }) => {\n  const { anchor, focus } = editor.selection;\n  const start = node.text.substring(0, anchor.offset);\n  const target = node.text.substring(anchor.offset, focus.offset);\n  const end = node.text.substring(focus.offset);\n\n  const children = [\n    { type: \"list-sibling\", slateOnly: true, children: [{ text: start }] },\n    { type: format, children: [{ text: target }] },\n    { type: \"list-sibling\", slateOnly: true, children: [{ text: end }] }\n  ];\n\n  Transforms.insertNodes(editor, children, { at: path });\n};\n\nexport const toggleTextBlock = ({\n  editor,\n  format,\n  node,\n  path,\n  split = false\n}) => {\n  if (node.text && Node.parent(editor, path).type === \"li\")\n    return handleLiTextChild({ editor, node, path, format });\n\n  if (node.type === \"pre\") Editor.removeMark(editor, \"code\", true);\n\n  const type = LIST_TYPES.includes(format) ? \"li\" : format;\n\n  Transforms.unwrapNodes(editor, {\n    match: (n, p) =>\n      !Editor.isEditor(n) &&\n      Element.isElement(n) &&\n      LIST_TYPES.includes(n.type) &&\n      isEqual(p, path),\n    split: true\n  });\n\n  if (node.slateOnly || format !== node.type) {\n    const htmlAttrs = node.htmlAttrs?.class\n      ? { class: node.htmlAttrs?.class }\n      : undefined;\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.setNodes(\n        editor,\n        {\n          type,\n          slateOnly: undefined,\n          htmlAttrs\n        },\n        { split }\n      );\n      if (type === \"li\") {\n        Transforms.wrapNodes(editor, { type: format, children: [] });\n      }\n      if (format === \"pre\") Editor.addMark(editor, \"code\", true);\n      ReactEditor.focus(editor);\n    });\n  }\n\n  Transforms.setNodes(editor, { type: \"p\", slateOnly: undefined }, { split });\n  ReactEditor.focus(editor);\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const clearSlate = editor => {\n  const count = Array(editor.children.length).keys();\n  [...count].forEach(() => {\n    try {\n      Transforms.removeNodes(editor, { at: [0] });\n    } catch (e) {\n      return e;\n    }\n  });\n};\n\nexport const setSelectionAtPoint = (editor, path, offset = 0) => {\n  Transforms.select(editor, {\n    anchor: { path, offset },\n    focus: { path, offset }\n  });\n};\n\nexport const formatNodeLabel = node => {\n  let label = node.type === \"void\" ? node.nodeName : node.type;\n  const { htmlAttrs } = node ?? {};\n  if (htmlAttrs?.id) label = `${label}#${htmlAttrs.id}`;\n  if (htmlAttrs?.class)\n    label = `${label}.${htmlAttrs.class?.replaceAll(\" \", \".\")}`;\n  return label;\n};\n","import { Editor, Node, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport has from \"lodash/has\";\nimport { formatNodeLabel } from \"./general\";\n\nexport const getListItemNode = (editor, path) =>\n  Editor.above(editor, {\n    at: path,\n    match: n => n.type === \"li\"\n  }) ?? [];\n\nexport const getListNode = (editor, path) =>\n  Editor.above(editor, {\n    at: path,\n    match: n => n.type === \"ul\" || n.type === \"ol\"\n  }) ?? [];\n\n// Use Node.string() rather than this when appropriate\nexport const getTextContent = (editor, iterator, str = \"\") => {\n  const { value } = iterator.next();\n  if (!value) return str;\n  const [node] = value;\n  const nextStr = node.text ? str + node.text : str;\n  return getTextContent(editor, iterator, nextStr);\n};\n\nexport const getCommonBlock = (editor, condition = () => true) => {\n  const range = Editor.unhangRange(editor, editor.selection, { voids: true });\n\n  const [common, path] = Node.common(\n    editor,\n    range.anchor.path,\n    range.focus.path\n  );\n\n  if (\n    (Editor.isBlock(editor, common) || Editor.isEditor(common)) &&\n    condition(common)\n  ) {\n    return [common, path];\n  } else {\n    return Editor.above(editor, {\n      at: path,\n      match: n =>\n        (Editor.isBlock(editor, n) || Editor.isEditor(n)) && condition(n)\n    });\n  }\n};\n\nexport const getAncestors = (editor, iterator, list = {}) => {\n  const { value } = iterator.next();\n  if (!value) return list;\n  const [node, path] = value;\n  const key = ReactEditor.findKey(editor, node);\n  const next =\n    node.type && !node.slateOnly\n      ? { ...list, [key.id]: { label: formatNodeLabel(node), path } }\n      : list;\n  return getAncestors(editor, iterator, next);\n};\n\nexport const getNearestOfType = (editor, types) => {\n  const [nearest, path] = Editor.above(editor, {\n    at: Editor.unhangRange(editor, editor.selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      types.includes(n.type) &&\n      !n.nodeName &&\n      !n.slateOnly\n  });\n  return { nearest, path };\n};\n\nexport const isElementActive = (editor, format) => {\n  const { selection } = editor;\n  if (!selection) return false;\n\n  const nearest = Editor.above(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      Element.isElement(n) &&\n      !n.nodeName &&\n      !n.slateOnly &&\n      n.type === format\n  });\n\n  return nearest ? nearest[0].type === format : false;\n};\n\nexport const isTextBlockActive = (editor, format) => {\n  const { selection } = editor;\n  if (!selection) return false;\n\n  const block = Editor.above(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      Editor.isBlock(editor, n) &&\n      !n.nodeName &&\n      !n.slateOnly &&\n      n.type === format\n  });\n\n  return block ? block[0]?.type === format : false;\n};\n\nexport const isMarkActive = (editor, format) => {\n  if (!editor.selection) return false;\n  const node = Node.get(editor, editor.selection.focus.path);\n  const marks = node.text ? Editor.marks(editor) : false;\n\n  if (format === \"code\") {\n    const [pre] = Editor.above(editor, { match: n => n.type === \"pre\" }) ?? [];\n    if (pre) return false;\n  }\n  return marks ? marks[format] === true : false;\n};\n\nexport const isLinkActive = editor => {\n  const [link] = Editor.nodes(editor, {\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n.type === \"a\"\n  });\n  return !!link;\n};\n\nexport const isEmptyAndChildless = (editor, node) => {\n  const onlyChildIsEmptyText =\n    node.children.length === 1 && has(node.children[0], \"text\");\n  return (\n    Editor.isEmpty(editor, node) &&\n    (onlyChildIsEmptyText || !node.children.length)\n  );\n};\n","import { Transforms, Editor, Range } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport { nestableElements } from \"../../elements\";\nimport { isMarkActive, getCommonBlock } from \"../getters\";\nimport { toggleTextBlock } from \"./textBlocks\";\nimport { insertOrWrapSpan, unwrapSpan } from \"./spans\";\nimport { wrapLayoutBlock } from \"./layoutBlocks\";\n\nexport const unwrapNode = ({ editor, format, path }) => {\n  if (format === \"span\") return unwrapSpan({ editor, path });\n\n  Transforms.liftNodes(editor, {\n    match: (n, p) => {\n      return n.type === format && isEqual(p, path);\n    },\n    at: path\n  });\n  ReactEditor.focus(editor);\n};\n\nexport const toggleOrWrapNode = (editor, format) => {\n  const isCollapsed = Range.isCollapsed(editor.selection);\n\n  if (format === \"span\") {\n    return insertOrWrapSpan(editor, isCollapsed);\n  }\n\n  const formatIsContainer = nestableElements.includes(format);\n  const formatIsText = !formatIsContainer;\n\n  const condition = formatIsContainer\n    ? n => !Editor.isEditor(n) && !n.nodeName && !n.text\n    : n => !Editor.isEditor(n) && !n.nodeName;\n\n  const [common, path] = getCommonBlock(editor, condition);\n\n  if (formatIsText)\n    return toggleTextBlock({\n      editor,\n      format,\n      node: common,\n      path,\n      split: !isCollapsed\n    });\n\n  return wrapLayoutBlock({\n    editor,\n    format,\n    node: common,\n    path,\n    split: !isCollapsed\n  });\n};\n\nexport const toggleMark = (editor, format) => {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Path, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\nimport { isEmptyAndChildless } from \"../getters\";\n\nexport const insertOrWrapSpan = (editor, isCollapsed) => {\n  if (isCollapsed) {\n    Transforms.insertNodes(\n      editor,\n      { type: \"span\", children: [{ text: \"\" }] },\n      { at: editor.selection.anchor, select: true }\n    );\n  } else {\n    Transforms.wrapNodes(\n      editor,\n      { type: \"span\", children: [] },\n      { split: true }\n    );\n  }\n  ReactEditor.focus(editor);\n};\n\nexport const unwrapSpan = ({ editor, path }) => {\n  const parentPath = Path.parent(path);\n  const [newParent] = Editor.node(editor, { at: parentPath });\n  if (Editor.hasBlocks(editor, newParent)) {\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.wrapNodes(\n        editor,\n        { type: \"div\", slateOnly: true },\n        {\n          at: path,\n          match: (n, p) => {\n            return n.type === \"span\" && isEqual(p, path);\n          }\n        }\n      );\n      Transforms.removeNodes(editor, {\n        match: (n, p) => {\n          return has(n, \"text\") && !n.text && isEqual(p, Path.next(path));\n        },\n        at: parentPath\n      });\n      Transforms.liftNodes(editor, {\n        match: (n, p) => {\n          return n.type === \"div\" && isEqual(p, path);\n        },\n        at: path\n      });\n      const parent = Node.get(editor, parentPath);\n      if (isEmptyAndChildless(editor, parent)) {\n        Transforms.removeNodes(editor, {\n          at: Path.parent(parentPath),\n          match: n => {\n            return isEqual(n, parent);\n          }\n        });\n      }\n      ReactEditor.focus(editor);\n    });\n  }\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { rteElements } from \"../../elements\";\n\nexport const wrapLayoutBlock = ({ editor, format, node, path, split }) => {\n  if (split)\n    return Transforms.wrapNodes(editor, { type: format }, { split: true });\n\n  Transforms.removeNodes(editor);\n\n  if (!rteElements.includes(node.type)) {\n    Transforms.insertNodes(\n      editor,\n      {\n        ...node,\n        children: [{ type: format, children: node.children }]\n      },\n      { at: path, select: true }\n    );\n  } else {\n    Transforms.insertNodes(\n      editor,\n      {\n        type: format,\n        children: [node]\n      },\n      { at: path, select: true }\n    );\n  }\n  ReactEditor.focus(editor);\n};\n","import { inlineNodes } from \"../utils/elements\";\nimport { wrapLink, insertImage, insertIframe } from \"../utils/slate/transforms\";\nimport { isValidUrl, isImageUrl, isVideoUrl } from \"../utils/helpers\";\nimport { mathMLElements } from \"reader/containers/annotation/annotatable-components/mathHelpers\";\n\n/* eslint-disable no-param-reassign */\nconst withInlines = editor => {\n  const { insertText, isInline } = editor;\n\n  editor.isInline = element => {\n    const isInlineMath =\n      (element.type === \"math\" && element.htmlAttrs?.display === \"inline\") ||\n      (element.type !== \"math\" && mathMLElements.includes(element.type));\n\n    return (\n      isInlineMath || inlineNodes.includes(element.type) || isInline(element)\n    );\n  };\n\n  editor.insertText = text => {\n    const isImage = isImageUrl(text);\n    const isVideo = isVideoUrl(text);\n    const isLink = isValidUrl(text);\n\n    if (isImage) {\n      return insertImage(editor, text);\n    }\n    if (isVideo) {\n      return insertIframe(editor, text);\n    }\n    if (isLink) {\n      return wrapLink(editor, text);\n    }\n    insertText(text);\n  };\n\n  return editor;\n};\n\nexport default withInlines;\n","import { insertImage } from \"../utils/slate/transforms\";\nimport { isImageUrl } from \"../utils/helpers\";\n\n/* eslint-disable no-param-reassign */\nconst withImages = editor => {\n  const { insertData } = editor;\n\n  editor.insertData = data => {\n    const text = data.getData(\"text/plain\");\n    const { files } = data;\n\n    const image = files?.item(0);\n\n    if (image) {\n      const reader = new FileReader();\n      const [mime] = image.type.split(\"/\");\n      if (mime === \"image\") {\n        reader.addEventListener(\"load\", () => {\n          const url = reader.result;\n          insertImage(editor, url);\n        });\n\n        reader.readAsDataURL(image);\n        return;\n      }\n    }\n\n    if (isImageUrl(text)) {\n      insertImage(editor, text);\n    } else {\n      insertData(data);\n    }\n  };\n\n  return editor;\n};\n\nexport default withImages;\n","import { Editor, Element, Range, Transforms, Node } from \"slate\";\nimport { toggleOrWrapNode } from \"../utils/slate/transforms\";\n\nconst SHORTCUTS = {\n  \"*\": \"ul\",\n  \"-\": \"ul\",\n  \"+\": \"ul\",\n  \"1.\": \"ol\",\n  \">\": \"blockquote\",\n  \"#\": \"h1\",\n  \"##\": \"h2\",\n  \"###\": \"h3\",\n  \"####\": \"h4\",\n  \"#####\": \"h5\",\n  \"######\": \"h6\",\n  \"```\": \"pre\"\n};\n\nconst INLINE_SHORTCUTS = {\n  \"*\": \"italic\",\n  \"**\": \"bold\",\n  \"`\": \"code\",\n  \"~\": \"strikethrough\"\n};\n\n/* eslint-disable no-param-reassign */\nconst withShortcuts = editor => {\n  const { insertText } = editor;\n\n  // Insert block elements from .md shortcuts\n  editor.insertText = text => {\n    const { selection } = editor;\n    const { anchor } = selection;\n\n    if (text.endsWith(\" \") && selection && Range.isCollapsed(selection)) {\n      /* eslint-disable no-unused-vars */\n      const [block, path] =\n        Editor.above(editor, {\n          match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n        }) ?? [];\n      const start = Editor.start(editor, path);\n      const range = { anchor, focus: start };\n\n      const blockType =\n        SHORTCUTS[Editor.string(editor, range) + text.slice(0, -1)];\n\n      if (blockType) {\n        Transforms.select(editor, range);\n        if (!Range.isCollapsed(range)) {\n          Transforms.delete(editor);\n        }\n        return toggleOrWrapNode(editor, blockType);\n      }\n    }\n\n    // Insert inline elements (Slate \"marks\") from .md\n    let shortcut;\n    const shortCutChars = [\"*\", \"`\", \"~\"];\n\n    if (shortCutChars.includes(text)) {\n      const [textNode, textNodePath] = Editor.first(editor, anchor.path);\n      const beforeText = Node.string(textNode);\n\n      if (text === \"~\") {\n        shortcut = \"~\";\n      }\n      if (text === \"`\") {\n        shortcut = \"`\";\n      }\n      if (text === \"*\") {\n        if (beforeText.endsWith(\"*\")) shortcut = \"**\";\n        if (beforeText.indexOf(\"**\") === -1) shortcut = \"*\";\n      }\n\n      if (shortcut) {\n        const startIndex = beforeText.indexOf(shortcut);\n        const endIndex =\n          shortcut.length - 1 > 0 ? -(shortcut.length - 1) : undefined;\n        const target = beforeText.slice(startIndex + shortcut.length, endIndex);\n\n        if (shortcut === \"`\" && target === \"`\") return insertText(text);\n\n        if (startIndex >= 0 && target) {\n          const contentAnchor = { path: textNodePath, offset: startIndex };\n          const contentFocus = {\n            path: textNodePath,\n            offset: beforeText.length\n          };\n\n          return Editor.withoutNormalizing(editor, () => {\n            Transforms.select(editor, {\n              anchor: contentAnchor,\n              focus: contentFocus\n            });\n            Editor.addMark(editor, INLINE_SHORTCUTS[shortcut], true);\n            Transforms.delete(editor, {\n              at: contentAnchor,\n              distance: shortcut.length,\n              unit: \"character\"\n            });\n            Transforms.collapse(editor, { edge: \"end\" });\n            if (shortcut.length > 1) {\n              Transforms.delete(editor, {\n                distance: shortcut.length - 1,\n                unit: \"character\",\n                reverse: true\n              });\n            }\n          });\n        }\n      }\n    }\n\n    return insertText(text);\n  };\n\n  return editor;\n};\n\nexport default withShortcuts;\n","import { Editor as SlateEditor, Transforms, Node, Point } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { getListNode, getListItemNode } from \"../getters\";\nimport { setSelectionAtPoint } from \"../general\";\nimport { toggleOrWrapNode } from \"./shared\";\nimport { rteElements } from \"../../elements\";\nimport has from \"lodash/has\";\n\nconst getTextLocation = (editor, iterator, path, str = \"\") => {\n  const { value } = iterator.next();\n  if (!value) return { textContent: str, lastPath: path };\n  const [node, nodePath] = value;\n  if (node.type === \"list-sibling\")\n    return getTextLocation(editor, Node.children(editor, nodePath), nodePath);\n  const isTextNode = has(node, \"text\");\n  const nextStr = isTextNode ? node.text : str;\n  const nextPath = isTextNode ? nodePath : path;\n  return getTextLocation(editor, iterator, nextPath, nextStr);\n};\n\n// There must be a better way to achieve this with Range, but I haven't taken the time to figure it out. -LD\nconst getIndentSelectionLocation = (editor, path) => {\n  const textIterator = Node.children(editor, path);\n  const { textContent, lastPath } = getTextLocation(editor, textIterator, path);\n  return { path: lastPath, offset: textContent.length };\n};\n\nconst nestListItem = ({ editor, srcPath, destPath, node, type }) => {\n  const children = Array.isArray(node) ? node : [node];\n  Transforms.removeNodes(editor, { at: srcPath });\n  Transforms.insertNodes(editor, [{ type, children }], {\n    at: destPath\n  });\n};\n\nconst liftListItem = ({ editor, srcPath, destPath, unwrap = true }) => {\n  if (destPath) Transforms.moveNodes(editor, { at: srcPath, to: destPath });\n  if (unwrap) {\n    const targetPath = destPath ?? srcPath;\n    Transforms.unwrapNodes(editor, { at: targetPath });\n  }\n};\n\nconst handleInlineItemChildren = ({ editor, at, nodes }) => {\n  if (nodes)\n    return Transforms.insertNodes(\n      editor,\n      [{ type: \"list-sibling\", slateOnly: true, children: nodes }],\n      { at }\n    );\n  return Transforms.unwrapNodes(editor, {\n    at,\n    match: n => n.type === \"list-sibling\"\n  });\n};\n\nconst findListChild = iterator => {\n  const { value } = iterator.next();\n  if (!value) return [];\n  const [node, path] = value;\n  if (node.type === \"ul\" || node.type === \"ol\") return [node, path];\n  return findListChild(iterator);\n};\n\nexport const increaseIndent = editor => {\n  const [node, path] = getListItemNode(editor, editor.selection);\n  const [listNode, listNodePath] = getListNode(editor, path);\n\n  if (!node || !listNode) return;\n\n  const listType = listNode.type;\n  const index = [...path].pop();\n\n  const nodeStart = SlateEditor.start(editor, path);\n  const listStart = SlateEditor.start(editor, listNodePath);\n\n  // If this is the first element in a list, indent the entire (sub)list\n  if (Point.equals(nodeStart, listStart))\n    return SlateEditor.withoutNormalizing(editor, () => {\n      nestListItem({\n        editor,\n        srcPath: listNodePath,\n        destPath: listNodePath,\n        node: listNode,\n        type: listType\n      });\n      const { path: selectionPath, offset } = getIndentSelectionLocation(\n        editor,\n        [...listNodePath, 0, 0]\n      );\n      setSelectionAtPoint(editor, selectionPath, offset);\n    });\n\n  const prevItemPath = [...path.slice(0, -1), index - 1];\n  const [prevItem] = SlateEditor.node(editor, prevItemPath);\n\n  if (!prevItem) return;\n\n  const iterator = Node.children(editor, prevItemPath);\n  const [subListNode, subListPath] = findListChild(iterator);\n\n  if (subListNode) {\n    return Transforms.moveNodes(editor, {\n      at: path,\n      to: [...subListPath, subListNode.children.length]\n    });\n  }\n\n  SlateEditor.withoutNormalizing(editor, () => {\n    if (SlateEditor.hasBlocks(editor, prevItem)) {\n      const destPath = [...prevItemPath, prevItem.children.length];\n      nestListItem({\n        editor,\n        srcPath: path,\n        destPath,\n        node,\n        type: listType\n      });\n      const { path: selectionPath, offset } = getIndentSelectionLocation(\n        editor,\n        [...destPath, 0]\n      );\n      setSelectionAtPoint(editor, selectionPath, offset);\n      return;\n    }\n\n    handleInlineItemChildren({\n      editor,\n      at: [...prevItemPath, 0],\n      nodes: prevItem.children\n    });\n    const destPath = [...prevItemPath, 1];\n    nestListItem({\n      editor,\n      srcPath: path,\n      destPath,\n      node,\n      type: listType\n    });\n    const { path: selectionPath, offset } = getIndentSelectionLocation(editor, [\n      ...destPath,\n      0\n    ]);\n    setSelectionAtPoint(editor, selectionPath, offset);\n  });\n};\n\nexport const decreaseIndent = ({ editor, canUnwrapRoot }) => {\n  const [node, path] = getListItemNode(editor, editor.selection);\n  const [parentLi, parentPath] = getListItemNode(editor, path);\n  const [listNode, listNodePath] = getListNode(editor, path);\n  const listParent = Node.parent(editor, listNodePath);\n  const isWrappedList = listParent?.type === \"ul\" || listParent?.type === \"ol\";\n\n  if (!node) return;\n\n  if ((!listNode || !isWrappedList) && !parentLi) {\n    const format = rteElements.includes(listParent?.type)\n      ? listParent.type\n      : \"p\";\n    return canUnwrapRoot ? toggleOrWrapNode(editor, format) : null;\n  }\n\n  const nodeStart = SlateEditor.start(editor, path);\n  const listStart = SlateEditor.start(editor, listNodePath);\n\n  // If this is the first element in a list, unindent the entire (sub)list\n  if (Point.equals(nodeStart, listStart))\n    return SlateEditor.withoutNormalizing(editor, () => {\n      if (isWrappedList) {\n        return liftListItem({ editor, srcPath: listNodePath });\n      }\n      const destIndex = [...parentPath].pop() + 1;\n      const destPath = [...parentPath.slice(0, -1), destIndex];\n      liftListItem({ editor, srcPath: listNodePath, destPath });\n      handleInlineItemChildren({ editor, at: [...destPath.slice(0, -1), 0] });\n    });\n\n  if (!parentLi) return;\n\n  SlateEditor.withoutNormalizing(editor, () => {\n    const destIndex = [...parentPath].pop() + 1;\n    const destPath = [...parentPath.slice(0, -1), destIndex];\n    liftListItem({ editor, srcPath: path, destPath, unwrap: false });\n  });\n};\n","import { Editor, Range, Transforms, Element, Point, Node } from \"slate\";\nimport { rteElements, nestableElements } from \"../utils/elements\";\nimport { decreaseIndent } from \"../utils/slate/transforms/listIndents\";\nimport { getListItemNode } from \"../utils/slate/getters\";\n\n// The plugins here provide sane defaults for dealing with enter/delete given that we have nested html structure, in particular nested blocks, which isn't accounted for in the default slate implementation.\n\n/* eslint-disable no-param-reassign */\nconst withHtmlAwareBreaks = editor => {\n  const { insertBreak, deleteBackward } = editor;\n\n  editor.insertBreak = () => {\n    const { selection } = editor;\n    const isCollapsed = selection && Range.isCollapsed(selection);\n\n    // If the selection is a range, delete the content; this is default Slate behavior\n    if (!isCollapsed) {\n      Transforms.delete(editor);\n    }\n\n    /* eslint-disable no-unused-vars */\n    // Grab the node where the user hit enter\n    const [node, nodePath] = Editor.above(editor, selection);\n    // Grab the nearest block node to determine what to insert\n    const [block, blockPath] = Editor.above(editor, {\n      at: selection,\n      match: n => Editor.isBlock(editor, n) && !n.slateOnly\n    });\n    // Remove all attributes other than the type/tag and marks, so we don't copy id, classes, anything that can't be updated in the RTE\n    const { children, htmlAttrs, slateOnly, inline, ...next } = block;\n    // Insert a paragraph if this node type isn't editable in the RTE; handle unwrapping the list item if we're on an empty li\n    if (\n      !rteElements.includes(next.type) &&\n      !nestableElements.includes(next.type)\n    )\n      next.type = \"p\";\n    if (next.type === \"a\" || next.type === \"img\" || next.type === \"iframe\")\n      next.type = \"p\";\n    if (next.type === \"li\") {\n      const liIsEmpty = Editor.isEmpty(editor, block);\n      if (isCollapsed && liIsEmpty)\n        return decreaseIndent({ editor, canUnwrapRoot: true });\n      // Since the new element we're inserting is an element in an existing list, we'll keep the classname around in case indents are handled with classes\n      next.htmlAttrs = { class: htmlAttrs?.class };\n    }\n\n    try {\n      Editor.withoutNormalizing(editor, () => {\n        Transforms.insertNodes(\n          editor,\n          { ...next, children: [{ text: \"\" }] },\n          { at: selection, select: true }\n        );\n      });\n    } catch (e) {\n      insertBreak();\n    }\n  };\n\n  // Check for nested empty inlines, again such as <p><span>my text</span></p>, and ensure that they are removed when all text content is deleted\n  const removeEmptyInline = (node, path) => {\n    const { selection } = editor;\n\n    const start = Editor.start(editor, path);\n    const textContent = Node.string(node);\n\n    // Using <= 1 rather than === 0 here is a choice; the result is that the inner span is removed when all its text content is, which is before the outer block wrapper, usually a paragraph, is deleted. This has the effect of cleaning up styles and other attributes, in case the user types new text in the pargraph node instead of deleting it. But as with all these choices, of course, the user could have wanted to keep those span styles around for the new text.\n    if (Point.isBefore(start, selection.anchor) && textContent.length <= 1) {\n      Transforms.unwrapNodes(editor, {\n        at: path,\n        match: n => Editor.isInline(editor, n)\n      });\n\n      const [inline, inlinePath] =\n        Editor.above(editor, {\n          match: n => n.type && Editor.isInline(editor, n)\n        }) ?? [];\n\n      if (inline) return removeEmptyInline(inline, inlinePath);\n    }\n  };\n\n  // If the parent block exists only for Slate normalization, remove it too.\n  const maybeUnwrapSlateOnlyNode = (node, path) => {\n    const { selection } = editor;\n    const start = Editor.start(editor, path);\n\n    if (\n      !Editor.isEditor(node) &&\n      node.slateOnly &&\n      Point.equals(selection.anchor, start)\n    ) {\n      Transforms.unwrapNodes(editor, { at: path, match: n => n.slateOnly });\n    }\n  };\n\n  editor.deleteBackward = (...args) => {\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [li] = getListItemNode(editor, editor.selection);\n      if (li) {\n        const liIsEmpty = Editor.isEmpty(editor, li);\n        if (liIsEmpty) return decreaseIndent({ editor, canUnwrapRoot: true });\n      }\n\n      const [inline, inlinePath] =\n        Editor.above(editor, {\n          match: n => n.type && Editor.isInline(editor, n)\n        }) ?? [];\n\n      if (inline) {\n        removeEmptyInline(inline, inlinePath);\n      }\n\n      const [nearestBlock, path] =\n        Editor.above(editor, {\n          match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n        }) ?? [];\n\n      maybeUnwrapSlateOnlyNode(nearestBlock, path);\n\n      const [blockToTransform, transformPath] = nearestBlock.slateOnly\n        ? Editor.above(editor, {\n            match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n          })\n        : [nearestBlock, path];\n\n      if (blockToTransform) {\n        const start = Editor.start(editor, transformPath);\n\n        if (\n          !Editor.isEditor(blockToTransform) &&\n          Element.isElement(blockToTransform) &&\n          blockToTransform.type !== \"p\" &&\n          Point.equals(selection.anchor, start)\n        ) {\n          // It's an RTE default / best practice to replace non-paragraph block nodes with a paragraph rather than removing them from the tree. This prevents other nodes from colliding in unwanted ways, such as when another block ends up in a table.\n          Transforms.setNodes(\n            editor,\n            { type: \"p\" },\n            { at: transformPath, select: true }\n          );\n\n          if (blockToTransform.type === \"li\") {\n            Transforms.unwrapNodes(editor, {\n              match: n =>\n                !Editor.isEditor(n) &&\n                Element.isElement(n) &&\n                (n.type === \"ul\" || n.type === \"ol\"),\n              split: true\n            });\n          }\n          return;\n        }\n      }\n    }\n    deleteBackward(...args);\n  };\n\n  return editor;\n};\n\nexport default withHtmlAwareBreaks;\n","import withVoids from \"./withVoids\";\nimport withInlines from \"./withInlines\";\nimport withImages from \"./withImages\";\nimport withShortcuts from \"./withShortcuts\";\nimport withHtmlAwareBreaks from \"./withHtmlAwareBreaks\";\n\nconst withPlugins = editor =>\n  withInlines(\n    withHtmlAwareBreaks(withShortcuts(withVoids(withImages(editor))))\n  );\n\nexport default withPlugins;\n\nexport { withVoids, withInlines, withImages, withShortcuts };\n","import React from \"react\";\n\nexport default function SlateLeaf({ attributes, children, leaf }) {\n  let leafChildren = children;\n\n  if (leaf.bold) {\n    leafChildren = <strong>{leafChildren}</strong>;\n  }\n\n  if (leaf.italic) {\n    leafChildren = <em>{leafChildren}</em>;\n  }\n\n  if (leaf.underline) {\n    leafChildren = <u>{leafChildren}</u>;\n  }\n\n  if (leaf.strikethrough) {\n    leafChildren = <s>{leafChildren}</s>;\n  }\n\n  if (leaf.code) {\n    leafChildren = <code>{leafChildren}</code>;\n  }\n\n  return <span {...attributes}>{leafChildren}</span>;\n}\n","import { wrapLink, unwrapLink } from \"../utils/slate/transforms\";\nimport { getCommonBlock, isLinkActive } from \"../utils/slate/getters\";\nimport { isValidUrl } from \"../utils/helpers\";\nimport { Transforms, Range, Node } from \"slate\";\n\nexport const handleLinkHotkey = editor => {\n  if (isLinkActive(editor)) return unwrapLink(editor);\n\n  const { selection } = editor;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n\n  // If the selection is a range of text, check to see if that range is a url; if so, turn it into a link.\n  if (!isCollapsed) {\n    const [block] = getCommonBlock(editor);\n    const textContent = Node.string(block);\n    if (isValidUrl(textContent)) return wrapLink(editor, textContent);\n  }\n\n  // Otherwise, open the link insert modal\n  const button = document.getElementsByName(\"link-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const handleImageHotkey = e => {\n  e.preventDefault();\n  const button = document.getElementsByName(\"img-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const handleIframeHotkey = e => {\n  e.preventDefault();\n  const button = document.getElementsByName(\"iframe-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const insertSoftBreak = editor => {\n  Transforms.insertText(editor, \"\\n\");\n};\n","import { createContext, useContext } from \"react\";\n\nexport const HtmlBreadcrumbsContext = createContext([]);\n\nexport const useHtmlBreadcrumbs = () => {\n  const context = useContext(HtmlBreadcrumbsContext);\n\n  return context;\n};\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultFocusStyle,\n  formLabelPrimary,\n  respond\n} from \"theme/styles/mixins\";\nimport { rteElements, inlineNodes } from \"../../utils/elements\";\n\nexport const ButtonGroup = styled.div`\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  position: absolute;\n  top: 5px;\n  right: auto;\n  left: 5px;\n  color: var(--color-accent-primary);\n\n  ${({ $visible }) => $visible && `display: flex;`}\n  ${respond(`right: -60px; left: auto; top: -5px;`, 65)}\n`;\n\nexport const InteriorButton = styled.button`\n  ${buttonUnstyled}\n  width: 34px;\n  height: 34px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: var(--color-neutral-text-light);\n  background: var(--color-base-neutral90);\n  border-radius: 4px;\n  border: 1px solid var(--color);\n\n  &:hover {\n    color: ${({ $color }) =>\n      $color === \"red\"\n        ? `var(--color-notification-error-light)`\n        : `var(--color-accent-primary)`};\n    border-color: ${({ $color }) =>\n      $color === \"red\"\n        ? `var(--color-notification-error-light)`\n        : `var(--color-accent-primary)`};\n  }\n`;\n\nexport const Content = styled.img`\n  display: inline;\n  ${({ $selected }) => $selected && `${defaultFocusStyle} outline-offset: 1px;`}\n`;\nexport const ImageWrapper = styled.span`\n  display: inline-block;\n  width: max-content;\n  max-width: 100%;\n  position: relative;\n\n  &.responsive-iframe {\n    display: block;\n    width: 100%;\n    overflow: visible;\n  }\n`;\n\nexport const VoidOuter = styled.div`\n  & + & {\n    margin-block-start: 20px;\n  }\n`;\n\nexport const VoidInner = styled.div`\n  display: block;\n  margin-inline-start: -5%;\n  width: 110%;\n  padding-inline: 8%;\n  padding-block-end: 20px;\n  padding-block-start: 20px;\n  position: relative;\n  background-color: var(--drawer-bg-color);\n  box-shadow: 3px 3px 10px var(--color-base-neutral100);\n  border-radius: 4px;\n  border: 0;\n\n  .scheme-light & {\n    background-color: var(--color-base-neutral20);\n    box-shadow: 3px 3px 10px var(--color-base-neutral30);\n  }\n\n  ${({ $selected }) =>\n    $selected &&\n    `outline: solid 2px var(--disabled-control-color); outline-offset: 1px;`}\n`;\n\nexport const VoidLabel = styled.span`\n  ${formLabelPrimary}\n  font-size: 14px;\n  color: var(--color-base-yellow20);\n  display: inline-flex;\n  gap: 6px;\n  align-items: center;\n\n  .scheme-light & {\n    color: var(--color-base-violet75);\n  }\n\n  > svg {\n    margin-top: 1px;\n  }\n`;\n\nexport const HrOuter = styled.span`\n  display: inline-flex;\n  width: 100%;\n`;\n\nexport const HrInner = styled.span`\n  flex-grow: 1;\n  margin: 0;\n  width: 100%;\n`;\n\nexport const COLOR_MAP = {\n  green: {\n    light: \"var(--color-interaction-dark)\",\n    dark: \"var(--color-accent-primary)\"\n  },\n  blue: { light: \"var(--color-base-blue75)\", dark: \"var(--color-base-blue45)\" },\n  yellow: {\n    dark: \"var(--color-base-yellow20)\",\n    light: \"var(--color-base-orange75)\"\n  }\n};\n\nexport const ElementLabel = styled.span`\n  position: absolute;\n  display: inline-block;\n  left: -8px;\n  top: -26px;\n  font-size: 14px;\n  line-height: 1;\n  padding: 2px;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n  font-family: var(--font-family-heading);\n  font-weight: var(--font-weight-regular);\n  border: 0px solid;\n  border-bottom: 0;\n  white-space: nowrap;\n  text-indent: 0;\n  z-index: 10;\n  padding-inline: 4px;\n  padding-block-start: 2px;\n  padding-block-end: 4px;\n  text-decoration: none;\n  text-transform: none;\n  font-variant: none;\n\n  .scheme-dark & {\n    background: ${({ $color }) => COLOR_MAP[$color].dark};\n    color: var(--drawer-bg-color);\n  }\n\n  .scheme-light & {\n    background: ${({ $color }) => COLOR_MAP[$color].light};\n    color: var(--background-color);\n  }\n\n  &:hover {\n    z-index: 20;\n  }\n`;\n\nexport const EditableElementLabel = styled(ElementLabel)`\n  top: -35px;\n  padding-block-start: 4px;\n  display: flex;\n  align-items: center;\n\n  > span {\n    line-height: 1;\n  }\n`;\n\nexport const ClassInput = styled.input`\n  appearance: none;\n  background: rgba(255, 255, 255, 0.75);\n  border: none;\n  padding: 0;\n  height: 18px;\n  margin-inline-start: 3px;\n  width: 150px;\n\n  .scheme-light & {\n    background: rgba(0, 0, 0, 0.5);\n  }\n\n  &:focus-visible {\n    outline: 1px solid;\n  }\n`;\n\nexport const TagButtons = styled.div`\n  display: flex;\n  gap: 4px;\n  margin-inline-start: 8px;\n  margin-inline-end: 4px;\n`;\n\nexport const DeleteButton = styled.button`\n  ${buttonUnstyled}\n  display: flex;\n  align-items: center;\n  border-radius: 2px;\n  padding: 2px;\n\n  &:hover,\n  &:focus-visible {\n    color: var(--error-color);\n    background: var(--background-color);\n  }\n\n  &:disabled {\n    cursor: default;\n\n    &:hover {\n      background: none;\n      color: inherit;\n    }\n  }\n`;\n\nexport const LiftButton = styled(DeleteButton)`\n  &:hover,\n  &:focus-visible {\n    color: var(--hover-color);\n    background: var(--background-color);\n  }\n`;\n\nexport const getHtmlOutlineStyles = (nodeName, darkMode) => {\n  /* eslint-disable no-nested-ternary */\n  const color = rteElements.includes(nodeName)\n    ? \"green\"\n    : inlineNodes.includes(nodeName)\n    ? \"blue\"\n    : \"yellow\";\n\n  return {\n    outline: \"2px dotted\",\n    outlineColor: darkMode ? COLOR_MAP[color].dark : COLOR_MAP[color].light,\n    borderRadius: \"2px\",\n    borderTopLeftRadius: 0,\n    outlineOffset: \"6px\",\n    position: \"relative\"\n  };\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { rteElements, inlineNodes } from \"../../utils/elements\";\nimport { formatNodeLabel } from \"../../utils/slate/general\";\nimport { removeNode } from \"../../utils/slate/transforms/removeNode\";\nimport { unwrapNode } from \"../../utils/slate/transforms\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport debounce from \"lodash/debounce\";\nimport { useSlateStatic, ReactEditor } from \"slate-react\";\nimport { Transforms, Editor } from \"slate\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport * as Styled from \"./styles\";\n\nexport default function HtmlLabel({ visible, element }) {\n  const editor = useSlateStatic();\n  const inputRef = useRef(null);\n\n  const { t } = useTranslation();\n\n  const { editingCrumb: editing } = useHtmlBreadcrumbs();\n\n  useEffect(() => {\n    if (inputRef.current && editing) inputRef.current.focus();\n  }, [editing]);\n\n  if (!visible) return null;\n\n  /* eslint-disable no-nested-ternary */\n  const color = rteElements.includes(element.type)\n    ? \"green\"\n    : inlineNodes.includes(element.type)\n    ? \"blue\"\n    : \"yellow\";\n\n  const path = ReactEditor.findPath(editor, element);\n\n  const disableDelete =\n    path.length === 1 ||\n    (element.type === \"li\" && !Editor.isEmpty(editor, element));\n\n  const disableLift = path.length <= 2 || element.type === \"li\";\n\n  const updateClassName = e => {\n    e.persist();\n    const doUpdate = debounce(() => {\n      Transforms.setNodes(\n        editor,\n        {\n          ...element,\n          htmlAttrs: {\n            ...element.htmlAttrs,\n            class: e.target.value.replaceAll(\".\", \" \").trim()\n          }\n        },\n        { at: path, mode: \"highest\" }\n      );\n    }, 1000);\n    doUpdate(e);\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    removeNode(editor, path);\n  };\n\n  const tagAndId = element.htmlAttrs?.id\n    ? `${element.type}#${element.htmlAttrs.id}`\n    : element.type;\n  const formattedClass = element.htmlAttrs?.class?.trim().replaceAll(\" \", \".\");\n\n  return editing ? (\n    <Styled.EditableElementLabel contentEditable={false} $color={color}>\n      <span>{tagAndId}.</span>\n      <Styled.ClassInput\n        ref={inputRef}\n        defaultValue={formattedClass}\n        onChange={e => updateClassName(e)}\n      />\n      <Styled.TagButtons>\n        <Styled.LiftButton\n          onClick={e => {\n            e.preventDefault();\n            unwrapNode({ editor, format: element.type, path });\n          }}\n          aria-label={t(\"editor.controls.labels.lift\")}\n          disabled={disableLift}\n        >\n          <IconComposer icon=\"arrowUp16\" size={16} />\n        </Styled.LiftButton>\n        <Styled.DeleteButton\n          onClick={handleDelete}\n          aria-label={t(\"actions.delete\")}\n          disabled={disableDelete}\n        >\n          <IconComposer icon=\"delete24\" size={16} />\n        </Styled.DeleteButton>\n      </Styled.TagButtons>\n    </Styled.EditableElementLabel>\n  ) : (\n    <Styled.ElementLabel $color={color}>\n      {formatNodeLabel(element)}\n    </Styled.ElementLabel>\n  );\n}\n","import { Transforms, Editor, Node, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport has from \"lodash/has\";\nimport isEqual from \"lodash/isEqual\";\nimport { isEmptyAndChildless } from \"../getters\";\n\n// This function removes a specific node at any point in the selection hierarchy, not just the lowest one like the other transforms. It is used to handle delete via the html element labels.\n\nexport const removeNode = (editor, path) => {\n  const node = Node.get(editor, path);\n\n  // can't delete the root node\n  if (path.length === 1 && path[0] === 0) return;\n\n  // if the node is empty, just remove it\n  if (isEmptyAndChildless(editor, node))\n    return Transforms.removeNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path)\n    });\n\n  // if the node is inline, it's safe to unwrap; the parent node is already setup for inline children\n  if (Editor.isInline(editor, node)) {\n    return Transforms.unwrapNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path)\n    });\n  }\n\n  // if this is a list node, we're going to enforce some proper structure\n  // replace all li nodes with p nodes before removing the list tag\n  if (node.type === \"ol\" || node.type === \"ul\") {\n    node.children.forEach(c => {\n      const childPath = ReactEditor.findPath(editor, c);\n      Transforms.setNodes(\n        editor,\n        { type: \"p\", slateOnly: undefined },\n        { at: childPath, mode: \"highest\" }\n      );\n      if (c.children) {\n        c.children.forEach(nc => {\n          if (nc.type === \"ol\" || nc.type === \"ul\") {\n            const nestedChildPath = ReactEditor.findPath(editor, nc);\n            return Transforms.unwrapNodes(editor, {\n              match: n =>\n                !Editor.isEditor(n) && Element.isElement(n) && n.type === \"p\",\n              at: nestedChildPath,\n              mode: \"lowest\"\n            });\n          }\n        });\n      }\n    });\n    return Transforms.unwrapNodes(editor, {\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path),\n      at: path\n    });\n  }\n\n  // // now that we know the node is block, determine its children type\n  const hasBlockChildren = Editor.hasBlocks(editor, node);\n\n  // remove the code mark also if this is a pre tag created with the code block RTE button\n  if (node.type === \"pre\" && node.children[0].code)\n    Transforms.setNodes(\n      editor,\n      { ...node.children[0], code: undefined },\n      { at: [...path, 0], mode: \"highest\" }\n    );\n\n  // also safe to unwrap, we're just bumping blocks a level up the tree\n  if (hasBlockChildren)\n    return Transforms.unwrapNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        !n.slateOnly &&\n        isEqual(p, path)\n    });\n\n  // if the children are inline, there's a normalization issue because we'd be moving inline nodes up to parent with block children\n  if (!hasBlockChildren)\n    Editor.withoutNormalizing(editor, () => {\n      let pathCounter = 0;\n      node.children.forEach(c => {\n        // remove if empty text node\n        if (has(c, \"text\") && !Node.string(c)) {\n          Transforms.removeNodes(editor, { at: [...path, pathCounter] });\n        } else {\n          // wrap in a slateOnly div to prevent it from disappearing in normalization\n          Transforms.wrapNodes(\n            editor,\n            { type: \"div\", slateOnly: true },\n            { at: [...path, pathCounter] }\n          );\n          pathCounter += 1;\n        }\n      });\n      // now unwrap the node\n      Transforms.unwrapNodes(editor, {\n        at: path,\n        match: (n, p) =>\n          !Editor.isEditor(n) &&\n          Element.isElement(n) &&\n          n.type === node.type &&\n          !n.slateOnly &&\n          isEqual(p, path)\n      });\n    });\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Utility from \"global/components/utility\";\nimport {\n  useSlateStatic,\n  ReactEditor,\n  useFocused,\n  useSelected\n} from \"slate-react\";\nimport { Transforms, Editor } from \"slate\";\nimport { handleImageHotkey, handleIframeHotkey } from \"../../hotkeys/handlers\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport * as Styled from \"./styles\";\n\nexport default function ImageRenderer({\n  element,\n  children,\n  attributes,\n  as,\n  showHtml,\n  darkMode\n}) {\n  const editor = useSlateStatic();\n  const focused = useFocused();\n  const selected = useSelected();\n  const path = ReactEditor.findPath(editor, element);\n\n  const onRemove = e => {\n    e.preventDefault();\n\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.removeNodes(editor, { at: path });\n      Transforms.insertNodes(\n        editor,\n        { type: \"p\", children: [{ text: \"\" }] },\n        { select: true }\n      );\n    });\n  };\n\n  const wrapperClassName = classNames({\n    \"responsive-iframe\": as === \"iframe\"\n  });\n\n  const { htmlAttrs } = element ?? {};\n  const className = htmlAttrs?.class ?? undefined;\n  const epubType = htmlAttrs?.[\"data-epub-type\"] || undefined;\n\n  return (\n    <div\n      className={htmlAttrs?.inline ? \"inline-block\" : undefined}\n      {...attributes}\n      style={showHtml ? getHtmlOutlineStyles(\"a\", darkMode) : undefined}\n    >\n      {children}\n      <span contentEditable={false}>\n        <Styled.ImageWrapper\n          className={wrapperClassName}\n          data-epub-type={epubType}\n        >\n          <Styled.Content\n            as={as ?? \"img\"}\n            src={htmlAttrs.src}\n            alt={!as ? htmlAttrs.alt : undefined}\n            title={as ? htmlAttrs.title : undefined}\n            $selected={selected && focused}\n            className={className}\n            width={htmlAttrs?.width}\n            height={htmlAttrs?.height}\n          />\n          <Styled.ButtonGroup $visible={selected}>\n            <Styled.InteriorButton\n              onClick={as === \"iframe\" ? handleIframeHotkey : handleImageHotkey}\n            >\n              <Utility.IconComposer icon=\"annotate24\" size={24} />\n            </Styled.InteriorButton>\n            <Styled.InteriorButton $color=\"red\" onClick={onRemove}>\n              <Utility.IconComposer icon=\"delete24\" size={24} />\n            </Styled.InteriorButton>\n          </Styled.ButtonGroup>\n        </Styled.ImageWrapper>\n      </span>\n      <HtmlLabel element={element} visible={showHtml} />\n    </div>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport { ReactEditor, useFocused, useSelected } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport * as Styled from \"./styles\";\n\nexport default function VoidRenderer({\n  element,\n  children,\n  attributes,\n  theme,\n  darkMode,\n  showHtml\n}) {\n  const focused = useFocused();\n  const selected = useSelected();\n\n  const { srcdoc } = element ?? {};\n\n  const ref = useRef();\n\n  useEffect(() => {\n    if (ref.current && !ref.current.shadowRoot) {\n      const shadow = ref.current.attachShadow({ mode: \"open\" });\n      const container = document.createElement(\"div\");\n      const containerClass = `manifold-text-section ${\n        darkMode ? \"scheme-dark\" : \"scheme-light\"\n      }`;\n      container.setAttribute(\"class\", containerClass);\n      const style = document.createElement(\"style\");\n      style.textContent = theme;\n      shadow.appendChild(style);\n      container.innerHTML = srcdoc;\n      shadow.appendChild(container);\n    }\n    if (ref.current?.shadowRoot) {\n      const shadow = ref.current.shadowRoot;\n      const container = shadow.childNodes[1];\n      const containerClass = `manifold-text-section ${\n        darkMode ? \"scheme-dark\" : \"scheme-light\"\n      }`;\n      container.setAttribute(\"class\", containerClass);\n    }\n  }, [srcdoc, theme, darkMode]);\n\n  return (\n    <Styled.VoidOuter {...attributes}>\n      {children}\n      <Styled.VoidInner\n        contentEditable={false}\n        $selected={selected && focused}\n        style={showHtml ? getHtmlOutlineStyles(\"div\", darkMode) : undefined}\n      >\n        <Styled.VoidLabel>\n          <Utility.IconComposer\n            svgProps={{ style: { flexShrink: 0 } }}\n            icon=\"code24\"\n          />\n          <span>Preview only. Switch to HTML mode to edit this block:</span>\n        </Styled.VoidLabel>\n        <div ref={ref} />\n        <HtmlLabel element={element} visible={showHtml} />\n      </Styled.VoidInner>\n    </Styled.VoidOuter>\n  );\n}\n","import React from \"react\";\nimport Image from \"./Image\";\nimport Void from \"./Void\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport {\n  rteElements,\n  renderedElements,\n  markElements,\n  nestableElements\n} from \"../../utils/elements\";\nimport classNames from \"classnames\";\nimport * as Styled from \"./styles\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport { useSlateStatic, ReactEditor } from \"slate-react\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\n\nexport default function SlateElement({\n  attributes,\n  children,\n  element,\n  theme,\n  darkMode\n}) {\n  const className = element.htmlAttrs?.class || undefined;\n  const epubType = element.htmlAttrs?.[\"data-epub-type\"] || undefined;\n\n  const editor = useSlateStatic();\n  const { id } = ReactEditor.findKey(editor, element);\n  const { selectedCrumb } = useHtmlBreadcrumbs();\n  const showHtml =\n    (selectedCrumb === id || selectedCrumb === \"all\") && !element.slateOnly;\n\n  if (element.type === \"br\") {\n    return (\n      <p\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"p\", darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </p>\n    );\n  }\n  if (element.type === \"hr\") {\n    return (\n      <Styled.HrOuter contentEditable={false} {...attributes}>\n        {children}\n        <Styled.HrInner>\n          <hr\n            className={className}\n            data-epub-type={epubType}\n            style={showHtml ? getHtmlOutlineStyles(\"hr\", darkMode) : undefined}\n          />\n        </Styled.HrInner>\n        <HtmlLabel element={element} visible={showHtml} />\n      </Styled.HrOuter>\n    );\n  }\n  if (element.type === \"void\") {\n    return (\n      <Void\n        attributes={attributes}\n        element={element}\n        theme={theme}\n        darkMode={darkMode}\n        showHtml={showHtml}\n      >\n        {children}\n      </Void>\n    );\n  }\n  if (element.type === \"img\") {\n    return (\n      <Image\n        attributes={attributes}\n        element={element}\n        showHtml={showHtml}\n        darkMode={darkMode}\n      >\n        {children}\n      </Image>\n    );\n  }\n  if (element.type === \"iframe\") {\n    return (\n      <Image\n        as=\"iframe\"\n        attributes={attributes}\n        element={element}\n        showHtml={showHtml}\n        darkMode={darkMode}\n      >\n        {children}\n      </Image>\n    );\n  }\n  if (element.type === \"a\") {\n    return (\n      <a\n        className={className}\n        data-epub-type={epubType}\n        href={element.htmlAttrs?.href}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"a\", darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </a>\n    );\n  }\n  if (element.type === \"pre\") {\n    return (\n      <pre\n        className={className}\n        data-epub-type={epubType}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"pre\", darkMode) : undefined}\n      >\n        <code>{children}</code>\n        <HtmlLabel element={element} visible={showHtml} />\n      </pre>\n    );\n  }\n  if (element.type === \"div\" && element.inline) {\n    return (\n      <div\n        className={classNames(\"inline-block\", className)}\n        data-epub-type={epubType}\n        {...attributes}\n      >\n        {children}\n      </div>\n    );\n  }\n  if (\n    rteElements.includes(element.type) ||\n    renderedElements.includes(element.type) ||\n    markElements.includes(element.type) ||\n    nestableElements.includes(element.type) ||\n    element.type === \"span\"\n  ) {\n    const Tag = element.type === \"list-sibling\" ? \"span\" : element.type;\n    return (\n      <Tag\n        className={className}\n        data-epub-type={epubType}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(Tag, darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </Tag>\n    );\n  }\n\n  return null;\n}\n","import {\n  increaseIndent,\n  decreaseIndent\n} from \"../utils/slate/transforms/listIndents\";\nimport { toggleMark, toggleOrWrapNode } from \"../utils/slate/transforms\";\nimport { getListItemNode } from \"../utils/slate/getters\";\nimport {\n  handleLinkHotkey,\n  handleImageHotkey,\n  handleIframeHotkey,\n  insertSoftBreak\n} from \"./handlers\";\n\nexport const captureHotKeys = (e, editor) => {\n  if (e.key === \"Enter\") {\n    if (e.shiftKey) {\n      e.preventDefault();\n      return insertSoftBreak(editor);\n    }\n    return;\n  }\n\n  if (e.key === \"Tab\") {\n    // Check that the selection is a list item before preventing default\n    const [node] = getListItemNode(editor, editor.selection);\n    if (!node) return;\n\n    e.preventDefault();\n\n    if (e.shiftKey) {\n      return decreaseIndent({ editor });\n    }\n    return increaseIndent(editor);\n  }\n\n  if (!e.metaKey && !e.ctrlKey) return;\n\n  /* eslint-disable default-case */\n  // Prevent default only if we match a case so we don't block undo, paste, etc.\n  if ((e.metaKey && e.altKey) || (e.ctrlKey && e.shiftKey)) {\n    switch (e.keyCode) {\n      case 48:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"p\");\n      case 49:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h1\");\n      case 50:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h2\");\n      case 51:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h3\");\n      case 52:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h4\");\n      case 53:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h5\");\n      case 54:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h6\");\n      case 55:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"ol\");\n      case 56:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"ul\");\n      case 57:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"blockquote\");\n      case 69:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"pre\");\n    }\n  }\n\n  if (e.shiftKey && e.key === \"s\") {\n    e.preventDefault();\n    return toggleMark(editor, \"strikethrough\");\n  }\n\n  switch (e.key) {\n    case \"b\":\n      e.preventDefault();\n      return toggleMark(editor, \"bold\");\n    case \"i\":\n      e.preventDefault();\n      return toggleMark(editor, \"italic\");\n    case \"u\":\n      e.preventDefault();\n      return toggleMark(editor, \"underline\");\n    case \"e\":\n      e.preventDefault();\n      return toggleMark(editor, \"code\");\n    case \"k\":\n      e.preventDefault();\n      return handleLinkHotkey(editor);\n    case \"g\":\n      e.preventDefault();\n      return handleImageHotkey(editor);\n    case \"m\":\n      e.preventDefault();\n      return handleIframeHotkey(editor);\n  }\n};\n","import React from \"react\";\nimport Editor from \"react-ace\";\nimport \"brace/mode/css\";\nimport \"brace/mode/javascript\";\nimport \"brace/mode/html\";\nimport \"../../CodeArea/darkTheme\";\nimport \"../../CodeArea/lightTheme\";\n\nexport default function HtmlEditor(props) {\n  const { aceRef, nextRef, prevRef, darkMode, ...rest } = props;\n  return (\n    <Editor\n      ref={aceRef}\n      theme={darkMode ? \"idle_fingers\" : \"kuroir\"}\n      editorProps={{ $blockScrolling: true }}\n      width=\"100%\"\n      minLines={40}\n      maxLines={10000}\n      wrapEnabled\n      showPrintMargin={false}\n      onLoad={editor => {\n        editor.once(\"change\", () => {\n          editor.session.getUndoManager().reset();\n        });\n        editor.commands.removeCommand(\"find\");\n        editor.renderer.setPadding(24, 24);\n        editor.renderer.setScrollMargin(24, 24);\n        const input = editor.textInput.getElement();\n        input.addEventListener(\"keydown\", e => {\n          if (e.key === \"ArrowDown\") {\n            const scroller = document.querySelector(\".top.pad-xl\");\n            scroller.scrollBy(0, 16);\n          }\n          if (e.key === \"ArrowUp\") {\n            const scroller = document.querySelector(\".top.pad-xl\");\n            scroller.scrollBy(0, -16);\n          }\n        });\n      }}\n      onFocus={() => {\n        if (aceRef.current) aceRef.current.editor.gotoLine(0, 0, true);\n      }}\n      editorOptions={{ enableAutoIndent: true }}\n      commands={[\n        {\n          name: \"tab\",\n          bindKey: { win: \"Tab\", mac: \"Tab\" },\n          exec: () => {\n            nextRef.current.focus();\n          }\n        },\n        {\n          name: \"shiftTab\",\n          bindKey: { win: \"Shift+Tab\", mac: \"Shift+Tab\" },\n          exec: () => {\n            prevRef.current.focus();\n          }\n        }\n      ]}\n      {...rest}\n    />\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { headingTertiary } from \"theme/styles/mixins\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  align-items: center;\n  padding: 0 4px 8px 4px;\n`;\n\nexport const Label = styled.span`\n  ${headingTertiary}\n  font-style: normal;\n  font-weight: 400;\n  font-size: 17px;\n  color: var(--input-color);\n`;\n\nexport const Header = styled.div`\n  padding-block-end: 6px;\n\n  span {\n    display: inline-block;\n  }\n\n  span + span {\n    margin-block-start: 12px;\n  }\n`;\n\nexport const Description = styled.span`\n  min-width: 175px;\n`;\n\nexport const HotKey = styled.div``;\n\nexport const HotKeyLabel = styled.span`\n  whitespace: nowrap;\n`;\n\nexport const TextPlaceholder = styled.span`\n  whitespace: nowrap;\n  font-style: normal;\n  display: inline-block;\n`;\n\nexport const Key = styled.span`\n  display: inline-flex;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  padding-block-start: 6px;\n  padding-block-end: 10px;\n  padding-inline: 10px;\n  background-color: var(--background-color);\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-weight-semibold);\n  border-radius: 4px;\n  font-style: normal;\n  line-height: 1;\n`;\n\nexport const Keys = styled.div`\n  display: flex;\n  gap: 8px;\n  flex-wrap: no-wrap;\n  margin-block-start: 8px;\n  align-items: center;\n`;\n","import React, { Fragment } from \"react\";\nimport * as Styled from \"./styles\";\n\nexport default function TooltipContent({ label, description, hotkeys = [] }) {\n  return (\n    <Styled.Wrapper>\n      <Styled.Header>\n        <Styled.Label>{label}</Styled.Label>\n        {description && <Styled.Description>{description}</Styled.Description>}\n      </Styled.Header>\n      {hotkeys.map(hk => (\n        <Styled.HotKey key={hk.label}>\n          <Styled.HotKeyLabel>{hk.label}</Styled.HotKeyLabel>\n          <Styled.Keys>\n            {hk.keys.map((k, i) => (\n              /* eslint-disable react/no-array-index-key */\n              <Fragment key={`${k}_${i}`}>\n                <Styled.Key>{k}</Styled.Key>\n                {hk.inline && i === 0 && (\n                  <Styled.TextPlaceholder>[text]</Styled.TextPlaceholder>\n                )}\n              </Fragment>\n            ))}\n          </Styled.Keys>\n        </Styled.HotKey>\n      ))}\n    </Styled.Wrapper>\n  );\n}\n","export const hotkeys = {\n  p: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"0\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"0\"] }\n  ],\n  h1: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"1\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"1\"] },\n    { label: \"Markdown\", keys: [\"#\", \"Space\"] }\n  ],\n  h2: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"2\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"2\"] },\n    { label: \"Markdown\", keys: [\"##\", \"Space\"] }\n  ],\n  h3: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"3\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"3\"] },\n    { label: \"Markdown\", keys: [\"###\", \"Space\"] }\n  ],\n  h4: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"4\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"4\"] },\n    { label: \"Markdown\", keys: [\"####\", \"Space\"] }\n  ],\n  h5: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"5\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"5\"] },\n    { label: \"Markdown\", keys: [\"#####\", \"Space\"] }\n  ],\n  h6: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"6\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"6\"] },\n    { label: \"Markdown\", keys: [\"######\", \"Space\"] }\n  ],\n  ol: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"7\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"7\"] },\n    { label: \"Markdown\", keys: [\"1.\", \"Space\"] }\n  ],\n  ul: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"8\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"8\"] },\n    { label: \"Markdown\", keys: [\"-\", \"Space\"] }\n  ],\n  blockquote: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"9\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"9\"] },\n    { label: \"Markdown\", keys: [\">\", \"Space\"] }\n  ],\n  link: [\n    { label: \"Mac\", keys: [\"Cmd\", \"K\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"K\"] }\n  ],\n  pre: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"E\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"E\"] },\n    { label: \"Markdown\", keys: [\"```\", \"Space\"] }\n  ],\n  italic: [\n    { label: \"Mac\", keys: [\"Cmd\", \"I\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"I\"] },\n    { label: \"Markdown\", keys: [\"*\", \"*\"], inline: true }\n  ],\n  strikethrough: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Shift\", \"S\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"S\"] },\n    { label: \"Markdown\", keys: [\"~\", \"~\"], inline: true }\n  ],\n  bold: [\n    { label: \"Mac\", keys: [\"Cmd\", \"B\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"B\"] },\n    { label: \"Markdown\", keys: [\"**\", \"**\"], inline: true }\n  ],\n  underline: [\n    { label: \"Mac\", keys: [\"Cmd\", \"U\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"U\"] }\n  ],\n  code: [\n    { label: \"Mac\", keys: [\"Cmd\", \"E\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"E\"] },\n    { label: \"Markdown\", keys: [\"`\", \"`\"], inline: true }\n  ],\n  undo: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Z\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Z\"] }\n  ],\n  redo: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Shift\", \"Z\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Y\"] }\n  ],\n  img: [\n    { label: \"Mac\", keys: [\"Cmd\", \"G\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"G\"] }\n  ],\n  iframe: [\n    { label: \"Mac\", keys: [\"Cmd\", \"M\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"M\"] }\n  ]\n};\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultTransitionProps,\n  formLabelPrimary,\n  defaultFocusStyle\n} from \"theme/styles/mixins\";\nimport IconComposer from \"global/components/utility/IconComposer\";\n\nexport const Button = styled.button`\n  ${buttonUnstyled}\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n  width: 28px;\n  background-color: none;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps};\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-weight-semibold);\n  border-radius: 4px;\n  margin-inline-start: 3px;\n\n  &:hover {\n    background-color: var(--background-color);\n    color: inherit;\n  }\n\n  &[data-active=\"true\"] {\n    color: var(--drawer-bg-color);\n    background-color: var(--color-accent-primary);\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SelectTooltipWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nexport const TooltipIcon = styled.div`\n  position: relative;\n  width: max-content;\n  margin-block-start: -3px;\n  margin-inline-start: 5px;\n  cursor: pointer;\n`;\n\nexport const SelectWrapper = styled.div`\n  position: relative;\n  display: inline-block;\n`;\n\nexport const Select = styled.select`\n  ${buttonUnstyled}\n  font-family: var(--font-family-sans);\n  line-height: 22px;\n  font-size: 14px;\n  width: 120px;\n  height: 28px;\n  display: inline-block;\n  border-radius: 4px;\n  padding-block-start: 2px;\n  padding-block-end: 4px;\n  padding-inline-start: 8px;\n\n  .backend & {\n    color: var(--color);\n\n    &[data-active=\"true\"] {\n      color: var(--drawer-bg-color);\n      background-color: ${({ $color }) => $color};\n    }\n\n    &:hover {\n      background-color: var(--background-color);\n      color: var(--color);\n    }\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SpanButton = styled(Select)`\n  width: auto;\n  padding-inline: 8px;\n\n  .backend & {\n    &[data-active=\"true\"] {\n      color: var(--drawer-bg-color);\n      background-color: var(--color-base-blue45);\n    }\n\n    &:hover {\n      background-color: var(--background-color);\n      color: var(--color);\n    }\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SelectIcon = styled(IconComposer)`\n  position: absolute;\n  top: 25%;\n  right: 4px;\n  pointer-events: none;\n\n  select[data-active=\"true\"]:not(:hover) + & {\n    color: var(--drawer-bg-color);\n  }\n`;\n\nexport const StylesButton = styled.button`\n  ${buttonUnstyled}\n  ${formLabelPrimary}\n  padding-inline-start: 12px;\n  padding-inline-end: 16px;\n  padding-block: 6px;\n  background-color: var(--box-bg-color);\n  border-radius: 4px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-inline-start: auto;\n\n  svg {\n    margin-top: 3px;\n  }\n\n  &:hover {\n    background-color: var(--color-accent-primary);\n    color: var(--box-bg-color);\n  }\n`;\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst BlockButton = ({ format, icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${format}`)}\n          hotkeys={hotkeys[format]}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.format\", { format })}\n        data-active={isElementActive(editor, format)}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleOrWrapNode(editor, format);\n        }}\n        tabIndex={-1}\n      >\n        {icon && <Utility.IconComposer icon={icon} size={size} />}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(BlockButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleMark } from \"../../../utils/slate/transforms\";\nimport { isMarkActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst MarkButton = ({ format, label, icon, isFirst, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${format}`)}\n          hotkeys={hotkeys[format]}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.format\", { format })}\n        data-active={isMarkActive(editor, format)}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleMark(editor, format);\n        }}\n        tabIndex={isFirst ? 0 : -1}\n      >\n        {icon && <Utility.IconComposer icon={icon} />}\n        {label && label}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(MarkButton);\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultHoverStyle,\n  utilityPrimary,\n  fluidScale\n} from \"theme/styles/mixins\";\nimport Utility from \"global/components/utility\";\nimport Dialog from \"global/components/dialog\";\n\nexport const Form = styled.form`\n  > * + * {\n    margin-block-start: 50px;\n  }\n`;\n\nexport const CloseButton = styled.button`\n  ${buttonUnstyled}\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n  font-size: 17px;\n  cursor: pointer;\n\n  ${({ $primary }) =>\n    $primary &&\n    `\n    cursor: pointer;\n\n    &:hover {\n      ${defaultHoverStyle}\n      outline: 0;\n    }\n\n    &:focus-visible {\n      color: var(--focus-color);\n    }\n  `}\n`;\n\nconst CLOSE_ICON_SIZE = \"24px\";\n\nexport const CloseText = styled.span`\n  ${utilityPrimary}\n  margin-right: 6px;\n  font-size: 12px;\n  font-weight: var(--font-weight-semibold);\n  line-height: ${CLOSE_ICON_SIZE};\n  letter-spacing: 0.125em;\n`;\n\nexport const CloseIcon = styled(Utility.IconComposer)`\n  width: ${CLOSE_ICON_SIZE};\n  height: ${CLOSE_ICON_SIZE};\n`;\n\nexport const ModalHeader = styled.header`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-block-start: 0;\n`;\n\nexport const HeaderIcon = styled(Utility.IconComposer)`\n  color: var(--color-accent-primary);\n  margin-top: 2px;\n`;\n\nexport const Heading = styled.span`\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-top: -2px;\n\n  h2 {\n    margin-top: -6px;\n  }\n`;\n\nexport const ModalBody = styled.div`\n  width: 100%;\n`;\n\nexport const Modal = styled(Dialog.Wrapper)`\n  max-width: 600px;\n  padding-block: ${fluidScale(\"50px\", \"30px\")};\n  padding-inline: ${fluidScale(\"60px\", \"40px\")};\n`;\n\nexport const ButtonGroup = styled.div`\n  display: flex;\n  gap: 24px;\n  margin-top: 64px;\n`;\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertLinkForm({ urlRef, textRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.text}\n        ref={textRef}\n        name=\"text\"\n        label={t(\"editor.forms.link_text_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.url}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.link_url_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { useUID } from \"react-uid\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertModal(props) {\n  const { form, resolve, reject, heading, icon, resolveLabel } = props;\n  const uid = useUID();\n  const { t } = useTranslation();\n\n  const handleResolveClick = e => {\n    e.preventDefault();\n    resolve(e);\n  };\n\n  const handleRejectClick = e => {\n    e.preventDefault();\n    reject(e);\n  };\n\n  const buttonClasses = \"button-secondary button-secondary--outlined\";\n\n  return (\n    <Styled.Modal\n      maxWidth={600}\n      showCloseButton={false}\n      closeOnOverlayClick={false}\n      labelledBy={t(\"editor.forms.labelled_by_uid\", { uid })}\n      describedBy={t(\"editor.forms.described_by_uid\", { uid })}\n      onEsc={props.reject}\n    >\n      <>\n        <Styled.ModalHeader className=\"dialog__header\">\n          <Styled.Heading>\n            <Styled.HeaderIcon icon={icon} />\n            <h2 id={t(\"editor.forms.labelled_by_uid\", { uid })}>{heading}</h2>\n          </Styled.Heading>\n          <Styled.CloseButton onClick={handleRejectClick} tabIndex={0}>\n            <Styled.CloseText>{t(\"actions.close\")}</Styled.CloseText>\n            <Styled.CloseIcon icon=\"close24\" size={24} />\n          </Styled.CloseButton>\n        </Styled.ModalHeader>\n        <Styled.ModalBody className=\"dialog__body\">\n          {form}\n          <Styled.ButtonGroup>\n            {typeof resolve === \"function\" && (\n              <button\n                onClick={handleResolveClick}\n                className={buttonClasses}\n                data-id=\"accept\"\n              >\n                <span>{resolveLabel}</span>\n              </button>\n            )}\n            <button\n              className={classNames(buttonClasses, \"button-secondary--dull\")}\n              onClick={handleRejectClick}\n              data-id=\"reject\"\n            >\n              <span>{t(\"actions.cancel\")}</span>\n            </button>\n          </Styled.ButtonGroup>\n        </Styled.ModalBody>\n      </>\n    </Styled.Modal>\n  );\n}\n\nInsertModal.displayName = \"ContentEditor.Insert.Modal\";\n\nInsertModal.propTypes = {\n  resolve: PropTypes.func,\n  reject: PropTypes.func.isRequired,\n  heading: PropTypes.string,\n  options: PropTypes.object,\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const onModalClose = (editor, selection) => close => {\n  close();\n  const selectionToUse = editor.selection ?? selection;\n\n  // I don't know exactly why this works, but there's some relevant, though potentially outdated, discussion here: https://github.com/ianstormtaylor/slate/issues/2097. The issue is that the focus() call fails unless it happens after the focus trap closes, and when a user hits cancel and we're not performing any node transformations after closing the modal, that doesn't happen without a timeout.\n  setTimeout(() => {\n    Transforms.select(editor, selectionToUse);\n    ReactEditor.focus(editor);\n  }, 200);\n};\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor, Range } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport InsertLinkForm from \"./insert/LinkForm\";\nimport { useConfirmation } from \"hooks\";\nimport Modal from \"./insert/Modal\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport { wrapLink, unwrapLink } from \"../../../utils/slate/transforms\";\nimport { isLinkActive } from \"../../../utils/slate/getters\";\n\nimport * as Styled from \"./styles\";\n\nconst LinkButton = ({ icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const active = isLinkActive(editor);\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const textRef = useRef(null);\n  const { t } = useTranslation();\n\n  const addLink = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    const text = textRef?.current?.inputElement?.value;\n    if (!url) return;\n    close();\n    wrapLink(editor, url, text);\n  };\n\n  const getLinkData = e => {\n    e.preventDefault();\n    const { selection } = editor ?? {};\n    if (!selection) return;\n\n    if (active) return unwrapLink(editor);\n\n    const heading = t(\"editor.forms.link_insert_heading\");\n\n    const isCollapsed = Range.isCollapsed(selection);\n    const defaultValues = !isCollapsed\n      ? { text: Editor.string(editor, selection) }\n      : {};\n\n    const form = (\n      <InsertLinkForm\n        urlRef={urlRef}\n        textRef={textRef}\n        defaultValues={defaultValues}\n      />\n    );\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addLink,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.link`)}\n          hotkeys={hotkeys.link}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        name=\"link-modal-trigger\"\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.link\")}\n        data-active={active}\n        onClick={getLinkData}\n        tabIndex={-1}\n      >\n        {icon && <Utility.IconComposer icon={icon} size={size} />}\n        {confirmation && <Modal {...confirmation} />}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(LinkButton);\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertImageForm({ urlRef, altRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.src}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.image_url_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.alt}\n        ref={altRef}\n        name=\"alt\"\n        label={t(\"editor.forms.alt_text_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor, Element as SlateElement } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport Modal from \"./insert/Modal\";\nimport { useConfirmation } from \"hooks\";\nimport InsertImageForm from \"./insert/ImageForm\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport { insertImage } from \"../../../utils/slate/transforms\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport * as Styled from \"./styles\";\n\nconst ImageButton = ({ icon, size, ...rest }, ref) => {\n  const { t } = useTranslation();\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const altRef = useRef(null);\n\n  const addImage = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    if (!url) return;\n    const alt = altRef?.current?.inputElement?.value;\n    close();\n    return insertImage(editor, url, alt);\n  };\n\n  const updateImage = attrs => close => {\n    const url = urlRef?.current?.inputElement?.value ?? attrs.src;\n    if (!url) return;\n    const alt = altRef?.current?.inputElement?.value;\n    close();\n    Transforms.setNodes(editor, {\n      htmlAttrs: { ...attrs, src: url, alt }\n    });\n    ReactEditor.focus(editor);\n  };\n\n  const getImageData = e => {\n    e.preventDefault();\n    if (!selection) return;\n\n    const heading = t(\"editor.forms.image_insert_heading\");\n    const form = <InsertImageForm urlRef={urlRef} altRef={altRef} />;\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addImage,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const updateImageData = e => {\n    e.preventDefault();\n\n    const [[image]] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: n =>\n          !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === \"img\"\n      })\n    );\n\n    const attrs = image?.htmlAttrs ?? {};\n    const defaultValues = {\n      src: attrs.src,\n      alt: attrs.alt\n    };\n\n    const heading = t(\"editor.forms.image_update_heading\");\n    const form = (\n      <InsertImageForm\n        defaultValues={defaultValues}\n        urlRef={urlRef}\n        altRef={altRef}\n      />\n    );\n\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: updateImage(attrs),\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.update\")\n      });\n  };\n\n  const active = isElementActive(editor, \"img\");\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.img`)}\n          description={t(`editor.tooltips.descriptions.img`)}\n          hotkeys={hotkeys.img}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <div>\n        <Styled.Button\n          name=\"img-modal-trigger\"\n          ref={ref}\n          {...rest}\n          aria-label={t(\"editor.controls.labels.image\")}\n          data-active={active}\n          onClick={active ? updateImageData : getImageData}\n          tabIndex={-1}\n        >\n          {icon && <Utility.IconComposer icon={icon} size={size} />}\n        </Styled.Button>\n        {confirmation && <Modal {...confirmation} />}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(ImageButton);\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertIframeForm({ urlRef, titleRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.src}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.iframe_url_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.title}\n        ref={titleRef}\n        name=\"title\"\n        label={t(\"editor.forms.title_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor, Element as SlateElement } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Modal from \"./insert/Modal\";\nimport InsertIframeForm from \"./insert/IframeForm\";\nimport { useConfirmation } from \"hooks\";\nimport Utility from \"global/components/utility\";\nimport { isValidUrl } from \"../../../utils/helpers\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport { insertIframe } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst IframeButton = ({ icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const titleRef = useRef(null);\n  const { t } = useTranslation();\n\n  const addIframe = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    if (!url) return;\n    const title = titleRef?.current?.inputElement?.value;\n    if (!isValidUrl(url)) return;\n    close();\n    return insertIframe(editor, url, title);\n  };\n\n  const updateIframe = attrs => close => {\n    const url = urlRef?.current?.inputElement?.value ?? attrs.src;\n    if (!url) return;\n    const title = titleRef?.current?.inputElement?.value;\n    close();\n    Transforms.setNodes(editor, {\n      htmlAttrs: { ...attrs, src: url, title }\n    });\n    ReactEditor.focus(editor);\n  };\n\n  const getIframeData = e => {\n    e.preventDefault();\n    if (!selection) return;\n\n    const heading = t(\"editor.forms.iframe_insert_heading\");\n    const form = <InsertIframeForm urlRef={urlRef} titleRef={titleRef} />;\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addIframe,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const updateIframeData = e => {\n    e.preventDefault();\n\n    const [[iframe]] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: n =>\n          !Editor.isEditor(n) &&\n          SlateElement.isElement(n) &&\n          n.type === \"iframe\"\n      })\n    );\n\n    const attrs = iframe?.htmlAttrs ?? {};\n    const defaultValues = {\n      src: attrs.src,\n      title: attrs.title\n    };\n\n    const heading = t(\"editor.forms.iframe_update_heading\");\n    const form = (\n      <InsertIframeForm\n        defaultValues={defaultValues}\n        urlRef={urlRef}\n        titleRef={titleRef}\n      />\n    );\n\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: updateIframe(attrs),\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const active = isElementActive(editor, \"iframe\");\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.iframe`)}\n          description={t(`editor.tooltips.descriptions.iframe`)}\n          hotkeys={hotkeys.iframe}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <div>\n        <Styled.Button\n          name=\"iframe-modal-trigger\"\n          ref={ref}\n          {...rest}\n          aria-label={t(\"editor.controls.labels.iframe\")}\n          data-active={active}\n          onClick={active ? updateIframeData : getIframeData}\n          tabIndex={-1}\n        >\n          {icon && <Utility.IconComposer icon={icon} size={size} />}\n        </Styled.Button>\n        {confirmation && <Modal {...confirmation} />}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(IframeButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport {\n  isTextBlockActive,\n  isElementActive\n} from \"../../../utils/slate/getters\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport * as Styled from \"./styles\";\n\nconst getActiveBlock = (editor, opts, name) => {\n  const isActive = name === \"textBlock\" ? isTextBlockActive : isElementActive;\n  const active = opts\n    .map(o => [o, isActive(editor, o)])\n    .reduce((obj, o) => ({ ...obj, [o[0]]: o[1] }), {});\n\n  // I can't decide whether it's better to show as active the lowest block or show nothing as active if the selection is nested in multiple blocks.\n  // const activeCount = opts.map(o => isActive(editor, o)).filter(Boolean).length;\n  // if (activeCount !== 1) return \"\";\n\n  return Object.keys(active).find(o => active[o]) ?? \"\";\n};\n\nconst BlockSelect = ({ options, name, color, ariaLabel, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  const renderOptions = options.map(o => (\n    <option key={o.format} value={o.format} hidden={!o.format}>\n      {o.label}\n    </option>\n  ));\n\n  const active = getActiveBlock(\n    editor,\n    options.map(o => o.format),\n    name\n  );\n\n  return (\n    <Styled.SelectTooltipWrapper>\n      <Styled.SelectWrapper>\n        <Styled.Select\n          ref={ref}\n          {...rest}\n          aria-label={ariaLabel}\n          data-active={active !== \"\"}\n          $color={color ?? \"var(--color-accent-primary)\"}\n          value={active}\n          onChange={e => {\n            e.preventDefault();\n            if (!selection) return;\n            toggleOrWrapNode(editor, e.target.value);\n          }}\n          tabIndex={-1}\n        >\n          {renderOptions}\n        </Styled.Select>\n        <Styled.SelectIcon icon=\"disclosureDown24\" size={16} />\n      </Styled.SelectWrapper>\n      <Tooltip\n        content={\n          active && name === \"textBlock\" ? (\n            <TooltipContent\n              label={t(`editor.tooltips.labels.${active}`)}\n              hotkeys={hotkeys[active]}\n            />\n          ) : (\n            <TooltipContent\n              label={t(`editor.tooltips.labels.${name}`)}\n              description={t(`editor.tooltips.descriptions.${name}`)}\n            />\n          )\n        }\n        xOffset=\"0\"\n        yOffset=\"43px\"\n        delay={0}\n      >\n        <Styled.TooltipIcon>\n          <IconComposer icon=\"info16\" size={14} />\n        </Styled.TooltipIcon>\n      </Tooltip>\n    </Styled.SelectTooltipWrapper>\n  );\n};\n\nexport default forwardRef(BlockSelect);\n","import React, { forwardRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport * as Styled from \"./styles\";\n\nconst FunctionButton = (\n  { label, icon, onClick, isFirst, tooltip, ...rest },\n  ref\n) => {\n  const { t } = useTranslation();\n\n  const Button = label ? Styled.StylesButton : Styled.Button;\n  const renderButton = (\n    <Button\n      ref={ref}\n      {...rest}\n      aria-label={t(\"editor.controls.labels.format\", { format: tooltip })}\n      onClick={onClick}\n      tabIndex={isFirst ? 0 : -1}\n    >\n      {icon && <Utility.IconComposer icon={icon} size={24} />}\n      {label && label}\n    </Button>\n  );\n\n  return tooltip ? (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${tooltip}`)}\n          hotkeys={hotkeys[tooltip]}\n          description={t(`editor.tooltips.descriptions.${tooltip}`)}\n        />\n      }\n      xOffset=\"-50px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      {renderButton}\n    </Tooltip>\n  ) : (\n    renderButton\n  );\n};\n\nexport default forwardRef(FunctionButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst SpanButton = ({ format, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.span`)}\n          description={t(`editor.tooltips.descriptions.span`)}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.SpanButton\n        as=\"button\"\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.span\")}\n        data-active={isElementActive(editor, format)}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleOrWrapNode(editor, format);\n        }}\n        tabIndex={-1}\n      >\n        Span\n      </Styled.SpanButton>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(SpanButton);\n","import styled from \"@emotion/styled\";\nimport {\n  respond,\n  buttonUnstyled,\n  defaultFocusStyle\n} from \"theme/styles/mixins\";\nimport { COLOR_MAP } from \"../renderers/styles\";\nimport IconComposer from \"global/components/utility/IconComposer\";\n\nexport const Toolbar = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  row-gap: 5px;\n  align-items: center;\n  column-gap: 3px;\n  border: 1px solid var(--TextArea-border-color);\n  border-bottom-color: var(--textarea-border-color);\n  padding-inline: 1.25em;\n  padding-block: 1em;\n  background-color: var(--drawer-bg-color);\n  border-top-left-radius: var(--box-border-radius);\n  border-top-right-radius: var(--box-border-radius);\n  color: var(--color);\n  min-height: 73px;\n`;\n\nexport const ToolGroup = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: center;\n  gap: 8px;\n\n  ${respond(`gap: 3px;`, 30)}\n`;\n\nexport const ToolbarSpacer = styled.div`\n  margin-inline: 12px;\n  border-left: 1px solid var(--background-color);\n  height: 24px;\n`;\n\nexport const ToggleBar = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  row-gap: 12px;\n  justify-content: space-between;\n  margin-block-end: 32px;\n`;\n\nexport const BreadcrumbsBar = styled.div`\n  border-left: 1px solid;\n  border-right: 1px solid;\n  background: ${({ $darkMode }) =>\n    $darkMode ? `var(--TextArea-border-color)` : `var(--color-base-neutral30)`};\n  border-color: var(--TextArea-border-color);\n  color: var(--drawer-bg-color);\n  padding-inline: 1.5em;\n  padding-block-start: 3px;\n  padding-block-end: 6px;\n  min-height: 30px;\n  font-family: var(--font-family-heading);\n  display: flex;\n  align-items: center;\n  gap: 20px;\n`;\n\nexport const Breadcrumbs = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  column-gap: 8px;\n`;\n\nexport const Breadcrumb = styled.button`\n  ${buttonUnstyled}\n  white-space: nowrap;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  max-width: 300px;\n  flex-shrink: 0;\n  min-height: 24px;\n\n  &:hover {\n    color: ${({ $color, $darkMode }) =>\n      $darkMode ? COLOR_MAP[$color].dark : COLOR_MAP[$color].light};\n  }\n\n  &:focus-visible {\n    color: ${({ $color, $darkMode }) =>\n      $darkMode ? COLOR_MAP[$color].dark : COLOR_MAP[$color].light};\n    outline: 0;\n  }\n`;\n\nexport const Spacer = styled(IconComposer)`\n  transform: rotate(-90deg);\n  margin-block-start: 4px;\n  flex-shrink: 0;\n`;\n\nexport const ShowHideButton = styled.button`\n  ${buttonUnstyled}\n  display: flex;\n  align-items: center;\n  margin-inline-start: auto;\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n","import React, { Fragment, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  MarkButton,\n  BlockButton,\n  LinkButton,\n  ImageButton,\n  IframeButton,\n  BlockSelect,\n  FunctionButton,\n  SpanButton\n} from \"./buttons\";\nimport {\n  MenuBar as ReakitMenuBar,\n  MenuItem as ReakitMenuItem,\n  useMenuBarState\n} from \"reakit/Menu\";\nimport { Node } from \"slate\";\nimport { useSlateStatic, useSlateSelection } from \"slate-react\";\nimport { getAncestors } from \"../../utils/slate/getters\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport { rteElements, inlineNodes } from \"../../utils/elements\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport isEmpty from \"lodash/isEmpty\";\nimport * as Styled from \"./styles\";\n\nexport default function ToolbarRTE({ onClickUndo, onClickRedo, darkMode }) {\n  const { t } = useTranslation();\n\n  const menu = useMenuBarState({\n    orientation: \"horizontal\",\n    loop: true,\n    wrap: \"horizontal\"\n  });\n\n  const editor = useSlateStatic();\n  const selection = useSlateSelection();\n  const path = selection?.anchor?.path;\n\n  let ancestors = {};\n  if (path) {\n    const iterator = Node.ancestors(editor, selection?.anchor.path);\n    ancestors = getAncestors(editor, iterator);\n  }\n\n  const {\n    setSelectedCrumb,\n    selectedCrumb,\n    editingCrumb,\n    setEditingCrumb\n  } = useHtmlBreadcrumbs();\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (editingCrumb) {\n      setEditingCrumb(false);\n      setSelectedCrumb(null);\n    }\n  }, [editor.selection]);\n\n  const onToggleHtmlOutlines = useCallback(\n    e => {\n      e.preventDefault();\n\n      const val = selectedCrumb === \"all\" ? null : \"all\";\n      setSelectedCrumb(val);\n    },\n    [selectedCrumb, setSelectedCrumb]\n  );\n\n  const handleHoverFocus = useCallback(\n    a => {\n      if (!editingCrumb) setSelectedCrumb(a);\n    },\n    [editingCrumb]\n  );\n\n  const clearHoverFocus = useCallback(() => {\n    if (!editingCrumb) setSelectedCrumb(null);\n  }, [editingCrumb]);\n\n  return (\n    <>\n      <ReakitMenuBar\n        as={Styled.Toolbar}\n        aria-label={t(\"editor.controls.labels.toolbar_rte\")}\n        {...menu}\n      >\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={FunctionButton}\n            icon=\"undo24\"\n            onClick={onClickUndo}\n            tooltip=\"undo\"\n            isFirst\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={FunctionButton}\n            icon=\"redo24\"\n            onClick={onClickRedo}\n            tooltip=\"redo\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockSelect}\n            name=\"textBlock\"\n            ariaLabel={t(\"editor.controls.labels.text_block_select\")}\n            options={[\n              { format: \"p\", label: t(\"editor.tooltips.labels.p\") },\n              { format: \"h1\", label: t(\"editor.tooltips.labels.h1\") },\n              { format: \"h2\", label: t(\"editor.tooltips.labels.h2\") },\n              { format: \"h3\", label: t(\"editor.tooltips.labels.h3\") },\n              { format: \"h4\", label: t(\"editor.tooltips.labels.h4\") },\n              { format: \"h5\", label: t(\"editor.tooltips.labels.h5\") },\n              { format: \"h6\", label: t(\"editor.tooltips.labels.h6\") },\n              {\n                format: \"\",\n                label: t(\"editor.controls.labels.text_block_select_placeholder\")\n              }\n            ]}\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem as={SpanButton} format=\"span\" {...menu} />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockSelect}\n            name=\"container\"\n            ariaLabel={t(\"editor.controls.labels.layout_block_select\")}\n            options={[\n              { format: \"div\", label: t(\"editor.tooltips.labels.div\") },\n              { format: \"header\", label: t(\"editor.tooltips.labels.header\") },\n              { format: \"footer\", label: t(\"editor.tooltips.labels.footer\") },\n              { format: \"section\", label: t(\"editor.tooltips.labels.section\") },\n              { format: \"article\", label: t(\"editor.tooltips.labels.article\") },\n              { format: \"figure\", label: t(\"editor.tooltips.labels.figure\") },\n              {\n                format: \"figcaption\",\n                label: t(\"editor.tooltips.labels.figcaption\")\n              },\n              {\n                format: \"\",\n                label: t(\n                  \"editor.controls.labels.layout_block_select_placeholder\"\n                )\n              }\n            ]}\n            color=\"var(--color-base-yellow20)\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"bold24\"\n            format=\"bold\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"italic24\"\n            format=\"italic\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"underline24\"\n            format=\"underline\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"strikethrough24\"\n            format=\"strikethrough\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"code24\"\n            format=\"code\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"orderedList24\"\n            format=\"ol\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"unorderedList24\"\n            format=\"ul\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"blockQuote24\"\n            format=\"blockquote\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"codeBlock24\"\n            format=\"pre\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem as={LinkButton} icon=\"RTELink24\" {...menu} />\n          <ReakitMenuItem as={ImageButton} icon=\"RTEImage24\" {...menu} />\n          <ReakitMenuItem as={IframeButton} icon=\"iframe24\" {...menu} />\n        </Styled.ToolGroup>\n      </ReakitMenuBar>\n      <Styled.BreadcrumbsBar $darkMode={darkMode}>\n        <Styled.Breadcrumbs>\n          {!isEmpty(ancestors) &&\n            Object.keys(ancestors)\n              .sort(\n                (a, b) => ancestors[a].path.length - ancestors[b].path.length\n              )\n              .map((a, i) => {\n                /* eslint-disable no-nested-ternary */\n                const tag = ancestors[a].label.split(\".\")[0].split(\"#\")[0];\n                const color = rteElements.includes(tag)\n                  ? \"green\"\n                  : inlineNodes.includes(tag)\n                  ? \"blue\"\n                  : \"yellow\";\n\n                return (\n                  <Fragment key={a}>\n                    <Styled.Breadcrumb\n                      $color={color}\n                      $darkMode={darkMode}\n                      onMouseEnter={() => handleHoverFocus(a)}\n                      onMouseLeave={clearHoverFocus}\n                      onFocus={() => handleHoverFocus(a)}\n                      onBlur={clearHoverFocus}\n                      onClick={e => {\n                        e.preventDefault();\n                        setSelectedCrumb(a);\n                        setEditingCrumb(true);\n                      }}\n                    >\n                      {ancestors[a].label}\n                    </Styled.Breadcrumb>\n                    {i < Object.keys(ancestors).length - 1 && (\n                      <Styled.Spacer icon=\"disclosureDown16\" size={16} />\n                    )}\n                  </Fragment>\n                );\n              })}\n        </Styled.Breadcrumbs>\n        <Styled.ShowHideButton\n          onClick={onToggleHtmlOutlines}\n          aria-label={\n            selectedCrumb === \"all\"\n              ? t(\"editor.controls.labels.hide_html\")\n              : t(\"editor.controls.labels.show_html\")\n          }\n        >\n          <IconComposer icon=\"eyeball24\" size={24} />\n        </Styled.ShowHideButton>\n      </Styled.BreadcrumbsBar>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { FunctionButton } from \"./buttons\";\nimport {\n  MenuBar as ReakitMenuBar,\n  MenuItem as ReakitMenuItem,\n  useMenuBarState\n} from \"reakit/Menu\";\nimport * as Styled from \"./styles\";\n\nexport default function ToolbarHTML({\n  onClickUndo,\n  onClickRedo,\n  toggleStyles,\n  cssVisible,\n  controlsRef\n}) {\n  const { t } = useTranslation();\n  const menu = useMenuBarState({\n    orientation: \"horizontal\",\n    loop: true,\n    wrap: \"horizontal\"\n  });\n  return (\n    <ReakitMenuBar\n      as={Styled.Toolbar}\n      aria-label={t(\"editor.controls.labels.toolbar_html\")}\n      {...menu}\n    >\n      <ReakitMenuItem\n        ref={controlsRef}\n        as={FunctionButton}\n        icon=\"undo24\"\n        onClick={onClickUndo}\n        isFirst\n        {...menu}\n      />\n      <ReakitMenuItem\n        as={FunctionButton}\n        icon=\"redo24\"\n        onClick={onClickRedo}\n        {...menu}\n      />\n      <ReakitMenuItem\n        as={FunctionButton}\n        label={\n          cssVisible\n            ? t(\"editor.controls.labels.hide_styles\")\n            : t(\"editor.controls.labels.show_styles\")\n        }\n        icon={cssVisible ? \"eyeClosed32\" : \"eyeOpen32\"}\n        onClick={toggleStyles}\n        {...menu}\n      />\n    </ReakitMenuBar>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  utilityPrimary,\n  defaultTransitionProps,\n  respond\n} from \"theme/styles/mixins\";\n\nexport const Wrapper = styled.div`\n  ${buttonUnstyled}\n  ${utilityPrimary}\n  display: inline-flex;\n  border: 1px solid;\n  border-radius: 16px;\n  color: var(--color-accent-primary);\n  width: 100%;\n\n  ${respond(`width: auto;`, 60)};\n`;\n\nexport const Button = styled.button`\n  ${buttonUnstyled}\n  ${utilityPrimary}\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding-inline: ${({ $padding }) => $padding};\n  font-size: 14px;\n  font-weight: var(--font-weight-medium);\n  text-decoration: none;\n  text-transform: none;\n  letter-spacing: 0;\n  border-top-left-radius: 14px;\n  border-bottom-left-radius: 14px;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps},\n    border-color ${defaultTransitionProps};\n  width: 50%;\n\n  ${respond(`width: auto;`, 60)}\n\n  ${({ $active }) =>\n    $active\n      ? `\n      color: var(--color-neutral-text-extra-dark);\n      background-color: var(--hover-color);\n      border-color: var(--hover-color);\n\n      &:hover {\n        color: var(--color-neutral-text-extra-dark);\n      }\n\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }`\n      : `\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }\n\n      &:hover {\n        color: inherit;\n        background-color: inherit;\n        border-color: inherit;\n      }\n      `}\n\n  span {\n    padding-top: 7px;\n    padding-bottom: 9px;\n  }\n\n  svg {\n    width: 24px;\n    height: 24px;\n    padding-bottom: 2px;\n    margin: 0;\n  }\n\n  * + & {\n    border-left: 1px solid;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-top-right-radius: 14px;\n    border-bottom-right-radius: 14px;\n  }\n`;\n\nexport const MobileLabel = styled.span`\n  ${respond(`display: none;`, 40)};\n`;\n\nexport const Label = styled.span`\n  ${MobileLabel} + & {\n    display: none;\n\n    ${respond(`display: inline;`, 40)};\n  }\n`;\n","import React from \"react\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport * as Styled from \"./styles\";\n\nexport default function Toggle({ options, padding = \"20px\" }) {\n  const [left, right] = options;\n\n  return (\n    <Styled.Wrapper>\n      <Styled.Button\n        $active={left.active}\n        $padding={padding}\n        onClick={left.onClick}\n      >\n        <IconComposer\n          icon={left.icon || \"code16\"}\n          size={left.iconSize || 16}\n          className=\"button-icon-secondary__icon button-icon-secondary__icon--large\"\n        />\n        {left.mobileLabel && (\n          <Styled.MobileLabel>{left.mobileLabel}</Styled.MobileLabel>\n        )}\n        <Styled.Label>{left.label}</Styled.Label>\n      </Styled.Button>\n      <Styled.Button\n        $active={right.active}\n        $padding={padding}\n        onClick={right.onClick}\n      >\n        <IconComposer\n          icon={right.icon || \"code16\"}\n          size={right.iconSize || 16}\n          className=\"button-icon-secondary__icon button-icon-secondary__icon--large\"\n        />\n        {right.mobileLabel && (\n          <Styled.MobileLabel>{right.mobileLabel}</Styled.MobileLabel>\n        )}\n        <Styled.Label>{right.label}</Styled.Label>\n      </Styled.Button>\n    </Styled.Wrapper>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Toggle from \"./Toggle\";\nimport * as Styled from \"./styles\";\n\nexport default function ToggleBar({\n  htmlMode,\n  onClickEditorToggle,\n  darkMode,\n  onClickDarkModeToggle\n}) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.ToggleBar>\n      <Toggle\n        options={[\n          {\n            label: t(\"editor.controls.toggles.html_label\"),\n            mobileLabel: t(\"editor.controls.toggles.html_label_mobile\"),\n            icon: \"editorHTML24\",\n            active: htmlMode,\n            onClick: onClickEditorToggle(true)\n          },\n          {\n            label: t(\"editor.controls.toggles.rte_label\"),\n            mobileLabel: t(\"editor.controls.toggles.rte_label_mobile\"),\n            icon: \"editorRTE24\",\n            active: !htmlMode,\n            onClick: onClickEditorToggle(false)\n          }\n        ]}\n      />\n      <Toggle\n        options={[\n          {\n            label: t(\"editor.controls.toggles.dark_mode_label\"),\n            icon: \"darkMode16\",\n            iconSize: 12,\n            active: darkMode,\n            onClick: onClickDarkModeToggle(true)\n          },\n          {\n            label: t(\"editor.controls.toggles.light_mode_label\"),\n            icon: \"lightMode16\",\n            iconSize: 12,\n            active: !darkMode,\n            onClick: onClickDarkModeToggle(false)\n          }\n        ]}\n        padding=\"16px\"\n      />\n    </Styled.ToggleBar>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { defaultTransitionProps } from \"theme/styles/mixins\";\nimport { Editable as BaseEditable } from \"slate-react\";\nimport InputError from \"../../InputError\";\n\nexport const Editor = styled.div`\n  width: 100%;\n  resize: vertical;\n  outline: none;\n  transition: border-color ${defaultTransitionProps};\n  position: relative;\n  border-radius: var(--box-border-radius);\n\n  &:focus-visible {\n    border-color: var(--TextArea-focus-color);\n  }\n`;\n\nexport const EditorSecondary = styled(Editor)`\n  --TextArea-border-color: var(--textarea-border-color);\n  --TextArea-focus-color: var(--highlight-color);\n\n  font-family: var(--input-font-family);\n  background-color: var(--input-bg-color);\n  border-radius: var(--box-border-radius);\n\n  &::placeholder {\n    color: var(--color-neutral-ui-light);\n  }\n\n  &.error {\n    --TextArea-border-color: var(--error-color);\n  }\n`;\n\nexport const EditableWrapper = styled.div`\n  min-height: 700px;\n  border: 1px solid var(--TextArea-border-color);\n  border-top: 0;\n  border-bottom-left-radius: var(--box-border-radius);\n  border-bottom-right-radius: var(--box-border-radius);\n  background-color: var(--background-color);\n  overflow: hidden;\n\n  .ace_editor {\n    border-bottom-left-radius: 6px;\n    border-bottom-right-radius: 6px;\n    border: 0;\n    overflow: visible;\n  }\n\n  .ace_gutter {\n    min-height: 699px !important;\n    overflow: visible;\n    border-bottom-left-radius: var(--box-border-radius);\n  }\n\n  .ace_scroller {\n    min-height: 699px !important;\n    overflow: visible;\n    border-bottom-right-radius: var(--box-border-radius);\n  }\n\n  .ace_gutter-cell:last-of-type {\n    border-bottom-left-radius: var(--box-border-radius);\n  }\n\n  ${({ $cssVisible }) =>\n    $cssVisible &&\n    `\n    .ace_cursor {\n      display: none;\n    }\n  `}\n`;\n\nexport const Editable = styled(BaseEditable)`\n  max-width: 850px;\n  margin: auto;\n  padding-block: 4em;\n  padding-inline: var(--container-padding-inline-fluid);\n`;\n\nexport const Controls = styled.div`\n  position: sticky;\n  top: -80px;\n  z-index: 200;\n  background-color: var(--drawer-bg-color);\n  padding-top: 30px;\n`;\n\nexport const HTMLError = styled(InputError)`\n  margin-block-end: 20px;\n\n  > span {\n    margin: 0;\n  }\n`;\n","import React from \"react\";\nimport { ToolbarRTE, ToolbarHTML, ToggleBar } from \"./controls\";\nimport * as Styled from \"./styles\";\n\nexport default function EditorControls({\n  htmlMode,\n  cssVisible,\n  darkMode,\n  onClickEditorToggle,\n  onClickDarkModeToggle,\n  onClickRedo,\n  onClickUndo,\n  toggleStyles,\n  errors,\n  controlsRef\n}) {\n  return (\n    <Styled.Controls id=\"editor-controls\">\n      <ToggleBar\n        htmlMode={htmlMode}\n        darkMode={darkMode}\n        onClickEditorToggle={onClickEditorToggle}\n        onClickDarkModeToggle={onClickDarkModeToggle}\n      />\n      {!!errors.length && <Styled.HTMLError errors={errors} />}\n      {htmlMode ? (\n        <ToolbarHTML\n          onClickUndo={onClickUndo}\n          onClickRedo={onClickRedo}\n          toggleStyles={toggleStyles}\n          cssVisible={cssVisible}\n          controlsRef={controlsRef}\n        />\n      ) : (\n        <ToolbarRTE\n          onClickUndo={onClickUndo}\n          onClickRedo={onClickRedo}\n          darkMode={darkMode}\n        />\n      )}\n    </Styled.Controls>\n  );\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport classNames from \"classnames\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor as SlateEditor } from \"slate\";\nimport { withReact, ReactEditor, useSlate } from \"slate-react\";\nimport { HistoryEditor } from \"slate-history\";\nimport Leaf from \"./renderers/Leaf\";\nimport Element from \"./renderers/Element\";\nimport { captureHotKeys } from \"../hotkeys\";\nimport { serializeToHtml, serializeToSlate } from \"../serializers\";\nimport { clearSlate } from \"../utils/slate/general\";\nimport HtmlEditor from \"./HtmlEditor\";\nimport Controls from \"./EditorControls\";\nimport { formatHtml } from \"../utils/helpers\";\nimport * as Styled from \"./styles\";\n\nexport default function Editor({\n  localHtml,\n  localSlate,\n  setLocalHtml,\n  onChangeHtml,\n  setLocalSlate,\n  stylesheets,\n  hasErrors,\n  setHasErrors,\n  warnErrors,\n  setWarnErrors,\n  errors: formErrors = [],\n  nextRef,\n  htmlMode,\n  toggleHtmlMode\n}) {\n  const editor = useSlate();\n  const aceRef = useRef();\n  const controlsRef = useRef();\n\n  const [showCss, toggleCss] = useState(false);\n  const [darkMode, setDarkMode] = useState(true);\n\n  const { t } = useTranslation();\n\n  // Since the editor overflows the visible area and we scroll the whole drawer, we have to manually handle scroll when arrow keys are used to move the cursor out of view.\n  useEffect(() => {\n    const active = document.activeElement;\n    if (active?.id === \"content-editable\" && editor.selection && !htmlMode) {\n      const [node] = ReactEditor.toDOMPoint(editor, editor.selection.focus);\n      const rect = node.parentElement.getBoundingClientRect();\n      const buttons = document.getElementById(\"editor-button-overlay\");\n      const controls = document.getElementById(\"editor-controls\");\n      const buttonsRect = buttons.getBoundingClientRect();\n      const controlsRect = controls.getBoundingClientRect();\n      const isInView =\n        rect.bottom < buttonsRect.top && rect.y > controlsRect.bottom;\n      if (!isInView) {\n        node.parentElement.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n    }\n  }, [editor, editor.selection, htmlMode]);\n\n  const theme = stylesheets?.map(s => s?.attributes.styles).join(\"\\n\");\n\n  const renderElement = useCallback(\n    props => <Element {...props} theme={theme} darkMode={darkMode} />,\n    [theme, darkMode]\n  );\n\n  const renderLeaf = useCallback(props => <Leaf {...props} />, []);\n\n  const toggleEditorView = () => {\n    if (htmlMode) {\n      const json = serializeToSlate(localHtml);\n      setLocalSlate(json);\n      clearSlate(editor);\n      Transforms.insertNodes(editor, json);\n      Transforms.select(editor, {\n        anchor: SlateEditor.start(editor, [0]),\n        focus: SlateEditor.start(editor, [0])\n      });\n      return toggleHtmlMode(false);\n    }\n\n    const html = formatHtml(serializeToHtml(localSlate));\n    setLocalHtml(html);\n    toggleCss(false);\n    return toggleHtmlMode(true);\n  };\n\n  const onClickToggle = val => e => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (hasErrors) {\n      setWarnErrors(\"switch\");\n      return;\n    }\n    if (val && htmlMode) return;\n    if (!val && !htmlMode) return;\n    toggleEditorView();\n  };\n\n  const onValidateHtml = messages => {\n    const errorFound = messages.find(msg => msg.type === \"error\");\n    if (!errorFound) setWarnErrors(false);\n    setHasErrors(errorFound);\n  };\n\n  const htmlProps = {\n    onChange: onChangeHtml,\n    value: localHtml,\n    onValidate: onValidateHtml,\n    mode: \"html\",\n    aceRef,\n    nextRef,\n    prevRef: controlsRef,\n    darkMode\n  };\n\n  const cssProps = {\n    value: theme,\n    mode: \"css\",\n    readOnly: true,\n    onValidate: () => {},\n    aceRef,\n    nextRef,\n    prevRef: controlsRef,\n    darkMode\n  };\n\n  const codeAreaProps = showCss ? cssProps : htmlProps;\n\n  const toggleStyles = e => {\n    e.preventDefault();\n    toggleCss(!showCss);\n  };\n\n  const onClickUndo = e => {\n    e.preventDefault();\n    if (!htmlMode) return HistoryEditor.undo(editor);\n    aceRef.current.editor.undo();\n  };\n\n  const onClickRedo = e => {\n    e.preventDefault();\n    if (!htmlMode) return HistoryEditor.redo(editor);\n    aceRef.current.editor.redo();\n  };\n\n  const wrapperClasses = classNames(\n    \"manifold-text-section text-section font-size-2\",\n    {\n      \"scheme-dark\": darkMode,\n      \"scheme-light\": !darkMode\n    }\n  );\n\n  const onClickDarkModeToggle = val => e => {\n    e.preventDefault();\n    setDarkMode(val);\n  };\n\n  const errors = warnErrors\n    ? [\n        {\n          source: { pointer: \"/data/attributes/body\" },\n          detail: t(`errors.invalid_html_${warnErrors}`)\n        },\n        ...formErrors\n      ]\n    : [...formErrors];\n\n  return (\n    <>\n      <Controls\n        htmlMode={htmlMode}\n        darkMode={darkMode}\n        onClickEditorToggle={onClickToggle}\n        onClickDarkModeToggle={onClickDarkModeToggle}\n        onClickUndo={onClickUndo}\n        onClickRedo={onClickRedo}\n        toggleStyles={toggleStyles}\n        cssVisible={showCss}\n        errors={errors}\n        controlsRef={controlsRef}\n      />\n      <Styled.EditableWrapper className={wrapperClasses} $cssVisible={showCss}>\n        {!htmlMode && (\n          <Styled.Editable\n            id={\"content-editable\"}\n            as=\"div\"\n            renderElement={renderElement}\n            renderLeaf={renderLeaf}\n            placeholder={t(\"editor.elements.placeholder\")}\n            spellCheck={false}\n            onKeyDown={e => captureHotKeys(e, editor)}\n          />\n        )}\n        {htmlMode && <HtmlEditor {...codeAreaProps} />}\n      </Styled.EditableWrapper>\n      {theme && !htmlMode && (\n        <style\n          dangerouslySetInnerHTML={{\n            __html: `@layer stylesheets {${theme}}`\n          }}\n        />\n      )}\n    </>\n  );\n}\n\nEditor.displayName = \"Global.Forms.ContentEditor.Editor\";\n","import React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FieldWrapper from \"../../FieldWrapper\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Slate, withReact, ReactEditor } from \"slate-react\";\nimport { createEditor, Transforms } from \"slate\";\nimport { withHistory, HistoryEditor } from \"slate-history\";\nimport withPlugins from \"../plugins\";\nimport throttle from \"lodash/throttle\";\nimport { serializeToHtml, removeFormatting } from \"../serializers\";\nimport { clearSlate } from \"../utils/slate/general\";\nimport isEqual from \"lodash/isEqual\";\nimport Editor from \"./Editor\";\nimport { HtmlBreadcrumbsContext } from \"../contexts/htmlBreadcrumbsContext\";\nimport * as Styled from \"./styles\";\n\nexport default function EditorWrapper({\n  set: setFormValue,\n  stylesheets,\n  initialHtmlValue,\n  initialSlateValue,\n  hasErrors,\n  setHasErrors,\n  warnErrors,\n  setWarnErrors,\n  nextRef\n}) {\n  const editorRef = useRef();\n  if (!editorRef.current)\n    editorRef.current = withReact(withHistory(withPlugins(createEditor())));\n  const editor = editorRef.current;\n\n  const prevSlate = useRef(initialSlateValue);\n  const prevHtml = useRef(initialHtmlValue);\n\n  const [htmlMode, toggleHtmlMode] = useState(false);\n  const [selectedCrumb, setSelectedCrumb] = useState();\n  const [editingCrumb, setEditingCrumb] = useState(false);\n  const [localHtml, setLocalHtml] = useState(initialHtmlValue);\n  const [localSlate, setLocalSlate] = useState(initialSlateValue);\n\n  // The value prop on the Slate provider component is unhelpfully named. It is really initialSlateValue and is only read once, so it's easy for Slate to get out of sync when waiting for data from the api. This resets the editor each time the form model changes.\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!htmlMode && !isEqual(prevSlate.current, initialSlateValue)) {\n      clearSlate(editor);\n      Transforms.insertNodes(editor, initialSlateValue);\n      return;\n    }\n    if (!isEqual(prevHtml.current, initialHtmlValue)) {\n      setLocalHtml(initialHtmlValue);\n    }\n  }, [initialSlateValue, initialHtmlValue]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const setFormValueFromSlate = throttle(\n    val => setFormValue(serializeToHtml(val)),\n    500\n  );\n\n  const onChangeSlate = val => {\n    setLocalSlate(val);\n    const changes = editor?.history?.undos ?? [];\n    const shouldUpdateFormValue =\n      changes.length > 1 || changes[0]?.selectionBefore;\n    if (shouldUpdateFormValue) setFormValueFromSlate(val);\n  };\n\n  const setFormValueFromHtml = throttle(\n    val => setFormValue(removeFormatting(val)),\n    500\n  );\n\n  const onChangeHtml = val => {\n    setLocalHtml(val);\n    setFormValueFromHtml(val);\n  };\n\n  const handleError = ({ resetErrorBoundary }) => {\n    HistoryEditor.undo(editor);\n    resetErrorBoundary();\n    return null;\n  };\n\n  return (\n    <FieldWrapper className=\"wide\">\n      <Styled.EditorSecondary\n        className={hasErrors && warnErrors ? \"error\" : undefined}\n      >\n        <ErrorBoundary fallbackRender={handleError}>\n          <HtmlBreadcrumbsContext.Provider\n            value={{\n              selectedCrumb,\n              setSelectedCrumb,\n              editingCrumb,\n              setEditingCrumb\n            }}\n          >\n            <Slate editor={editor} value={localSlate} onChange={onChangeSlate}>\n              <Editor\n                localHtml={localHtml}\n                setLocalHtml={setLocalHtml}\n                onChangeHtml={onChangeHtml}\n                localSlate={localSlate}\n                setLocalSlate={setLocalSlate}\n                stylesheets={stylesheets}\n                htmlMode={htmlMode}\n                toggleHtmlMode={toggleHtmlMode}\n                hasErrors={hasErrors}\n                setHasErrors={setHasErrors}\n                warnErrors={warnErrors}\n                setWarnErrors={setWarnErrors}\n                nextRef={nextRef}\n              />\n            </Slate>\n          </HtmlBreadcrumbsContext.Provider>\n        </ErrorBoundary>\n      </Styled.EditorSecondary>\n    </FieldWrapper>\n  );\n}\n\nEditorWrapper.displayName = \"Global.Form.ContentEditor.Wrapper\";\n\nEditorWrapper.propTypes = {\n  set: PropTypes.func,\n  stylesheets: PropTypes.arrayOf(PropTypes.object),\n  sectionId: PropTypes.string,\n  sectionBody: PropTypes.string\n};\n"],"sourceRoot":""}