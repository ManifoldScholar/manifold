"use strict";(self.webpackChunkmanifold_client=self.webpackChunkmanifold_client||[]).push([[170],{19086:function(e){e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var t="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+r+"]*["+t+"]"),a=new RegExp("^[^"+t+"]*["+r+"]")},57746:function(e,t){for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)o["f"+i]=111+i;function s(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return l(e,t)})),a=function(e){return n.some((function(t){return d(t,e)}))};return null==r?a:a(r)}function l(e,t){var r=t&&t.byKey,i={},s=(e=e.replace("++","+add")).split("+"),l=s.length;for(var d in n)i[n[d]]=!1;var f=!0,h=!1,p=void 0;try{for(var v,g=s[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value,w=m.endsWith("?")&&m.length>1;w&&(m=m.slice(0,-1));var b=u(m),E=n[b];if(m.length>1&&!E&&!a[m]&&!o[b])throw new TypeError('Unknown modifier: "'+m+'"');1!==l&&E||(r?i.key=b:i.which=c(m)),E&&(i[E]=!w||null)}}catch(e){h=!0,p=e}finally{try{!f&&g.return&&g.return()}finally{if(h)throw p}}return i}function d(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function c(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=a[e]||e}t.v_=s},59184:function(e,t,r){r.d(t,{$k:function(){return c},KJ:function(){return d}});var n=r(58270),a=r(45594),o={isHistory(e){return(0,n.Q)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||a.I.isOperationList(e.redos[0].operations))&&(0===e.undos.length||a.I.isOperationList(e.undos[0].operations))}},i=(new WeakMap,new WeakMap),s=new WeakMap,l=new WeakMap,d={isHistoryEditor(e){return o.isHistory(e.history)&&a.KE.isEditor(e)},isMerging(e){return s.get(e)},isSplittingOnce(e){return l.get(e)},setSplittingOnce(e,t){l.set(e,t)},isSaving(e){return i.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,t){var r=d.isMerging(e);s.set(e,!0),t(),s.set(e,r)},withNewBatch(e,t){var r=d.isMerging(e);s.set(e,!0),l.set(e,!0),t(),s.set(e,r),l.delete(e)},withoutMerging(e,t){var r=d.isMerging(e);s.set(e,!1),t(),s.set(e,r)},withoutSaving(e,t){var r=d.isSaving(e);i.set(e,!1);try{t()}finally{i.set(e,r)}}},c=e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];n.selectionBefore&&a.gB.setSelection(t,n.selectionBefore),d.withoutSaving(t,(()=>{a.KE.withoutNormalizing(t,(()=>{for(var e of n.operations)t.apply(e)}))})),e.redos.pop(),t.writeHistory("undos",n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];d.withoutSaving(t,(()=>{a.KE.withoutNormalizing(t,(()=>{var e=n.operations.map(a.I.inverse).reverse();for(var r of e)t.apply(r);n.selectionBefore&&a.gB.setSelection(t,n.selectionBefore)}))})),t.writeHistory("redos",n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:a}=t,{undos:o}=a,i=o[o.length-1],s=i&&i.operations[i.operations.length-1],l=d.isSaving(t),c=d.isMerging(t);if(null==l&&(l=f(e)),l){if(null==c&&(c=null!=i&&(0!==n.length||u(e,s))),d.isSplittingOnce(t)&&(c=!1,d.setSplittingOnce(t,void 0)),i&&c)i.operations.push(e);else{var h={operations:[e],selectionBefore:t.selection};t.writeHistory("undos",h)}for(;o.length>100;)o.shift();a.redos=[]}r(e)},t.writeHistory=(e,r)=>{t.history[e].push(r)},t},u=(e,t)=>!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!a.wA.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!a.wA.equals(e.path,t.path)),f=(e,t)=>"set_selection"!==e.type},92061:function(e,t,r){r.d(t,{Fo:function(){return Ar},rL:function(){return zt},A:function(){return Gr},zL:function(){return _r},f7:function(){return Er},Zi:function(){return Cr},nn:function(){return Jr},RV:function(){return It},o$:function(){return Zr}});var n=r(19086),a=r.n(n),o=r(38221),i=r.n(o),s=r(7350),l=r.n(s),d=r(96540);const c=e=>"object"==typeof e&&null!=e&&1===e.nodeType,u=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,f=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const r=getComputedStyle(e,null);return u(r.overflowY,t)||u(r.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},h=(e,t,r,n,a,o,i,s)=>o<e&&i>t||o>e&&i<t?0:o<=e&&s<=r||i>=t&&s>=r?o-e-n:i>t&&s<r||o<e&&s>r?i-t+a:0,p=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},v=(e,t)=>{var r,n,a,o;if("undefined"==typeof document)return[];const{scrollMode:i,block:s,inline:l,boundary:d,skipOverflowHiddenElements:u}=t,v="function"==typeof d?d:e=>e!==d;if(!c(e))throw new TypeError("Invalid target");const g=document.scrollingElement||document.documentElement,m=[];let w=e;for(;c(w)&&v(w);){if(w=p(w),w===g){m.push(w);break}null!=w&&w===document.body&&f(w)&&!f(document.documentElement)||null!=w&&f(w,u)&&m.push(w)}const b=null!=(n=null==(r=window.visualViewport)?void 0:r.width)?n:innerWidth,E=null!=(o=null==(a=window.visualViewport)?void 0:a.height)?o:innerHeight,{scrollX:y,scrollY:x}=window,{height:O,width:k,top:C,right:S,bottom:D,left:T}=e.getBoundingClientRect(),{top:B,right:P,bottom:M,left:R}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let K="start"===s||"nearest"===s?C-B:"end"===s?D+M:C+O/2-B+M,F="center"===l?T+k/2-R+P:"end"===l?S+P:T-R;const A=[];for(let e=0;e<m.length;e++){const t=m[e],{height:r,width:n,top:a,right:o,bottom:d,left:c}=t.getBoundingClientRect();if("if-needed"===i&&C>=0&&T>=0&&D<=E&&S<=b&&(t===g&&!f(t)||C>=a&&D<=d&&T>=c&&S<=o))return A;const u=getComputedStyle(t),p=parseInt(u.borderLeftWidth,10),v=parseInt(u.borderTopWidth,10),w=parseInt(u.borderRightWidth,10),B=parseInt(u.borderBottomWidth,10);let P=0,M=0;const R="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-w:0,L="offsetHeight"in t?t.offsetHeight-t.clientHeight-v-B:0,N="offsetWidth"in t?0===t.offsetWidth?0:n/t.offsetWidth:0,j="offsetHeight"in t?0===t.offsetHeight?0:r/t.offsetHeight:0;if(g===t)P="start"===s?K:"end"===s?K-E:"nearest"===s?h(x,x+E,E,v,B,x+K,x+K+O,O):K-E/2,M="start"===l?F:"center"===l?F-b/2:"end"===l?F-b:h(y,y+b,b,p,w,y+F,y+F+k,k),P=Math.max(0,P+x),M=Math.max(0,M+y);else{P="start"===s?K-a-v:"end"===s?K-d+B+L:"nearest"===s?h(a,d,r,v,B+L,K,K+O,O):K-(a+r/2)+L/2,M="start"===l?F-c-p:"center"===l?F-(c+n/2)+R/2:"end"===l?F-o+w+R:h(c,o,n,p,w+R,F,F+k,k);const{scrollLeft:e,scrollTop:i}=t;P=0===j?0:Math.max(0,Math.min(i+P/j,t.scrollHeight-r/j+L)),M=0===N?0:Math.max(0,Math.min(e+M/N,t.scrollWidth-n/N+R)),K+=i-P,F+=e-M}A.push({el:t,top:P,left:M})}return A};function g(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const r=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(v(e,t));const n="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:a,top:o,left:i}of v(e,(e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"})(t))){const e=o-r.top+r.bottom,t=i-r.left+r.right;a.scroll({top:e,left:t,behavior:n})}}var m,w,b=r(45594),E=r(57746),y=globalThis.Node,x=(globalThis.Element,globalThis.Text),O=(globalThis.Range,globalThis.Selection,globalThis.StaticRange,e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null),k=e=>C(e)&&1===e.nodeType,C=e=>{var t=O(e);return!!t&&e instanceof t.Node},S=e=>{var t=e&&e.anchorNode&&O(e.anchorNode);return!!t&&e instanceof t.Selection},D=e=>C(e)&&3===e.nodeType,T=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],i=t,s=!1,l=!1;(C(n=o)&&8===n.nodeType||k(o)&&0===o.childNodes.length||k(o)&&"false"===o.getAttribute("contenteditable"))&&(!s||!l);)i>=a.length?(s=!0,i=t-1,r="backward"):i<0?(l=!0,i=t+1,r="forward"):(o=a[i],t=i,i+="forward"===r?1:-1);return[o,t]},B=(e,t,r)=>{var[n]=T(e,t,r);return n},P=e=>{var t="";if(D(e)&&e.nodeValue)return e.nodeValue;if(k(e)){for(var r of Array.from(e.childNodes))t+=P(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},M=/data-slate-fragment="(.+?)"/m,R=e=>null!=e.getSelection?e.getSelection():document.getSelection(),K=(e,t,r)=>{var{target:n}=t;if(k(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=ke.getWindow(e);if(a.contains(n))return ke.hasDOMNode(e,n,{editable:!0});var o=r.find((e=>{var{addedNodes:t,removedNodes:r}=e;for(var a of t)if(a===n||a.contains(n))return!0;for(var o of r)if(o===n||o.contains(n))return!0}));return!(!o||o===t)&&K(e,o,r)},F=(e,t)=>Boolean(e.compareDocumentPosition(t)&y.DOCUMENT_POSITION_PRECEDING),A="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,L="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),N="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),j="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),W="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),I="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),z="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),H="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Q=N&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),_="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),q="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),U="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),V=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement);"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&null!==(m=navigator.userAgent.match(/Version\/(\d+)/))&&void 0!==m&&m[1]&&parseInt(null===(w=navigator.userAgent.match(/Version\/(\d+)/))||void 0===w?void 0:w[1],10);var Y=(!H||!Q)&&!I&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges;function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function G(e){var t=function(e,t){if("object"!==X(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===X(t)?t:String(t)}function J(e,t,r){return(t=G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=0;class Z{constructor(){J(this,"id",void 0),this.id="".concat($++)}}var ee=new WeakMap,te=new WeakMap,re=new WeakMap,ne=new WeakMap,ae=new WeakMap,oe=new WeakMap,ie=new WeakMap,se=new WeakMap,le=new WeakMap,de=new WeakMap,ce=new WeakMap,ue=new WeakMap,fe=new WeakMap,he=new WeakMap,pe=new WeakMap,ve=new WeakMap,ge=new WeakMap,me=new WeakMap,we=new WeakMap,be=new WeakMap,Ee=new WeakMap,ye=new WeakMap,xe=Symbol("placeholder"),Oe=Symbol("mark-placeholder"),ke={androidPendingDiffs:e=>we.get(e),androidScheduleFlush:e=>{var t;null===(t=ve.get(e))||void 0===t||t()},blur:e=>{var t=ke.toDOMNode(e,e),r=ke.findDocumentOrShadowRoot(e);ue.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=ke.findDocumentOrShadowRoot(e),n=R(r);n&&n.rangeCount>0&&n.removeAllRanges(),t&&b.gB.deselect(e)},findDocumentOrShadowRoot:e=>{var t=ke.toDOMNode(e,e),r=t.getRootNode();return r instanceof Document||r instanceof ShadowRoot?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o,i=ke.toSlateNode(e,t.target),s=ke.findPath(e,i);if(b.Hg.isElement(i)&&b.KE.isVoid(e,i)){var l=a.getBoundingClientRect(),d=e.isInline(i)?r-l.left<l.left+l.width-r:n-l.top<l.top+l.height-n,c=b.KE.point(e,s,{edge:d?"start":"end"}),u=d?b.KE.before(e,c):b.KE.after(e,c);if(u)return b.KE.range(e,u)}var{document:f}=ke.getWindow(e);if(f.caretRangeFromPoint)o=f.caretRangeFromPoint(r,n);else{var h=f.caretPositionFromPoint(r,n);h&&((o=f.createRange()).setStart(h.offsetNode,h.offset),o.setEnd(h.offsetNode,h.offset))}if(!o)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return ke.toSlateRange(e,o,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=le.get(t);return r||(r=new Z,le.set(t,r)),r},findPath:(e,t)=>{for(var r=[],n=t;;){var a=re.get(n);if(null==a){if(b.KE.isEditor(n))return r;break}var o=te.get(n);if(null==o)break;r.unshift(o),n=a}throw new Error("Unable to find the path for Slate node: ".concat(b.h6.stringify(t)))},focus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!ue.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0)setTimeout((()=>{ke.focus(e,{retries:t.retries-1})}),10);else{var r=ke.toDOMNode(e,e),n=ke.findDocumentOrShadowRoot(e);if(n.activeElement!==r){if(e.selection&&n instanceof Document){var a=R(n),o=ke.toDOMRange(e,e.selection);null==a||a.removeAllRanges(),null==a||a.addRange(o)}e.selection||b.gB.select(e,b.KE.start(e,[])),ue.set(e,!0),r.focus({preventScroll:!0})}}}},getWindow:e=>{var t=ne.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=ke.toDOMNode(e,e);try{r=k(t)?t:t.parentElement}catch(e){if(e instanceof Error&&!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&!(r.closest("[data-slate-editor]")!==o||a&&!r.isContentEditable&&("boolean"!=typeof r.isContentEditable||r.closest('[contenteditable="false"]')!==o)&&!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>C(t)&&ke.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:n}=t;return b.KE.hasPath(e,r.path)&&b.KE.hasPath(e,n.path)},hasSelectableTarget:(e,t)=>ke.hasEditableTarget(e,t)||ke.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>C(t)&&ke.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!fe.get(e),isFocused:e=>!!ue.get(e),isReadOnly:e=>!!ce.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(ce.get(e))return!1;var r=ke.hasTarget(e,t)&&ke.toSlateNode(e,t);return b.Hg.isElement(r)&&b.KE.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=de.get(e),n=b.KE.isEditor(t)?ae.get(e):null==r?void 0:r.get(ke.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(b.h6.stringify(t)));return n},toDOMPoint:(e,t)=>{var r,[n]=b.KE.node(e,t.path),a=ke.toDOMNode(e,n);b.KE.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0,s=0;s<o.length;s++){var l=o[s],d=l.childNodes[0];if(null!=d&&null!=d.textContent){var{length:c}=d.textContent,u=l.getAttribute("data-slate-length"),f=i+(null==u?c:parseInt(u,10)),h=o[s+1];if(t.offset===f&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var p,v=h.childNodes[0];r=[v instanceof x?v:h,null!==(p=h.textContent)&&void 0!==p&&p.startsWith("\ufeff")?1:0];break}if(t.offset<=f){r=[d,Math.min(c,Math.max(0,t.offset-i))];break}i=f}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(b.h6.stringify(t)));return r},toDOMRange:(e,t)=>{var{anchor:r,focus:n}=t,a=b.Q6.isBackward(t),o=ke.toDOMPoint(e,r),i=b.Q6.isCollapsed(t)?o:ke.toDOMPoint(e,n),s=ke.getWindow(e).document.createRange(),[l,d]=a?i:o,[c,u]=a?o:i,f=!!(k(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),h=!!(k(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,f?1:d),s.setEnd(c,h?1:u),s},toSlateNode:(e,t)=>{var r=k(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?ie.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(e,t,r)=>{var{exactMatch:n,suppressThrow:a,searchDirection:o="backward"}=r,[i,s]=n?t:(e=>{var[t,r]=e;if(k(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=T(t,a,n?"backward":"forward"),n=a<r;k(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=B(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),l=i.parentNode,d=null,c=0;if(l){var u,f,h=ke.toDOMNode(e,e),p=l.closest('[data-slate-void="true"]'),v=p&&h.contains(p)?p:null,g=l.closest('[contenteditable="false"]'),m=g&&h.contains(g)?g:null,w=l.closest("[data-slate-leaf]"),E=null;if(w){if(d=w.closest('[data-slate-node="text"]')){var x=ke.getWindow(e).document.createRange();x.setStart(d,0),x.setEnd(i,s);var O=x.cloneContents();[...Array.prototype.slice.call(O.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(O.querySelectorAll("[contenteditable=false]"))].forEach((e=>{N&&!n&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?e.textContent.startsWith("\ufeff")&&(e.textContent=e.textContent.slice(1)):e.parentNode.removeChild(e)})),c=O.textContent.length,E=d}}else if(v){for(var C=v.querySelectorAll("[data-slate-leaf]"),S=0;S<C.length;S++){var D=C[S];if(ke.hasDOMNode(e,D)){w=D;break}}w?(d=w.closest('[data-slate-node="text"]'),c=(E=w).textContent.length,E.querySelectorAll("[data-slate-zero-width]").forEach((e=>{c-=e.textContent.length}))):c=1}else if(m){var P,M,R=e=>e?e.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],K=m.closest('[data-slate-node="element"]');if("forward"===o)w=null!==(P=[...R(K),...R(null==K?void 0:K.nextElementSibling)].find((e=>((e,t)=>Boolean(e.compareDocumentPosition(t)&y.DOCUMENT_POSITION_FOLLOWING))(m,e))))&&void 0!==P?P:null;else w=null!==(M=[...R(null==K?void 0:K.previousElementSibling),...R(K)].findLast((e=>F(m,e))))&&void 0!==M?M:null;w&&(d=w.closest('[data-slate-node="text"]'),E=w,"forward"===o?c=0:(c=E.textContent.length,E.querySelectorAll("[data-slate-zero-width]").forEach((e=>{c-=e.textContent.length}))))}E&&c===E.textContent.length&&N&&"z"===E.getAttribute("data-slate-zero-width")&&null!==(u=E.textContent)&&void 0!==u&&u.startsWith("\ufeff")&&(l.hasAttribute("data-slate-zero-width")||j&&null!==(f=E.textContent)&&void 0!==f&&f.endsWith("\n\n"))&&c--}if(N&&!d&&!n){var A=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(A&&ke.hasDOMNode(e,A,{editable:!0})){var L=ke.toSlateNode(e,A),{path:W,offset:I}=b.KE.start(e,ke.findPath(e,L));return A.querySelector("[data-slate-leaf]")||(I=s),{path:W,offset:I}}}if(!d){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var z=ke.toSlateNode(e,d);return{path:ke.findPath(e,z),offset:c}},toSlateRange:(e,t,r)=>{var n,a,o,i,s,l,{exactMatch:d,suppressThrow:c}=r;if(S(t)?t.anchorNode:t.startContainer)if(S(t)){if(j&&t.rangeCount>1){i=t.focusNode;var u=t.getRangeAt(0),f=t.getRangeAt(t.rangeCount-1);if(i instanceof HTMLTableRowElement&&u.startContainer instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement){function x(e){return e.childElementCount>0?x(e.children[0]):e}var h=u.startContainer,p=f.startContainer,v=x(h.children[u.startOffset]),g=x(p.children[f.startOffset]);s=0,a=g.childNodes.length>0?g.childNodes[0]:g,i=v.childNodes.length>0?v.childNodes[0]:v,o=g instanceof HTMLElement?g.innerHTML.length:0}else u.startContainer===i?(a=f.endContainer,o=f.endOffset,s=u.startOffset):(a=u.startContainer,o=u.endOffset,s=f.startOffset)}else a=t.anchorNode,o=t.anchorOffset,i=t.focusNode,s=t.focusOffset;l=z&&(e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1})(a)||j?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else a=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,l=t.collapsed;if(null==a||null==i||null==o||null==s)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));j&&null!==(n=i.textContent)&&void 0!==n&&n.endsWith("\n\n")&&s===i.textContent.length&&s--;var m=ke.toSlatePoint(e,[a,o],{exactMatch:d,suppressThrow:c});if(!m)return null;var w=F(a,i)||a===i&&s<o,E=l?m:ke.toSlatePoint(e,[i,s],{exactMatch:d,suppressThrow:c,searchDirection:w?"forward":"backward"});if(!E)return null;var y={anchor:m,focus:E};return b.Q6.isExpanded(y)&&b.Q6.isForward(y)&&k(i)&&b.KE.void(e,{at:y.focus,mode:"highest"})&&(y=b.KE.unhangRange(e,y,{voids:!0})),y}};function Ce(e,t){var{path:r,diff:n}=t;if(!b.KE.hasPath(e,r))return!1;var a=b.bP.get(e,r);if(!b.EY.isText(a))return!1;if(n.start!==a.text.length||0===n.text.length)return a.text.slice(n.start,n.start+n.text.length)===n.text;var o=b.wA.next(r);if(!b.KE.hasPath(e,o))return!1;var i=b.bP.get(e,o);return b.EY.isText(i)&&i.text.startsWith(n.text)}function Se(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce(((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end)),e)}function De(e,t){var{start:r,end:n,text:a}=t,o=e.slice(r,n),i=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}(o,a),s=function(e,t,r){for(var n=Math.min(e.length,t.length,r),a=0;a<n;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return n}(o,a,Math.min(o.length-i,a.length-i)),l={start:r+i,end:n-s,text:a.slice(i,a.length-s)};return l.start===l.end&&0===l.text.length?null:l}function Te(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}function Be(e,t){var{path:r,offset:n}=t;if(!b.KE.hasPath(e,r))return null;var a=b.bP.get(e,r);if(!b.EY.isText(a))return null;var o=b.KE.above(e,{match:t=>b.Hg.isElement(t)&&b.KE.isBlock(e,t),at:r});if(!o)return null;for(;n>a.text.length;){var i=b.KE.next(e,{at:r,match:b.EY.isText});if(!i||!b.wA.isDescendant(i[1],o[1]))return null;n-=a.text.length,a=i[0],r=i[1]}return{path:r,offset:n}}function Pe(e,t){var r=Be(e,t.anchor);if(!r)return null;if(b.Q6.isCollapsed(t))return{anchor:r,focus:r};var n=Be(e,t.focus);return n?{anchor:r,focus:n}:null}function Me(e,t,r){var n=we.get(e),a=null==n?void 0:n.find((e=>{var{path:r}=e;return b.wA.equals(r,t.path)}));if(!a||t.offset<=a.diff.start)return b.bR.transform(t,r,{affinity:"backward"});var{diff:o}=a;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},s=b.bR.transform(i,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-o.start}:null}var l={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=b.bR.transform(l,r,{affinity:"backward"});return d?"split_node"===r.type&&b.wA.equals(r.path,t.path)&&l.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function Re(e,t,r){var n=Me(e,t.anchor,r);if(!n)return null;if(b.Q6.isCollapsed(t))return{anchor:n,focus:n};var a=Me(e,t.focus,r);return a?{anchor:n,focus:a}:null}var Ke=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},Fe=(e,t,r)=>{var n=ke.toDOMRange(e,t).getBoundingClientRect(),a=ke.toDOMRange(e,r).getBoundingClientRect();return Ke(n,a)&&Ke(a,n)};function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{apply:n,onChange:a,deleteBackward:o,addMark:i,removeMark:s}=r;return de.set(r,new WeakMap),r.addMark=(e,t)=>{var n,a;null===(n=ve.get(r))||void 0===n||n(),!ge.get(r)&&null!==(a=we.get(r))&&void 0!==a&&a.length&&ge.set(r,null),me.delete(r),i(e,t)},r.removeMark=e=>{var t;!ge.get(r)&&null!==(t=we.get(r))&&void 0!==t&&t.length&&ge.set(r,null),me.delete(r),s(e)},r.deleteBackward=e=>{if("line"!==e)return o(e);if(r.selection&&b.Q6.isCollapsed(r.selection)){var t=b.KE.above(r,{match:e=>b.Hg.isElement(e)&&b.KE.isBlock(r,e),at:r.selection});if(t){var[,n]=t,a=b.KE.range(r,n,r.selection.anchor),i=((e,t)=>{var r=b.KE.range(e,b.Q6.end(t)),n=Array.from(b.KE.positions(e,{at:t})),a=0,o=n.length,i=Math.floor(o/2);if(Fe(e,b.KE.range(e,n[a]),r))return b.KE.range(e,n[a],r);if(n.length<2)return b.KE.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)Fe(e,b.KE.range(e,n[i]),r)?o=i:a=i,i=Math.floor((a+o)/2);return b.KE.range(e,n[a],r)})(r,a);b.Q6.isCollapsed(i)||b.gB.delete(r,{at:i})}}},r.apply=t=>{var a=[],o=[],i=we.get(r);if(null!=i&&i.length){var s=i.map((e=>function(e,t){var{path:r,diff:n,id:a}=e;switch(t.type){case"insert_text":return!b.wA.equals(t.path,r)||t.offset>=n.end?e:t.offset<=n.start?{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:a,path:r};case"remove_text":return!b.wA.equals(t.path,r)||t.offset>=n.end?e:t.offset+t.text.length<=n.start?{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:a,path:r};case"split_node":return!b.wA.equals(t.path,r)||t.position>=n.end?{diff:n,id:a,path:b.wA.transform(r,t,{affinity:"backward"})}:t.position>n.start?{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:a,path:r}:{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:a,path:b.wA.transform(r,t,{affinity:"forward"})};case"merge_node":return b.wA.equals(t.path,r)?{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:a,path:b.wA.transform(r,t)}:{diff:n,id:a,path:b.wA.transform(r,t)}}var o=b.wA.transform(r,t);return o?{diff:n,path:o,id:a}:null}(e,t))).filter(Boolean);we.set(r,s)}var l=Ee.get(r);l&&Ee.set(r,Re(r,l,t));var d=be.get(r);if(null!=d&&d.at){var c=b.bR.isPoint(null==d?void 0:d.at)?Me(r,d.at,t):Re(r,d.at,t);be.set(r,c?Le(Le({},d),{},{at:c}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":a.push(...je(r,t.path));break;case"set_selection":var u;null===(u=he.get(r))||void 0===u||u.unref(),he.delete(r);break;case"insert_node":case"remove_node":a.push(...je(r,b.wA.parent(t.path)));break;case"merge_node":var f=b.wA.previous(t.path);a.push(...je(r,f));break;case"move_node":var h,p=b.wA.common(b.wA.parent(t.path),b.wA.parent(t.newPath));a.push(...je(r,p)),b.wA.isBefore(t.path,t.newPath)?(a.push(...je(r,b.wA.parent(t.path))),h=t.newPath):(a.push(...je(r,b.wA.parent(t.newPath))),h=t.path);var v=b.bP.get(e,b.wA.parent(h)),g=ke.findKey(r,v),m=b.KE.pathRef(r,b.wA.parent(h));o.push([m,g])}switch(n(t),t.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":ee.set(r,!0)}for(var[w,E]of a){var[y]=b.KE.node(r,w);le.set(y,E)}for(var[x,O]of o){if(x.current){var[k]=b.KE.node(r,x.current);le.set(k,O)}x.unref()}},r.setFragmentData=e=>{var{selection:n}=r;if(n){var[a,o]=b.Q6.edges(n),i=b.KE.void(r,{at:a.path}),s=b.KE.void(r,{at:o.path});if(!b.Q6.isCollapsed(n)||i){var l=ke.toDOMRange(r,n),d=l.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),s){var[u]=s,f=l.cloneRange(),h=ke.toDOMNode(r,u);f.setEndAfter(h),d=f.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),D(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),d.appendChild(p),c=p}var v=r.getFragment(),g=JSON.stringify(v),m=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",m),e.setData("application/".concat(t),m);var w=d.ownerDocument.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(w),e.setData("text/html",w.innerHTML),e.setData("text/plain",P(w)),d.ownerDocument.body.removeChild(w),e}}},r.insertData=e=>{r.insertFragmentData(e)||r.insertTextData(e)},r.insertFragmentData=e=>{var n=e.getData("application/".concat(t))||(e=>{var t=e.getData("text/html"),[,r]=t.match(M)||[];return r})(e);if(n){var a=decodeURIComponent(window.atob(n)),o=JSON.parse(a);return r.insertFragment(o),!0}return!1},r.insertTextData=e=>{var t=e.getData("text/plain");if(t){var n=t.split(/\r\n|\r|\n/),a=!1;for(var o of n)a&&b.gB.splitNodes(r,{always:!0}),r.insertText(o),a=!0;return!0}return!1},r.onChange=e=>{var t=pe.get(r);t&&t(e),a(e)},r},je=(e,t)=>{var r=[];for(var[n,a]of b.KE.levels(e,{at:t})){var o=ke.findKey(e,n);r.push([a,o])}return r},We={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Ie={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ze={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},He=e=>{var t=We[e],r=Ie[e],n=ze[e],a=t&&(0,E.v_)(t),o=r&&(0,E.v_)(r),i=n&&(0,E.v_)(n);return e=>!(!a||!a(e))||(!!(L&&o&&o(e))||!(L||!i||!i(e)))},Qe={isBold:He("bold"),isCompose:He("compose"),isMoveBackward:He("moveBackward"),isMoveForward:He("moveForward"),isDeleteBackward:He("deleteBackward"),isDeleteForward:He("deleteForward"),isDeleteLineBackward:He("deleteLineBackward"),isDeleteLineForward:He("deleteLineForward"),isDeleteWordBackward:He("deleteWordBackward"),isDeleteWordForward:He("deleteWordForward"),isExtendBackward:He("extendBackward"),isExtendForward:He("extendForward"),isExtendLineBackward:He("extendLineBackward"),isExtendLineForward:He("extendLineForward"),isItalic:He("italic"),isMoveLineBackward:He("moveLineBackward"),isMoveLineForward:He("moveLineForward"),isMoveWordBackward:He("moveWordBackward"),isMoveWordForward:He("moveWordForward"),isRedo:He("redo"),isSoftBreak:He("insertSoftBreak"),isSplitBlock:He("splitBlock"),isTransposeCharacter:He("transposeCharacter"),isUndo:He("undo")};function _e(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var qe,Ue=["anchor","focus"],Ve=["anchor","focus"],Ye=(e,t)=>{var r,n,a=_e(e,Ue),o=_e(t,Ve);return e[xe]===t[xe]&&(r=a,n=o,Object.keys(r).length===Object.keys(n).length&&Object.keys(r).every((e=>n.hasOwnProperty(e)&&r[e]===n[e])))},Xe=[],Ge="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(qe||(qe={}));var Je,$e=function(e){return Object.freeze(e)},Ze=function(e,t){this.inlineSize=e,this.blockSize=t,$e(this)},et=function(){function e(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,$e(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),tt=function(e){return e instanceof SVGElement&&"getBBox"in e},rt=function(e){if(tt(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var a=e,o=a.offsetWidth,i=a.offsetHeight;return!(o||i||e.getClientRects().length)},nt=function(e){var t;if(e instanceof Element)return!0;var r=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},at="undefined"!=typeof window?window:{},ot=new WeakMap,it=/auto|scroll/,st=/^tb|vertical/,lt=/msie|trident/i.test(at.navigator&&at.navigator.userAgent),dt=function(e){return parseFloat(e||"0")},ct=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=!1),new Ze((r?t:e)||0,(r?e:t)||0)},ut=$e({devicePixelContentBoxSize:ct(),borderBoxSize:ct(),contentBoxSize:ct(),contentRect:new et(0,0,0,0)}),ft=function(e,t){if(void 0===t&&(t=!1),ot.has(e)&&!t)return ot.get(e);if(rt(e))return ot.set(e,ut),ut;var r=getComputedStyle(e),n=tt(e)&&e.ownerSVGElement&&e.getBBox(),a=!lt&&"border-box"===r.boxSizing,o=st.test(r.writingMode||""),i=!n&&it.test(r.overflowY||""),s=!n&&it.test(r.overflowX||""),l=n?0:dt(r.paddingTop),d=n?0:dt(r.paddingRight),c=n?0:dt(r.paddingBottom),u=n?0:dt(r.paddingLeft),f=n?0:dt(r.borderTopWidth),h=n?0:dt(r.borderRightWidth),p=n?0:dt(r.borderBottomWidth),v=u+d,g=l+c,m=(n?0:dt(r.borderLeftWidth))+h,w=f+p,b=s?e.offsetHeight-w-e.clientHeight:0,E=i?e.offsetWidth-m-e.clientWidth:0,y=a?v+m:0,x=a?g+w:0,O=n?n.width:dt(r.width)-y-E,k=n?n.height:dt(r.height)-x-b,C=O+v+E+m,S=k+g+b+w,D=$e({devicePixelContentBoxSize:ct(Math.round(O*devicePixelRatio),Math.round(k*devicePixelRatio),o),borderBoxSize:ct(C,S,o),contentBoxSize:ct(O,k,o),contentRect:new et(u,l,O,k)});return ot.set(e,D),D},ht=function(e,t,r){var n=ft(e,r),a=n.borderBoxSize,o=n.contentBoxSize,i=n.devicePixelContentBoxSize;switch(t){case qe.DEVICE_PIXEL_CONTENT_BOX:return i;case qe.BORDER_BOX:return a;default:return o}},pt=function(e){var t=ft(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=$e([t.borderBoxSize]),this.contentBoxSize=$e([t.contentBoxSize]),this.devicePixelContentBoxSize=$e([t.devicePixelContentBoxSize])},vt=function(e){if(rt(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},gt=function(){var e=1/0,t=[];Xe.forEach((function(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach((function(t){var r=new pt(t.target),a=vt(t.target);n.push(r),t.lastReportedSize=ht(t.target,t.observedBox),a<e&&(e=a)})),t.push((function(){r.callback.call(r.observer,n,r.observer)})),r.activeTargets.splice(0,r.activeTargets.length)}}));for(var r=0,n=t;r<n.length;r++){(0,n[r])()}return e},mt=function(e){Xe.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(r){r.isActive()&&(vt(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r))}))}))},wt=function(){var e,t=0;for(mt(t);Xe.some((function(e){return e.activeTargets.length>0}));)t=gt(),mt(t);return Xe.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:Ge}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=Ge),window.dispatchEvent(e)),t>0},bt=[],Et=function(e){if(!Je){var t=0,r=document.createTextNode("");new MutationObserver((function(){return bt.splice(0).forEach((function(e){return e()}))})).observe(r,{characterData:!0}),Je=function(){r.textContent="".concat(t?t--:t++)}}bt.push(e),Je()},yt=0,xt={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ot=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],kt=function(e){return void 0===e&&(e=0),Date.now()+e},Ct=!1,St=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Ct){Ct=!0;var r,n=kt(e);r=function(){var r=!1;try{r=wt()}finally{if(Ct=!1,e=n-kt(),!yt)return;r?t.run(1e3):e>0?t.run(e):t.start()}},Et((function(){requestAnimationFrame(r)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,xt)};document.body?t():at.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ot.forEach((function(t){return at.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Ot.forEach((function(t){return at.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),Dt=function(e){!yt&&e>0&&St.start(),!(yt+=e)&&St.stop()},Tt=function(){function e(e,t){this.target=e,this.observedBox=t||qe.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=ht(this.target,this.observedBox,!0);return e=this.target,tt(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Bt=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},Pt=new WeakMap,Mt=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},Rt=function(){function e(){}return e.connect=function(e,t){var r=new Bt(e,t);Pt.set(e,r)},e.observe=function(e,t,r){var n=Pt.get(e),a=0===n.observationTargets.length;Mt(n.observationTargets,t)<0&&(a&&Xe.push(n),n.observationTargets.push(new Tt(t,r&&r.box)),Dt(1),St.schedule())},e.unobserve=function(e,t){var r=Pt.get(e),n=Mt(r.observationTargets,t),a=1===r.observationTargets.length;n>=0&&(a&&Xe.splice(Xe.indexOf(r),1),r.observationTargets.splice(n,1),Dt(-1))},e.disconnect=function(e){var t=this,r=Pt.get(e);r.observationTargets.slice().forEach((function(r){return t.unobserve(e,r.target)})),r.activeTargets.splice(0,r.activeTargets.length)},e}(),Kt=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Rt.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nt(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Rt.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!nt(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Rt.unobserve(this,e)},e.prototype.disconnect=function(){Rt.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),Ft=r(40961);function At(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Nt(e){var t=function(e,t){if("object"!==Lt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Lt(t)?t:String(t)}function jt(e,t,r){return(t=Nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wt=(0,d.createContext)(null),It=()=>{var e=(0,d.useContext)(Wt);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},zt=ke;function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _t(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,o=null,i=null,s=null,l=0,d=!1,c=()=>{var e=Ee.get(t);if(Ee.delete(t),e){var{selection:r}=t,n=Pe(t,e);!n||r&&b.Q6.equals(n,r)||b.gB.select(t,n)}},u=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),g()||v()){a||(a=!0,setTimeout((()=>a=!1))),v()&&(a="action");var e=t.selection&&b.KE.rangeRef(t,t.selection,{affinity:"forward"});me.set(t,t.marks),be.get(t),we.get(t);for(var o,l=g();o=null===(u=we.get(t))||void 0===u?void 0:u[0];){var u,f,h=ge.get(t);void 0!==h&&(ge.delete(t),t.marks=h),h&&!1===d&&(d=null);var p=Te(o);t.selection&&b.Q6.equals(t.selection,p)||b.gB.select(t,p),o.diff.text?b.KE.insertText(t,o.diff.text):b.KE.deleteFragment(t),we.set(t,null===(f=we.get(t))||void 0===f?void 0:f.filter((e=>{var{id:t}=e;return t!==o.id}))),Ce(t,o)||(l=!1,be.delete(t),me.delete(t),a="action",Ee.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var m=null==e?void 0:e.unref();if(!m||Ee.get(t)||t.selection&&b.Q6.equals(m,t.selection)||b.gB.select(t,m),v())(()=>{var e=be.get(t);if(be.delete(t),e){if(e.at){var r=b.bR.isPoint(e.at)?Be(t,e.at):Pe(t,e.at);if(!r)return;var n=b.KE.range(t,r);t.selection&&b.Q6.equals(t.selection,n)||b.gB.select(t,r)}e.run()}})();else{l&&r(),r.flush(),n.flush(),c();var w=me.get(t);me.delete(t),void 0!==w&&(t.marks=w,t.onChange())}}else c()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=oe.get(t);r&&(g()||e?r.style.display="none":r.style.removeProperty("display"))},h=(e,r)=>{var n,a=null!==(n=we.get(t))&&void 0!==n?n:[];we.set(t,a);var o=b.bP.leaf(t,e),i=a.findIndex((t=>b.wA.equals(t.path,e)));if(i<0)return De(o.text,r)&&a.push({path:e,diff:r,id:l++}),void f();var s,d,c,u,h,p,v,g,m=(s=o.text,d=a[i].diff,c=r,u=Math.min(d.start,c.start),h=Math.max(0,Math.min(d.start+d.text.length,c.end)-c.start),p=Se(s,d,c),v=Math.max(c.start+c.text.length,d.start+d.text.length+(d.start+d.text.length>c.start?c.text.length:0)-h),g=p.slice(u,v),De(s,{start:u,end:Math.max(d.end,c.end-d.text.length+(d.end-d.start)),text:g}));if(!m)return a.splice(i,1),void f();a[i]=Qt(Qt({},a[i]),{},{diff:m})},p=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,Ee.delete(t),r.cancel(),n.cancel(),v()&&u(),be.set(t,{at:a,run:e}),s=setTimeout(u)},v=()=>!!be.get(t),g=()=>{var e;return!(null===(e=we.get(t))||void 0===e||!e.length)},m=e=>{Ee.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var n=!r||!b.wA.equals(r.anchor.path,e.anchor.path),a=!r||!b.wA.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&d||a)&&(d=!1),(n||g())&&(i=setTimeout(u,200))}},w=()=>{v()||(s=setTimeout(u))};return{flush:u,scheduleFlush:w,hasPendingDiffs:g,hasPendingAction:v,hasPendingChanges:()=>v()||g(),isFlushing:()=>a,handleUserSelect:m,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout((()=>{fe.set(t,!1),u()}),25)},handleCompositionStart:e=>{fe.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{var r;if(i&&(clearTimeout(i),i=null),!ee.get(t)){var{inputType:n}=e,a=null,o=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==n&&"insertCompositionText"!==n&&(d=!1);var[s]=e.getTargetRanges();s&&(a=zt.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0}));var l=zt.getWindow(t).getSelection();if(!a&&l&&(s=l,a=zt.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0})),a=null!==(r=a)&&void 0!==r?r:t.selection){var c,u=!0;if(n.startsWith("delete")){if(b.Q6.isExpanded(a)){var[f,v]=b.Q6.edges(a);if(b.bP.leaf(t,f.path).text.length===f.offset&&0===v.offset){var g=b.KE.next(t,{at:f.path,match:b.EY.isText});g&&b.wA.equals(g[1],v.path)&&(a={anchor:v,focus:v})}}var E=n.endsWith("Backward")?"backward":"forward",[y,x]=b.Q6.edges(a),[O,k]=b.KE.leaf(t,y.path),C={text:"",start:y.offset,end:x.offset},D=we.get(t),T=null==D?void 0:D.find((e=>b.wA.equals(e.path,k))),B=T?[T.diff,C]:[C];if(0===Se(O.text,...B).length&&(u=!1),b.Q6.isExpanded(a)){if(u&&b.wA.equals(a.anchor.path,a.focus.path)){var P={path:a.anchor.path,offset:y.offset},M=b.KE.range(t,P,P);return m(M),h(a.anchor.path,{text:"",end:x.offset,start:y.offset})}return p((()=>b.KE.deleteFragment(t,{direction:E})),{at:a})}}switch(n){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p((()=>b.KE.deleteFragment(t)),{at:a});case"deleteContent":case"deleteContentForward":var{anchor:R}=a;if(u&&b.Q6.isCollapsed(a)){var K=b.bP.leaf(t,R.path);if(R.offset<K.text.length)return h(R.path,{text:"",start:R.offset,end:R.offset+1})}return p((()=>b.KE.deleteForward(t)),{at:a});case"deleteContentBackward":var F,{anchor:A}=a,L=S(s)?s.isCollapsed:!(null===(F=s)||void 0===F||!F.collapsed);return u&&L&&b.Q6.isCollapsed(a)&&A.offset>0?h(A.path,{text:"",start:A.offset-1,end:A.offset}):p((()=>b.KE.deleteBackward(t)),{at:a});case"deleteEntireSoftLine":return p((()=>{b.KE.deleteBackward(t,{unit:"line"}),b.KE.deleteForward(t,{unit:"line"})}),{at:a});case"deleteHardLineBackward":return p((()=>b.KE.deleteBackward(t,{unit:"block"})),{at:a});case"deleteSoftLineBackward":return p((()=>b.KE.deleteBackward(t,{unit:"line"})),{at:a});case"deleteHardLineForward":return p((()=>b.KE.deleteForward(t,{unit:"block"})),{at:a});case"deleteSoftLineForward":return p((()=>b.KE.deleteForward(t,{unit:"line"})),{at:a});case"deleteWordBackward":return p((()=>b.KE.deleteBackward(t,{unit:"word"})),{at:a});case"deleteWordForward":return p((()=>b.KE.deleteForward(t,{unit:"word"})),{at:a});case"insertLineBreak":return p((()=>b.KE.insertSoftBreak(t)),{at:a});case"insertParagraph":return p((()=>b.KE.insertBreak(t)),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("DataTransfer"===(null==(c=o)?void 0:c.constructor.name))return p((()=>zt.insertData(t,o)),{at:a});var N=null!=o?o:"";if(ge.get(t)&&(N=N.replace("\ufeff","")),"insertText"===n&&/.*\n.*\n$/.test(N)&&(N=N.slice(0,-1)),N.includes("\n"))return p((()=>{var e=N.split("\n");e.forEach(((r,n)=>{r&&b.KE.insertText(t,r),n!==e.length-1&&b.KE.insertSoftBreak(t)}))}),{at:a});if(b.wA.equals(a.anchor.path,a.focus.path)){var[j,W]=b.Q6.edges(a),I={start:j.offset,end:W.offset,text:N};if(N&&d&&"insertCompositionText"===n){var z=d.start+d.text.search(/\S|$/);I.start+I.text.search(/\S|$/)===z+1&&I.end===d.start+d.text.length?(I.start-=1,d=null,w()):d=!1}else d="insertText"===n&&(null===d?I:!(!d||!b.Q6.isCollapsed(a)||d.end+d.text.length!==j.offset)&&Qt(Qt({},d),{},{text:d.text+N}));if(u)return void h(j.path,I)}return p((()=>b.KE.insertText(t,N)),{at:a})}}}},handleKeyDown:e=>{g()||(f(!0),setTimeout(f))},handleDomMutations:e=>{var r;g()||v()||e.some((r=>K(t,r,e)))&&(null===(r=ye.get(t))||void 0===r||r())},handleInput:()=>{!v()&&g()||u()}}}var qt=V?d.useLayoutEffect:d.useEffect;var Ut=["node"];function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Yt={subtree:!0,childList:!0,characterData:!0},Xt=N?e=>{var{node:t}=e,r=At(e,Ut);if(!N)return null;var n,a=It(),o=(n=(0,d.useRef)(!1),(0,d.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[]),n.current),[i]=(0,d.useState)((()=>_t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({editor:a},r))));return function(e,t,r){var[n]=(0,d.useState)((()=>new MutationObserver(t)));qt((()=>{n.takeRecords()})),(0,d.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()}),[n,e,r])}(t,i.handleDomMutations,Yt),ve.set(a,i.scheduleFlush),o&&i.flush(),i}:()=>null;function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Jt=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,o=It(),i=zt.findPath(o,a),s=b.wA.parent(i),l=Boolean(r[Oe]);return o.isVoid(n)?d.createElement(er,{length:b.bP.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||o.isInline(n)||""!==b.KE.string(o,s)?""===r.text?d.createElement(er,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?d.createElement($t,{isTrailing:!0,text:r.text}):d.createElement($t,{text:r.text}):d.createElement(er,{isLineBreak:!0,isMarkPlaceholder:l})},$t=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,d.useRef)(null),a=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[o]=(0,d.useState)(a);return qt((()=>{var e=a();n.current&&n.current.textContent!==e&&(n.current.textContent=e)})),d.createElement(Zt,{ref:n},o)},Zt=(0,d.memo)((0,d.forwardRef)(((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children)))),er=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),d.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a),(N||A)&&r?null:"\ufeff",r?d.createElement("br",null):null)};function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nr=N?300:0;function ar(e){e.current&&(clearTimeout(e.current),e.current=null)}var or=e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:o,renderLeaf:i=e=>d.createElement(sr,rr({},e)),leafPosition:s}=e,l=It(),c=(0,d.useRef)(null),u=(0,d.useRef)(null),[f,h]=(0,d.useState)(!1),p=(0,d.useRef)(null),v=(0,d.useCallback)((e=>{if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(c,null==e),null==e){var r;oe.delete(l),null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,null)}else{if(oe.set(l,e),!c.current){var n=window.ResizeObserver||Kt;c.current=new n((()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)}))}c.current.observe(e),u.current=e}}),[u,t,l]),g=d.createElement(Jt,{isLast:r,leaf:t,parent:a,text:n}),m=Boolean(t[xe]);if((0,d.useEffect)((()=>(m?p.current||(p.current=setTimeout((()=>{h(!0),p.current=null}),nr)):(ar(p),h(!1)),()=>ar(p))),[m,h]),m&&f){var w={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:W?"inherit":void 0},contentEditable:!1,ref:v}};g=d.createElement(d.Fragment,null,o(w),g)}return i({attributes:{"data-slate-leaf":!0},children:g,leaf:t,text:n,leafPosition:s})},ir=d.memo(or,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&b.EY.equals(t.leaf,e.leaf)&&t.leaf[xe]===e.leaf[xe])),sr=e=>{var{attributes:t,children:r}=e;return d.createElement("span",rr({},t),r)};function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var cr=e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:o,renderText:i=e=>d.createElement(fr,dr({},e)),text:s}=e,l=It(),c=(0,d.useRef)(null),u=b.EY.decorations(s,t),f=zt.findKey(l,s),h=[],p=0;p<u.length;p++){var{leaf:v,position:g}=u[p];h.push(d.createElement(ir,{isLast:r&&p===u.length-1,key:"".concat(f.id,"-").concat(p),renderPlaceholder:a,leaf:v,leafPosition:g,text:s,parent:n,renderLeaf:o}))}var m=(0,d.useCallback)((e=>{var t=de.get(l);e?(null==t||t.set(f,e),se.set(s,e),ie.set(e,s)):(null==t||t.delete(f),se.delete(s),c.current&&ie.delete(c.current)),c.current=e}),[c,l,f,s]);return i({text:s,children:h,attributes:{"data-slate-node":"text",ref:m}})},ur=d.memo(cr,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!Ye(n,a))return!1}return!0})(t.decorations,e.decorations))),fr=e=>{var{attributes:t,children:r}=e;return d.createElement("span",dr({},t),r)};function hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vr=e=>{var{decorations:t,element:r,renderElement:n=e=>d.createElement(mr,pr({},e)),renderPlaceholder:o,renderLeaf:i,renderText:s,selection:l}=e,c=It(),u=Or(),f=c.isInline(r),h=zt.findKey(c,r),p=(0,d.useCallback)((e=>{var t=de.get(c);e?(null==t||t.set(h,e),se.set(r,e),ie.set(e,r)):(null==t||t.delete(h),se.delete(r))}),[c,h,r]),v=yr({decorations:t,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:i,renderText:s,selection:l}),g={"data-slate-node":"element",ref:p};if(f&&(g["data-slate-inline"]=!0),!f&&b.KE.hasInlines(c,r)){var m=b.bP.string(r),w=a()(m);"rtl"===w&&(g.dir=w)}if(b.KE.isVoid(c,r)){g["data-slate-void"]=!0,!u&&f&&(g.contentEditable=!1);var E=f?"span":"div",[[y]]=b.bP.texts(r);v=d.createElement(E,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(ur,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:y})),te.set(y,0),re.set(y,r)}return n({attributes:g,children:v,element:r})},gr=d.memo(vr,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(!b.Q6.equals(n,a)||!Ye(n,a))return!1}return!0})(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&b.Q6.equals(e.selection,t.selection)))),mr=e=>{var{attributes:t,children:r,element:n}=e,a=It().isInline(n)?"span":"div";return d.createElement(a,pr(pr({},t),{},{style:{position:"relative"}}),r)},wr=(0,d.createContext)((()=>[])),br=(0,d.createContext)(!1),Er=()=>(0,d.useContext)(br),yr=e=>{var{decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderText:o,renderLeaf:i,selection:s}=e,l=(0,d.useContext)(wr),c=It();ee.set(c,!1);for(var u=zt.findPath(c,r),f=[],h=b.Hg.isElement(r)&&!c.isInline(r)&&b.KE.hasInlines(c,r),p=0;p<r.children.length;p++){var v=u.concat(p),g=r.children[p],m=zt.findKey(c,g),w=b.KE.range(c,v),E=s&&b.Q6.intersection(w,s),y=l([g,v]);for(var x of t){var O=b.Q6.intersection(x,w);O&&y.push(O)}b.Hg.isElement(g)?f.push(d.createElement(br.Provider,{key:"provider-".concat(m.id),value:!!E},d.createElement(gr,{decorations:y,element:g,key:m.id,renderElement:n,renderPlaceholder:a,renderLeaf:i,renderText:o,selection:E}))):f.push(d.createElement(ur,{decorations:y,key:m.id,isLast:h&&p===r.children.length-1,parent:r,renderPlaceholder:a,renderLeaf:i,renderText:o,text:g})),te.set(g,p),re.set(g,r)}return f},xr=(0,d.createContext)(!1),Or=()=>(0,d.useContext)(xr),kr=(0,d.createContext)(null),Cr=()=>{var e=(0,d.useContext)(kr);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t};var Sr={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Dr extends d.Component{constructor(){super(...arguments),jt(this,"context",null),jt(this,"manager",null),jt(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,Sr)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=((e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter((t=>K(e,t,n)));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach((e=>{"characterData"!==e.type&&(e.removedNodes.forEach((t=>{e.target.insertBefore(t,e.nextSibling)})),e.addedNodes.forEach((t=>{e.target.removeChild(t)})))})),n())},clear:n}})(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();null!=a&&a.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(a));return null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}jt(Dr,"contextType",Wt);var Tr=N?Dr:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)},Br=(0,d.createContext)(!1),Pr=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Mr=["text"];function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fr=e=>d.createElement(d.Fragment,null,yr(e)),Ar=(0,d.forwardRef)(((e,t)=>{var r=(0,d.useCallback)((e=>d.createElement(Lr,Kr({},e))),[]),{autoFocus:n,decorate:o=Nr,onDOMBeforeInput:s,placeholder:c,readOnly:u=!1,renderElement:f,renderLeaf:h,renderText:p,renderPlaceholder:v=r,scrollSelectionIntoView:g=jr,style:m={},as:w="div",disableDefaultStyles:E=!1}=e,y=At(e,Pr),x=Cr(),[S,D]=(0,d.useState)(!1),T=(0,d.useRef)(null),B=(0,d.useRef)([]),[P,M]=(0,d.useState)(),K=(0,d.useRef)(!1),{onUserInput:F,receivedUserInput:L}=function(){var e=It(),t=(0,d.useRef)(!1),r=(0,d.useRef)(0),n=(0,d.useCallback)((()=>{if(!t.current){t.current=!0;var n=zt.getWindow(e);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1}))}}),[e]);return(0,d.useEffect)((()=>()=>cancelAnimationFrame(r.current)),[]),{receivedUserInput:t,onUserInput:n}}(),[,I]=(0,d.useReducer)((e=>e+1),0);ye.set(x,I),ce.set(x,u);var H=(0,d.useMemo)((()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1})),[]);(0,d.useEffect)((()=>{T.current&&n&&T.current.focus()}),[n]);var Q=(0,d.useRef)(),X=(0,d.useMemo)((()=>l()((()=>{if(ee.get(x))X();else{var e=zt.toDOMNode(x,x).getRootNode();if(!K.current&&W&&e instanceof ShadowRoot){K.current=!0;var t=(()=>{for(var e=document.activeElement;null!==(t=e)&&void 0!==t&&t.shadowRoot&&null!==(r=e.shadowRoot)&&void 0!==r&&r.activeElement;){var t,r,n;e=null===(n=e)||void 0===n||null===(n=n.shadowRoot)||void 0===n?void 0:n.activeElement}return e})();return t?document.execCommand("indent"):b.gB.deselect(x),void(K.current=!1)}var r=Q.current;if((N||!zt.isComposing(x))&&(!H.isUpdatingSelection||null!=r&&r.isFlushing())&&!H.isDraggingInternally){var n=zt.findDocumentOrShadowRoot(x),{activeElement:a}=n,o=zt.toDOMNode(x,x),i=R(n);if(a===o?(H.latestElement=a,ue.set(x,!0)):ue.delete(x),!i)return b.gB.deselect(x);var{anchorNode:s,focusNode:l}=i,d=zt.hasEditableTarget(x,s)||zt.isTargetInsideNonReadonlyVoid(x,s),c=zt.hasTarget(x,l);if(d&&c){var f=zt.toSlateRange(x,i,{exactMatch:!1,suppressThrow:!0});f&&(zt.isComposing(x)||null!=r&&r.hasPendingChanges()||null!=r&&r.isFlushing()?null==r||r.handleUserSelect(f):b.gB.select(x,f))}!u||d&&c||b.gB.deselect(x)}}}),100)),[x,u,H]),G=(0,d.useMemo)((()=>i()(X,0)),[X]);Q.current=Xt({node:T,onDOMSelectionChange:X,scheduleOnDOMSelectionChange:G}),qt((()=>{var e,t,r;T.current&&(r=O(T.current))?(ne.set(x,r),ae.set(x,T.current),se.set(x,T.current),ie.set(T.current,x)):se.delete(x);var{selection:n}=x,a=zt.findDocumentOrShadowRoot(x),o=R(a);if(o&&zt.isFocused(x)&&(null===(e=Q.current)||void 0===e||!e.hasPendingAction())){var i=e=>{var t="None"!==o.type;if(n||t){var r,a=o.focusNode;if(j&&o.rangeCount>1){var i=o.getRangeAt(0),s=o.getRangeAt(o.rangeCount-1);r=i.startContainer===a?s.endContainer:i.startContainer}else r=o.anchorNode;var l=ae.get(x),d=!1;if(l.contains(r)&&l.contains(a)&&(d=!0),t&&d&&n&&!e){var c=zt.toSlateRange(x,o,{exactMatch:!0,suppressThrow:!0});if(c&&b.Q6.equals(c,n)){var u;if(!H.hasMarkPlaceholder)return;if(null!==(u=r)&&void 0!==u&&null!==(u=u.parentElement)&&void 0!==u&&u.hasAttribute("data-slate-mark-placeholder"))return}}if(!n||zt.hasRange(x,n)){H.isUpdatingSelection=!0;var f=null;try{f=n&&zt.toDOMRange(x,n)}catch(e){}return f?(zt.isComposing(x)&&!N?o.collapseToEnd():b.Q6.isBackward(n)?o.setBaseAndExtent(f.endContainer,f.endOffset,f.startContainer,f.startOffset):o.setBaseAndExtent(f.startContainer,f.startOffset,f.endContainer,f.endOffset),g(x,f)):o.removeAllRanges(),f}x.selection=zt.toSlateRange(x,o,{exactMatch:!1,suppressThrow:!0})}};o.rangeCount<=1&&i();var s="action"===(null===(t=Q.current)||void 0===t?void 0:t.isFlushing());if(N&&s){var l=null,d=requestAnimationFrame((()=>{if(s){var e=e=>{try{zt.toDOMNode(x,x).focus(),i(e)}catch(e){}};e(),l=setTimeout((()=>{e(!0),H.isUpdatingSelection=!1}))}}));return()=>{cancelAnimationFrame(d),l&&clearTimeout(l)}}setTimeout((()=>{H.isUpdatingSelection=!1}))}}));var J=(0,d.useCallback)((e=>{Hr(x,e);var t=zt.toDOMNode(x,x).getRootNode();if(null!=K&&K.current&&W&&t instanceof ShadowRoot){var r=e.getTargetRanges()[0],n=new window.Range;n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset);var a=zt.toSlateRange(x,n,{exactMatch:!1,suppressThrow:!1});return b.gB.select(x,a),e.preventDefault(),void e.stopImmediatePropagation()}if(F(),!u&&zt.hasEditableTarget(x,e.target)&&!zr(e,s)){var o;if(Q.current)return Q.current.handleDOMBeforeInput(e);G.flush(),X.flush();var{selection:i}=x,{inputType:l}=e,d=e.dataTransfer||e.data||void 0,c="insertCompositionText"===l||"deleteCompositionText"===l;if(c&&zt.isComposing(x))return;var f=!1;if("insertText"===l&&i&&b.Q6.isCollapsed(i)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==i.anchor.offset&&(f=!0,x.marks&&(f=!1),!ee.get(x))){var h,p,{anchor:v}=i,[g,m]=zt.toDOMPoint(x,v),w=null===(h=g.parentElement)||void 0===h?void 0:h.closest("a"),E=zt.getWindow(x);if(f&&w&&zt.hasDOMNode(x,w)){var y,O=null==E?void 0:E.document.createTreeWalker(w,NodeFilter.SHOW_TEXT).lastChild();O===g&&(null===(y=O.textContent)||void 0===y?void 0:y.length)===m&&(f=!1)}if(f&&g.parentElement&&"pre"===(null==E||null===(p=E.getComputedStyle(g.parentElement))||void 0===p?void 0:p.whiteSpace)){var k=b.KE.above(x,{at:v.path,match:e=>b.Hg.isElement(e)&&b.KE.isBlock(x,e)});k&&b.bP.string(k[0]).includes("\t")&&(f=!1)}}if((!l.startsWith("delete")||l.startsWith("deleteBy"))&&!ee.get(x)){var[C]=e.getTargetRanges();if(C){var S=zt.toSlateRange(x,C,{exactMatch:!1,suppressThrow:!1});if(!i||!b.Q6.equals(i,S)){f=!1;var T=!c&&x.selection&&b.KE.rangeRef(x,x.selection);b.gB.select(x,S),T&&he.set(x,T)}}}if(c)return;if(f||e.preventDefault(),i&&b.Q6.isExpanded(i)&&l.startsWith("delete")){var P=l.endsWith("Backward")?"backward":"forward";return void b.KE.deleteFragment(x,{direction:P})}switch(l){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":b.KE.deleteFragment(x);break;case"deleteContent":case"deleteContentForward":b.KE.deleteForward(x);break;case"deleteContentBackward":b.KE.deleteBackward(x);break;case"deleteEntireSoftLine":b.KE.deleteBackward(x,{unit:"line"}),b.KE.deleteForward(x,{unit:"line"});break;case"deleteHardLineBackward":b.KE.deleteBackward(x,{unit:"block"});break;case"deleteSoftLineBackward":b.KE.deleteBackward(x,{unit:"line"});break;case"deleteHardLineForward":b.KE.deleteForward(x,{unit:"block"});break;case"deleteSoftLineForward":b.KE.deleteForward(x,{unit:"line"});break;case"deleteWordBackward":b.KE.deleteBackward(x,{unit:"word"});break;case"deleteWordForward":b.KE.deleteForward(x,{unit:"word"});break;case"insertLineBreak":b.KE.insertSoftBreak(x);break;case"insertParagraph":b.KE.insertBreak(x);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===l&&zt.isComposing(x)&&(D(!1),fe.set(x,!1)),"DataTransfer"===(null==d?void 0:d.constructor.name)?zt.insertData(x,d):"string"==typeof d&&(f?B.current.push((()=>b.KE.insertText(x,d))):b.KE.insertText(x,d))}var M=null===(o=he.get(x))||void 0===o?void 0:o.unref();he.delete(x),!M||x.selection&&b.Q6.equals(x.selection,M)||b.gB.select(x,M)}}),[x,X,F,s,u,G]),$=(0,d.useCallback)((e=>{null==e?(X.cancel(),G.cancel(),ae.delete(x),se.delete(x),T.current&&Y&&T.current.removeEventListener("beforeinput",J)):Y&&e.addEventListener("beforeinput",J),T.current=e,"function"==typeof t?t(e):t&&(t.current=e)}),[X,G,x,J,t]);qt((()=>{var e=zt.getWindow(x),t=e=>{var{target:t}=e,r=t instanceof HTMLElement?t:null,n=null==r?void 0:r.tagName;"INPUT"!==n&&"TEXTAREA"!==n&&G()};e.document.addEventListener("selectionchange",t);var r=()=>{H.isDraggingInternally=!1};return e.document.addEventListener("dragend",r),e.document.addEventListener("drop",r),()=>{e.document.removeEventListener("selectionchange",t),e.document.removeEventListener("dragend",r),e.document.removeEventListener("drop",r)}}),[G,H]);var Z=o([x,[]]),te=c&&1===x.children.length&&1===Array.from(b.bP.texts(x)).length&&""===b.bP.string(x)&&!S,re=(0,d.useCallback)((e=>{var t;e&&te?M(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height):M(void 0)}),[te]);if(te){var oe=b.KE.start(x,[]);Z.push({[xe]:!0,placeholder:c,onPlaceholderResize:re,anchor:oe,focus:oe})}var{marks:le}=x;if(H.hasMarkPlaceholder=!1,x.selection&&b.Q6.isCollapsed(x.selection)&&le){var{anchor:de}=x.selection,pe=b.bP.leaf(x,de.path),ve=At(pe,Mr);if(!b.EY.equals(pe,le,{loose:!0})){H.hasMarkPlaceholder=!0;var we=Object.fromEntries(Object.keys(ve).map((e=>[e,null])));Z.push(Kr(Kr(Kr({[Oe]:!0},we),le),{},{anchor:de,focus:de}))}}return(0,d.useEffect)((()=>{setTimeout((()=>{var{selection:e}=x;if(e){var{anchor:t}=e,r=b.bP.leaf(x,t.path);if(le&&!b.EY.equals(r,le,{loose:!0}))return void ge.set(x,le)}ge.delete(x)}))})),d.createElement(xr.Provider,{value:u},d.createElement(Br.Provider,{value:S},d.createElement(wr.Provider,{value:o},d.createElement(Tr,{node:T,receivedUserInput:L},d.createElement(w,Kr(Kr({role:u?void 0:"textbox","aria-multiline":!u||void 0},y),{},{spellCheck:!(!Y&&V)&&y.spellCheck,autoCorrect:Y||!V?y.autoCorrect:"false",autoCapitalize:Y||!V?y.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u,zindex:-1,suppressContentEditableWarning:!0,ref:$,style:Kr(Kr({},E?{}:Kr({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},P?{minHeight:P}:{})),m),onBeforeInput:(0,d.useCallback)((e=>{if(!Y&&!u&&!Wr(e,y.onBeforeInput)&&zt.hasSelectableTarget(x,e.target)&&(e.preventDefault(),!zt.isComposing(x))){var t=e.data;b.KE.insertText(x,t)}}),[y.onBeforeInput,x,u]),onInput:(0,d.useCallback)((e=>{if(!Wr(e,y.onInput))if(Q.current)Q.current.handleInput();else{for(var t of B.current)t();B.current=[],zt.isFocused(x)||Hr(x,e.nativeEvent)}}),[y.onInput,x]),onBlur:(0,d.useCallback)((e=>{if(!u&&!H.isUpdatingSelection&&zt.hasSelectableTarget(x,e.target)&&!Wr(e,y.onBlur)){var t=zt.findDocumentOrShadowRoot(x);if(H.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===zt.toDOMNode(x,x)||k(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&C(r)&&zt.hasDOMNode(x,r)){var n=zt.toSlateNode(x,r);if(b.Hg.isElement(n)&&!x.isVoid(n))return}if(W){var a=R(t);null==a||a.removeAllRanges()}ue.delete(x)}}}}),[u,H.isUpdatingSelection,H.latestElement,x,y.onBlur]),onClick:(0,d.useCallback)((e=>{if(zt.hasTarget(x,e.target)&&!Wr(e,y.onClick)&&C(e.target)){var t=zt.toSlateNode(x,e.target),r=zt.findPath(x,t);if(!b.KE.hasPath(x,r)||b.bP.get(x,r)!==t)return;if(3===e.detail&&r.length>=1){var n=r;if(!b.Hg.isElement(t)||!b.KE.isBlock(x,t)){var a,o=b.KE.above(x,{match:e=>b.Hg.isElement(e)&&b.KE.isBlock(x,e),at:r});n=null!==(a=null==o?void 0:o[1])&&void 0!==a?a:r.slice(0,1)}var i=b.KE.range(x,n);return void b.gB.select(x,i)}if(u)return;var s=b.KE.start(x,r),l=b.KE.end(x,r),d=b.KE.void(x,{at:s}),c=b.KE.void(x,{at:l});if(d&&c&&b.wA.equals(d[1],c[1])){var f=b.KE.range(x,s);b.gB.select(x,f)}}}),[x,y.onClick,u]),onCompositionEnd:(0,d.useCallback)((e=>{if(zt.hasSelectableTarget(x,e.target)){var t;if(zt.isComposing(x)&&Promise.resolve().then((()=>{D(!1),fe.set(x,!1)})),null===(t=Q.current)||void 0===t||t.handleCompositionEnd(e),Wr(e,y.onCompositionEnd)||N)return;if(!W&&!_&&!A&&!U&&!q&&e.data){var r=ge.get(x);ge.delete(x),void 0!==r&&(me.set(x,x.marks),x.marks=r),b.KE.insertText(x,e.data);var n=me.get(x);me.delete(x),void 0!==n&&(x.marks=n)}}}),[y.onCompositionEnd,x]),onCompositionUpdate:(0,d.useCallback)((e=>{zt.hasSelectableTarget(x,e.target)&&!Wr(e,y.onCompositionUpdate)&&(zt.isComposing(x)||(D(!0),fe.set(x,!0)))}),[y.onCompositionUpdate,x]),onCompositionStart:(0,d.useCallback)((e=>{if(zt.hasSelectableTarget(x,e.target)){var t;if(null===(t=Q.current)||void 0===t||t.handleCompositionStart(e),Wr(e,y.onCompositionStart)||N)return;D(!0);var{selection:r}=x;if(r&&b.Q6.isExpanded(r))return void b.KE.deleteFragment(x)}}),[y.onCompositionStart,x]),onCopy:(0,d.useCallback)((e=>{!zt.hasSelectableTarget(x,e.target)||Wr(e,y.onCopy)||Ir(e)||(e.preventDefault(),zt.setFragmentData(x,e.clipboardData,"copy"))}),[y.onCopy,x]),onCut:(0,d.useCallback)((e=>{if(!u&&zt.hasSelectableTarget(x,e.target)&&!Wr(e,y.onCut)&&!Ir(e)){e.preventDefault(),zt.setFragmentData(x,e.clipboardData,"cut");var{selection:t}=x;if(t)if(b.Q6.isExpanded(t))b.KE.deleteFragment(x);else{var r=b.bP.parent(x,t.anchor.path);b.KE.isVoid(x,r)&&b.gB.delete(x)}}}),[u,x,y.onCut]),onDragOver:(0,d.useCallback)((e=>{if(zt.hasTarget(x,e.target)&&!Wr(e,y.onDragOver)){var t=zt.toSlateNode(x,e.target);b.Hg.isElement(t)&&b.KE.isVoid(x,t)&&e.preventDefault()}}),[y.onDragOver,x]),onDragStart:(0,d.useCallback)((e=>{if(!u&&zt.hasTarget(x,e.target)&&!Wr(e,y.onDragStart)){var t=zt.toSlateNode(x,e.target),r=zt.findPath(x,t);if(b.Hg.isElement(t)&&b.KE.isVoid(x,t)||b.KE.void(x,{at:r,voids:!0})){var n=b.KE.range(x,r);b.gB.select(x,n)}H.isDraggingInternally=!0,zt.setFragmentData(x,e.dataTransfer,"drag")}}),[u,x,y.onDragStart,H]),onDrop:(0,d.useCallback)((e=>{if(!u&&zt.hasTarget(x,e.target)&&!Wr(e,y.onDrop)){e.preventDefault();var t=x.selection,r=zt.findEventRange(x,e),n=e.dataTransfer;b.gB.select(x,r),H.isDraggingInternally&&(!t||b.Q6.equals(t,r)||b.KE.void(x,{at:r,voids:!0})||b.gB.delete(x,{at:t})),zt.insertData(x,n),zt.isFocused(x)||zt.focus(x)}}),[u,x,y.onDrop,H]),onDragEnd:(0,d.useCallback)((e=>{!u&&H.isDraggingInternally&&y.onDragEnd&&zt.hasTarget(x,e.target)&&y.onDragEnd(e)}),[u,H,y,x]),onFocus:(0,d.useCallback)((e=>{if(!u&&!H.isUpdatingSelection&&zt.hasEditableTarget(x,e.target)&&!Wr(e,y.onFocus)){var t=zt.toDOMNode(x,x),r=zt.findDocumentOrShadowRoot(x);if(H.latestElement=r.activeElement,j&&e.target!==t)return void t.focus();ue.set(x,!0)}}),[u,H,x,y.onFocus]),onKeyDown:(0,d.useCallback)((e=>{if(!u&&zt.hasEditableTarget(x,e.target)){var t;null===(t=Q.current)||void 0===t||t.handleKeyDown(e);var{nativeEvent:r}=e;if(zt.isComposing(x)&&!1===r.isComposing&&(fe.set(x,!1),D(!1)),Wr(e,y.onKeyDown)||zt.isComposing(x))return;var{selection:n}=x,o=x.children[null!==n?n.focus.path[0]:0],i="rtl"===a()(b.bP.string(o));if(Qe.isRedo(r)){e.preventDefault();var s=x;return void("function"==typeof s.redo&&s.redo())}if(Qe.isUndo(r)){e.preventDefault();var l=x;return void("function"==typeof l.undo&&l.undo())}if(Qe.isMoveLineBackward(r))return e.preventDefault(),void b.gB.move(x,{unit:"line",reverse:!0});if(Qe.isMoveLineForward(r))return e.preventDefault(),void b.gB.move(x,{unit:"line"});if(Qe.isExtendLineBackward(r))return e.preventDefault(),void b.gB.move(x,{unit:"line",edge:"focus",reverse:!0});if(Qe.isExtendLineForward(r))return e.preventDefault(),void b.gB.move(x,{unit:"line",edge:"focus"});if(Qe.isMoveBackward(r))return e.preventDefault(),void(n&&b.Q6.isCollapsed(n)?b.gB.move(x,{reverse:!i}):b.gB.collapse(x,{edge:i?"end":"start"}));if(Qe.isMoveForward(r))return e.preventDefault(),void(n&&b.Q6.isCollapsed(n)?b.gB.move(x,{reverse:i}):b.gB.collapse(x,{edge:i?"start":"end"}));if(Qe.isMoveWordBackward(r))return e.preventDefault(),n&&b.Q6.isExpanded(n)&&b.gB.collapse(x,{edge:"focus"}),void b.gB.move(x,{unit:"word",reverse:!i});if(Qe.isMoveWordForward(r))return e.preventDefault(),n&&b.Q6.isExpanded(n)&&b.gB.collapse(x,{edge:"focus"}),void b.gB.move(x,{unit:"word",reverse:i});if(Y){if((z||W)&&n&&(Qe.isDeleteBackward(r)||Qe.isDeleteForward(r))&&b.Q6.isCollapsed(n)){var d=b.bP.parent(x,n.anchor.path);if(b.Hg.isElement(d)&&b.KE.isVoid(x,d)&&(b.KE.isInline(x,d)||b.KE.isBlock(x,d)))return e.preventDefault(),void b.KE.deleteBackward(x,{unit:"block"})}}else{if(Qe.isBold(r)||Qe.isItalic(r)||Qe.isTransposeCharacter(r))return void e.preventDefault();if(Qe.isSoftBreak(r))return e.preventDefault(),void b.KE.insertSoftBreak(x);if(Qe.isSplitBlock(r))return e.preventDefault(),void b.KE.insertBreak(x);if(Qe.isDeleteBackward(r))return e.preventDefault(),void(n&&b.Q6.isExpanded(n)?b.KE.deleteFragment(x,{direction:"backward"}):b.KE.deleteBackward(x));if(Qe.isDeleteForward(r))return e.preventDefault(),void(n&&b.Q6.isExpanded(n)?b.KE.deleteFragment(x,{direction:"forward"}):b.KE.deleteForward(x));if(Qe.isDeleteLineBackward(r))return e.preventDefault(),void(n&&b.Q6.isExpanded(n)?b.KE.deleteFragment(x,{direction:"backward"}):b.KE.deleteBackward(x,{unit:"line"}));if(Qe.isDeleteLineForward(r))return e.preventDefault(),void(n&&b.Q6.isExpanded(n)?b.KE.deleteFragment(x,{direction:"forward"}):b.KE.deleteForward(x,{unit:"line"}));if(Qe.isDeleteWordBackward(r))return e.preventDefault(),void(n&&b.Q6.isExpanded(n)?b.KE.deleteFragment(x,{direction:"backward"}):b.KE.deleteBackward(x,{unit:"word"}));if(Qe.isDeleteWordForward(r))return e.preventDefault(),void(n&&b.Q6.isExpanded(n)?b.KE.deleteFragment(x,{direction:"forward"}):b.KE.deleteForward(x,{unit:"word"}))}}}),[u,x,y.onKeyDown]),onPaste:(0,d.useCallback)((e=>{u||!zt.hasEditableTarget(x,e.target)||Wr(e,y.onPaste)||(!Y||(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||W)&&(e.preventDefault(),zt.insertData(x,e.clipboardData))}),[u,x,y.onPaste])}),d.createElement(Fr,{decorations:Z,node:x,renderElement:f,renderPlaceholder:v,renderLeaf:h,renderText:p,selection:x.selection}))))))})),Lr=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Kr({},t),r,N&&d.createElement("br",null))},Nr=()=>[],jr=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&b.Q6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),g(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Wr=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},Ir=e=>C(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),zr=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},Hr=(e,t)=>{var r=e;"historyUndo"!==t.inputType||"function"!=typeof r.undo?"historyRedo"!==t.inputType||"function"!=typeof r.redo||r.redo():r.undo()},Qr=(0,d.createContext)(!1),_r=()=>(0,d.useContext)(Qr);var qr=(0,d.createContext)({}),Ur=(e,t)=>e===t;function Vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur,[,r]=(0,d.useReducer)((e=>e+1),0),n=(0,d.useContext)(qr);if(!n)throw new Error("The `useSlateSelector` hook must be used inside the <Slate> component's context.");var a,{getSlate:o,addEventListener:i}=n,s=(0,d.useRef)(),l=(0,d.useRef)((()=>null)),c=(0,d.useRef)(null);try{if(e!==l.current||s.current){var u=e(o());a=t(c.current,u)?c.current:u}else a=c.current}catch(e){throw s.current&&e instanceof Error&&(e.message+="\nThe error may be correlated with this previous error:\n".concat(s.current.stack,"\n\n")),e}return qt((()=>{l.current=e,c.current=a,s.current=void 0})),qt((()=>{function e(){try{var e=l.current(o());if(t(e,c.current))return;c.current=e}catch(e){e instanceof Error?s.current=e:s.current=new Error(String(e))}r()}var n=i(e);return e(),()=>n()}),[i,o]),a}var Yr=parseInt(d.version.split(".")[0],10),Xr=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Gr=e=>{var{editor:t,children:r,onChange:n,onSelectionChange:a,onValueChange:o,initialValue:i}=e,s=At(e,Xr),[l,c]=d.useState((()=>{if(!b.bP.isNodeList(i))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(b.h6.stringify(i)));if(!b.KE.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(b.h6.stringify(t)));return t.children=i,Object.assign(t,s),{v:0,editor:t}})),{selectorContext:u,onChange:f}=function(e){var t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:e}).current,n=(0,d.useCallback)((e=>{r.editor=e,t.forEach((t=>t(e)))}),[t,r]);return{selectorContext:(0,d.useMemo)((()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})})),[t,r]),onChange:n}}(t),h=(0,d.useCallback)((e=>{var r;if(n&&n(t.children),"set_selection"===(null==e||null===(r=e.operation)||void 0===r?void 0:r.type))null==a||a(t.selection);else null==o||o(t.children);c((e=>({v:e.v+1,editor:t}))),f(t)}),[t,f,n,a,o]);(0,d.useEffect)((()=>(pe.set(t,h),()=>{pe.set(t,(()=>{}))})),[t,h]);var[p,v]=(0,d.useState)(zt.isFocused(t));return(0,d.useEffect)((()=>{v(zt.isFocused(t))}),[t]),qt((()=>{var e=()=>v(zt.isFocused(t));return Yr>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})}),[]),d.createElement(qr.Provider,{value:u},d.createElement(kr.Provider,{value:l},d.createElement(Wt.Provider,{value:l.editor},d.createElement(Qr.Provider,{value:p},r))))},Jr=()=>Vr((e=>e.selection),$r),$r=(e,t)=>!e&&!t||!(!e||!t)&&b.Q6.equals(e,t),Zr=function(e){var t=e;t=Ne(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment");var{onChange:r}=t;return t.onChange=e=>{(Yr<18?Ft.unstable_batchedUpdates:e=>e())((()=>{r(e)}))},t}}}]);
//# sourceMappingURL=chunk-170-eebd0fcdfa24206c521c.js.map