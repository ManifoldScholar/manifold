"use strict";(self.webpackChunkmanifold_client=self.webpackChunkmanifold_client||[]).push([[702],{33217:function(e,t,r){var o=r(80952),n=r(3171);o.config.setModuleUrl("ace-builds/src-noconflict/theme-idle_fingers",n),window.ace.define("ace-builds/src-noconflict/theme-idle_fingers",["require","exports","module","ace/lib/dom"],((e,t,r)=>{exports=t,exports.isDark=!0,exports.cssClass="ace-idle-fingers",exports.cssText="\n      .ace-idle-fingers .ace_gutter {\n        background: #3b3b3b;\n        color: rgb(153,153,153);\n      }\n\n      .ace-idle-fingers .ace_print-margin {\n        width: 1px;\n        background: #3b3b3b;\n      }\n\n      .ace-idle-fingers {\n        color: var(--color-base-neutral10);\n        border: 1px solid #555555;\n      }\n\n      .ace-idle-fingers .ace_cursor {\n        color: #91FF00;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selection {\n        background: rgba(90, 100, 126, 0.88);\n      }\n\n      .ace-idle-fingers.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #323232;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_step {\n        background: rgb(102, 82, 0);\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid #404040;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_active-line {\n        background:  var(--color-base-neutral110);\n      }\n\n      .ace-idle-fingers .ace_gutter-active-line {\n        background-color: #353637\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(90, 100, 126, 0.88)\n      }\n\n      .ace-idle-fingers .ace_invisible {\n        color: var(--color-base-neutral40);\n      }\n\n      .ace-idle-fingers .ace_keyword,\n      .ace-idle-fingers .ace_meta {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_constant,\n      .ace-idle-fingers .ace_constant.ace_character,\n      .ace-idle-fingers .ace_constant.ace_character.ace_escape,\n      .ace-idle-fingers .ace_constant.ace_other,\n      .ace-idle-fingers .ace_support.ace_constant {\n        color: var(--color-base-blue45);\n      }\n\n      .ace-idle-fingers .ace_invalid:not(.ace_invisible) {\n        color: var(--color-base-neutral40);\n        background: var(--color-base-red45);\n      }\n\n      .ace-idle-fingers .ace_fold {\n        background-color: #CC7833;\n        border-color: #FFFFFF;\n      }\n\n      .ace-idle-fingers .ace_support.ace_function {\n        color: #B83426;\n      }\n\n      .ace-idle-fingers .ace_variable.ace_parameter {\n        font-style: italic;\n      }\n\n      .ace-idle-fingers .ace_string {\n        color: var(--color-base-green20);\n      }\n\n      .ace-idle-fingers .ace_string.ace_regexp {\n        color: #CCCC33;\n      }\n\n      .ace-idle-fingers .ace_comment {\n        font-style: italic;\n        color: #BC9458;\n      }\n\n      .ace-idle-fingers .ace_meta.ace_tag {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_entity.ace_name {\n        color: #FFC66D;\n      }\n\n      .ace-idle-fingers .ace_collab.ace_user1 {\n        color: #323232;\n        background-color: #FFF980;\n      }\n\n      .ace-idle-fingers .ace_indent-guide {\n        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMwMjLyZYiPj/8PAAreAwAI1g0AAAAAElFTkSuQmCC) right repeat-y\n      }\n    ";e("../lib/dom").importCssString(exports.cssText,exports.cssClass)}))},42683:function(e,t,r){var o=r(80952),n=r(92236);o.config.setModuleUrl("ace-builds/src-noconflict/theme-kuroir",n),window.ace.define("ace-builds/src-noconflict/theme-kuroir",["require","exports","module","ace/lib/dom"],((e,t,r)=>{exports=t,exports.isDark=!1,exports.cssClass="ace-kuroir",exports.cssText='\n      .ace-kuroir .ace_gutter {\n        background: var(--color-base-neutral30);\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_print-margin {\n        width: 1px;\n        background: #e8e8e8;\n      }\n\n      .ace-kuroir {\n        background-color: #E8E9E8;\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_cursor {\n        color: #202020;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selection {\n        background: var(--color-base-yellow20);\n      }\n\n      .ace-kuroir.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #E8E9E8;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_step {\n        background: rgb(198, 219, 174);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid rgba(0, 0, 0, 0.29);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_active-line {\n        background: var(--color-base-yellow45);\n      }\n\n      .ace-kuroir .ace_gutter-active-line {\n        background-color: rgba(245, 228, 37, .5);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(245, 170, 0, 0.57);\n      }\n\n      .ace-kuroir .ace_invisible {\n        color: #BFBFBF\n      }\n\n      .ace-kuroir .ace_fold {\n        border-color: #363636;\n      }\n\n      .ace-kuroir .ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_constant.ace_numeric {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support.ace_type {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_function {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_keyword {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_storage {\n        color:#A52A2A;\n      }\n\n      .ace-kuroir .ace_invalid.ace_illegal {\n        color:#FD1224;\n        background-color:rgba(255, 6, 0, 0.15);\n      }\n\n      .ace-kuroir .ace_invalid.ace_deprecated {\n        text-decoration:underline;\n        font-style:italic;\n        color:#FD1732;\n        background-color:#E8E9E8;\n      }\n\n      .ace-kuroir .ace_string {\n        color: var(--color-base-green75);\n      }\n\n      .ace-kuroir .ace_string.ace_regexp {\n        color:#417E00;\n        background-color:#C9D4BE; }\n\n      .ace-kuroir .ace_comment {\n        color:rgba(148, 148, 148, 0.91);\n        background-color:rgba(220, 220, 220, 0.56);\n      }\n\n      .ace-kuroir .ace_variable {\n        color: var(--color-text-neutral100);\n      }\n\n      .ace-kuroir .ace_meta.ace_tag {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_markup.ace_heading {\n        color:#B8012D;\n        background-color:rgba(191, 97, 51, 0.051);\n      }\n\n      .ace-kuroir .ace_markup.ace_list {\n        color:#8F5B26;\n      }\n\n      .ace-kuroir .ace_indent-guide {\n          background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n      }\n\n      .ace-kuroir .ace_indent-guide-active {\n        background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n      }\n    ';e("../lib/dom").importCssString(exports.cssText,exports.cssClass)}))},74702:function(e,t,r){r.r(t),r.d(t,{default:function(){return Cr}});var o=r(96540),n=r(5556),l=r.n(n),a=r(60522),i=r(24740),s=r(92061),c=r(45594),d=r(59184),u=r(38084),p=r(89757);const b=e=>{c.gB.unwrapNodes(e,{match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&"a"===e.type}),s.rL.focus(e)},g=(e,t,r)=>{const{selection:o}=e??{};if(!o)return;const n=o&&c.Q6.isCollapsed(o),l={type:"a",htmlAttrs:{href:t},children:n?[{text:r??t}]:[]};n?c.gB.insertNodes(e,l):(c.gB.wrapNodes(e,l,{split:!0}),c.gB.collapse(e,{edge:"end"})),s.rL.focus(e)},f=(e,t,r)=>{const o={type:"img",htmlAttrs:{src:t,alt:r??""},children:[{text:"",slateOnly:!0}]},[n]=c.KE.above(e,e.selection);c.KE.isEmpty(e,n)&&c.gB.removeNodes(e),c.gB.insertNodes(e,o),s.rL.focus(e)},h=(e,t,r)=>{const o=/api\/proxy\//.test(t)?"video":"iframe",n={type:o,htmlAttrs:{src:t,title:r,controls:"video"===o?"":void 0},children:[{text:"",slateOnly:!0}]},[l]=c.KE.above(e,e.selection);c.KE.isEmpty(e,l)&&c.gB.removeNodes(e),c.gB.insertNodes(e,n),s.rL.focus(e)};var m=r(2404),v=r.n(m),x=r(61448),y=r.n(x);const k=["ol","ul"],A=e=>{let{editor:t,format:r,node:o,path:n,split:l=!1}=e;if(o&&y()(o,"text")&&"li"===c.bP.parent(t,n).type)return(e=>{let{editor:t,node:r,path:o,format:n}=e;const{anchor:l,focus:a}=t.selection,i=r.text.substring(0,l.offset),s=r.text.substring(l.offset,a.offset),d=r.text.substring(a.offset),u=[...i&&[{type:"list-sibling",slateOnly:!0,children:[{text:i}]}],{type:n,children:[{text:s}]},...d&&[{type:"list-sibling",slateOnly:!0,children:[{text:d}]}]];c.gB.insertNodes(t,u,{at:o})})({editor:t,node:o,path:n,format:r});const a=o&&y()(o,"text")?c.bP.parent(t,n):o;"pre"===a.type&&c.KE.removeMark(t,"code",!0);const i=k.includes(r)?"li":r;if(c.gB.unwrapNodes(t,{match:(e,t)=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&k.includes(e.type)&&v()(t,n),split:!0}),a.slateOnly||r!==a.type){var d,u;const e=null!==(d=a.htmlAttrs)&&void 0!==d&&d.class?{class:null===(u=a.htmlAttrs)||void 0===u?void 0:u.class}:void 0;return c.KE.withoutNormalizing(t,(()=>{c.gB.setNodes(t,{type:i,slateOnly:void 0,htmlAttrs:"li"!==i?e:void 0},{split:l}),"li"===i&&c.gB.wrapNodes(t,{type:r,htmlAttrs:e,children:[]}),"pre"===r&&c.KE.addMark(t,"code",!0),s.rL.focus(t)}))}c.gB.setNodes(t,{type:"p",slateOnly:void 0},{split:l}),s.rL.focus(t)},j=e=>{[...Array(e.children.length).keys()].forEach((()=>{try{c.gB.removeNodes(e,{at:[0]})}catch(e){return e}}))},w=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c.gB.select(e,{anchor:{path:t,offset:r},focus:{path:t,offset:r}})},E=e=>{var t;let r="void"===e.type?e.nodeName:e.type;const{htmlAttrs:o}=e??{};return null!=o&&o.id&&(r=`${r}#${o.id}`),null!=o&&o.class&&(r=`${r}.${null===(t=o.class)||void 0===t?void 0:t.replaceAll(" ",".")}`),r},C=(e,t)=>c.KE.above(e,{at:t,match:e=>"li"===e.type})??[],_=(e,t)=>c.KE.above(e,{at:t,match:e=>"ul"===e.type||"ol"===e.type})??[],B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;const r=c.KE.unhangRange(e,e.selection,{voids:!0}),[o,n]=c.bP.common(e,r.anchor.path,r.focus.path);return(c.KE.isBlock(e,o)||c.KE.isEditor(o))&&t(o)?[o,n]:c.KE.above(e,{at:n,match:r=>(c.KE.isBlock(e,r)||c.KE.isEditor(r))&&t(r)})},K=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{value:o}=t.next();if(!o)return r;const[n,l]=o,a=s.rL.findKey(e,n),i=n.type&&!n.slateOnly?{...r,[a.id]:{label:E(n),path:l}}:r;return K(e,t,i)},R=(e,t)=>{const{selection:r}=e;if(!r)return[!1];const o=c.KE.above(e,{at:c.KE.unhangRange(e,r),match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&!e.nodeName&&!e.slateOnly&&e.type===t}),[n,l]=o??[];return o?[n.type===t,l]:[!1]},N=(e,t)=>{const{selection:r}=e;if(!r)return[!1];const o=c.KE.above(e,{at:c.KE.unhangRange(e,r),match:r=>!c.KE.isEditor(r)&&c.KE.isBlock(e,r)&&!r.nodeName&&!r.slateOnly&&r.type===t}),[n,l]=o??[];return o?[(null==n?void 0:n.type)===t,l]:[!1]},M=(e,t)=>{if(!e.selection)return!1;const r=!!c.bP.get(e,e.selection.focus.path).text&&c.KE.marks(e);if("code"===t){const[t]=c.KE.above(e,{match:e=>"pre"===e.type})??[];if(t)return!1}return!!r&&!0===r[t]},D=e=>{const[t]=c.KE.nodes(e,{match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&"a"===e.type});return!!t},z=(e,t)=>{const r=1===t.children.length&&y()(t.children[0],"text");return c.KE.isEmpty(e,t)&&(r||!t.children.length)},L=e=>{let{editor:t,format:r,path:o}=e;if("span"===r)return(e=>{let{editor:t,path:r}=e;const o=c.wA.parent(r),[n]=c.KE.node(t,{at:o});if(c.KE.hasBlocks(t,n))return c.KE.withoutNormalizing(t,(()=>{c.gB.wrapNodes(t,{type:"div",slateOnly:!0},{at:r,match:(e,t)=>"span"===e.type&&v()(t,r)}),c.gB.removeNodes(t,{match:(e,t)=>y()(e,"text")&&!e.text&&v()(t,c.wA.next(r)),at:o}),c.gB.liftNodes(t,{match:(e,t)=>"div"===e.type&&v()(t,r),at:r});const e=c.bP.get(t,o);z(t,e)&&c.gB.removeNodes(t,{at:c.wA.parent(o),match:t=>v()(t,e)}),s.rL.focus(t)}))})({editor:t,path:o});c.gB.liftNodes(t,{match:(e,t)=>e.type===r&&v()(t,o),at:o}),s.rL.focus(t)},S=(e,t)=>{const r=c.Q6.isCollapsed(e.selection);if("span"===t)return((e,t)=>{t?c.gB.insertNodes(e,{type:"span",children:[{text:""}]},{at:e.selection.anchor,select:!0}):c.gB.wrapNodes(e,{type:"span",children:[]},{split:!0}),s.rL.focus(e)})(e,r);const o=p.e5.includes(t),n=!o,l=o?e=>!c.KE.isEditor(e)&&!e.nodeName&&!e.text:e=>!c.KE.isEditor(e)&&!e.nodeName,[a,i]=B(e,l);return n?A({editor:e,format:t,node:a,path:i,split:!r}):(e=>{let{editor:t,format:r,node:o,path:n,split:l}=e;if(l)return c.gB.wrapNodes(t,{type:r},{split:!0});const a=o&&y()(o,"text")?c.bP.parent(t,n):o,i=s.rL.findPath(t,a);c.gB.removeNodes(t),p.RX.includes(a.type)?c.gB.insertNodes(t,{type:r,children:[a]},{at:i,select:!0}):c.gB.insertNodes(t,{...a,children:[{type:r,children:a.children}]},{at:i,select:!0}),s.rL.focus(t)})({editor:e,format:t,node:a,path:i,split:!r})},O=(e,t)=>{M(e,t)?c.KE.removeMark(e,t):c.KE.addMark(e,t,!0),s.rL.focus(e)},H=(e,t)=>{const r=c.bP.get(e,t);if(1===t.length&&0===t[0])return;if(z(e,r))return c.gB.removeNodes(e,{at:t,match:(e,o)=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&e.type===r.type&&v()(o,t)});if(c.KE.isInline(e,r))return c.gB.unwrapNodes(e,{at:t,match:(e,o)=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&e.type===r.type&&v()(o,t)});if("ol"===r.type||"ul"===r.type)return r.children.forEach((t=>{const r=s.rL.findPath(e,t);c.gB.setNodes(e,{type:"p",slateOnly:void 0},{at:r,mode:"highest"}),t.children&&t.children.forEach((t=>{if("ol"===t.type||"ul"===t.type){const r=s.rL.findPath(e,t);return c.gB.unwrapNodes(e,{match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&"p"===e.type,at:r,mode:"lowest"})}}))})),c.gB.unwrapNodes(e,{match:(e,o)=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&e.type===r.type&&v()(o,t),at:t});const o=c.KE.hasBlocks(e,r);if("pre"===r.type&&r.children[0].code&&c.gB.setNodes(e,{...r.children[0],code:void 0},{at:[...t,0],mode:"highest"}),o)return c.gB.unwrapNodes(e,{at:t,match:(e,o)=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&e.type===r.type&&!e.slateOnly&&v()(o,t)});o||c.KE.withoutNormalizing(e,(()=>{let o=0;r.children.forEach((r=>{y()(r,"text")&&!c.bP.string(r)?c.gB.removeNodes(e,{at:[...t,o]}):(c.gB.wrapNodes(e,{type:"div",slateOnly:!0},{at:[...t,o]}),o+=1)})),c.gB.unwrapNodes(e,{at:t,match:(e,o)=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&e.type===r.type&&!e.slateOnly&&v()(o,t)})}))};var $=r(70787),I=r(74662);var P=e=>{const{insertText:t,isInline:r}=e;return e.isInline=e=>{var t;return"math"===e.type&&"inline"===(null===(t=e.htmlAttrs)||void 0===t?void 0:t.display)||"math"!==e.type&&I.j_.includes(e.type)||p.Lz.includes(e.type)||r(e)},e.insertText=r=>{const o=(0,$.Zj)(r),n=(0,$.r1)(r),l=(0,$.AY)(r);return o?f(e,r):n?h(e,r):l?g(e,r):void t(r)},e};var T=e=>{const{insertData:t}=e;return e.insertData=r=>{const o=r.getData("text/plain"),{files:n}=r,l=null==n?void 0:n.item(0);if(l){const t=new FileReader,[r]=l.type.split("/");if("image"===r)return t.addEventListener("load",(()=>{const r=t.result;f(e,r)})),void t.readAsDataURL(l)}(0,$.Zj)(o)?f(e,o):t(r)},e};const F={"*":"ul","-":"ul","+":"ul","1.":"ol",">":"blockquote","#":"h1","##":"h2","###":"h3","####":"h4","#####":"h5","######":"h6","```":"pre"},V={"*":"italic","**":"bold","`":"code","~":"strikethrough"};var W=e=>{const{insertText:t}=e;return e.insertText=r=>{const{selection:o}=e,{anchor:n}=o;if(r.endsWith(" ")&&o&&c.Q6.isCollapsed(o)){const[t,o]=c.KE.above(e,{match:t=>c.Hg.isElement(t)&&c.KE.isBlock(e,t)})??[],l={anchor:n,focus:c.KE.start(e,o)},a=F[c.KE.string(e,l)+r.slice(0,-1)];if(a)return c.gB.select(e,l),c.Q6.isCollapsed(l)||c.gB.delete(e),S(e,a)}let l;if(["*","`","~"].includes(r)){const[o,a]=c.KE.first(e,n.path),i=c.bP.string(o);if("~"===r&&(l="~"),"`"===r&&(l="`"),"*"===r&&(i.endsWith("*")&&(l="**"),-1===i.indexOf("**")&&(l="*")),l){const o=i.indexOf(l),n=l.length-1>0?-(l.length-1):void 0,s=i.slice(o+l.length,n);if("`"===l&&"`"===s)return t(r);if(o>=0&&s){const t={path:a,offset:o},r={path:a,offset:i.length};return c.KE.withoutNormalizing(e,(()=>{c.gB.select(e,{anchor:t,focus:r}),c.KE.addMark(e,V[l],!0),c.gB.delete(e,{at:t,distance:l.length,unit:"character"}),c.gB.collapse(e,{edge:"end"}),l.length>1&&c.gB.delete(e,{distance:l.length-1,unit:"character",reverse:!0})}))}}}return t(r)},e};const U=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const{value:n}=t.next();if(!n)return{textContent:o,lastPath:r};const[l,a]=n;if("list-sibling"===l.type)return U(e,c.bP.children(e,a),a);const i=y()(l,"text"),s=i?l.text:o;return U(e,t,i?a:r,s)},q=(e,t)=>{const r=c.bP.children(e,t),{textContent:o,lastPath:n}=U(e,r,t);return{path:n,offset:o.length}},Z=e=>{let{editor:t,srcPath:r,destPath:o,node:n,type:l}=e;const a=Array.isArray(n)?n:[n];c.gB.removeNodes(t,{at:r}),c.gB.insertNodes(t,[{type:l,children:a}],{at:o})},Y=e=>{let{editor:t,srcPath:r,destPath:o,unwrap:n=!0}=e;if(o&&c.gB.moveNodes(t,{at:r,to:o}),n){const e=o??r;c.gB.unwrapNodes(t,{at:e})}},Q=e=>{let{editor:t,at:r,nodes:o}=e;return o?c.gB.insertNodes(t,[{type:"list-sibling",slateOnly:!0,children:o}],{at:r}):c.gB.unwrapNodes(t,{at:r,match:e=>"list-sibling"===e.type})},J=e=>{const{value:t}=e.next();if(!t)return[];const[r,o]=t;return"ul"===r.type||"ol"===r.type?[r,o]:J(e)},X=e=>{let{editor:t,canUnwrapRoot:r}=e;const[o,n]=C(t,t.selection),[l,a]=C(t,n),[i,s]=_(t,n),d=c.bP.parent(t,s),u="ul"===(null==d?void 0:d.type)||"ol"===(null==d?void 0:d.type);if(!o)return;if(!(i&&u||l)){const e=p.RX.includes(null==d?void 0:d.type)?d.type:"p";return r?(c.gB.setNodes(t,{type:e},{at:n}),L({editor:t,format:e,path:n})):null}const b=c.KE.start(t,n),g=c.KE.start(t,s);if(c.bR.equals(b,g))return c.KE.withoutNormalizing(t,(()=>{if(u)return Y({editor:t,srcPath:s});const e=[...a].pop()+1,r=[...a.slice(0,-1),e];Y({editor:t,srcPath:s,destPath:r}),Q({editor:t,at:[...r.slice(0,-1),0]})}));l&&c.KE.withoutNormalizing(t,(()=>{const e=[...a].pop()+1,r=[...a.slice(0,-1),e];Y({editor:t,srcPath:n,destPath:r,unwrap:!1})}))};var G=e=>{const{insertBreak:t,deleteBackward:r}=e;e.insertBreak=()=>{const{selection:r}=e,o=r&&c.Q6.isCollapsed(r);o||c.gB.delete(e);const[n,l]=c.KE.above(e,r),[a,i]=c.KE.above(e,{at:r,match:t=>c.KE.isBlock(e,t)&&!t.slateOnly}),{children:s,htmlAttrs:d,slateOnly:u,inline:b,nodeName:g,srcdoc:f,htmlChildren:h,...m}=a;if(p.RX.includes(m.type)||p.e5.includes(m.type)||(m.type="p"),"a"!==m.type&&"img"!==m.type&&"iframe"!==m.type&&"video"!==m.type||(m.type="p"),"li"===m.type){const t=c.KE.isEmpty(e,a);if(o&&t)return X({editor:e,canUnwrapRoot:!0});m.htmlAttrs=null!=d&&d.class?{class:null==d?void 0:d.class}:{}}try{c.KE.withoutNormalizing(e,(()=>{c.gB.insertNodes(e,{...m,children:[{text:""}]},{at:r,select:!0})}))}catch(e){t()}};const o=(t,r)=>{const{selection:n}=e,l=c.KE.start(e,r),a=c.bP.string(t);if(c.bR.isBefore(l,n.anchor)&&a.length<=1){c.gB.unwrapNodes(e,{at:r,match:t=>c.KE.isInline(e,t)});const[t,n]=c.KE.above(e,{match:t=>t.type&&c.KE.isInline(e,t)})??[];if(t)return o(t,n)}};return e.deleteBackward=function(){const{selection:t}=e;if(t&&c.Q6.isCollapsed(t)){const[r]=C(e,e.selection);if(r){if(c.KE.isEmpty(e,r))return X({editor:e,canUnwrapRoot:!0})}const[n,l]=c.KE.above(e,{match:t=>t.type&&c.KE.isInline(e,t)})??[];n&&o(n,l);const[a,i]=c.KE.above(e,{match:t=>c.Hg.isElement(t)&&c.KE.isBlock(e,t)})??[];((t,r)=>{const{selection:o}=e,n=c.KE.start(e,r);!c.KE.isEditor(t)&&t.slateOnly&&c.bR.equals(o.anchor,n)&&c.gB.unwrapNodes(e,{at:r,match:e=>e.slateOnly})})(a,i);const[s,d]=a.slateOnly?c.KE.above(e,{match:t=>c.Hg.isElement(t)&&c.KE.isBlock(e,t)}):[a,i];if(s){const r=c.KE.start(e,d);if(!c.KE.isEditor(s)&&c.Hg.isElement(s)&&"p"!==s.type&&c.bR.equals(t.anchor,r))return c.gB.setNodes(e,{type:"p"},{at:d,select:!0}),void("li"===s.type&&c.gB.unwrapNodes(e,{match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&("ul"===e.type||"ol"===e.type),split:!0}))}}r(...arguments)},e};var ee=e=>P(G(W((0,u.A)(T(e))))),te=r(7350),re=r.n(te),oe=r(61375),ne=r(46942),le=r.n(ne),ae=r(32389);const ie=(0,o.createContext)([]),se=()=>(0,o.useContext)(ie);var ce=r(7589),de=r(38221),ue=r.n(de),pe=r(81923),be=r(42995);const ge=(0,pe.A)("div",{target:"eiv2b1014"})("display:none;flex-direction:column;align-items:center;gap:8px;position:absolute;top:5px;right:auto;left:5px;color:var(--color-accent-primary);",(e=>{let{$visible:t}=e;return t&&"display: flex;"})," ",(0,be.uf)("right: -60px; left: auto; top: -5px;",65),";"),fe=(0,pe.A)("button",{target:"eiv2b1013"})(be.HH," width:34px;height:34px;display:flex;justify-content:center;align-items:center;color:var(--color-neutral-text-light);background:var(--color-base-neutral90);border-radius:4px;border:1px solid var(--color);&:hover{color:",(e=>{let{$color:t}=e;return"red"===t?"var(--color-notification-error-light)":"var(--color-accent-primary)"}),";border-color:",(e=>{let{$color:t}=e;return"red"===t?"var(--color-notification-error-light)":"var(--color-accent-primary)"}),";}"),he=(0,pe.A)("img",{target:"eiv2b1012"})("display:inline;",(e=>{let{$selected:t}=e;return t&&`${be.Jl} outline-offset: 1px;`}),";"),me=(0,pe.A)("span",{target:"eiv2b1011"})({name:"arhcr6",styles:"display:inline-block;width:max-content;max-width:100%;position:relative;&.responsive-iframe{display:block;width:100%;overflow:visible;}"}),ve=(0,pe.A)("div",{target:"eiv2b1010"})({name:"68fpf9",styles:"&+&{margin-block-start:20px;}"}),xe=(0,pe.A)("div",{target:"eiv2b109"})("display:block;margin-inline-start:-5%;width:110%;padding-inline:8%;padding-block-end:20px;padding-block-start:20px;position:relative;background-color:var(--drawer-bg-color);box-shadow:3px 3px 10px var(--color-base-neutral100);border-radius:4px;border:0;.scheme-light &{background-color:var(--color-base-neutral20);box-shadow:3px 3px 10px var(--color-base-neutral30);}",(e=>{let{$selected:t}=e;return t&&"outline: solid 2px var(--disabled-control-color); outline-offset: 1px;"}),";"),ye=(0,pe.A)("span",{target:"eiv2b108"})(be.Bt," font-size:14px;color:var(--color-base-yellow20);display:inline-flex;gap:6px;align-items:center;.scheme-light &{color:var(--color-base-violet75);}>svg{margin-top:1px;}"),ke=(0,pe.A)("span",{target:"eiv2b107"})({name:"1tu05zb",styles:"display:inline-flex;width:100%"}),Ae=(0,pe.A)("span",{target:"eiv2b106"})({name:"lr7qmu",styles:"flex-grow:1;margin:0;width:100%"}),je={green:{light:"var(--color-interaction-dark)",dark:"var(--color-accent-primary)"},blue:{light:"var(--color-base-blue75)",dark:"var(--color-base-blue45)"},violet:{dark:"var(--color-base-violet45)",light:"var(--color-base-violet75)"}},we=(0,pe.A)("span",{target:"eiv2b105"})("position:absolute;display:inline-block;left:-8px;top:-26px;font-size:14px;line-height:1;padding:2px;border-top-right-radius:2px;border-top-left-radius:2px;font-family:var(--font-family-heading);font-weight:var(--font-weight-regular);border:0px solid;border-bottom:0;white-space:nowrap;text-indent:0;z-index:10;padding-inline:4px;padding-block-start:2px;padding-block-end:4px;text-decoration:none;text-transform:none;font-variant:none;.scheme-dark &{background:",(e=>{let{$color:t}=e;return je[t].dark}),";color:var(--drawer-bg-color);}.scheme-light &{background:",(e=>{let{$color:t}=e;return je[t].light}),";color:var(--background-color);}&:hover{z-index:20;}"),Ee=(0,pe.A)(we,{target:"eiv2b104"})({name:"l1gojm",styles:"top:-35px;padding-block-start:4px;display:flex;align-items:center;>span{line-height:1;}"}),Ce=(0,pe.A)("input",{target:"eiv2b103"})({name:"e25hrh",styles:"appearance:none;background:rgba(255, 255, 255, 0.75);border:none;padding:0;height:18px;margin-inline-start:3px;width:150px;.scheme-light &{background:rgba(0, 0, 0, 0.5);}&:focus-visible{outline:1px solid;}"}),_e=(0,pe.A)("div",{target:"eiv2b102"})({name:"1do1th2",styles:"display:flex;gap:4px;margin-inline-start:8px;margin-inline-end:4px"}),Be=(0,pe.A)("button",{target:"eiv2b101"})(be.HH," display:flex;align-items:center;border-radius:2px;padding:2px;&:hover,&:focus-visible{color:var(--error-color);background:var(--background-color);}&:disabled{cursor:default;&:hover{background:none;color:inherit;}}"),Ke=(0,pe.A)(Be,{target:"eiv2b100"})({name:"14tjs2j",styles:"&:hover,&:focus-visible{color:var(--hover-color);background:var(--background-color);}"}),Re=(e,t)=>{const r=p.RX.includes(e)?"green":p.Lz.includes(e)||p.zp.includes(e)?"blue":"violet";return{outline:"2px dotted",outlineColor:t?je[r].dark:je[r].light,borderRadius:"2px",borderTopLeftRadius:0,outlineOffset:"6px",position:"relative"}};var Ne=r(74848);function Me(e){var t,r;let{visible:n,element:l}=e;const a=(0,s.RV)(),i=(0,o.useRef)(null),{t:d}=(0,ae.Bd)(),{editingCrumb:u}=se();if((0,o.useEffect)((()=>{i.current&&u&&i.current.focus()}),[u]),!n)return null;const b=p.RX.includes(l.type)?"green":p.Lz.includes(l.type)||p.zp.includes(l.type)?"blue":"violet",g=p.zp.includes(l.type)?[]:s.rL.findPath(a,l),f=1===g.length||"li"===l.type&&!c.KE.isEmpty(a,l),h=g.length<=2||"li"===l.type,m=null!==(t=l.htmlAttrs)&&void 0!==t&&t.id?`${l.type}#${l.htmlAttrs.id}`:l.type,v=null===(r=l.htmlAttrs)||void 0===r||null===(r=r.class)||void 0===r?void 0:r.trim().replaceAll(" ",".");return u?(0,Ne.jsxs)(Ee,{contentEditable:!1,$color:b,children:[(0,Ne.jsxs)("span",{children:[m,"."]}),(0,Ne.jsx)(Ce,{ref:i,defaultValue:v,onChange:e=>(e=>{e.persist(),ue()((()=>{c.gB.setNodes(a,{...l,htmlAttrs:{...l.htmlAttrs,class:e.target.value.replaceAll("."," ").trim()}},{at:g,mode:"highest"})}),1e3)(e)})(e)}),(0,Ne.jsxs)(_e,{children:[(0,Ne.jsx)(Ke,{onClick:e=>{e.preventDefault(),L({editor:a,format:l.type,path:g})},"aria-label":d("editor.controls.labels.lift"),disabled:h,children:(0,Ne.jsx)(ce.A,{icon:"arrowUp16",size:16})}),(0,Ne.jsx)(Be,{onClick:e=>{e.preventDefault(),H(a,g)},"aria-label":d("actions.delete"),disabled:f,children:(0,Ne.jsx)(ce.A,{icon:"delete24",size:16})})]})]}):(0,Ne.jsx)(we,{$color:b,children:E(l)})}function De(e){let{attributes:t,children:r,leaf:o,darkMode:n}=e;const{selectedCrumb:l}=se(),a="all"===l;let i=r;return o.bold&&(i=(0,Ne.jsxs)("strong",{style:a?Re("strong",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"strong"},visible:a})]})),o.italic&&(i=(0,Ne.jsxs)("em",{style:a?Re("em",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"em"},visible:a})]})),o.i&&(i=(0,Ne.jsxs)("i",{style:a?Re("i",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"i"},visible:a})]})),o.underline&&(i=(0,Ne.jsxs)("u",{style:a?Re("u",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"u"},visible:a})]})),o.strikethrough&&(i=(0,Ne.jsxs)("s",{style:a?Re("s",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"s"},visible:a})]})),o.del&&(i=(0,Ne.jsxs)("del",{style:a?Re("del",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"del"},visible:a})]})),o.code&&(i=(0,Ne.jsxs)("code",{style:a?Re("code",n):void 0,children:[i,(0,Ne.jsx)(Me,{element:{type:"code"},visible:a})]})),(0,Ne.jsx)("span",{...t,children:i})}var ze=r(85842);const Le=e=>{e&&e.preventDefault();const t=document.getElementsByName("img-modal-trigger");t[0]&&t[0].click()},Se=e=>{e&&e.preventDefault();const t=document.getElementsByName("iframe-modal-trigger");t[0]&&t[0].click()};function Oe(e){let{element:t,children:r,attributes:o,as:n,showHtml:l,darkMode:a}=e;const i=(0,s.RV)(),d=(0,s.zL)(),u=(0,s.f7)(),p=s.rL.findPath(i,t),b=le()({"responsive-iframe":"iframe"===n||"video"===n}),{htmlAttrs:g}=t??{},f=(null==g?void 0:g.class)??void 0,h=(null==g?void 0:g["data-epub-type"])||void 0;return(0,Ne.jsxs)("div",{className:null!=g&&g.inline?"inline-block":void 0,...o,style:l?Re("a",a):void 0,children:[r,(0,Ne.jsx)("span",{contentEditable:!1,children:(0,Ne.jsxs)(me,{className:b,"data-epub-type":h,children:[(0,Ne.jsx)(he,{as:n??"img",src:g.src,alt:n?void 0:g.alt,title:n?g.title:void 0,controls:"video"===n||void 0,$selected:u&&d,className:f,width:null==g?void 0:g.width,height:null==g?void 0:g.height}),(0,Ne.jsxs)(ge,{$visible:u,children:[(0,Ne.jsx)(fe,{onClick:"iframe"===n||"video"===n?Se:Le,children:(0,Ne.jsx)(ze.A.IconComposer,{icon:"annotate24",size:24})}),(0,Ne.jsx)(fe,{$color:"red",onClick:e=>(e.preventDefault(),c.KE.withoutNormalizing(i,(()=>{c.gB.removeNodes(i,{at:p}),c.gB.insertNodes(i,{type:"p",children:[{text:""}]},{select:!0})}))),children:(0,Ne.jsx)(ze.A.IconComposer,{icon:"delete24",size:24})})]})]})}),(0,Ne.jsx)(Me,{element:t,visible:l})]})}function He(e){let{element:t,children:r,attributes:n,theme:l,darkMode:a,showHtml:i}=e;const c=(0,s.zL)(),d=(0,s.f7)(),{srcdoc:u}=t??{},p=(0,o.useRef)();return(0,o.useEffect)((()=>{var e;if(p.current&&!p.current.shadowRoot){const e=p.current.attachShadow({mode:"open"}),t=document.createElement("div"),r="manifold-text-section "+(a?"scheme-dark":"scheme-light");t.setAttribute("class",r);const o=document.createElement("style");o.textContent=l,e.appendChild(o),t.innerHTML=u,e.appendChild(t)}if(null!==(e=p.current)&&void 0!==e&&e.shadowRoot){const e=p.current.shadowRoot.childNodes[1],t="manifold-text-section "+(a?"scheme-dark":"scheme-light");e.setAttribute("class",t)}}),[u,l,a]),(0,Ne.jsxs)(ve,{...n,children:[r,(0,Ne.jsxs)(xe,{contentEditable:!1,$selected:d&&c,style:i?Re("div",a):void 0,children:[(0,Ne.jsxs)(ye,{children:[(0,Ne.jsx)(ze.A.IconComposer,{svgProps:{style:{flexShrink:0}},icon:"code24"}),(0,Ne.jsx)("span",{children:"Preview only. Switch to HTML mode to edit this block:"})]}),(0,Ne.jsx)("div",{ref:p}),(0,Ne.jsx)(Me,{element:t,visible:i})]})]})}function $e(e){var t,r;let{attributes:o,children:n,element:l,theme:a,darkMode:i}=e;const c=(null===(t=l.htmlAttrs)||void 0===t?void 0:t.class)||void 0,d=(null===(r=l.htmlAttrs)||void 0===r?void 0:r["data-epub-type"])||void 0,u=(0,s.RV)(),{id:b}=s.rL.findKey(u,l),{selectedCrumb:g}=se(),f=(g===b||"all"===g)&&!l.slateOnly;if("br"===l.type)return(0,Ne.jsxs)("p",{...o,style:f?Re("p",i):void 0,children:[n,(0,Ne.jsx)(Me,{element:l,visible:f})]});if("wbr"===l.type)return(0,Ne.jsx)(Ne.Fragment,{});if("hr"===l.type)return(0,Ne.jsxs)(ke,{contentEditable:!1,...o,children:[n,(0,Ne.jsx)(Ae,{children:(0,Ne.jsx)("hr",{className:c,"data-epub-type":d,style:f?Re("hr",i):void 0})}),(0,Ne.jsx)(Me,{element:l,visible:f})]});if("void"===l.type)return(0,Ne.jsx)(He,{attributes:o,element:l,theme:a,darkMode:i,showHtml:f,children:n});if("img"===l.type)return(0,Ne.jsx)(Oe,{attributes:o,element:l,showHtml:f,darkMode:i,children:n});if("iframe"===l.type||"video"===l.type)return(0,Ne.jsx)(Oe,{as:l.type,attributes:o,element:l,showHtml:f,darkMode:i,children:n});var h;if("a"===l.type)return(0,Ne.jsxs)("a",{className:c,"data-epub-type":d,href:null===(h=l.htmlAttrs)||void 0===h?void 0:h.href,...o,style:f?Re("a",i):void 0,children:[n,(0,Ne.jsx)(Me,{element:l,visible:f})]});if("pre"===l.type)return(0,Ne.jsxs)("pre",{className:c,"data-epub-type":d,...o,style:f?Re("pre",i):void 0,children:[(0,Ne.jsx)("code",{children:n}),(0,Ne.jsx)(Me,{element:l,visible:f})]});if("div"===l.type&&l.inline)return(0,Ne.jsx)("div",{className:le()("inline-block",c),"data-epub-type":d,...o,children:n});if(p.RX.includes(l.type)||p.LR.includes(l.type)||p.zp.includes(l.type)||p.e5.includes(l.type)||"span"===l.type){const e="list-sibling"===l.type?"span":l.type;return(0,Ne.jsxs)(e,{className:c,"data-epub-type":d,...o,style:f?Re(e,i):void 0,children:[n,(0,Ne.jsx)(Me,{element:l,visible:f})]})}return null}const Ie=(e,t)=>{if("Enter"===e.key)return e.shiftKey?(e.preventDefault(),(e=>{c.gB.insertText(e,"\n")})(t)):void 0;if("Tab"===e.key){const[r]=C(t,t.selection);if(!r)return;return e.preventDefault(),e.shiftKey?X({editor:t}):(e=>{const[t,r]=C(e,e.selection),[o,n]=_(e,r);if(!t||!o)return;const l=o.type,a=[...r].pop(),i=c.KE.start(e,r),s=c.KE.start(e,n);if(c.bR.equals(i,s))return c.KE.withoutNormalizing(e,(()=>{Z({editor:e,srcPath:n,destPath:n,node:o,type:l});const{path:t,offset:r}=q(e,[...n,0,0]);w(e,t,r)}));const d=[...r.slice(0,-1),a-1],[u]=c.KE.node(e,d);if(!u)return;const p=c.bP.children(e,d),[b,g]=J(p);if(b)return c.gB.moveNodes(e,{at:r,to:[...g,b.children.length]});c.KE.withoutNormalizing(e,(()=>{if(c.KE.hasBlocks(e,u)){const o=[...d,u.children.length];Z({editor:e,srcPath:r,destPath:o,node:t,type:l});const{path:n,offset:a}=q(e,[...o,0]);return void w(e,n,a)}Q({editor:e,at:[...d,0],nodes:u.children});const o=[...d,1];Z({editor:e,srcPath:r,destPath:o,node:t,type:l});const{path:n,offset:a}=q(e,[...o,0]);w(e,n,a)}))})(t)}if(e.metaKey||e.ctrlKey){if(e.metaKey&&e.altKey||e.ctrlKey&&e.shiftKey)switch(e.keyCode){case 48:return e.preventDefault(),S(t,"p");case 49:return e.preventDefault(),S(t,"h1");case 50:return e.preventDefault(),S(t,"h2");case 51:return e.preventDefault(),S(t,"h3");case 52:return e.preventDefault(),S(t,"h4");case 53:return e.preventDefault(),S(t,"h5");case 54:return e.preventDefault(),S(t,"h6");case 55:return e.preventDefault(),S(t,"ol");case 56:return e.preventDefault(),S(t,"ul");case 57:return e.preventDefault(),S(t,"blockquote");case 69:return e.preventDefault(),S(t,"pre")}if(e.shiftKey&&"s"===e.key)return e.preventDefault(),O(t,"strikethrough");switch(e.key){case"b":return e.preventDefault(),O(t,"bold");case"i":return e.preventDefault(),O(t,"italic");case"u":return e.preventDefault(),O(t,"underline");case"e":return e.preventDefault(),O(t,"code");case"k":return e.preventDefault(),(e=>{if(D(e))return b(e);const{selection:t}=e;if(!t||!c.Q6.isCollapsed(t)){const[t]=B(e),r=c.bP.string(t);if((0,$.AY)(r))return g(e,r)}const r=document.getElementsByName("link-modal-trigger");r[0]&&r[0].click()})(t);case"g":return e.preventDefault(),Le();case"m":return e.preventDefault(),Se()}}};var Pe=r(80952),Te=r(70470),Fe=(r(43158),r(1766),r(29072),r(33217),r(42683),r(67644)),Ve=r(81742),We=r(53096);function Ue(e){const{aceRef:t,nextRef:r,prevRef:o,darkMode:n,...l}=e;return(0,Ne.jsx)(Te.Ay,{ref:t,theme:n?"idle_fingers":"kuroir",editorProps:{$blockScrolling:!0},width:"100%",minLines:40,maxLines:1e4,wrapEnabled:!0,showPrintMargin:!1,onLoad:e=>{e.once("change",(()=>{e.session.getUndoManager().reset()})),e.commands.removeCommand("find"),e.renderer.setPadding(24,24),e.renderer.setScrollMargin(24,24);e.textInput.getElement().addEventListener("keydown",(e=>{if("ArrowDown"===e.key){document.querySelector(".top.pad-xl").scrollBy(0,16)}if("ArrowUp"===e.key){document.querySelector(".top.pad-xl").scrollBy(0,-16)}}))},onFocus:()=>{t.current&&t.current.editor.gotoLine(0,0,!0)},editorOptions:{enableAutoIndent:!0},commands:[{name:"tab",bindKey:{win:"Tab",mac:"Tab"},exec:()=>{r.current.focus()}},{name:"shiftTab",bindKey:{win:"Shift+Tab",mac:"Shift+Tab"},exec:()=>{o.current.focus()}}],...l})}Pe.config.setModuleUrl("ace/mode/css_worker",Fe),Pe.config.setModuleUrl("ace/mode/html_worker",Ve),Pe.config.setModuleUrl("ace/mode/javascript_worker",We);var qe=r(44203);const Ze=(0,pe.A)("div",{target:"e1e32g678"})({name:"7y2kgy",styles:"display:flex;flex-direction:column;gap:16px;align-items:center;padding:0 4px 8px 4px"}),Ye=(0,pe.A)("span",{target:"e1e32g677"})(be.dr," font-style:normal;font-weight:400;font-size:17px;color:var(--input-color);"),Qe=(0,pe.A)("div",{target:"e1e32g676"})({name:"1yz57yz",styles:"padding-block-end:6px;span{display:inline-block;}span+span{margin-block-start:12px;}"}),Je=(0,pe.A)("span",{target:"e1e32g675"})({name:"utdwfv",styles:"min-width:175px"}),Xe=(0,pe.A)("div",{target:"e1e32g674"})(""),Ge=(0,pe.A)("span",{target:"e1e32g673"})({name:"bk842r",styles:"whitespace:nowrap"}),et=(0,pe.A)("span",{target:"e1e32g672"})({name:"13cm0wy",styles:"whitespace:nowrap;font-style:normal;display:inline-block"}),tt=(0,pe.A)("span",{target:"e1e32g671"})({name:"zdez4m",styles:"display:inline-flex;flex-wrap:nowrap;flex-shrink:0;justify-content:center;align-items:center;padding-block-start:6px;padding-block-end:10px;padding-inline:10px;background-color:var(--background-color);font-family:var(--font-family-sans);font-weight:var(--font-weight-semibold);border-radius:4px;font-style:normal;line-height:1"}),rt=(0,pe.A)("div",{target:"e1e32g670"})({name:"10z79ec",styles:"display:flex;gap:8px;flex-wrap:no-wrap;margin-block-start:8px;align-items:center"});function ot(e){let{label:t,description:r,hotkeys:n=[]}=e;return(0,Ne.jsxs)(Ze,{children:[(0,Ne.jsxs)(Qe,{children:[(0,Ne.jsx)(Ye,{children:t}),r&&(0,Ne.jsx)(Je,{children:r})]}),n.map((e=>(0,Ne.jsxs)(Xe,{children:[(0,Ne.jsx)(Ge,{children:e.label}),(0,Ne.jsx)(rt,{children:e.keys.map(((t,r)=>(0,Ne.jsxs)(o.Fragment,{children:[(0,Ne.jsx)(tt,{children:t}),e.inline&&0===r&&(0,Ne.jsx)(et,{children:"[text]"})]},`${t}_${r}`)))})]},e.label)))]})}const nt={p:[{label:"Mac",keys:["Cmd","Option","0"]},{label:"Windows",keys:["Ctrl","Shift","0"]}],h1:[{label:"Mac",keys:["Cmd","Option","1"]},{label:"Windows",keys:["Ctrl","Shift","1"]},{label:"Markdown",keys:["#","Space"]}],h2:[{label:"Mac",keys:["Cmd","Option","2"]},{label:"Windows",keys:["Ctrl","Shift","2"]},{label:"Markdown",keys:["##","Space"]}],h3:[{label:"Mac",keys:["Cmd","Option","3"]},{label:"Windows",keys:["Ctrl","Shift","3"]},{label:"Markdown",keys:["###","Space"]}],h4:[{label:"Mac",keys:["Cmd","Option","4"]},{label:"Windows",keys:["Ctrl","Shift","4"]},{label:"Markdown",keys:["####","Space"]}],h5:[{label:"Mac",keys:["Cmd","Option","5"]},{label:"Windows",keys:["Ctrl","Shift","5"]},{label:"Markdown",keys:["#####","Space"]}],h6:[{label:"Mac",keys:["Cmd","Option","6"]},{label:"Windows",keys:["Ctrl","Shift","6"]},{label:"Markdown",keys:["######","Space"]}],ol:[{label:"Mac",keys:["Cmd","Option","7"]},{label:"Windows",keys:["Ctrl","Shift","7"]},{label:"Markdown",keys:["1.","Space"]}],ul:[{label:"Mac",keys:["Cmd","Option","8"]},{label:"Windows",keys:["Ctrl","Shift","8"]},{label:"Markdown",keys:["-","Space"]}],blockquote:[{label:"Mac",keys:["Cmd","Option","9"]},{label:"Windows",keys:["Ctrl","Shift","9"]},{label:"Markdown",keys:[">","Space"]}],link:[{label:"Mac",keys:["Cmd","K"]},{label:"Windows",keys:["Ctrl","K"]}],pre:[{label:"Mac",keys:["Cmd","Option","E"]},{label:"Windows",keys:["Ctrl","Shift","E"]},{label:"Markdown",keys:["```","Space"]}],italic:[{label:"Mac",keys:["Cmd","I"]},{label:"Windows",keys:["Ctrl","I"]},{label:"Markdown",keys:["*","*"],inline:!0}],strikethrough:[{label:"Mac",keys:["Cmd","Shift","S"]},{label:"Windows",keys:["Ctrl","Shift","S"]},{label:"Markdown",keys:["~","~"],inline:!0}],bold:[{label:"Mac",keys:["Cmd","B"]},{label:"Windows",keys:["Ctrl","B"]},{label:"Markdown",keys:["**","**"],inline:!0}],underline:[{label:"Mac",keys:["Cmd","U"]},{label:"Windows",keys:["Ctrl","U"]}],code:[{label:"Mac",keys:["Cmd","E"]},{label:"Windows",keys:["Ctrl","E"]},{label:"Markdown",keys:["`","`"],inline:!0}],undo:[{label:"Mac",keys:["Cmd","Z"]},{label:"Windows",keys:["Ctrl","Z"]}],redo:[{label:"Mac",keys:["Cmd","Shift","Z"]},{label:"Windows",keys:["Ctrl","Y"]}],img:[{label:"Mac",keys:["Cmd","G"]},{label:"Windows",keys:["Ctrl","G"]}],iframe:[{label:"Mac",keys:["Cmd","M"]},{label:"Windows",keys:["Ctrl","M"]}]};const lt=(0,pe.A)("button",{target:"e1xrm7ho7"})(be.HH," display:inline-flex;align-items:center;justify-content:center;height:28px;width:28px;background-color:transparent;transition:color ",be.NI,",background-color ",be.NI,';font-family:var(--font-family-sans);font-weight:var(--font-weight-semibold);border-radius:4px;margin-inline-start:3px;&:hover{background-color:var(--background-color);color:inherit;}&[data-active="true"]{color:var(--drawer-bg-color);background-color:var(--color-accent-primary);}&:focus-visible,&:focus{',be.Jl,";}"),at=(0,pe.A)("div",{target:"e1xrm7ho6"})({name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"}),it=(0,pe.A)("div",{target:"e1xrm7ho5"})({name:"s15oq9",styles:"position:relative;width:max-content;margin-block-start:-3px;margin-inline-start:5px;cursor:pointer"}),st=(0,pe.A)("div",{target:"e1xrm7ho4"})({name:"1nrevy2",styles:"position:relative;display:inline-block"}),ct=(0,pe.A)("select",{target:"e1xrm7ho3"})(be.HH," font-family:var(--font-family-sans);line-height:22px;font-size:14px;width:120px;height:28px;display:inline-block;border-radius:4px;padding-block-start:2px;padding-block-end:4px;padding-inline-start:8px;transition:color ",be.NI,",background-color ",be.NI,';.backend &{color:var(--color);&[data-active="true"]{color:var(--drawer-bg-color);background-color:',(e=>{let{$color:t}=e;return t}),";}&:hover{background-color:var(--background-color);color:var(--color);}}&:focus-visible,&:focus{",be.Jl,";}"),dt=(0,pe.A)(ct,{target:"e1xrm7ho2"})('width:auto;padding-inline:8px;.backend &{&[data-active="true"]{color:var(--drawer-bg-color);background-color:var(--color-base-blue45);}&:hover{background-color:var(--background-color);color:var(--color);}}&:focus-visible,&:focus{',be.Jl,";}"),ut=(0,pe.A)(ce.A,{target:"e1xrm7ho1"})({name:"a3x7ss",styles:'position:absolute;top:25%;right:4px;pointer-events:none;select[data-active="true"]:not(:hover)+&{color:var(--drawer-bg-color);}'}),pt=(0,pe.A)("button",{target:"e1xrm7ho0"})(be.HH," ",be.Bt," padding-inline-start:12px;padding-inline-end:16px;padding-block:6px;background-color:var(--box-bg-color);border-radius:4px;display:inline-flex;justify-content:center;align-items:center;gap:12px;margin-inline-start:auto;svg{margin-top:3px;}&:hover{background-color:var(--color-accent-primary);color:var(--box-bg-color);}"),bt=(e,t)=>{let{format:r,icon:o,size:n,...l}=e;const a=(0,s.Zi)(),{selection:i}=a??{},{t:d}=(0,ae.Bd)(),[u]=R(a,r);return(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:d(`editor.tooltips.labels.${r}`),hotkeys:nt[r]}),xOffset:"-75px",yOffset:"43px",delay:.5,children:(0,Ne.jsx)(lt,{ref:t,...l,"aria-label":d("editor.controls.labels.format",{format:r}),"data-active":u,onClick:e=>{if(e.preventDefault(),i){if(u){const{path:e}=((e,t)=>{const[r,o]=c.KE.above(e,{at:c.KE.unhangRange(e,e.selection),match:e=>!c.KE.isEditor(e)&&t.includes(e.type)&&!e.nodeName&&!e.slateOnly});return{nearest:r,path:o}})(a,[r]);return"pre"===r&&c.KE.removeMark(a,"code",!0),H(a,e)}S(a,r)}},tabIndex:-1,children:o&&(0,Ne.jsx)(ze.A.IconComposer,{icon:o,size:n})})})};var gt=(0,o.forwardRef)(bt);const ft=(e,t)=>{let{format:r,label:o,icon:n,isFirst:l,...a}=e;const i=(0,s.Zi)(),{selection:c}=i??{},{t:d}=(0,ae.Bd)();return(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:d(`editor.tooltips.labels.${r}`),hotkeys:nt[r]}),xOffset:"-75px",yOffset:"43px",delay:.5,children:(0,Ne.jsxs)(lt,{ref:t,...a,"aria-label":d("editor.controls.labels.format",{format:r}),"data-active":M(i,r),onClick:e=>{e.preventDefault(),c&&O(i,r)},tabIndex:l?0:-1,children:[n&&(0,Ne.jsx)(ze.A.IconComposer,{icon:n}),o&&o]})})};var ht=(0,o.forwardRef)(ft),mt=r(34343),vt=r(83529);const xt=(0,pe.A)("form",{target:"e1avvvck9"})({name:"1ndn4b9",styles:">*+*{margin-block-start:50px;}"}),yt=(0,pe.A)("button",{target:"e1avvvck8"})(be.HH," display:inline-flex;align-items:center;justify-content:flex-end;font-size:17px;cursor:pointer;",(e=>{let{$primary:t}=e;return t&&`\n    cursor: pointer;\n\n    &:hover {\n      ${be.Xf}\n      outline: 0;\n    }\n\n    &:focus-visible {\n      color: var(--focus-color);\n    }\n  `}),";"),kt="24px",At=(0,pe.A)("span",{target:"e1avvvck7"})(be.$C," margin-right:6px;font-size:12px;font-weight:var(--font-weight-semibold);line-height:",kt,";letter-spacing:0.125em;"),jt=(0,pe.A)(ze.A.IconComposer,{target:"e1avvvck6"})("width:",kt,";height:",kt,";"),wt=(0,pe.A)("header",{target:"e1avvvck5"})({name:"3swheu",styles:"display:flex;justify-content:space-between;align-items:center;padding-block-start:0"}),Et=(0,pe.A)(ze.A.IconComposer,{target:"e1avvvck4"})({name:"1asbwlv",styles:"color:var(--color-accent-primary);margin-top:2px"}),Ct=(0,pe.A)("span",{target:"e1avvvck3"})({name:"kmyzha",styles:"display:flex;gap:12px;align-items:center;margin-top:-2px;h2{margin-top:-6px;}"}),_t=(0,pe.A)("div",{target:"e1avvvck2"})({name:"1d3w5wq",styles:"width:100%"}),Bt=(0,pe.A)(vt.A.Wrapper,{target:"e1avvvck1"})("max-width:600px;padding-block:",(0,be.dT)("50px","30px"),";padding-inline:",(0,be.dT)("60px","40px"),";"),Kt=(0,pe.A)("div",{target:"e1avvvck0"})({name:"10xput4",styles:"display:flex;gap:24px;margin-top:64px"});function Rt(e){let{urlRef:t,textRef:r,defaultValues:o}=e;const{t:n}=(0,ae.Bd)();return(0,Ne.jsxs)(xt,{children:[(0,Ne.jsx)(mt.Y,{defaultValue:null==o?void 0:o.text,ref:r,name:"text",label:n("editor.forms.link_text_label")}),(0,Ne.jsx)(mt.Y,{defaultValue:null==o?void 0:o.url,ref:t,name:"url",label:n("editor.forms.link_url_label")})]})}var Nt=r(3681),Mt=r(82965);function Dt(e){const{form:t,resolve:r,reject:o,heading:n,icon:l,resolveLabel:a}=e,i=(0,Mt.G)(),{t:s}=(0,ae.Bd)(),c=e=>{e.preventDefault(),o(e)},d="button-secondary button-secondary--outlined";return(0,Ne.jsx)(Bt,{maxWidth:600,showCloseButton:!1,closeOnOverlayClick:!1,labelledBy:s("editor.forms.labelled_by_uid",{uid:i}),describedBy:s("editor.forms.described_by_uid",{uid:i}),onEsc:e.reject,children:(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)(wt,{className:"dialog__header",children:[(0,Ne.jsxs)(Ct,{children:[(0,Ne.jsx)(Et,{icon:l}),(0,Ne.jsx)("h2",{id:s("editor.forms.labelled_by_uid",{uid:i}),children:n})]}),(0,Ne.jsxs)(yt,{onClick:c,tabIndex:0,children:[(0,Ne.jsx)(At,{children:s("actions.close")}),(0,Ne.jsx)(jt,{icon:"close24",size:24})]})]}),(0,Ne.jsxs)(_t,{className:"dialog__body",children:[t,(0,Ne.jsxs)(Kt,{children:["function"==typeof r&&(0,Ne.jsx)("button",{onClick:e=>{e.preventDefault(),r(e)},className:d,"data-id":"accept",children:(0,Ne.jsx)("span",{children:a})}),(0,Ne.jsx)("button",{className:le()(d,"button-secondary--dull"),onClick:c,"data-id":"reject",children:(0,Ne.jsx)("span",{children:s("actions.cancel")})})]})]})]})})}Dt.displayName="ContentEditor.Insert.Modal",Dt.propTypes={resolve:l().func,reject:l().func.isRequired,heading:l().string,options:l().object,message:l().oneOfType([l().string,l().object])};const zt=(e,t)=>r=>{r();const o=e.selection??t;setTimeout((()=>{c.gB.select(e,o),s.rL.focus(e)}),200)},Lt=(e,t)=>{let{icon:r,size:n,...l}=e;const a=(0,s.Zi)(),i=D(a),{confirm:d,confirmation:u}=(0,Nt.ZK)(),p=(0,o.useRef)(null),f=(0,o.useRef)(null),{t:h}=(0,ae.Bd)(),m=e=>{var t,r;const o=null==p||null===(t=p.current)||void 0===t||null===(t=t.inputElement)||void 0===t?void 0:t.value,n=null==f||null===(r=f.current)||void 0===r||null===(r=r.inputElement)||void 0===r?void 0:r.value;o&&(e(),g(a,o,n))};return(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:h("editor.tooltips.labels.link"),hotkeys:nt.link}),xOffset:"-75px",yOffset:"43px",delay:.5,children:(0,Ne.jsxs)(lt,{name:"link-modal-trigger",ref:t,...l,"aria-label":h("editor.controls.labels.link"),"data-active":i,onClick:e=>{e.preventDefault();const{selection:t}=a??{};if(!t)return;if(i)return b(a);const o=h("editor.forms.link_insert_heading"),n=c.Q6.isCollapsed(t)?{}:{text:c.KE.string(a,t)};d&&d({heading:o,icon:r,form:(0,Ne.jsx)(Rt,{urlRef:p,textRef:f,defaultValues:n}),callback:m,closeCallback:zt(a,t),resolveLabel:h("actions.add")})},tabIndex:-1,children:[r&&(0,Ne.jsx)(ze.A.IconComposer,{icon:r,size:n}),u&&(0,Ne.jsx)(Dt,{...u})]})})};var St=(0,o.forwardRef)(Lt);function Ot(e){let{urlRef:t,altRef:r,defaultValues:o}=e;const{t:n}=(0,ae.Bd)();return(0,Ne.jsxs)(xt,{children:[(0,Ne.jsx)(mt.Y,{defaultValue:null==o?void 0:o.src,ref:t,name:"url",label:n("editor.forms.image_url_label")}),(0,Ne.jsx)(mt.Y,{defaultValue:null==o?void 0:o.alt,ref:r,name:"alt",label:n("editor.forms.alt_text_label")})]})}const Ht=(e,t)=>{let{icon:r,size:n,...l}=e;const{t:a}=(0,ae.Bd)(),i=(0,s.Zi)(),{selection:d}=i??{},{confirm:u,confirmation:p}=(0,Nt.ZK)(),b=(0,o.useRef)(null),g=(0,o.useRef)(null),h=e=>{var t,r;const o=null==b||null===(t=b.current)||void 0===t||null===(t=t.inputElement)||void 0===t?void 0:t.value;if(!o)return;const n=null==g||null===(r=g.current)||void 0===r||null===(r=r.inputElement)||void 0===r?void 0:r.value;return e(),f(i,o,n)},m=e=>t=>{var r,o;const n=(null==b||null===(r=b.current)||void 0===r||null===(r=r.inputElement)||void 0===r?void 0:r.value)??e.src;if(!n)return;const l=null==g||null===(o=g.current)||void 0===o||null===(o=o.inputElement)||void 0===o?void 0:o.value;t(),c.gB.setNodes(i,{htmlAttrs:{...e,src:n,alt:l}}),s.rL.focus(i)},[v]=R(i,"img");return(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:a("editor.tooltips.labels.img"),description:a("editor.tooltips.descriptions.img"),hotkeys:nt.img}),xOffset:"-75px",yOffset:"43px",delay:.5,children:(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)(lt,{name:"img-modal-trigger",ref:t,...l,"aria-label":a("editor.controls.labels.image"),"data-active":v,onClick:v?e=>{e.preventDefault();const[[t]]=Array.from(c.KE.nodes(i,{at:c.KE.unhangRange(i,d),match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&"img"===e.type})),o=(null==t?void 0:t.htmlAttrs)??{},n={src:o.src,alt:o.alt},l=a("editor.forms.image_update_heading");u&&u({heading:l,icon:r,form:(0,Ne.jsx)(Ot,{defaultValues:n,urlRef:b,altRef:g}),callback:m(o),closeCallback:zt(i,d),resolveLabel:a("actions.update")})}:e=>{if(e.preventDefault(),!d)return;const t=a("editor.forms.image_insert_heading");u&&u({heading:t,icon:r,form:(0,Ne.jsx)(Ot,{urlRef:b,altRef:g}),callback:h,closeCallback:zt(i,d),resolveLabel:a("actions.add")})},tabIndex:-1,children:r&&(0,Ne.jsx)(ze.A.IconComposer,{icon:r,size:n})}),p&&(0,Ne.jsx)(Dt,{...p})]})})};var $t=(0,o.forwardRef)(Ht);function It(e){let{urlRef:t,titleRef:r,defaultValues:o}=e;const{t:n}=(0,ae.Bd)();return(0,Ne.jsxs)(xt,{children:[(0,Ne.jsx)(mt.Y,{defaultValue:null==o?void 0:o.src,ref:t,name:"url",label:n("editor.forms.iframe_url_label")}),(0,Ne.jsx)(mt.Y,{defaultValue:null==o?void 0:o.title,ref:r,name:"title",label:n("editor.forms.title_label")})]})}const Pt=(e,t)=>{let{icon:r,size:n,...l}=e;const a=(0,s.Zi)(),{selection:i}=a??{},{confirm:d,confirmation:u}=(0,Nt.ZK)(),p=(0,o.useRef)(null),b=(0,o.useRef)(null),{t:g}=(0,ae.Bd)(),f=e=>{var t,r;const o=null==p||null===(t=p.current)||void 0===t||null===(t=t.inputElement)||void 0===t?void 0:t.value;if(!o)return;const n=null==b||null===(r=b.current)||void 0===r||null===(r=r.inputElement)||void 0===r?void 0:r.value;return o?(e(),h(a,o,n)):void 0},m=e=>t=>{var r,o;const n=(null==p||null===(r=p.current)||void 0===r||null===(r=r.inputElement)||void 0===r?void 0:r.value)??e.src;if(!n)return;const l=null==b||null===(o=b.current)||void 0===o||null===(o=o.inputElement)||void 0===o?void 0:o.value,i=/api\/proxy\//.test(n)?"video":"iframe";t(),c.gB.setNodes(a,{type:i,htmlAttrs:{...e,src:n,title:l}}),s.rL.focus(a)},[v]=R(a,"iframe"),[x]=R(a,"video"),y=v||x;return(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:g("editor.tooltips.labels.iframe"),description:g("editor.tooltips.descriptions.iframe"),hotkeys:nt.iframe}),xOffset:"-75px",yOffset:"43px",delay:.5,children:(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)(lt,{name:"iframe-modal-trigger",ref:t,...l,"aria-label":g("editor.controls.labels.iframe"),"data-active":y,onClick:y?e=>{e.preventDefault();const[[t]]=Array.from(c.KE.nodes(a,{at:c.KE.unhangRange(a,i),match:e=>!c.KE.isEditor(e)&&c.Hg.isElement(e)&&"iframe"===e.type||"video"===e.type})),o=(null==t?void 0:t.htmlAttrs)??{},n={src:o.src,title:o.title},l=g("editor.forms.iframe_update_heading");d&&d({heading:l,icon:r,form:(0,Ne.jsx)(It,{defaultValues:n,urlRef:p,titleRef:b}),callback:m(o),closeCallback:zt(a,i),resolveLabel:g("actions.add")})}:e=>{if(e.preventDefault(),!i)return;const t=g("editor.forms.iframe_insert_heading");d&&d({heading:t,icon:r,form:(0,Ne.jsx)(It,{urlRef:p,titleRef:b}),callback:f,closeCallback:zt(a,i),resolveLabel:g("actions.add")})},tabIndex:-1,children:r&&(0,Ne.jsx)(ze.A.IconComposer,{icon:r,size:n})}),u&&(0,Ne.jsx)(Dt,{...u})]})})};var Tt=(0,o.forwardRef)(Pt);const Ft=(e,t)=>{let{options:r,name:o,color:n,ariaLabel:l,...a}=e;const i=(0,s.Zi)(),{selection:c}=i??{},{t:d}=(0,ae.Bd)(),u=r.map((e=>(0,Ne.jsx)("option",{value:e.format,hidden:!e.format,children:e.label},e.format))),p=((e,t,r)=>{const o="textBlock"===r?N:R,n=t.map((t=>[t,o(e,t)].flat())).filter((e=>e[1])).sort(((e,t)=>e[2].length-t[2].length)).pop();return n?n[0]:""})(i,r.map((e=>e.format)),o);return(0,Ne.jsxs)(at,{children:[(0,Ne.jsxs)(st,{children:[(0,Ne.jsx)(ct,{ref:t,...a,"aria-label":l,"data-active":""!==p,$color:n??"var(--color-accent-primary)",value:p,onChange:e=>{e.preventDefault(),c&&S(i,e.target.value)},tabIndex:-1,children:u}),(0,Ne.jsx)(ut,{icon:"disclosureDown24",size:16})]}),(0,Ne.jsx)(qe.A,{content:!p||"textBlock"!==o&&"blockquote"!==p&&"pre"!==p?(0,Ne.jsx)(ot,{label:d(`editor.tooltips.labels.${o}`),description:d(`editor.tooltips.descriptions.${o}`)}):(0,Ne.jsx)(ot,{label:d(`editor.tooltips.labels.${p}`),hotkeys:nt[p]}),xOffset:"0",yOffset:"43px",delay:0,children:(0,Ne.jsx)(it,{children:(0,Ne.jsx)(ce.A,{icon:"info16",size:14})})})]})};var Vt=(0,o.forwardRef)(Ft);const Wt=(e,t)=>{let{label:r,icon:o,onClick:n,isFirst:l,tooltip:a,...i}=e;const{t:s}=(0,ae.Bd)(),c=r?pt:lt,d=(0,Ne.jsxs)(c,{ref:t,...i,"aria-label":s("editor.controls.labels.format",{format:a}),onClick:n,tabIndex:l?0:-1,children:[o&&(0,Ne.jsx)(ze.A.IconComposer,{icon:o,size:24}),r&&r]});return a?(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:s(`editor.tooltips.labels.${a}`),hotkeys:nt[a]}),xOffset:"-50px",yOffset:"43px",delay:.5,children:d}):d};var Ut=(0,o.forwardRef)(Wt);const qt=(e,t)=>{let{format:r,...o}=e;const n=(0,s.Zi)(),{selection:l}=n??{},{t:a}=(0,ae.Bd)();return(0,Ne.jsx)(qe.A,{content:(0,Ne.jsx)(ot,{label:a("editor.tooltips.labels.span"),description:a("editor.tooltips.descriptions.span")}),xOffset:"-75px",yOffset:"43px",delay:.5,children:(0,Ne.jsx)(dt,{as:"button",ref:t,...o,"aria-label":a("editor.controls.labels.span"),"data-active":R(n,r)[0],onClick:e=>{e.preventDefault(),l&&S(n,r)},tabIndex:-1,children:"Span"})})};var Zt=(0,o.forwardRef)(qt),Yt=r(77961),Qt=r(16558),Jt=r(64774),Xt=r(62193),Gt=r.n(Xt);const er=(0,pe.A)("div",{target:"ee4904c8"})({name:"sxr5eu",styles:"width:100%;display:flex;flex-wrap:wrap;row-gap:5px;align-items:center;column-gap:3px;border:1px solid var(--TextArea-border-color);border-bottom-color:var(--textarea-border-color);padding-inline:1.25em;padding-block:1em;background-color:var(--drawer-bg-color);border-top-left-radius:var(--box-border-radius);border-top-right-radius:var(--box-border-radius);color:var(--color);min-height:73px"}),tr=(0,pe.A)("div",{target:"ee4904c7"})("display:flex;flex-wrap:nowrap;align-items:center;gap:8px;",(0,be.uf)("gap: 3px;",30),";"),rr=(0,pe.A)("div",{target:"ee4904c6"})({name:"1fw2tx8",styles:"margin-inline:12px;border-left:1px solid var(--background-color);height:24px"}),or=(0,pe.A)("div",{target:"ee4904c5"})({name:"r5xe2z",styles:"width:100%;display:flex;flex-wrap:wrap;row-gap:12px;justify-content:space-between;margin-block-end:32px"}),nr=(0,pe.A)("div",{target:"ee4904c4"})("border-left:1px solid;border-right:1px solid;background:",(e=>{let{$darkMode:t}=e;return t?"var(--TextArea-border-color)":"var(--color-base-neutral30)"}),";border-color:var(--TextArea-border-color);color:var(--drawer-bg-color);padding-inline:1.5em;padding-block-start:3px;padding-block-end:6px;min-height:30px;font-family:var(--font-family-heading);display:flex;align-items:center;gap:20px;"),lr=(0,pe.A)("div",{target:"ee4904c3"})({name:"3reokc",styles:"display:flex;flex-wrap:wrap;align-items:center;column-gap:8px"}),ar=(0,pe.A)("button",{target:"ee4904c2"})(be.HH," white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;max-width:300px;flex-shrink:0;min-height:24px;&:hover{color:",(e=>{let{$color:t,$darkMode:r}=e;return r?je[t].dark:je[t].light}),";}&:focus-visible{color:",(e=>{let{$color:t,$darkMode:r}=e;return r?je[t].dark:je[t].light}),";outline:0;}"),ir=(0,pe.A)(ce.A,{target:"ee4904c1"})({name:"18pz0bk",styles:"transform:rotate(-90deg);margin-block-start:4px;flex-shrink:0"}),sr=(0,pe.A)("button",{target:"ee4904c0"})(be.HH," display:flex;align-items:center;margin-inline-start:auto;&:focus-visible,&:focus{",be.Jl,";}");function cr(e){var t;let{onClickUndo:r,onClickRedo:n,darkMode:l}=e;const{t:a}=(0,ae.Bd)(),i=(0,Yt.v)({orientation:"horizontal",loop:!0,wrap:"horizontal"}),d=(0,s.RV)(),u=(0,s.nn)(),b=null==u||null===(t=u.anchor)||void 0===t?void 0:t.path;let g={};if(b){const e=c.bP.ancestors(d,null==u?void 0:u.anchor.path);g=K(d,e)}const{setSelectedCrumb:f,selectedCrumb:h,editingCrumb:m,setEditingCrumb:v}=se();(0,o.useEffect)((()=>{m&&(v(!1),f(null))}),[d.selection]);const x=(0,o.useCallback)((e=>{e.preventDefault();f("all"===h?null:"all")}),[h,f]),y=(0,o.useCallback)((e=>{m||f(e)}),[m]),k=(0,o.useCallback)((()=>{m||f(null)}),[m]);return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)(Qt.R,{as:er,"aria-label":a("editor.controls.labels.toolbar_rte"),...i,children:[(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:Ut,icon:"undo24",onClick:r,tooltip:"undo",isFirst:!0,...i}),(0,Ne.jsx)(Jt.D,{as:Ut,icon:"redo24",onClick:n,tooltip:"redo",...i}),(0,Ne.jsx)(rr,{})]}),(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:Vt,name:"container",ariaLabel:a("editor.controls.labels.layout_block_select"),options:[{format:"div",label:a("editor.tooltips.labels.div")},{format:"header",label:a("editor.tooltips.labels.header")},{format:"footer",label:a("editor.tooltips.labels.footer")},{format:"section",label:a("editor.tooltips.labels.section")},{format:"article",label:a("editor.tooltips.labels.article")},{format:"blockquote",label:a("editor.tooltips.labels.blockquote")},{format:"pre",label:a("editor.tooltips.labels.pre")},{format:"figure",label:a("editor.tooltips.labels.figure")},{format:"figcaption",label:a("editor.tooltips.labels.figcaption")},{format:"",label:a("editor.controls.labels.layout_block_select_placeholder")}],color:"var(--color-base-violet45)",...i}),(0,Ne.jsx)(rr,{})]}),(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:Vt,name:"textBlock",ariaLabel:a("editor.controls.labels.text_block_select"),options:[{format:"p",label:a("editor.tooltips.labels.p")},{format:"h1",label:a("editor.tooltips.labels.h1")},{format:"h2",label:a("editor.tooltips.labels.h2")},{format:"h3",label:a("editor.tooltips.labels.h3")},{format:"h4",label:a("editor.tooltips.labels.h4")},{format:"h5",label:a("editor.tooltips.labels.h5")},{format:"h6",label:a("editor.tooltips.labels.h6")},{format:"",label:a("editor.controls.labels.text_block_select_placeholder")}],...i}),(0,Ne.jsx)(rr,{})]}),(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:Zt,format:"span",...i}),(0,Ne.jsx)(rr,{})]}),(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:ht,icon:"bold24",format:"bold",...i}),(0,Ne.jsx)(Jt.D,{as:ht,icon:"italic24",format:"italic",...i}),(0,Ne.jsx)(Jt.D,{as:ht,icon:"underline24",format:"underline",...i}),(0,Ne.jsx)(Jt.D,{as:ht,icon:"strikethrough24",format:"strikethrough",...i}),(0,Ne.jsx)(Jt.D,{as:ht,icon:"code24",format:"code",...i}),(0,Ne.jsx)(rr,{})]}),(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:gt,icon:"orderedList24",format:"ol",...i}),(0,Ne.jsx)(Jt.D,{as:gt,icon:"unorderedList24",format:"ul",...i}),(0,Ne.jsx)(rr,{})]}),(0,Ne.jsxs)(tr,{children:[(0,Ne.jsx)(Jt.D,{as:St,icon:"RTELink24",...i}),(0,Ne.jsx)(Jt.D,{as:$t,icon:"RTEImage24",...i}),(0,Ne.jsx)(Jt.D,{as:Tt,icon:"iframe24",...i})]})]}),(0,Ne.jsxs)(nr,{$darkMode:l,children:[(0,Ne.jsx)(lr,{children:!Gt()(g)&&Object.keys(g).sort(((e,t)=>g[e].path.length-g[t].path.length)).map(((e,t)=>{const r=g[e].label.split(".")[0].split("#")[0],n=p.RX.includes(r)?"green":p.Lz.includes(r)?"blue":"violet";return(0,Ne.jsxs)(o.Fragment,{children:[(0,Ne.jsx)(ar,{$color:n,$darkMode:l,onMouseEnter:()=>y(e),onMouseLeave:k,onFocus:()=>y(e),onBlur:k,onClick:t=>{t.preventDefault(),f(e),v(!0)},children:g[e].label}),t<Object.keys(g).length-1&&(0,Ne.jsx)(ir,{icon:"disclosureDown16",size:16})]},e)}))}),(0,Ne.jsx)(sr,{onClick:x,"aria-label":a("all"===h?"editor.controls.labels.hide_html":"editor.controls.labels.show_html"),children:(0,Ne.jsx)(ce.A,{icon:"eyeball24",size:24})})]})]})}function dr(e){let{onClickUndo:t,onClickRedo:r,toggleStyles:o,cssVisible:n,controlsRef:l}=e;const{t:a}=(0,ae.Bd)(),i=(0,Yt.v)({orientation:"horizontal",loop:!0,wrap:"horizontal"});return(0,Ne.jsxs)(Qt.R,{as:er,"aria-label":a("editor.controls.labels.toolbar_html"),...i,children:[(0,Ne.jsx)(Jt.D,{ref:l,as:Ut,icon:"undo24",onClick:t,isFirst:!0,...i}),(0,Ne.jsx)(Jt.D,{as:Ut,icon:"redo24",onClick:r,...i}),(0,Ne.jsx)(Jt.D,{as:Ut,label:a(n?"editor.controls.labels.hide_styles":"editor.controls.labels.show_styles"),icon:n?"eyeClosed32":"eyeOpen32",onClick:o,...i})]})}const ur=(0,pe.A)("div",{target:"e1jk1vub3"})(be.HH," ",be.$C," display:inline-flex;border:1px solid;border-radius:16px;color:var(--color-accent-primary);width:100%;",(0,be.uf)("width: auto;",60),";"),pr=(0,pe.A)("button",{target:"e1jk1vub2"})(be.HH," ",be.$C," display:inline-flex;align-items:center;justify-content:center;gap:8px;padding-inline:",(e=>{let{$padding:t}=e;return t}),";font-size:14px;font-weight:var(--font-weight-medium);text-decoration:none;text-transform:none;letter-spacing:0;border-top-left-radius:14px;border-bottom-left-radius:14px;transition:color ",be.NI,",background-color ",be.NI,",border-color ",be.NI,";width:50%;",(0,be.uf)("width: auto;",60)," ",(e=>{let{$active:t}=e;return t?"\n      color: var(--color-neutral-text-extra-dark);\n      background-color: var(--hover-color);\n      border-color: var(--hover-color);\n\n      &:hover {\n        color: var(--color-neutral-text-extra-dark);\n      }\n\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }":"\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }\n\n      &:hover {\n        color: inherit;\n        background-color: inherit;\n        border-color: inherit;\n      }\n      "})," span{padding-top:7px;padding-bottom:9px;}svg{width:24px;height:24px;padding-bottom:2px;margin:0;}*+&{border-left:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:14px;border-bottom-right-radius:14px;}"),br=(0,pe.A)("span",{target:"e1jk1vub1"})((0,be.uf)("display: none;",40),";"),gr=(0,pe.A)("span",{target:"e1jk1vub0"})(br,"+&{display:none;",(0,be.uf)("display: inline;",40),";}");function fr(e){let{options:t,padding:r="20px"}=e;const[o,n]=t;return(0,Ne.jsxs)(ur,{children:[(0,Ne.jsxs)(pr,{$active:o.active,$padding:r,onClick:o.onClick,children:[(0,Ne.jsx)(ce.A,{icon:o.icon||"code16",size:o.iconSize||16,className:"button-icon-secondary__icon button-icon-secondary__icon--large"}),o.mobileLabel&&(0,Ne.jsx)(br,{children:o.mobileLabel}),(0,Ne.jsx)(gr,{children:o.label})]}),(0,Ne.jsxs)(pr,{$active:n.active,$padding:r,onClick:n.onClick,children:[(0,Ne.jsx)(ce.A,{icon:n.icon||"code16",size:n.iconSize||16,className:"button-icon-secondary__icon button-icon-secondary__icon--large"}),n.mobileLabel&&(0,Ne.jsx)(br,{children:n.mobileLabel}),(0,Ne.jsx)(gr,{children:n.label})]})]})}function hr(e){let{htmlMode:t,onClickEditorToggle:r,darkMode:o,onClickDarkModeToggle:n}=e;const{t:l}=(0,ae.Bd)();return(0,Ne.jsxs)(or,{children:[(0,Ne.jsx)(fr,{options:[{label:l("editor.controls.toggles.html_label"),mobileLabel:l("editor.controls.toggles.html_label_mobile"),icon:"editorHTML24",active:t,onClick:r(!0)},{label:l("editor.controls.toggles.rte_label"),mobileLabel:l("editor.controls.toggles.rte_label_mobile"),icon:"editorRTE24",active:!t,onClick:r(!1)}]}),(0,Ne.jsx)(fr,{options:[{label:l("editor.controls.toggles.dark_mode_label"),icon:"darkMode16",iconSize:12,active:o,onClick:n(!0)},{label:l("editor.controls.toggles.light_mode_label"),icon:"lightMode16",iconSize:12,active:!o,onClick:n(!1)}],padding:"16px"})]})}var mr=r(72021);const vr=(0,pe.A)("div",{target:"e2ytnqy5"})("width:100%;resize:vertical;outline:none;transition:border-color ",be.NI,";position:relative;border-radius:var(--box-border-radius);&:focus-visible{border-color:var(--TextArea-focus-color);}"),xr=(0,pe.A)(vr,{target:"e2ytnqy4"})({name:"lspb3",styles:"--TextArea-border-color:var(--textarea-border-color);--TextArea-focus-color:var(--highlight-color);font-family:var(--input-font-family);background-color:var(--input-bg-color);border-radius:var(--box-border-radius);&::placeholder{color:var(--color-neutral-ui-light);}&.error{--TextArea-border-color:var(--error-color);}"}),yr=(0,pe.A)("div",{target:"e2ytnqy3"})("min-height:700px;border:1px solid var(--TextArea-border-color);border-top:0;border-bottom-left-radius:var(--box-border-radius);border-bottom-right-radius:var(--box-border-radius);background-color:var(--background-color);overflow:hidden;overflow-x:auto;.ace_editor{border-bottom-left-radius:6px;border-bottom-right-radius:6px;border:0;overflow:visible;}.ace_gutter{min-height:699px!important;overflow:visible;border-bottom-left-radius:var(--box-border-radius);}.ace_scroller{min-height:699px!important;overflow:visible;border-bottom-right-radius:var(--box-border-radius);}.ace_gutter-cell:last-of-type{border-bottom-left-radius:var(--box-border-radius);}",(e=>{let{$cssVisible:t}=e;return t&&"\n    .ace_cursor {\n      display: none;\n    }\n  "}),";"),kr=(0,pe.A)(s.Fo,{target:"e2ytnqy2"})({name:"3yoejr",styles:"max-width:850px;margin:auto;padding-block:4em;padding-inline:var(--container-padding-inline-fluid);&:focus-visible{outline:none;}*[data-slate-placeholder]{top:auto!important;}"}),Ar=(0,pe.A)("div",{target:"e2ytnqy1"})({name:"1cwvu6q",styles:"position:sticky;top:-80px;z-index:200;background-color:var(--drawer-bg-color);padding-top:30px"}),jr=(0,pe.A)(mr.A,{target:"e2ytnqy0"})({name:"1h7h89g",styles:"margin-block-end:20px;>span{margin:0;}"});function wr(e){let{htmlMode:t,cssVisible:r,darkMode:o,onClickEditorToggle:n,onClickDarkModeToggle:l,onClickRedo:a,onClickUndo:i,toggleStyles:s,errors:c,controlsRef:d}=e;return(0,Ne.jsxs)(Ar,{id:"editor-controls",children:[(0,Ne.jsx)(hr,{htmlMode:t,darkMode:o,onClickEditorToggle:n,onClickDarkModeToggle:l}),!!c.length&&(0,Ne.jsx)(jr,{errors:c}),t?(0,Ne.jsx)(dr,{onClickUndo:i,onClickRedo:a,toggleStyles:s,cssVisible:r,controlsRef:d}):(0,Ne.jsx)(cr,{onClickUndo:i,onClickRedo:a,darkMode:o})]})}function Er(e){let{localHtml:t,localSlate:r,setLocalHtml:n,onChangeHtml:l,setLocalSlate:a,stylesheets:i,hasErrors:u,setHasErrors:p,warnErrors:b,setWarnErrors:g,nextRef:f,htmlMode:h,toggleHtmlMode:m}=e;const v=(0,s.Zi)(),x=(0,o.useRef)(),y=(0,o.useRef)(),[k,A]=(0,o.useState)(!1),[w,E]=(0,o.useState)(!0),{t:C}=(0,ae.Bd)();(0,o.useEffect)((()=>{const e=document.activeElement;if("content-editable"===(null==e?void 0:e.id)&&v.selection&&!h){const[e]=s.rL.toDOMPoint(v,v.selection.focus),t=e.parentElement.getBoundingClientRect(),r=document.getElementById("editor-button-overlay"),o=document.getElementById("editor-controls"),n=r.getBoundingClientRect(),l=o.getBoundingClientRect();t.bottom<n.top&&t.y>l.bottom||e.parentElement.scrollIntoView({behavior:"smooth",block:"center"})}}),[v,v.selection,h]);const _=null==i?void 0:i.map((e=>null==e?void 0:e.attributes.styles)).join("\n"),B=(0,o.useCallback)((e=>(0,Ne.jsx)($e,{...e,theme:_,darkMode:w})),[_,w]),K=(0,o.useCallback)((e=>(0,Ne.jsx)(De,{...e,darkMode:w})),[w]),R=k?{value:_,mode:"css",readOnly:!0,onValidate:()=>{},aceRef:x,nextRef:f,prevRef:y,darkMode:w}:{onChange:l,value:t,onValidate:e=>{if(!e.find((e=>"error"===e.type)))return p(!1),g(!1);p(!0)},mode:"html",aceRef:x,nextRef:f,prevRef:y,darkMode:w},N=le()("manifold-text-section text-section font-size-2",{"scheme-dark":w,"scheme-light":!w}),M=b?Array.isArray(u)?u:[{source:{pointer:"/data/attributes/body"},detail:C(`errors.invalid_html_${b}`)}]:[];return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)(wr,{htmlMode:h,darkMode:w,onClickEditorToggle:e=>o=>{o.stopPropagation(),o.preventDefault(),u?g("switch"):e&&h||(e||h)&&(()=>{if(h){const e=(0,oe.N4)(t);return a(e),j(v),c.gB.insertNodes(v,e),c.gB.select(v,{anchor:c.KE.start(v,[0]),focus:c.KE.start(v,[0])}),m(!1)}const e=(0,$.dV)((0,oe.RM)(r));n(e),A(!1),m(!0)})()},onClickDarkModeToggle:e=>t=>{t.preventDefault(),E(e)},onClickUndo:e=>{if(e.preventDefault(),!h)return d.KJ.undo(v);x.current.editor.undo()},onClickRedo:e=>{if(e.preventDefault(),!h)return d.KJ.redo(v);x.current.editor.redo()},toggleStyles:e=>{e.preventDefault(),A(!k)},cssVisible:k,errors:M,controlsRef:y}),(0,Ne.jsxs)(yr,{className:N,$cssVisible:k,children:[!h&&(0,Ne.jsx)(kr,{id:"content-editable",as:"div",renderElement:B,renderLeaf:K,placeholder:C("editor.elements.placeholder"),spellCheck:!1,onKeyDown:e=>Ie(e,v)}),h&&(0,Ne.jsx)(Ue,{...R})]}),_&&!h&&(0,Ne.jsx)("style",{dangerouslySetInnerHTML:{__html:`@layer stylesheets {${_}}`}})]})}function Cr(e){let{set:t,stylesheets:r,initialHtmlValue:n,initialSlateValue:l,hasErrors:u,setHasErrors:p,warnErrors:b,setWarnErrors:g,nextRef:f}=e;const h=(0,o.useRef)();h.current||(h.current=(0,s.o$)((0,d.$k)(ee((0,c.ie)()))));const m=h.current,x=(0,o.useRef)(l),k=(0,o.useRef)(n),[A,w]=(0,o.useState)(y()(l,"error")),[E,C]=(0,o.useState)(),[_,B]=(0,o.useState)(!1),[K,R]=(0,o.useState)(n),[N,M]=(0,o.useState)(y()(l,"error")?l.default:l);(0,o.useEffect)((()=>{if(!A&&!v()(x.current,l))return j(m),void c.gB.insertNodes(m,l);v()(k.current,n)||R(n)}),[l,n]);const D=re()((e=>t((0,oe.RM)(e))),500),z=re()((e=>t((0,oe.mb)(e))),500);return(0,Ne.jsx)(a.A,{className:"wide",children:(0,Ne.jsx)(xr,{className:u&&b?"error":void 0,children:(0,Ne.jsx)(i.ErrorBoundary,{fallbackRender:e=>{let{resetErrorBoundary:t}=e;return d.KJ.undo(m),t(),null},children:(0,Ne.jsx)(ie.Provider,{value:{selectedCrumb:E,setSelectedCrumb:C,editingCrumb:_,setEditingCrumb:B},children:(0,Ne.jsx)(s.A,{editor:m,initialValue:N,onChange:e=>{var t,r;M(e);const o=(null==m||null===(t=m.history)||void 0===t?void 0:t.undos)??[];(o.length>1||(null===(r=o[0])||void 0===r?void 0:r.selectionBefore))&&D(e)},children:(0,Ne.jsx)(Er,{localHtml:K,setLocalHtml:R,onChangeHtml:e=>{R(e),z(e)},localSlate:N,setLocalSlate:M,stylesheets:r,htmlMode:A,toggleHtmlMode:w,hasErrors:u,setHasErrors:p,warnErrors:b,setWarnErrors:g,nextRef:f})})})})})})}Er.displayName="Global.Forms.ContentEditor.Editor",Cr.displayName="Global.Form.ContentEditor.Wrapper",Cr.propTypes={set:l().func,stylesheets:l().arrayOf(l().object),sectionId:l().string,sectionBody:l().string}}}]);
//# sourceMappingURL=chunk-702-8339425641117cd6d094.js.map