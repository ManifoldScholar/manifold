{"version":3,"sources":["webpack:///./node_modules/slate-history/dist/index.es.js","webpack:///./node_modules/direction/index.js","webpack:///./node_modules/is-hotkey/lib/index.js","webpack:///./node_modules/compute-scroll-into-view/dist/index.mjs","webpack:///./node_modules/scroll-into-view-if-needed/es/index.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/freeze.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/element.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/global.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/process.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/scheduler.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObservation.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","webpack:///./node_modules/slate-react/node_modules/@juggle/resize-observer/lib/ResizeObserver.js","webpack:///./node_modules/slate-react/dist/index.es.js"],"names":["History","isHistory","value","Array","isArray","redos","undos","length","isOperationList","operations","SAVING","WeakMap","MERGING","HistoryEditor","isHistoryEditor","history","isEditor","isMerging","editor","get","isSaving","redo","undo","fn","prev","set","withHistory","e","apply","batch","selectionBefore","setSelection","withoutSaving","withoutNormalizing","op","pop","push","inverseOps","map","inverse","reverse","lastBatch","lastOp","save","merge","shouldSave","shouldMerge","selection","shift","type","offset","text","equals","path","module","exports","String","rtl","test","ltr","LTR","RegExp","Object","defineProperty","IS_MAC","window","navigator","platform","MODIFIERS","alt","control","meta","ALIASES","add","break","cmd","command","ctl","ctrl","del","down","esc","ins","left","mod","opt","option","return","right","space","spacebar","up","win","windows","CODES","backspace","tab","enter","pause","capslock","escape","pageup","pagedown","end","home","arrowleft","arrowup","arrowright","arrowdown","insert","delete","numlock","scrolllock","'","f","isHotkey","hotkey","options","event","array","string","parseHotkey","check","some","object","compareHotkey","byKey","ret","values","replace","split","k","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","optional","endsWith","slice","name","toKeyName","modifier","key","which","toKeyCode","err","expected","actual","toLowerCase","toUpperCase","charCodeAt","default","isCodeHotkey","isKeyHotkey","t","nodeType","n","clientHeight","scrollHeight","clientWidth","scrollWidth","r","getComputedStyle","overflowY","overflowX","ownerDocument","defaultView","frameElement","i","o","l","d","scrollMode","block","inline","h","boundary","u","skipOverflowHiddenElements","s","TypeError","a","c","g","document","scrollingElement","documentElement","p","m","parentElement","getRootNode","host","body","w","visualViewport","width","innerWidth","v","height","innerHeight","W","scrollX","pageXOffset","H","scrollY","pageYOffset","b","getBoundingClientRect","y","E","M","top","V","x","bottom","I","C","R","T","B","D","O","X","Y","L","S","j","N","q","parseInt","borderLeftWidth","z","borderTopWidth","A","borderRightWidth","F","borderBottomWidth","G","J","K","offsetWidth","P","offsetHeight","Q","U","Math","max","Z","scrollLeft","$","scrollTop","min","el","isOptionsObject","keys","ResizeObserverBoxOptions","target","isTargetAttached","isConnected","contains","behavior","computeOptions","getOptions","actions","canSmoothScroll","style","forEach","_ref","scroll","defaultBehavior","resizeObservers","msg","trigger","freeze","obj","inlineSize","blockSize","this","DOMRectReadOnly","prototype","toJSON","_a","fromRect","rectangle","isSVG","SVGElement","isHidden","getBBox","_b","getClientRects","isElement","Element","scope","global","cache","scrollRegexp","verticalRegexp","IE","userAgent","parseDimension","pixel","parseFloat","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","calculateBoxSizes","forceRecalculation","has","cs","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","canScrollHorizontally","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderRight","borderBottom","horizontalPadding","verticalPadding","horizontalBorderArea","verticalBorderArea","horizontalScrollbarThickness","verticalScrollbarThickness","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","round","devicePixelRatio","calculateBoxSize","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","calculateDepthForNode","node","Infinity","depth","parent","parentNode","broadcastActiveObservations","shallowestDepth","callbacks","ro","activeTargets","entries","ot","entry","targetDepth","lastReportedSize","callback","call","observer","splice","_i","callbacks_1","gatherActiveObservationsAtDepth","skippedTargets","observationTargets","isActive","process","ErrorEvent","message","createEvent","initEvent","dispatchEvent","queueMicroTask","toggle_1","el_1","createTextNode","MutationObserver","cb","observe","characterData","textContent","concat","watching","observerConfig","attributes","childList","subtree","events","time","timeout","Date","now","scheduled","scheduler","Scheduler","_this","stopped","listener","schedule","run","until","elementsHaveResized","start","requestAnimationFrame","stop","addEventListener","disconnect","removeEventListener","updateCount","ResizeObservation","CONTENT_BOX","size","tagName","isReplacedElement","display","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","ResizeObserverController","connect","detail","firstObservation","box","unobserve","index","lastObservation","indexOf","ResizeObserver","arguments","toString","_defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Key","id","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","EDITOR_TO_PLACEHOLDER_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","IS_COMPOSING","EDITOR_TO_USER_SELECTION","EDITOR_TO_ON_CHANGE","EDITOR_TO_SCHEDULE_FLUSH","EDITOR_TO_PENDING_INSERTION_MARKS","EDITOR_TO_USER_MARKS","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_PENDING_ACTION","EDITOR_TO_PENDING_SELECTION","EDITOR_TO_FORCE_RENDER","PLACEHOLDER_SYMBOL","MARK_PLACEHOLDER_SYMBOL","DOMText","globalThis","Text","getDefaultView","isDOMElement","isDOMNode","Node","isDOMSelection","anchorNode","Selection","isDOMText","getEditableChildAndIndex","direction","childNodes","child","triedForward","triedBackward","getAttribute","getEditableChild","getPlainText","domNode","nodeValue","childNode","from","getPropertyValue","catchSlateFragment","isTrackedMutation","mutation","matches","ReactEditor","getWindow","hasDOMNode","editable","parentMutation","find","addedNodes","removedNodes","_node","IS_REACT_VERSION_17_OR_ABOVE","version","IS_IOS","MSStream","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_SAFARI","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_UC_MOBILE","IS_WECHATBROWSER","CAN_USE_DOM","createElement","HAS_BEFORE_INPUT_SUPPORT","InputEvent","getTargetRanges","isComposing","Error","unshift","stringify","toDOMNode","root","Document","ShadowRoot","getSelection","isFocused","isReadOnly","findDocumentOrShadowRoot","activeElement","blur","focus","preventScroll","domSelection","rangeCount","removeAllRanges","deselect","targetEl","editorEl","includes","closest","isContentEditable","data","insertData","insertFragmentData","insertTextData","originEvent","setFragmentData","KEY_TO_ELEMENT","findKey","point","domPoint","void","at","texts","querySelectorAll","attr","nextText","hasAttribute","_nextText$textContent","domText","startsWith","range","anchor","isBackward","domAnchor","toDOMPoint","domFocus","isCollapsed","domRange","createRange","startNode","startOffset","endNode","endOffset","isStartAtZeroWidth","isEndAtZeroWidth","setStart","setEnd","domEl","nativeEvent","clientX","clientY","toSlateNode","findPath","isVoid","rect","isPrev","isInline","edge","before","after","caretRangeFromPoint","position","caretPositionFromPoint","offsetNode","toSlateRange","exactMatch","suppressThrow","nearestNode","nearestOffset","isLast","normalizeDOMPoint","textNode","_domNode$textContent","_domNode$textContent2","potentialVoidNode","voidNode","leafNode","contents","cloneContents","textContext","removeChild","leafNodes","current","_slateNode","_path","_offset","querySelector","slateNode","anchorOffset","focusNode","focusOffset","startContainer","hasShadowRoot","endContainer","collapsed","toSlatePoint","isEnd","isStart","isExpanded","isForward","mode","unhangRange","voids","hasPath","hasTarget","hasEditableTarget","hasSelectableTarget","isTargetInsideNonReadonlyVoid","_EDITOR_TO_SCHEDULE_F","androidPendingDiffs","useIsomorphicLayoutEffect","_excluded$3","_excluded2$1","shallowCompare","obj1","obj2","every","hasOwnProperty","isDecoratorRangeListEqual","list","another","other","rangeOwnProps","otherOwnProps","props","leaf","useSlateStatic","parentPath","isMarkPlaceholder","ZeroWidthString","children","TextString","isTrailing","isLineBreak","ref","getTextContent","textWithTrailing","assign","EditorContext","Leaf","renderPlaceholder","renderLeaf","DefaultLeaf","lastPlaceholderRef","placeholderRef","placeholderResizeObserver","placeholderEl","ResizeObserver$1","forceRender","placeholderProps","placeholder","pointerEvents","maxWidth","opacity","userSelect","textDecoration","contentEditable","Fragment","MemoizedLeaf","memo","decorations","leaves","MemoizedText","element","renderElement","DefaultElement","readOnly","useReadOnly","useChildren","hasInlines","dir","Tag","_text","color","outline","MemoizedElement","DecorateContext","SelectedContext","useSelected","decorate","isLeafBlock","sel","intersection","ds","dec","Provider","ReadOnlyContext","SlateContext","useSlate","context","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","deleteBackward","deleteForward","extendBackward","extendForward","italic","insertSoftBreak","splitBlock","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","transposeCharacter","WINDOWS_HOTKEYS","create","generic","apple","isGeneric","isApple","isWindows","Hotkeys","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSoftBreak","isSplitBlock","isTransposeCharacter","isUndo","MUTATION_OBSERVER_CONFIG$1","characterDataOldValue","super","manager","mutationObserver","_this$mutationObserve","receivedUserInput","bufferedMutations","clear","registerMutations","mutations","trackedMutations","filter","restoreDOM","insertBefore","nextSibling","oldValue","createRestoreDomManager","_this$mutationObserve2","_this$mutationObserve3","_this$manager2","_this$manager","pendingMutations","takeRecords","_this$manager3","_this$mutationObserve4","contextType","RestoreDOM","verifyDiffState","textDiff","diff","isText","nextPath","nextNode","normalizeStringDiff","targetText","removedText","prefixLength","str","charAt","longestCommonPrefixLength","suffixLength","longestCommonSuffixLength","normalized","mergeStringDiffs","overlap","applied","_len","diffs","_key","reduce","applyStringDiff","sliceEnd","normalizePoint","parentBlock","above","match","isBlock","isDescendant","normalizeRange","transformPendingPoint","pendingDiffs","transform","affinity","_anchor","_transformed","transformed","transformPendingRange","ownKeys$3","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_objectSpread$3","getOwnPropertyDescriptors","defineProperties","createAndroidInputManager","scheduleOnDOMSelectionChange","onDOMSelectionChange","flushing","compositionEndTimeoutId","flushTimeoutId","actionTimeoutId","idCounter","insertPositionHint","applyPendingSelection","pendingSelection","select","flush","_EDITOR_TO_PENDING_DI","clearTimeout","hasPendingDiffs","hasPendingAction","setTimeout","selectionRef","rangeRef","marks","scheduleSelectionChange","_EDITOR_TO_PENDING_DI2","_EDITOR_TO_PENDING_DI3","pendingMarks","insertText","deleteFragment","_ref2","cancel","unref","action","isPoint","_targetRange","performAction","userMarks","onChange","updatePlaceholderVisibility","forceHide","placeholderElement","removeProperty","storeDiff","_EDITOR_TO_PENDING_DI4","idx","findIndex","change","merged","scheduleAction","_EDITOR_TO_PENDING_DI5","scheduleFlush","hasPendingChanges","isFlushing","handleUserSelect","pathChanged","parentPathChanged","handleCompositionEnd","_event","handleCompositionStart","handleDOMBeforeInput","_targetRange2","inputType","targetRange","dataTransfer","nativeTargetRange","edges","_start","_end","targetNode","_nativeTargetRange","unit","insertBreak","constructor","_start2","_end2","hintPosition","search","handleKeyDown","_","handleDomMutations","_EDITOR_TO_FORCE_REND","handleInput","_excluded$2","ownKeys$2","MUTATION_OBSERVER_CONFIG","useAndroidInputManager","isMountedRef","isMounted","inputManager","_objectSpread$2","useMutationObserver","_excluded$1","_excluded2","ownKeys$1","_objectSpread$1","Children","Editable","_EDITOR_TO_PLACEHOLDE","_EDITOR_TO_PLACEHOLDE2","autoFocus","defaultDecorate","onDOMBeforeInput","propsOnDOMBeforeInput","DefaultPlaceholder","scrollSelectionIntoView","defaultScrollSelectionIntoView","userStyle","as","Component","disableDefaultStyles","setIsComposing","deferredOperations","onUserInput","animationFrameIdRef","cancelAnimationFrame","useTrackUserInput","state","isDraggingInternally","isUpdatingSelection","latestElement","hasMarkPlaceholder","androidInputManager","anchorNodeSelectable","focusNodeSelectable","setDomSelection","forceChange","hasDomSelection","editorElement","hasDomSelectionInEditor","slateRange","_anchorNode$parentEle","hasRange","newDomRange","toDOMRange","setBaseAndExtent","ensureSelection","timeoutId","animationFrameId","ensureDomSelection","isDOMEventHandled","_EDITOR_TO_USER_SELEC","isCompositionChange","native","_node$parentElement","_window$getComputedSt","_lastText$textContent","lastText","createTreeWalker","NodeFilter","SHOW_TEXT","lastChild","whiteSpace","preventDefault","toRestore","rest","loose","unset","fromEntries","mark","placeholderHeight","role","spellCheck","autoCorrect","autoCapitalize","zindex","suppressContentEditableWarning","wordWrap","minHeight","onBeforeInput","isEventHandled","_text2","onInput","onBlur","relatedTarget","onClick","blockPath","_block$","startVoid","endVoid","_range","onCompositionEnd","placeholderMarks","onCompositionUpdate","onCompositionStart","inlinePath","onCopy","clipboardData","onCut","onDragOver","onDragStart","onDrop","draggedRange","findEventRange","onDragEnd","onFocus","onKeyDown","isRTL","maybeHistoryEditor","_maybeHistoryEditor","move","collapse","currentNode","onPaste","getData","types","isPlainTextOnlyPaste","leafEl","bind","handler","shouldTreatEventAsHandled","isDefaultPrevented","isPropagationStopped","defaultPrevented","FocusedContext","useFocused","isError","error","SlateSelectorContext","refEquality","_excluded","Slate","unmountRef","setContext","useState","isNodeList","selectorContext","handleSelectorChange","eventListeners","slateRef","getSlate","getSelectorContext","onContextChange","prevContext","setIsFocused","useSlateSelection","selector","equalityFn","selectedState","latestSubscriptionCallbackError","latestSelector","latestSelectedState","stack","checkForUpdates","newSelectedState","unsubscribe","useSlateSelector","isSelectionEqual","doRectsIntersect","compareRect","middle","areRangesSameLine","range1","range2","rect1","rect2","ownKeys","_objectSpread","withReact","addMark","removeMark","parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","parentRange","parentRangeBoundary","positions","floor","findCurrentLineRange","newPath","transformTextDiff","Boolean","pendingAction","getMatches","prevPath","previous","commonPath","common","attach","trim","cloneRange","setEndAfter","zw","isNewline","span","appendChild","fragment","getFragment","JSON","encoded","btoa","encodeURIComponent","setAttribute","setData","div","innerHTML","htmlData","getSlateFragmentAttribute","decoded","decodeURIComponent","atob","parsed","parse","insertFragment","lines","line","splitNodes","always","unstable_batchedUpdates","levels"],"mappings":"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","file":"build/chunk-10-a90af5421f595f998159.js","sourcesContent":["import { isPlainObject } from 'is-plain-object';\nimport { Operation, Editor, Transforms, Path } from 'slate';\n\nvar History = {\n  /**\r\n   * Check if a value is a `History` object.\r\n   */\n  isHistory(value) {\n    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0].operations)) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0].operations));\n  }\n\n};\n\n/**\r\n * Weakmaps for attaching state to the editor.\r\n */\n\nvar HISTORY = new WeakMap();\nvar SAVING = new WeakMap();\nvar MERGING = new WeakMap(); // eslint-disable-next-line no-redeclare\n\nvar HistoryEditor = {\n  /**\r\n   * Check if a value is a `HistoryEditor` object.\r\n   */\n  isHistoryEditor(value) {\n    return History.isHistory(value.history) && Editor.isEditor(value);\n  },\n\n  /**\r\n   * Get the merge flag's current value.\r\n   */\n  isMerging(editor) {\n    return MERGING.get(editor);\n  },\n\n  /**\r\n   * Get the saving flag's current value.\r\n   */\n  isSaving(editor) {\n    return SAVING.get(editor);\n  },\n\n  /**\r\n   * Redo to the previous saved state.\r\n   */\n  redo(editor) {\n    editor.redo();\n  },\n\n  /**\r\n   * Undo to the previous saved state.\r\n   */\n  undo(editor) {\n    editor.undo();\n  },\n\n  /**\r\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\r\n   * the new operations into previous save point in the history.\r\n   */\n  withoutMerging(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, false);\n    fn();\n    MERGING.set(editor, prev);\n  },\n\n  /**\r\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\r\n   * their operations into the history.\r\n   */\n  withoutSaving(editor, fn) {\n    var prev = HistoryEditor.isSaving(editor);\n    SAVING.set(editor, false);\n    fn();\n    SAVING.set(editor, prev);\n  }\n\n};\n\n/**\r\n * The `withHistory` plugin keeps track of the operation history of a Slate\r\n * editor as operations are applied to it, using undo and redo stacks.\r\n *\r\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\r\n * this plugin.\r\n *\r\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\r\n */\n\nvar withHistory = editor => {\n  var e = editor;\n  var {\n    apply\n  } = e;\n  e.history = {\n    undos: [],\n    redos: []\n  };\n\n  e.redo = () => {\n    var {\n      history\n    } = e;\n    var {\n      redos\n    } = history;\n\n    if (redos.length > 0) {\n      var batch = redos[redos.length - 1];\n\n      if (batch.selectionBefore) {\n        Transforms.setSelection(e, batch.selectionBefore);\n      }\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (var op of batch.operations) {\n            e.apply(op);\n          }\n        });\n      });\n      history.redos.pop();\n      history.undos.push(batch);\n    }\n  };\n\n  e.undo = () => {\n    var {\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n\n    if (undos.length > 0) {\n      var batch = undos[undos.length - 1];\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          var inverseOps = batch.operations.map(Operation.inverse).reverse();\n\n          for (var op of inverseOps) {\n            e.apply(op);\n          }\n\n          if (batch.selectionBefore) {\n            Transforms.setSelection(e, batch.selectionBefore);\n          }\n        });\n      });\n      history.redos.push(batch);\n      history.undos.pop();\n    }\n  };\n\n  e.apply = op => {\n    var {\n      operations,\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n    var lastBatch = undos[undos.length - 1];\n    var lastOp = lastBatch && lastBatch.operations[lastBatch.operations.length - 1];\n    var save = HistoryEditor.isSaving(e);\n    var merge = HistoryEditor.isMerging(e);\n\n    if (save == null) {\n      save = shouldSave(op);\n    }\n\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false;\n        } else if (operations.length !== 0) {\n          merge = true;\n        } else {\n          merge = shouldMerge(op, lastOp);\n        }\n      }\n\n      if (lastBatch && merge) {\n        lastBatch.operations.push(op);\n      } else {\n        var batch = {\n          operations: [op],\n          selectionBefore: e.selection\n        };\n        undos.push(batch);\n      }\n\n      while (undos.length > 100) {\n        undos.shift();\n      }\n\n      history.redos = [];\n    }\n\n    apply(op);\n  };\n\n  return e;\n};\n/**\r\n * Check whether to merge an operation into the previous operation.\r\n */\n\nvar shouldMerge = (op, prev) => {\n  if (prev && op.type === 'insert_text' && prev.type === 'insert_text' && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n\n  if (prev && op.type === 'remove_text' && prev.type === 'remove_text' && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n\n  return false;\n};\n/**\r\n * Check whether an operation needs to be saved to the history.\r\n */\n\n\nvar shouldSave = (op, prev) => {\n  if (op.type === 'set_selection') {\n    return false;\n  }\n\n  return true;\n};\n\nexport { HISTORY, History, HistoryEditor, MERGING, SAVING, withHistory };\n//# sourceMappingURL=index.es.js.map\n","'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","function t(t){return\"object\"==typeof t&&null!=t&&1===t.nodeType}function e(t,e){return(!e||\"hidden\"!==t)&&\"visible\"!==t&&\"clip\"!==t}function n(t,n){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return e(r.overflowY,n)||e(r.overflowX,n)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function r(t,e,n,r,i,o,l,d){return o<t&&l>e||o>t&&l<e?0:o<=t&&d<=n||l>=e&&d>=n?o-t-r:l>e&&d<n||o<t&&d>n?l-e+i:0}var i=function(e,i){var o=window,l=i.scrollMode,d=i.block,f=i.inline,h=i.boundary,u=i.skipOverflowHiddenElements,s=\"function\"==typeof h?h:function(t){return t!==h};if(!t(e))throw new TypeError(\"Invalid target\");for(var a,c,g=document.scrollingElement||document.documentElement,p=[],m=e;t(m)&&s(m);){if((m=null==(c=(a=m).parentElement)?a.getRootNode().host||null:c)===g){p.push(m);break}null!=m&&m===document.body&&n(m)&&!n(document.documentElement)||null!=m&&n(m,u)&&p.push(m)}for(var w=o.visualViewport?o.visualViewport.width:innerWidth,v=o.visualViewport?o.visualViewport.height:innerHeight,W=window.scrollX||pageXOffset,H=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),y=b.height,E=b.width,M=b.top,V=b.right,x=b.bottom,I=b.left,C=\"start\"===d||\"nearest\"===d?M:\"end\"===d?x:M+y/2,R=\"center\"===f?I+E/2:\"end\"===f?V:I,T=[],k=0;k<p.length;k++){var B=p[k],D=B.getBoundingClientRect(),O=D.height,X=D.width,Y=D.top,L=D.right,S=D.bottom,j=D.left;if(\"if-needed\"===l&&M>=0&&I>=0&&x<=v&&V<=w&&M>=Y&&x<=S&&I>=j&&V<=L)return T;var N=getComputedStyle(B),q=parseInt(N.borderLeftWidth,10),z=parseInt(N.borderTopWidth,10),A=parseInt(N.borderRightWidth,10),F=parseInt(N.borderBottomWidth,10),G=0,J=0,K=\"offsetWidth\"in B?B.offsetWidth-B.clientWidth-q-A:0,P=\"offsetHeight\"in B?B.offsetHeight-B.clientHeight-z-F:0,Q=\"offsetWidth\"in B?0===B.offsetWidth?0:X/B.offsetWidth:0,U=\"offsetHeight\"in B?0===B.offsetHeight?0:O/B.offsetHeight:0;if(g===B)G=\"start\"===d?C:\"end\"===d?C-v:\"nearest\"===d?r(H,H+v,v,z,F,H+C,H+C+y,y):C-v/2,J=\"start\"===f?R:\"center\"===f?R-w/2:\"end\"===f?R-w:r(W,W+w,w,q,A,W+R,W+R+E,E),G=Math.max(0,G+H),J=Math.max(0,J+W);else{G=\"start\"===d?C-Y-z:\"end\"===d?C-S+F+P:\"nearest\"===d?r(Y,S,O,z,F+P,C,C+y,y):C-(Y+O/2)+P/2,J=\"start\"===f?R-j-q:\"center\"===f?R-(j+X/2)+K/2:\"end\"===f?R-L+A+K:r(j,L,X,q,A+K,R,R+E,E);var Z=B.scrollLeft,$=B.scrollTop;C+=$-(G=Math.max(0,Math.min($+G/U,B.scrollHeight-O/U+P))),R+=Z-(J=Math.max(0,Math.min(Z+J/Q,B.scrollWidth-X/Q+K)))}T.push({el:B,top:G,left:J})}return T};export{i as default};\n//# sourceMappingURL=index.mjs.map\n","import compute from 'compute-scroll-into-view';\nfunction isOptionsObject(options) {\n  return options === Object(options) && Object.keys(options).length !== 0;\n}\nfunction defaultBehavior(actions, behavior) {\n  if (behavior === void 0) {\n    behavior = 'auto';\n  }\n  var canSmoothScroll = ('scrollBehavior' in document.body.style);\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    if (el.scroll && canSmoothScroll) {\n      el.scroll({\n        top: top,\n        left: left,\n        behavior: behavior\n      });\n    } else {\n      el.scrollTop = top;\n      el.scrollLeft = left;\n    }\n  });\n}\nfunction getOptions(options) {\n  if (options === false) {\n    return {\n      block: 'end',\n      inline: 'nearest'\n    };\n  }\n  if (isOptionsObject(options)) {\n    return options;\n  }\n  return {\n    block: 'start',\n    inline: 'nearest'\n  };\n}\nfunction scrollIntoView(target, options) {\n  var isTargetAttached = target.isConnected || target.ownerDocument.documentElement.contains(target);\n  if (isOptionsObject(options) && typeof options.behavior === 'function') {\n    return options.behavior(isTargetAttached ? compute(target, options) : []);\n  }\n  if (!isTargetAttached) {\n    return;\n  }\n  var computeOptions = getOptions(options);\n  return defaultBehavior(compute(target, computeOptions), computeOptions.behavior);\n}\nexport default scrollIntoView;","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","var resizeObservers = [];\nexport { resizeObservers };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","import getDirection from 'direction';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport React, { useLayoutEffect, useEffect, useRef, createContext, useContext, useCallback, Component, useState, useReducer, useMemo } from 'react';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { Editor, Scrubber, Transforms, Range, Element as Element$1, Path, Node, Text as Text$1, Point } from 'slate';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { isKeyHotkey } from 'is-hotkey';\nimport ReactDOM from 'react-dom';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n/**\r\n * An auto-incrementing identifier for keys.\r\n */\nvar n = 0;\n/**\r\n * A class that keeps track of a key string. We use a full class here because we\r\n * want to be able to use them as keys in `WeakMap` objects.\r\n */\n\nclass Key {\n  constructor() {\n    this.id = \"\".concat(n++);\n  }\n\n}\n\n/**\r\n * Two weak maps that allow us rebuild a path given a node. They are populated\r\n * at render time such that after a render occurs we can always backtrack.\r\n */\nvar NODE_TO_INDEX = new WeakMap();\nvar NODE_TO_PARENT = new WeakMap();\n/**\r\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\r\n * are used to resolve DOM event-related logic into Slate actions.\r\n */\n\nvar EDITOR_TO_WINDOW = new WeakMap();\nvar EDITOR_TO_ELEMENT = new WeakMap();\nvar EDITOR_TO_PLACEHOLDER_ELEMENT = new WeakMap();\nvar ELEMENT_TO_NODE = new WeakMap();\nvar NODE_TO_ELEMENT = new WeakMap();\nvar NODE_TO_KEY = new WeakMap();\nvar EDITOR_TO_KEY_TO_ELEMENT = new WeakMap();\n/**\r\n * Weak maps for storing editor-related state.\r\n */\n\nvar IS_READ_ONLY = new WeakMap();\nvar IS_FOCUSED = new WeakMap();\nvar IS_COMPOSING = new WeakMap();\nvar EDITOR_TO_USER_SELECTION = new WeakMap();\n/**\r\n * Weak map for associating the context `onChange` context with the plugin.\r\n */\n\nvar EDITOR_TO_ON_CHANGE = new WeakMap();\n/**\r\n * Weak maps for saving pending state on composition stage.\r\n */\n\nvar EDITOR_TO_SCHEDULE_FLUSH = new WeakMap();\nvar EDITOR_TO_PENDING_INSERTION_MARKS = new WeakMap();\nvar EDITOR_TO_USER_MARKS = new WeakMap();\n/**\r\n * Android input handling specific weak-maps\r\n */\n\nvar EDITOR_TO_PENDING_DIFFS = new WeakMap();\nvar EDITOR_TO_PENDING_ACTION = new WeakMap();\nvar EDITOR_TO_PENDING_SELECTION = new WeakMap();\nvar EDITOR_TO_FORCE_RENDER = new WeakMap();\n/**\r\n * Symbols.\r\n */\n\nvar PLACEHOLDER_SYMBOL = Symbol('placeholder');\nvar MARK_PLACEHOLDER_SYMBOL = Symbol('mark-placeholder');\n\n/**\r\n * Types.\r\n */\nvar DOMText = globalThis.Text;\n/**\r\n * Returns the host window of a DOM node\r\n */\n\nvar getDefaultView = value => {\n  return value && value.ownerDocument && value.ownerDocument.defaultView || null;\n};\n/**\r\n * Check if a DOM node is a comment node.\r\n */\n\nvar isDOMComment = value => {\n  return isDOMNode(value) && value.nodeType === 8;\n};\n/**\r\n * Check if a DOM node is an element node.\r\n */\n\nvar isDOMElement = value => {\n  return isDOMNode(value) && value.nodeType === 1;\n};\n/**\r\n * Check if a value is a DOM node.\r\n */\n\nvar isDOMNode = value => {\n  var window = getDefaultView(value);\n  return !!window && value instanceof window.Node;\n};\n/**\r\n * Check if a value is a DOM selection.\r\n */\n\nvar isDOMSelection = value => {\n  var window = value && value.anchorNode && getDefaultView(value.anchorNode);\n  return !!window && value instanceof window.Selection;\n};\n/**\r\n * Check if a DOM node is an element node.\r\n */\n\nvar isDOMText = value => {\n  return isDOMNode(value) && value.nodeType === 3;\n};\n/**\r\n * Checks whether a paste event is a plaintext-only event.\r\n */\n\nvar isPlainTextOnlyPaste = event => {\n  return event.clipboardData && event.clipboardData.getData('text/plain') !== '' && event.clipboardData.types.length === 1;\n};\n/**\r\n * Normalize a DOM point so that it always refers to a text node.\r\n */\n\nvar normalizeDOMPoint = domPoint => {\n  var [node, offset] = domPoint; // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n\n  if (isDOMElement(node) && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var index = isLast ? offset - 1 : offset;\n    [node, index] = getEditableChildAndIndex(node, index, isLast ? 'backward' : 'forward'); // If the editable child found is in front of input offset, we instead seek to its end\n\n    isLast = index < offset; // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n\n    while (isDOMElement(node) && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward');\n    } // Determine the new offset inside the text node.\n\n\n    offset = isLast && node.textContent != null ? node.textContent.length : 0;\n  } // Return the node and offset.\n\n\n  return [node, offset];\n};\n/**\r\n * Determines wether the active element is nested within a shadowRoot\r\n */\n\nvar hasShadowRoot = node => {\n  var parent = node && node.parentNode;\n\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n};\n/**\r\n * Get the nearest editable child and index at `index` in a `parent`, preferring\r\n * `direction`.\r\n */\n\nvar getEditableChildAndIndex = (parent, index, direction) => {\n  var {\n    childNodes\n  } = parent;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false; // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n\n  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) {\n      break;\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n\n    child = childNodes[i];\n    index = i;\n    i += direction === 'forward' ? 1 : -1;\n  }\n\n  return [child, index];\n};\n/**\r\n * Get the nearest editable child at `index` in a `parent`, preferring\r\n * `direction`.\r\n */\n\nvar getEditableChild = (parent, index, direction) => {\n  var [child] = getEditableChildAndIndex(parent, index, direction);\n  return child;\n};\n/**\r\n * Get a plaintext representation of the content of a node, accounting for block\r\n * elements which get a newline appended.\r\n *\r\n * The domNode must be attached to the DOM.\r\n */\n\nvar getPlainText = domNode => {\n  var text = '';\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue;\n  }\n\n  if (isDOMElement(domNode)) {\n    for (var childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode);\n    }\n\n    var display = getComputedStyle(domNode).getPropertyValue('display');\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n';\n    }\n  }\n\n  return text;\n};\n/**\r\n * Get x-slate-fragment attribute from data-slate-fragment\r\n */\n\nvar catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m;\nvar getSlateFragmentAttribute = dataTransfer => {\n  var htmlData = dataTransfer.getData('text/html');\n  var [, fragment] = htmlData.match(catchSlateFragment) || [];\n  return fragment;\n};\n/**\r\n * Check whether a mutation originates from a editable element inside the editor.\r\n */\n\nvar isTrackedMutation = (editor, mutation, batch) => {\n  var {\n    target\n  } = mutation;\n\n  if (isDOMElement(target) && target.matches('[contentEditable=\"false\"]')) {\n    return false;\n  }\n\n  var {\n    document\n  } = ReactEditor.getWindow(editor);\n\n  if (document.contains(target)) {\n    return ReactEditor.hasDOMNode(editor, target, {\n      editable: true\n    });\n  }\n\n  var parentMutation = batch.find(_ref => {\n    var {\n      addedNodes,\n      removedNodes\n    } = _ref;\n\n    for (var node of addedNodes) {\n      if (node === target || node.contains(target)) {\n        return true;\n      }\n    }\n\n    for (var _node of removedNodes) {\n      if (_node === target || _node.contains(target)) {\n        return true;\n      }\n    }\n  });\n\n  if (!parentMutation || parentMutation === mutation) {\n    return false;\n  } // Target add/remove is tracked. Track the mutation if we track the parent mutation.\n\n\n  return isTrackedMutation(editor, parentMutation, batch);\n};\n\nvar IS_REACT_VERSION_17_OR_ABOVE = parseInt(React.version.split('.')[0], 10) >= 17;\nvar IS_IOS = typeof navigator !== 'undefined' && typeof window !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar IS_APPLE = typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent);\nvar IS_ANDROID = typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent);\nvar IS_FIREFOX = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nvar IS_SAFARI = typeof navigator !== 'undefined' && /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent); // \"modern\" Edge was released at 79.x\n\nvar IS_EDGE_LEGACY = typeof navigator !== 'undefined' && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])(?:\\.)/i.test(navigator.userAgent);\nvar IS_CHROME = typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent); // Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\n\nvar IS_CHROME_LEGACY = typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])(?:\\.)/i.test(navigator.userAgent); // Firefox did not support `beforeInput` until `v87`.\n\nvar IS_FIREFOX_LEGACY = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])(?:\\.)).*/i.test(navigator.userAgent); // UC mobile browser\n\nvar IS_UC_MOBILE = typeof navigator !== 'undefined' && /.*UCBrowser/.test(navigator.userAgent); // Wechat browser\n\nvar IS_WECHATBROWSER = typeof navigator !== 'undefined' && /.*Wechat/.test(navigator.userAgent); // Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\n\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined'); // COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\n\nvar HAS_BEFORE_INPUT_SUPPORT = !IS_CHROME_LEGACY && !IS_EDGE_LEGACY && // globalThis is undefined in older browsers\ntypeof globalThis !== 'undefined' && globalThis.InputEvent && // @ts-ignore The `getTargetRanges` property isn't recognized.\ntypeof globalThis.InputEvent.prototype.getTargetRanges === 'function';\n\nvar ReactEditor = {\n  /**\r\n   * Check if the user is currently composing inside the editor.\r\n   */\n  isComposing(editor) {\n    return !!IS_COMPOSING.get(editor);\n  },\n\n  /**\r\n   * Return the host window of the current editor.\r\n   */\n  getWindow(editor) {\n    var window = EDITOR_TO_WINDOW.get(editor);\n\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor');\n    }\n\n    return window;\n  },\n\n  /**\r\n   * Find a key for a Slate node.\r\n   */\n  findKey(editor, node) {\n    var key = NODE_TO_KEY.get(node);\n\n    if (!key) {\n      key = new Key();\n      NODE_TO_KEY.set(node, key);\n    }\n\n    return key;\n  },\n\n  /**\r\n   * Find the path of Slate node.\r\n   */\n  findPath(editor, node) {\n    var path = [];\n    var child = node;\n\n    while (true) {\n      var parent = NODE_TO_PARENT.get(child);\n\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path;\n        } else {\n          break;\n        }\n      }\n\n      var i = NODE_TO_INDEX.get(child);\n\n      if (i == null) {\n        break;\n      }\n\n      path.unshift(i);\n      child = parent;\n    }\n\n    throw new Error(\"Unable to find the path for Slate node: \".concat(Scrubber.stringify(node)));\n  },\n\n  /**\r\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\r\n   */\n  findDocumentOrShadowRoot(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode();\n\n    if ((root instanceof Document || root instanceof ShadowRoot) && root.getSelection != null) {\n      return root;\n    }\n\n    return el.ownerDocument;\n  },\n\n  /**\r\n   * Check if the editor is focused.\r\n   */\n  isFocused(editor) {\n    return !!IS_FOCUSED.get(editor);\n  },\n\n  /**\r\n   * Check if the editor is in read-only mode.\r\n   */\n  isReadOnly(editor) {\n    return !!IS_READ_ONLY.get(editor);\n  },\n\n  /**\r\n   * Blur the editor.\r\n   */\n  blur(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, false);\n\n    if (root.activeElement === el) {\n      el.blur();\n    }\n  },\n\n  /**\r\n   * Focus the editor.\r\n   */\n  focus(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, true);\n\n    if (root.activeElement !== el) {\n      el.focus({\n        preventScroll: true\n      });\n    }\n  },\n\n  /**\r\n   * Deselect the editor.\r\n   */\n  deselect(editor) {\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges();\n    }\n\n    if (selection) {\n      Transforms.deselect(editor);\n    }\n  },\n\n  /**\r\n   * Check if a DOM node is within the editor.\r\n   */\n  hasDOMNode(editor, target) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      editable = false\n    } = options;\n    var editorEl = ReactEditor.toDOMNode(editor, editor);\n    var targetEl; // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n\n    try {\n      targetEl = isDOMElement(target) ? target : target.parentElement;\n    } catch (err) {\n      if (!err.message.includes('Permission denied to access property \"nodeType\"')) {\n        throw err;\n      }\n    }\n\n    if (!targetEl) {\n      return false;\n    }\n\n    return targetEl.closest(\"[data-slate-editor]\") === editorEl && (!editable || targetEl.isContentEditable ? true : typeof targetEl.isContentEditable === 'boolean' && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined\n    // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable=\"false\"(readOnly)\n    targetEl.closest('[contenteditable=\"false\"]') === editorEl || !!targetEl.getAttribute('data-slate-zero-width'));\n  },\n\n  /**\r\n   * Insert data from a `DataTransfer` into the editor.\r\n   */\n  insertData(editor, data) {\n    editor.insertData(data);\n  },\n\n  /**\r\n   * Insert fragment data from a `DataTransfer` into the editor.\r\n   */\n  insertFragmentData(editor, data) {\n    return editor.insertFragmentData(data);\n  },\n\n  /**\r\n   * Insert text data from a `DataTransfer` into the editor.\r\n   */\n  insertTextData(editor, data) {\n    return editor.insertTextData(data);\n  },\n\n  /**\r\n   * Sets data from the currently selected fragment on a `DataTransfer`.\r\n   */\n  setFragmentData(editor, data, originEvent) {\n    editor.setFragmentData(data, originEvent);\n  },\n\n  /**\r\n   * Find the native DOM element from a Slate node.\r\n   */\n  toDOMNode(editor, node) {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    var domNode = Editor.isEditor(node) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node));\n\n    if (!domNode) {\n      throw new Error(\"Cannot resolve a DOM node from Slate node: \".concat(Scrubber.stringify(node)));\n    }\n\n    return domNode;\n  },\n\n  /**\r\n   * Find a native DOM selection point from a Slate point.\r\n   */\n  toDOMPoint(editor, point) {\n    var [node] = Editor.node(editor, point.path);\n    var el = ReactEditor.toDOMNode(editor, node);\n    var domPoint; // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n\n    if (Editor.void(editor, {\n      at: point\n    })) {\n      point = {\n        path: point.path,\n        offset: 0\n      };\n    } // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n\n\n    var selector = \"[data-slate-string], [data-slate-zero-width]\";\n    var texts = Array.from(el.querySelectorAll(selector));\n    var start = 0;\n\n    for (var i = 0; i < texts.length; i++) {\n      var text = texts[i];\n      var domNode = text.childNodes[0];\n\n      if (domNode == null || domNode.textContent == null) {\n        continue;\n      }\n\n      var {\n        length\n      } = domNode.textContent;\n      var attr = text.getAttribute('data-slate-length');\n      var trueLength = attr == null ? length : parseInt(attr, 10);\n      var end = start + trueLength; // Prefer putting the selection inside the mark placeholder to ensure\n      // composed text is displayed with the correct marks.\n\n      var nextText = texts[i + 1];\n\n      if (point.offset === end && nextText !== null && nextText !== void 0 && nextText.hasAttribute('data-slate-mark-placeholder')) {\n        var _nextText$textContent;\n\n        var domText = nextText.childNodes[0];\n        domPoint = [// COMPAT: If we don't explicity set the dom point to be on the actual\n        // dom text element, chrome will put the selection behind the actual dom\n        // text element, causing domRange.getBoundingClientRect() calls on a collapsed\n        // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)\n        // which will cause issues when scrolling to it.\n        domText instanceof DOMText ? domText : nextText, (_nextText$textContent = nextText.textContent) !== null && _nextText$textContent !== void 0 && _nextText$textContent.startsWith('\\uFEFF') ? 1 : 0];\n        break;\n      }\n\n      if (point.offset <= end) {\n        var offset = Math.min(length, Math.max(0, point.offset - start));\n        domPoint = [domNode, offset];\n        break;\n      }\n\n      start = end;\n    }\n\n    if (!domPoint) {\n      throw new Error(\"Cannot resolve a DOM point from Slate point: \".concat(Scrubber.stringify(point)));\n    }\n\n    return domPoint;\n  },\n\n  /**\r\n   * Find a native DOM range from a Slate `range`.\r\n   *\r\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\r\n   *\r\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\r\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\r\n   */\n  toDOMRange(editor, range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    var isBackward = Range.isBackward(range);\n    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);\n    var domFocus = Range.isCollapsed(range) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);\n    var window = ReactEditor.getWindow(editor);\n    var domRange = window.document.createRange();\n    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;\n    var [endNode, endOffset] = isBackward ? domAnchor : domFocus; // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n\n    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;\n    var isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width');\n    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;\n    var isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width');\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);\n    return domRange;\n  },\n\n  /**\r\n   * Find a Slate node from a native DOM `element`.\r\n   */\n  toSlateNode(editor, domNode) {\n    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(\"[data-slate-node]\");\n    }\n\n    var node = domEl ? ELEMENT_TO_NODE.get(domEl) : null;\n\n    if (!node) {\n      throw new Error(\"Cannot resolve a Slate node from DOM node: \".concat(domEl));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Get the target range from a DOM `event`.\r\n   */\n  findEventRange(editor, event) {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent;\n    }\n\n    var {\n      clientX: x,\n      clientY: y,\n      target\n    } = event;\n\n    if (x == null || y == null) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n\n    var node = ReactEditor.toSlateNode(editor, event.target);\n    var path = ReactEditor.findPath(editor, node); // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n\n    if (Element$1.isElement(node) && Editor.isVoid(editor, node)) {\n      var rect = target.getBoundingClientRect();\n      var isPrev = editor.isInline(node) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n      var edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end'\n      });\n      var point = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);\n\n      if (point) {\n        var _range = Editor.range(editor, point);\n\n        return _range;\n      }\n    } // Else resolve a range from the caret position where the drop occured.\n\n\n    var domRange;\n    var {\n      document\n    } = ReactEditor.getWindow(editor); // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y);\n    } else {\n      var position = document.caretPositionFromPoint(x, y);\n\n      if (position) {\n        domRange = document.createRange();\n        domRange.setStart(position.offsetNode, position.offset);\n        domRange.setEnd(position.offsetNode, position.offset);\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    } // Resolve a Slate range from the DOM range.\n\n\n    var range = ReactEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n      suppressThrow: false\n    });\n    return range;\n  },\n\n  /**\r\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\r\n   */\n  toSlatePoint(editor, domPoint, options) {\n    var {\n      exactMatch,\n      suppressThrow\n    } = options;\n    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);\n    var parentNode = nearestNode.parentNode;\n    var textNode = null;\n    var offset = 0;\n\n    if (parentNode) {\n      var _domNode$textContent, _domNode$textContent2;\n\n      var editorEl = ReactEditor.toDOMNode(editor, editor);\n      var potentialVoidNode = parentNode.closest('[data-slate-void=\"true\"]'); // Need to ensure that the closest void node is actually a void node\n      // within this editor, and not a void node within some parent editor. This can happen\n      // if this editor is within a void node of another editor (\"nested editors\", like in\n      // the \"Editable Voids\" example on the docs site).\n\n      var voidNode = potentialVoidNode && editorEl.contains(potentialVoidNode) ? potentialVoidNode : null;\n      var leafNode = parentNode.closest('[data-slate-leaf]');\n      var domNode = null; // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]');\n\n        if (textNode) {\n          var window = ReactEditor.getWindow(editor);\n          var range = window.document.createRange();\n          range.setStart(textNode, 0);\n          range.setEnd(nearestNode, nearestOffset);\n          var contents = range.cloneContents();\n          var removals = [...Array.prototype.slice.call(contents.querySelectorAll('[data-slate-zero-width]')), ...Array.prototype.slice.call(contents.querySelectorAll('[contenteditable=false]'))];\n          removals.forEach(el => {\n            // COMPAT: While composing at the start of a text node, some keyboards put\n            // the text content inside the zero width space.\n            if (IS_ANDROID && !exactMatch && el.hasAttribute('data-slate-zero-width') && el.textContent.length > 0 && el.textContext !== '\\uFEFF') {\n              if (el.textContent.startsWith('\\uFEFF')) {\n                el.textContent = el.textContent.slice(1);\n              }\n\n              return;\n            }\n\n            el.parentNode.removeChild(el);\n          }); // COMPAT: Edge has a bug where Range.prototype.toString() will\n          // convert \\n into \\r\\n. The bug causes a loop when slate-react\n          // attempts to reposition its cursor to match the native position. Use\n          // textContent.length instead.\n          // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n\n          offset = contents.textContent.length;\n          domNode = textNode;\n        }\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent and taking the\n        // first one that isn't inside a nested editor.\n        var leafNodes = voidNode.querySelectorAll('[data-slate-leaf]');\n\n        for (var index = 0; index < leafNodes.length; index++) {\n          var current = leafNodes[index];\n\n          if (ReactEditor.hasDOMNode(editor, current)) {\n            leafNode = current;\n            break;\n          }\n        } // COMPAT: In read-only editors the leaf is not rendered.\n\n\n        if (!leafNode) {\n          offset = 1;\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]');\n          domNode = leafNode;\n          offset = domNode.textContent.length;\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent.length;\n          });\n        }\n      }\n\n      if (domNode && offset === domNode.textContent.length && // COMPAT: Android IMEs might remove the zero width space while composing,\n      // and we don't add it for line-breaks.\n      IS_ANDROID && domNode.getAttribute('data-slate-zero-width') === 'z' && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.startsWith('\\uFEFF') && (parentNode.hasAttribute('data-slate-zero-width') || IS_FIREFOX && (_domNode$textContent2 = domNode.textContent) !== null && _domNode$textContent2 !== void 0 && _domNode$textContent2.endsWith('\\n\\n'))) {\n        offset--;\n      }\n    }\n\n    if (IS_ANDROID && !textNode && !exactMatch) {\n      var node = parentNode.hasAttribute('data-slate-node') ? parentNode : parentNode.closest('[data-slate-node]');\n\n      if (node && ReactEditor.hasDOMNode(editor, node, {\n        editable: true\n      })) {\n        var _slateNode = ReactEditor.toSlateNode(editor, node);\n\n        var {\n          path: _path,\n          offset: _offset\n        } = Editor.start(editor, ReactEditor.findPath(editor, _slateNode));\n\n        if (!node.querySelector('[data-slate-leaf]')) {\n          _offset = nearestOffset;\n        }\n\n        return {\n          path: _path,\n          offset: _offset\n        };\n      }\n    }\n\n    if (!textNode) {\n      if (suppressThrow) {\n        return null;\n      }\n\n      throw new Error(\"Cannot resolve a Slate point from DOM point: \".concat(domPoint));\n    } // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n\n\n    var slateNode = ReactEditor.toSlateNode(editor, textNode);\n    var path = ReactEditor.findPath(editor, slateNode);\n    return {\n      path,\n      offset\n    };\n  },\n\n  /**\r\n   * Find a Slate range from a DOM range or selection.\r\n   */\n  toSlateRange(editor, domRange, options) {\n    var {\n      exactMatch,\n      suppressThrow\n    } = options;\n    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;\n    var anchorNode;\n    var anchorOffset;\n    var focusNode;\n    var focusOffset;\n    var isCollapsed;\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        anchorNode = domRange.anchorNode;\n        anchorOffset = domRange.anchorOffset;\n        focusNode = domRange.focusNode;\n        focusOffset = domRange.focusOffset; // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n\n        if (IS_CHROME && hasShadowRoot(anchorNode)) {\n          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;\n        } else {\n          isCollapsed = domRange.isCollapsed;\n        }\n      } else {\n        anchorNode = domRange.startContainer;\n        anchorOffset = domRange.startOffset;\n        focusNode = domRange.endContainer;\n        focusOffset = domRange.endOffset;\n        isCollapsed = domRange.collapsed;\n      }\n    }\n\n    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {\n      throw new Error(\"Cannot resolve a Slate range from DOM range: \".concat(domRange));\n    }\n\n    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {\n      exactMatch,\n      suppressThrow\n    });\n\n    if (!anchor) {\n      return null;\n    }\n\n    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], {\n      exactMatch,\n      suppressThrow\n    });\n\n    if (!focus) {\n      return null;\n    }\n    /**\r\n     * suppose we have this document:\r\n     *\r\n     * { type: 'paragraph',\r\n     *   children: [\r\n     *     { text: 'foo ' },\r\n     *     { text: 'bar' },\r\n     *     { text: ' baz' }\r\n     *   ]\r\n     * }\r\n     *\r\n     * a double click on \"bar\" on chrome will create this range:\r\n     *\r\n     * anchor -> [0,1] offset 0\r\n     * focus  -> [0,1] offset 3\r\n     *\r\n     * while on firefox will create this range:\r\n     *\r\n     * anchor -> [0,0] offset 4\r\n     * focus  -> [0,2] offset 0\r\n     *\r\n     * let's try to fix it...\r\n     */\n\n\n    if (IS_FIREFOX && !isCollapsed && anchorNode !== focusNode) {\n      var isEnd = Editor.isEnd(editor, anchor, anchor.path);\n      var isStart = Editor.isStart(editor, focus, focus.path);\n\n      if (isEnd) {\n        var after = Editor.after(editor, anchor); // Editor.after() might return undefined\n\n        anchor = after || anchor;\n      }\n\n      if (isStart) {\n        var before = Editor.before(editor, focus);\n        focus = before || focus;\n      }\n    }\n\n    var range = {\n      anchor: anchor,\n      focus: focus\n    }; // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n\n    if (Range.isExpanded(range) && Range.isForward(range) && isDOMElement(focusNode) && Editor.void(editor, {\n      at: range.focus,\n      mode: 'highest'\n    })) {\n      range = Editor.unhangRange(editor, range, {\n        voids: true\n      });\n    }\n\n    return range;\n  },\n\n  hasRange(editor, range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);\n  },\n\n  /**\r\n   * Check if the target is in the editor.\r\n   */\n  hasTarget(editor, target) {\n    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target);\n  },\n\n  /**\r\n   * Check if the target is editable and in the editor.\r\n   */\n  hasEditableTarget(editor, target) {\n    return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {\n      editable: true\n    });\n  },\n\n  /**\r\n   * Check if the target can be selectable\r\n   */\n  hasSelectableTarget(editor, target) {\n    return ReactEditor.hasEditableTarget(editor, target) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, target);\n  },\n\n  /**\r\n   * Check if the target is inside void and in an non-readonly editor.\r\n   */\n  isTargetInsideNonReadonlyVoid(editor, target) {\n    if (IS_READ_ONLY.get(editor)) return false;\n    var slateNode = ReactEditor.hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);\n    return Element$1.isElement(slateNode) && Editor.isVoid(editor, slateNode);\n  },\n\n  /**\r\n   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.\r\n   */\n  androidScheduleFlush(editor) {\n    var _EDITOR_TO_SCHEDULE_F;\n\n    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(editor)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();\n  },\n\n  /**\r\n   * Experimental and android specific: Get pending diffs\r\n   */\n  androidPendingDiffs(editor) {\n    return EDITOR_TO_PENDING_DIFFS.get(editor);\n  }\n\n};\n\n/**\r\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\r\n */\n\nvar useIsomorphicLayoutEffect = CAN_USE_DOM ? useLayoutEffect : useEffect;\n\nvar _excluded$3 = [\"anchor\", \"focus\"],\n    _excluded2$1 = [\"anchor\", \"focus\"];\nvar shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every(key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);\n/**\r\n * Check if a list of decorator ranges are equal to another.\r\n *\r\n * PERF: this requires the two lists to also have the ranges inside them in the\r\n * same order, but this is an okay constraint for us since decorations are\r\n * kept in order, and the odd case where they aren't is okay to re-render for.\r\n */\n\nvar isDecoratorRangeListEqual = (list, another) => {\n  if (list.length !== another.length) {\n    return false;\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n\n    var rangeOwnProps = _objectWithoutProperties(range, _excluded$3);\n\n    var otherOwnProps = _objectWithoutProperties(other, _excluded2$1);\n\n    if (!Range.equals(range, other) || range[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] || !shallowCompare(rangeOwnProps, otherOwnProps)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\r\n * Leaf content strings.\r\n */\n\nvar String = props => {\n  var {\n    isLast,\n    leaf,\n    parent,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, text);\n  var parentPath = Path.parent(path);\n  var isMarkPlaceholder = leaf[MARK_PLACEHOLDER_SYMBOL] === true; // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n\n  if (editor.isVoid(parent)) {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      length: Node.string(parent).length\n    });\n  } // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n\n\n  if (leaf.text === '' && parent.children[parent.children.length - 1] === text && !editor.isInline(parent) && Editor.string(editor, parentPath) === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isLineBreak: true,\n      isMarkPlaceholder: isMarkPlaceholder\n    });\n  } // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n\n\n  if (leaf.text === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isMarkPlaceholder: isMarkPlaceholder\n    });\n  } // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n\n\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return /*#__PURE__*/React.createElement(TextString, {\n      isTrailing: true,\n      text: leaf.text\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(TextString, {\n    text: leaf.text\n  });\n};\n/**\r\n * Leaf strings with text in them.\r\n */\n\n\nvar TextString = props => {\n  var {\n    text,\n    isTrailing = false\n  } = props;\n  var ref = useRef(null);\n\n  var getTextContent = () => {\n    return \"\".concat(text !== null && text !== void 0 ? text : '').concat(isTrailing ? '\\n' : '');\n  }; // This is the actual text rendering boundary where we interface with the DOM\n  // The text is not rendered as part of the virtual DOM, as since we handle basic character insertions natively,\n  // updating the DOM is not a one way dataflow anymore. What we need here is not reconciliation and diffing\n  // with previous version of the virtual DOM, but rather diffing with the actual DOM element, and replace the DOM <span> content\n  // exactly if and only if its current content does not match our current virtual DOM.\n  // Otherwise the DOM TextNode would always be replaced by React as the user types, which interferes with native text features,\n  // eg makes native spellcheck opt out from checking the text node.\n  // useLayoutEffect: updating our span before browser paint\n\n\n  useIsomorphicLayoutEffect(() => {\n    // null coalescing text to make sure we're not outputing \"null\" as a string in the extreme case it is nullish at runtime\n    var textWithTrailing = getTextContent();\n\n    if (ref.current && ref.current.textContent !== textWithTrailing) {\n      ref.current.textContent = textWithTrailing;\n    } // intentionally not specifying dependencies, so that this effect runs on every render\n    // as this effectively replaces \"specifying the text in the virtual DOM under the <span> below\" on each render\n\n  }); // Render text content immediately if it's the first-time render\n  // Ensure that text content is rendered on server-side rendering\n\n  if (!ref.current) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      \"data-slate-string\": true,\n      ref: ref\n    }, getTextContent());\n  } // the span is intentionally same on every render in virtual DOM, actual rendering happens in the layout effect above\n\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-string\": true,\n    ref: ref\n  });\n};\n/**\r\n * Leaf strings without text, render as zero-width strings.\r\n */\n\n\nvar ZeroWidthString = props => {\n  var {\n    length = 0,\n    isLineBreak = false,\n    isMarkPlaceholder = false\n  } = props;\n  var attributes = {\n    'data-slate-zero-width': isLineBreak ? 'n' : 'z',\n    'data-slate-length': length\n  };\n\n  if (isMarkPlaceholder) {\n    attributes['data-slate-mark-placeholder'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", Object.assign({}, attributes), !IS_ANDROID || !isLineBreak ? '\\uFEFF' : null, isLineBreak ? /*#__PURE__*/React.createElement(\"br\", null) : null);\n};\n\n/**\r\n * A React context for sharing the editor object.\r\n */\n\nvar EditorContext = /*#__PURE__*/createContext(null);\n/**\r\n * Get the current editor object from the React context.\r\n */\n\nvar useSlateStatic = () => {\n  var editor = useContext(EditorContext);\n\n  if (!editor) {\n    throw new Error(\"The `useSlateStatic` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return editor;\n};\n\n/**\r\n * Individual leaves in a text node with unique formatting.\r\n */\n\nvar Leaf = props => {\n  var {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = props => /*#__PURE__*/React.createElement(DefaultLeaf, Object.assign({}, props))\n  } = props;\n  var lastPlaceholderRef = useRef(null);\n  var placeholderRef = useRef(null);\n  var editor = useSlateStatic();\n  var placeholderResizeObserver = useRef(null);\n  useEffect(() => {\n    return () => {\n      if (placeholderResizeObserver.current) {\n        placeholderResizeObserver.current.disconnect();\n      }\n    };\n  }, []);\n  useEffect(() => {\n    var placeholderEl = placeholderRef === null || placeholderRef === void 0 ? void 0 : placeholderRef.current;\n\n    if (placeholderEl) {\n      EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl);\n    } else {\n      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);\n    }\n\n    if (placeholderResizeObserver.current) {\n      // Update existing observer.\n      placeholderResizeObserver.current.disconnect();\n      if (placeholderEl) placeholderResizeObserver.current.observe(placeholderEl);\n    } else if (placeholderEl) {\n      // Create a new observer and observe the placeholder element.\n      var ResizeObserver$1 = window.ResizeObserver || ResizeObserver;\n      placeholderResizeObserver.current = new ResizeObserver$1(() => {\n        // Force a re-render of the editor so its min-height can be updated\n        // to the new height of the placeholder.\n        var forceRender = EDITOR_TO_FORCE_RENDER.get(editor);\n        forceRender === null || forceRender === void 0 ? void 0 : forceRender();\n      });\n      placeholderResizeObserver.current.observe(placeholderEl);\n    }\n\n    if (!placeholderEl && lastPlaceholderRef.current) {\n      // No placeholder element, so no need for a resize observer.\n      // Force a re-render of the editor so its min-height can be reset.\n      var forceRender = EDITOR_TO_FORCE_RENDER.get(editor);\n      forceRender === null || forceRender === void 0 ? void 0 : forceRender();\n    }\n\n    lastPlaceholderRef.current = placeholderRef.current;\n    return () => {\n      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);\n    };\n  }, [placeholderRef, leaf]);\n  var children = /*#__PURE__*/React.createElement(String, {\n    isLast: isLast,\n    leaf: leaf,\n    parent: parent,\n    text: text\n  });\n\n  if (leaf[PLACEHOLDER_SYMBOL]) {\n    var placeholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none'\n        },\n        contentEditable: false,\n        ref: placeholderRef\n      }\n    };\n    children = /*#__PURE__*/React.createElement(React.Fragment, null, renderPlaceholder(placeholderProps), children);\n  } // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n\n\n  var attributes = {\n    'data-slate-leaf': true\n  };\n  return renderLeaf({\n    attributes,\n    children,\n    leaf,\n    text\n  });\n};\n\nvar MemoizedLeaf = /*#__PURE__*/React.memo(Leaf, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && Text$1.equals(next.leaf, prev.leaf) && next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];\n});\nvar DefaultLeaf = props => {\n  var {\n    attributes,\n    children\n  } = props;\n  return /*#__PURE__*/React.createElement(\"span\", Object.assign({}, attributes), children);\n};\n\n/**\r\n * Text.\r\n */\n\nvar Text = props => {\n  var {\n    decorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var ref = useRef(null);\n  var leaves = Text$1.decorations(text, decorations);\n  var key = ReactEditor.findKey(editor, text);\n  var children = [];\n\n  for (var i = 0; i < leaves.length; i++) {\n    var leaf = leaves[i];\n    children.push( /*#__PURE__*/React.createElement(MemoizedLeaf, {\n      isLast: isLast && i === leaves.length - 1,\n      key: \"\".concat(key.id, \"-\").concat(i),\n      renderPlaceholder: renderPlaceholder,\n      leaf: leaf,\n      text: text,\n      parent: parent,\n      renderLeaf: renderLeaf\n    }));\n  } // Update element-related weak maps with the DOM element ref.\n\n\n  useIsomorphicLayoutEffect(() => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n\n    if (ref.current) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref.current);\n      NODE_TO_ELEMENT.set(text, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, text);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(text);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-node\": \"text\",\n    ref: ref\n  }, children);\n};\n\nvar MemoizedText = /*#__PURE__*/React.memo(Text, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.text === prev.text && isDecoratorRangeListEqual(next.decorations, prev.decorations);\n});\n\n/**\r\n * Element.\r\n */\n\nvar Element = props => {\n  var {\n    decorations,\n    element,\n    renderElement = p => /*#__PURE__*/React.createElement(DefaultElement, Object.assign({}, p)),\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  } = props;\n  var editor = useSlateStatic();\n  var readOnly = useReadOnly();\n  var isInline = editor.isInline(element);\n  var key = ReactEditor.findKey(editor, element);\n  var ref = useCallback(ref => {\n    // Update element-related weak maps with the DOM element ref.\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n\n    if (ref) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref);\n      NODE_TO_ELEMENT.set(element, ref);\n      ELEMENT_TO_NODE.set(ref, element);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(element);\n    }\n  }, [editor, key, element]);\n  var children = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  }); // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n\n  var attributes = {\n    'data-slate-node': 'element',\n    ref\n  };\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true;\n  } // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n\n\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    var text = Node.string(element);\n    var dir = getDirection(text);\n\n    if (dir === 'rtl') {\n      attributes.dir = dir;\n    }\n  } // If it's a void node, wrap the children in extra void-specific elements.\n\n\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true;\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false;\n    }\n\n    var Tag = isInline ? 'span' : 'div';\n    var [[_text]] = Node.texts(element);\n    children = /*#__PURE__*/React.createElement(Tag, {\n      \"data-slate-spacer\": true,\n      style: {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      }\n    }, /*#__PURE__*/React.createElement(MemoizedText, {\n      renderPlaceholder: renderPlaceholder,\n      decorations: [],\n      isLast: false,\n      parent: element,\n      text: _text\n    }));\n    NODE_TO_INDEX.set(_text, 0);\n    NODE_TO_PARENT.set(_text, element);\n  }\n\n  return renderElement({\n    attributes,\n    children,\n    element\n  });\n};\n\nvar MemoizedElement = /*#__PURE__*/React.memo(Element, (prev, next) => {\n  return prev.element === next.element && prev.renderElement === next.renderElement && prev.renderLeaf === next.renderLeaf && isDecoratorRangeListEqual(prev.decorations, next.decorations) && (prev.selection === next.selection || !!prev.selection && !!next.selection && Range.equals(prev.selection, next.selection));\n});\n/**\r\n * The default element renderer.\r\n */\n\nvar DefaultElement = props => {\n  var {\n    attributes,\n    children,\n    element\n  } = props;\n  var editor = useSlateStatic();\n  var Tag = editor.isInline(element) ? 'span' : 'div';\n  return /*#__PURE__*/React.createElement(Tag, Object.assign({}, attributes, {\n    style: {\n      position: 'relative'\n    }\n  }), children);\n};\n\n/**\r\n * A React context for sharing the `decorate` prop of the editable.\r\n */\n\nvar DecorateContext = /*#__PURE__*/createContext(() => []);\n/**\r\n * Get the current `decorate` prop of the editable.\r\n */\n\nvar useDecorate = () => {\n  return useContext(DecorateContext);\n};\n\n/**\r\n * A React context for sharing the `selected` state of an element.\r\n */\n\nvar SelectedContext = /*#__PURE__*/createContext(false);\n/**\r\n * Get the current `selected` state of an element.\r\n */\n\nvar useSelected = () => {\n  return useContext(SelectedContext);\n};\n\n/**\r\n * Children.\r\n */\n\nvar useChildren = props => {\n  var {\n    decorations,\n    node,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  } = props;\n  var decorate = useDecorate();\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, node);\n  var children = [];\n  var isLeafBlock = Element$1.isElement(node) && !editor.isInline(node) && Editor.hasInlines(editor, node);\n\n  for (var i = 0; i < node.children.length; i++) {\n    var p = path.concat(i);\n    var n = node.children[i];\n    var key = ReactEditor.findKey(editor, n);\n    var range = Editor.range(editor, p);\n    var sel = selection && Range.intersection(range, selection);\n    var ds = decorate([n, p]);\n\n    for (var dec of decorations) {\n      var d = Range.intersection(dec, range);\n\n      if (d) {\n        ds.push(d);\n      }\n    }\n\n    if (Element$1.isElement(n)) {\n      children.push( /*#__PURE__*/React.createElement(SelectedContext.Provider, {\n        key: \"provider-\".concat(key.id),\n        value: !!sel\n      }, /*#__PURE__*/React.createElement(MemoizedElement, {\n        decorations: ds,\n        element: n,\n        key: key.id,\n        renderElement: renderElement,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        selection: sel\n      })));\n    } else {\n      children.push( /*#__PURE__*/React.createElement(MemoizedText, {\n        decorations: ds,\n        key: key.id,\n        isLast: isLeafBlock && i === node.children.length - 1,\n        parent: node,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        text: n\n      }));\n    }\n\n    NODE_TO_INDEX.set(n, i);\n    NODE_TO_PARENT.set(n, node);\n  }\n\n  return children;\n};\n\n/**\r\n * A React context for sharing the `readOnly` state of the editor.\r\n */\n\nvar ReadOnlyContext = /*#__PURE__*/createContext(false);\n/**\r\n * Get the current `readOnly` state of the editor.\r\n */\n\nvar useReadOnly = () => {\n  return useContext(ReadOnlyContext);\n};\n\nvar SlateContext = /*#__PURE__*/createContext(null);\n/**\r\n * Get the current editor object from the React context.\r\n */\n\nvar useSlate = () => {\n  var context = useContext(SlateContext);\n\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n\n  var {\n    editor\n  } = context;\n  return editor;\n};\nvar useSlateWithV = () => {\n  var context = useContext(SlateContext);\n\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return context;\n};\n\nvar TRIPLE_CLICK = 3;\n\n/**\r\n * Hotkey mappings for each platform.\r\n */\n\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  insertSoftBreak: 'shift+enter',\n  splitBlock: 'enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z']\n};\n/**\r\n * Create a platform-aware hotkey checker.\r\n */\n\nvar create = key => {\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && isKeyHotkey(generic);\n  var isApple = apple && isKeyHotkey(apple);\n  var isWindows = windows && isKeyHotkey(windows);\n  return event => {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (!IS_APPLE && isWindows && isWindows(event)) return true;\n    return false;\n  };\n};\n/**\r\n * Hotkeys.\r\n */\n\n\nvar Hotkeys = {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSoftBreak: create('insertSoftBreak'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo')\n};\n\nvar createRestoreDomManager = (editor, receivedUserInput) => {\n  var bufferedMutations = [];\n\n  var clear = () => {\n    bufferedMutations = [];\n  };\n\n  var registerMutations = mutations => {\n    if (!receivedUserInput.current) {\n      return;\n    }\n\n    var trackedMutations = mutations.filter(mutation => isTrackedMutation(editor, mutation, mutations));\n    bufferedMutations.push(...trackedMutations);\n  };\n\n  function restoreDOM() {\n    bufferedMutations.reverse().forEach(mutation => {\n      if (mutation.type === 'characterData') {\n        mutation.target.textContent = mutation.oldValue;\n        return;\n      }\n\n      mutation.removedNodes.forEach(node => {\n        mutation.target.insertBefore(node, mutation.nextSibling);\n      });\n      mutation.addedNodes.forEach(node => {\n        mutation.target.removeChild(node);\n      });\n    }); // Clear buffered mutations to ensure we don't undo them twice\n\n    clear();\n  }\n\n  return {\n    registerMutations,\n    restoreDOM,\n    clear\n  };\n};\n\nvar MUTATION_OBSERVER_CONFIG$1 = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true\n}; // We have to use a class component here since we rely on `getSnapshotBeforeUpdate` which has no FC equivalent\n// to run code synchronously immediately before react commits the component update to the DOM.\n\nclass RestoreDOMComponent extends Component {\n  constructor() {\n    super(...arguments);\n    this.context = null;\n    this.manager = null;\n    this.mutationObserver = null;\n  }\n\n  observe() {\n    var _this$mutationObserve;\n\n    var {\n      node\n    } = this.props;\n\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    }\n\n    (_this$mutationObserve = this.mutationObserver) === null || _this$mutationObserve === void 0 ? void 0 : _this$mutationObserve.observe(node.current, MUTATION_OBSERVER_CONFIG$1);\n  }\n\n  componentDidMount() {\n    var {\n      receivedUserInput\n    } = this.props;\n    var editor = this.context;\n    this.manager = createRestoreDomManager(editor, receivedUserInput);\n    this.mutationObserver = new MutationObserver(this.manager.registerMutations);\n    this.observe();\n  }\n\n  getSnapshotBeforeUpdate() {\n    var _this$mutationObserve2, _this$mutationObserve3, _this$manager2;\n\n    var pendingMutations = (_this$mutationObserve2 = this.mutationObserver) === null || _this$mutationObserve2 === void 0 ? void 0 : _this$mutationObserve2.takeRecords();\n\n    if (pendingMutations !== null && pendingMutations !== void 0 && pendingMutations.length) {\n      var _this$manager;\n\n      (_this$manager = this.manager) === null || _this$manager === void 0 ? void 0 : _this$manager.registerMutations(pendingMutations);\n    }\n\n    (_this$mutationObserve3 = this.mutationObserver) === null || _this$mutationObserve3 === void 0 ? void 0 : _this$mutationObserve3.disconnect();\n    (_this$manager2 = this.manager) === null || _this$manager2 === void 0 ? void 0 : _this$manager2.restoreDOM();\n    return null;\n  }\n\n  componentDidUpdate() {\n    var _this$manager3;\n\n    (_this$manager3 = this.manager) === null || _this$manager3 === void 0 ? void 0 : _this$manager3.clear();\n    this.observe();\n  }\n\n  componentWillUnmount() {\n    var _this$mutationObserve4;\n\n    (_this$mutationObserve4 = this.mutationObserver) === null || _this$mutationObserve4 === void 0 ? void 0 : _this$mutationObserve4.disconnect();\n  }\n\n  render() {\n    return this.props.children;\n  }\n\n}\n\nRestoreDOMComponent.contextType = EditorContext;\nvar RestoreDOM = IS_ANDROID ? RestoreDOMComponent : _ref => {\n  var {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\n/**\r\n * Check whether a text diff was applied in a way we can perform the pending action on /\r\n * recover the pending selection.\r\n */\n\nfunction verifyDiffState(editor, textDiff) {\n  var {\n    path,\n    diff\n  } = textDiff;\n\n  if (!Editor.hasPath(editor, path)) {\n    return false;\n  }\n\n  var node = Node.get(editor, path);\n\n  if (!Text$1.isText(node)) {\n    return false;\n  }\n\n  if (diff.start !== node.text.length || diff.text.length === 0) {\n    return node.text.slice(diff.start, diff.start + diff.text.length) === diff.text;\n  }\n\n  var nextPath = Path.next(path);\n\n  if (!Editor.hasPath(editor, nextPath)) {\n    return false;\n  }\n\n  var nextNode = Node.get(editor, nextPath);\n  return Text$1.isText(nextNode) && nextNode.text.startsWith(diff.text);\n}\n\nfunction applyStringDiff(text) {\n  for (var _len = arguments.length, diffs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    diffs[_key - 1] = arguments[_key];\n  }\n\n  return diffs.reduce((text, diff) => text.slice(0, diff.start) + diff.text + text.slice(diff.end), text);\n}\n\nfunction longestCommonPrefixLength(str, another) {\n  var length = Math.min(str.length, another.length);\n\n  for (var i = 0; i < length; i++) {\n    if (str.charAt(i) !== another.charAt(i)) {\n      return i;\n    }\n  }\n\n  return length;\n}\n\nfunction longestCommonSuffixLength(str, another, max) {\n  var length = Math.min(str.length, another.length, max);\n\n  for (var i = 0; i < length; i++) {\n    if (str.charAt(str.length - i - 1) !== another.charAt(another.length - i - 1)) {\n      return i;\n    }\n  }\n\n  return length;\n}\n/**\r\n * Remove redundant changes from the diff so that it spans the minimal possible range\r\n */\n\n\nfunction normalizeStringDiff(targetText, diff) {\n  var {\n    start,\n    end,\n    text\n  } = diff;\n  var removedText = targetText.slice(start, end);\n  var prefixLength = longestCommonPrefixLength(removedText, text);\n  var max = Math.min(removedText.length - prefixLength, text.length - prefixLength);\n  var suffixLength = longestCommonSuffixLength(removedText, text, max);\n  var normalized = {\n    start: start + prefixLength,\n    end: end - suffixLength,\n    text: text.slice(prefixLength, text.length - suffixLength)\n  };\n\n  if (normalized.start === normalized.end && normalized.text.length === 0) {\n    return null;\n  }\n\n  return normalized;\n}\n/**\r\n * Return a string diff that is equivalent to applying b after a spanning the range of\r\n * both changes\r\n */\n\nfunction mergeStringDiffs(targetText, a, b) {\n  var start = Math.min(a.start, b.start);\n  var overlap = Math.max(0, Math.min(a.start + a.text.length, b.end) - b.start);\n  var applied = applyStringDiff(targetText, a, b);\n  var sliceEnd = Math.max(b.start + b.text.length, a.start + a.text.length + (a.start + a.text.length > b.start ? b.text.length : 0) - overlap);\n  var text = applied.slice(start, sliceEnd);\n  var end = Math.max(a.end, b.end - a.text.length + (a.end - a.start));\n  return normalizeStringDiff(targetText, {\n    start,\n    end,\n    text\n  });\n}\n/**\r\n * Get the slate range the text diff spans.\r\n */\n\nfunction targetRange(textDiff) {\n  var {\n    path,\n    diff\n  } = textDiff;\n  return {\n    anchor: {\n      path,\n      offset: diff.start\n    },\n    focus: {\n      path,\n      offset: diff.end\n    }\n  };\n}\n/**\r\n * Normalize a 'pending point' a.k.a a point based on the dom state before applying\r\n * the pending diffs. Since the pending diffs might have been inserted with different\r\n * marks we have to 'walk' the offset from the starting position to ensure we still\r\n * have a valid point inside the document\r\n */\n\nfunction normalizePoint(editor, point) {\n  var {\n    path,\n    offset\n  } = point;\n\n  if (!Editor.hasPath(editor, path)) {\n    return null;\n  }\n\n  var leaf = Node.get(editor, path);\n\n  if (!Text$1.isText(leaf)) {\n    return null;\n  }\n\n  var parentBlock = Editor.above(editor, {\n    match: n => Element$1.isElement(n) && Editor.isBlock(editor, n),\n    at: path\n  });\n\n  if (!parentBlock) {\n    return null;\n  }\n\n  while (offset > leaf.text.length) {\n    var entry = Editor.next(editor, {\n      at: path,\n      match: Text$1.isText\n    });\n\n    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {\n      return null;\n    }\n\n    offset -= leaf.text.length;\n    leaf = entry[0];\n    path = entry[1];\n  }\n\n  return {\n    path,\n    offset\n  };\n}\n/**\r\n * Normalize a 'pending selection' to ensure it's valid in the current document state.\r\n */\n\nfunction normalizeRange(editor, range) {\n  var anchor = normalizePoint(editor, range.anchor);\n\n  if (!anchor) {\n    return null;\n  }\n\n  if (Range.isCollapsed(range)) {\n    return {\n      anchor,\n      focus: anchor\n    };\n  }\n\n  var focus = normalizePoint(editor, range.focus);\n\n  if (!focus) {\n    return null;\n  }\n\n  return {\n    anchor,\n    focus\n  };\n}\nfunction transformPendingPoint(editor, point, op) {\n  var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);\n  var textDiff = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find(_ref => {\n    var {\n      path\n    } = _ref;\n    return Path.equals(path, point.path);\n  });\n\n  if (!textDiff || point.offset <= textDiff.diff.start) {\n    return Point.transform(point, op, {\n      affinity: 'backward'\n    });\n  }\n\n  var {\n    diff\n  } = textDiff; // Point references location inside the diff => transform the point based on the location\n  // the diff will be applied to and add the offset inside the diff.\n\n  if (point.offset <= diff.start + diff.text.length) {\n    var _anchor = {\n      path: point.path,\n      offset: diff.start\n    };\n\n    var _transformed = Point.transform(_anchor, op, {\n      affinity: 'backward'\n    });\n\n    if (!_transformed) {\n      return null;\n    }\n\n    return {\n      path: _transformed.path,\n      offset: _transformed.offset + point.offset - diff.start\n    };\n  } // Point references location after the diff\n\n\n  var anchor = {\n    path: point.path,\n    offset: point.offset - diff.text.length + diff.end - diff.start\n  };\n  var transformed = Point.transform(anchor, op, {\n    affinity: 'backward'\n  });\n\n  if (!transformed) {\n    return null;\n  }\n\n  if (op.type === 'split_node' && Path.equals(op.path, point.path) && anchor.offset < op.position && diff.start < op.position) {\n    return transformed;\n  }\n\n  return {\n    path: transformed.path,\n    offset: transformed.offset + diff.text.length - diff.end + diff.start\n  };\n}\nfunction transformPendingRange(editor, range, op) {\n  var anchor = transformPendingPoint(editor, range.anchor, op);\n\n  if (!anchor) {\n    return null;\n  }\n\n  if (Range.isCollapsed(range)) {\n    return {\n      anchor,\n      focus: anchor\n    };\n  }\n\n  var focus = transformPendingPoint(editor, range.focus, op);\n\n  if (!focus) {\n    return null;\n  }\n\n  return {\n    anchor,\n    focus\n  };\n}\nfunction transformTextDiff(textDiff, op) {\n  var {\n    path,\n    diff,\n    id\n  } = textDiff;\n\n  switch (op.type) {\n    case 'insert_text':\n      {\n        if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n          return textDiff;\n        }\n\n        if (op.offset <= diff.start) {\n          return {\n            diff: {\n              start: op.text.length + diff.start,\n              end: op.text.length + diff.end,\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n\n        return {\n          diff: {\n            start: diff.start,\n            end: diff.end + op.text.length,\n            text: diff.text\n          },\n          id,\n          path\n        };\n      }\n\n    case 'remove_text':\n      {\n        if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n          return textDiff;\n        }\n\n        if (op.offset + op.text.length <= diff.start) {\n          return {\n            diff: {\n              start: diff.start - op.text.length,\n              end: diff.end - op.text.length,\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n\n        return {\n          diff: {\n            start: diff.start,\n            end: diff.end - op.text.length,\n            text: diff.text\n          },\n          id,\n          path\n        };\n      }\n\n    case 'split_node':\n      {\n        if (!Path.equals(op.path, path) || op.position >= diff.end) {\n          return {\n            diff,\n            id,\n            path: Path.transform(path, op, {\n              affinity: 'backward'\n            })\n          };\n        }\n\n        if (op.position > diff.start) {\n          return {\n            diff: {\n              start: diff.start,\n              end: Math.min(op.position, diff.end),\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n\n        return {\n          diff: {\n            start: diff.start - op.position,\n            end: diff.end - op.position,\n            text: diff.text\n          },\n          id,\n          path: Path.transform(path, op, {\n            affinity: 'forward'\n          })\n        };\n      }\n\n    case 'merge_node':\n      {\n        if (!Path.equals(op.path, path)) {\n          return {\n            diff,\n            id,\n            path: Path.transform(path, op)\n          };\n        }\n\n        return {\n          diff: {\n            start: diff.start + op.position,\n            end: diff.end + op.position,\n            text: diff.text\n          },\n          id,\n          path: Path.transform(path, op)\n        };\n      }\n  }\n\n  var newPath = Path.transform(path, op);\n\n  if (!newPath) {\n    return null;\n  }\n\n  return {\n    diff,\n    path: newPath,\n    id\n  };\n}\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n// When using keyboard English association function, conpositionEnd triggered too fast, resulting in after `insertText` still maintain association state.\n\nvar RESOLVE_DELAY = 25; // Time with no user interaction before the current user action is considered as done.\n\nvar FLUSH_DELAY = 200; // Replace with `const debug = console.log` to debug\n\nvar debug = function debug() {};\n\nfunction createAndroidInputManager(_ref) {\n  var {\n    editor,\n    scheduleOnDOMSelectionChange,\n    onDOMSelectionChange\n  } = _ref;\n  var flushing = false;\n  var compositionEndTimeoutId = null;\n  var flushTimeoutId = null;\n  var actionTimeoutId = null;\n  var idCounter = 0;\n  var insertPositionHint = false;\n\n  var applyPendingSelection = () => {\n    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor);\n    EDITOR_TO_PENDING_SELECTION.delete(editor);\n\n    if (pendingSelection) {\n      var {\n        selection\n      } = editor;\n      var normalized = normalizeRange(editor, pendingSelection);\n\n      if (normalized && (!selection || !Range.equals(normalized, selection))) {\n        Transforms.select(editor, normalized);\n      }\n    }\n  };\n\n  var performAction = () => {\n    var action = EDITOR_TO_PENDING_ACTION.get(editor);\n    EDITOR_TO_PENDING_ACTION.delete(editor);\n\n    if (!action) {\n      return;\n    }\n\n    if (action.at) {\n      var target = Point.isPoint(action.at) ? normalizePoint(editor, action.at) : normalizeRange(editor, action.at);\n\n      if (!target) {\n        return;\n      }\n\n      var _targetRange = Editor.range(editor, target);\n\n      if (!editor.selection || !Range.equals(editor.selection, _targetRange)) {\n        Transforms.select(editor, target);\n      }\n    }\n\n    action.run();\n  };\n\n  var flush = () => {\n    var _EDITOR_TO_PENDING_DI;\n\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n\n    if (actionTimeoutId) {\n      clearTimeout(actionTimeoutId);\n      actionTimeoutId = null;\n    }\n\n    if (!hasPendingDiffs() && !hasPendingAction()) {\n      applyPendingSelection();\n      return;\n    }\n\n    if (!flushing) {\n      flushing = true;\n      setTimeout(() => flushing = false);\n    }\n\n    if (hasPendingAction()) {\n      flushing = 'action';\n    }\n\n    var selectionRef = editor.selection && Editor.rangeRef(editor, editor.selection, {\n      affinity: 'forward'\n    });\n    EDITOR_TO_USER_MARKS.set(editor, editor.marks);\n    debug('flush', EDITOR_TO_PENDING_ACTION.get(editor), EDITOR_TO_PENDING_DIFFS.get(editor));\n    var scheduleSelectionChange = !!((_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length);\n    var diff;\n\n    while (diff = (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI2 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI2[0]) {\n      var _EDITOR_TO_PENDING_DI2, _EDITOR_TO_PENDING_DI3;\n\n      var pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);\n\n      if (pendingMarks !== undefined) {\n        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n        editor.marks = pendingMarks;\n      }\n\n      if (pendingMarks && insertPositionHint === false) {\n        insertPositionHint = null;\n      }\n\n      var range = targetRange(diff);\n\n      if (!editor.selection || !Range.equals(editor.selection, range)) {\n        Transforms.select(editor, range);\n      }\n\n      if (diff.diff.text) {\n        Editor.insertText(editor, diff.diff.text);\n      } else {\n        Editor.deleteFragment(editor);\n      } // Remove diff only after we have applied it to account for it when transforming\n      // pending ranges.\n\n\n      EDITOR_TO_PENDING_DIFFS.set(editor, (_EDITOR_TO_PENDING_DI3 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI3 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI3.filter(_ref2 => {\n        var {\n          id\n        } = _ref2;\n        return id !== diff.id;\n      }));\n\n      if (!verifyDiffState(editor, diff)) {\n        scheduleSelectionChange = false;\n        EDITOR_TO_PENDING_ACTION.delete(editor);\n        EDITOR_TO_USER_MARKS.delete(editor);\n        flushing = 'action'; // Ensure we don't restore the pending user (dom) selection\n        // since the document and dom state do not match.\n\n        EDITOR_TO_PENDING_SELECTION.delete(editor);\n        scheduleOnDOMSelectionChange.cancel();\n        onDOMSelectionChange.cancel();\n        selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();\n      }\n    }\n\n    var selection = selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();\n\n    if (selection && !EDITOR_TO_PENDING_SELECTION.get(editor) && (!editor.selection || !Range.equals(selection, editor.selection))) {\n      Transforms.select(editor, selection);\n    }\n\n    if (hasPendingAction()) {\n      performAction();\n      return;\n    } // COMPAT: The selectionChange event is fired after the action is performed,\n    // so we have to manually schedule it to ensure we don't 'throw away' the selection\n    // while rendering if we have pending changes.\n\n\n    if (scheduleSelectionChange) {\n      scheduleOnDOMSelectionChange();\n    }\n\n    scheduleOnDOMSelectionChange.flush();\n    onDOMSelectionChange.flush();\n    applyPendingSelection();\n    var userMarks = EDITOR_TO_USER_MARKS.get(editor);\n    EDITOR_TO_USER_MARKS.delete(editor);\n\n    if (userMarks !== undefined) {\n      editor.marks = userMarks;\n      editor.onChange();\n    }\n  };\n\n  var handleCompositionEnd = _event => {\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId);\n    }\n\n    compositionEndTimeoutId = setTimeout(() => {\n      IS_COMPOSING.set(editor, false);\n      flush();\n    }, RESOLVE_DELAY);\n  };\n\n  var handleCompositionStart = _event => {\n    IS_COMPOSING.set(editor, true);\n\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId);\n      compositionEndTimeoutId = null;\n    }\n  };\n\n  var updatePlaceholderVisibility = function updatePlaceholderVisibility() {\n    var forceHide = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor);\n\n    if (!placeholderElement) {\n      return;\n    }\n\n    if (hasPendingDiffs() || forceHide) {\n      placeholderElement.style.display = 'none';\n      return;\n    }\n\n    placeholderElement.style.removeProperty('display');\n  };\n\n  var storeDiff = (path, diff) => {\n    var _EDITOR_TO_PENDING_DI4;\n    var pendingDiffs = (_EDITOR_TO_PENDING_DI4 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI4 !== void 0 ? _EDITOR_TO_PENDING_DI4 : [];\n    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs);\n    var target = Node.leaf(editor, path);\n    var idx = pendingDiffs.findIndex(change => Path.equals(change.path, path));\n\n    if (idx < 0) {\n      var normalized = normalizeStringDiff(target.text, diff);\n\n      if (normalized) {\n        pendingDiffs.push({\n          path,\n          diff,\n          id: idCounter++\n        });\n      }\n\n      updatePlaceholderVisibility();\n      return;\n    }\n\n    var merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff);\n\n    if (!merged) {\n      pendingDiffs.splice(idx, 1);\n      updatePlaceholderVisibility();\n      return;\n    }\n\n    pendingDiffs[idx] = _objectSpread$3(_objectSpread$3({}, pendingDiffs[idx]), {}, {\n      diff: merged\n    });\n  };\n\n  var scheduleAction = function scheduleAction(run) {\n    var {\n      at\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    insertPositionHint = false;\n    EDITOR_TO_PENDING_SELECTION.delete(editor);\n    scheduleOnDOMSelectionChange.cancel();\n    onDOMSelectionChange.cancel();\n\n    if (hasPendingAction()) {\n      flush();\n    }\n\n    EDITOR_TO_PENDING_ACTION.set(editor, {\n      at,\n      run\n    }); // COMPAT: When deleting before a non-contenteditable element chrome only fires a beforeinput,\n    // (no input) and doesn't perform any dom mutations. Without a flush timeout we would never flush\n    // in this case and thus never actually perform the action.\n\n    actionTimeoutId = setTimeout(flush);\n  };\n\n  var handleDOMBeforeInput = event => {\n    var _targetRange2;\n\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n\n    var {\n      inputType: type\n    } = event;\n    var targetRange = null;\n    var data = event.dataTransfer || event.data || undefined;\n\n    if (insertPositionHint !== false && type !== 'insertText' && type !== 'insertCompositionText') {\n      insertPositionHint = false;\n    }\n\n    var [nativeTargetRange] = event.getTargetRanges();\n\n    if (nativeTargetRange) {\n      targetRange = ReactEditor.toSlateRange(editor, nativeTargetRange, {\n        exactMatch: false,\n        suppressThrow: true\n      });\n    } // COMPAT: SelectionChange event is fired after the action is performed, so we\n    // have to manually get the selection here to ensure it's up-to-date.\n\n\n    var window = ReactEditor.getWindow(editor);\n    var domSelection = window.getSelection();\n\n    if (!targetRange && domSelection) {\n      nativeTargetRange = domSelection;\n      targetRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false,\n        suppressThrow: true\n      });\n    }\n\n    targetRange = (_targetRange2 = targetRange) !== null && _targetRange2 !== void 0 ? _targetRange2 : editor.selection;\n\n    if (!targetRange) {\n      return;\n    }\n\n    if (Range.isExpanded(targetRange) && type.startsWith('delete')) {\n      var [start, end] = Range.edges(targetRange);\n      var leaf = Node.leaf(editor, start.path);\n\n      if (leaf.text.length === start.offset && end.offset === 0) {\n        var next = Editor.next(editor, {\n          at: start.path,\n          match: Text$1.isText\n        });\n\n        if (next && Path.equals(next[1], end.path)) {\n          targetRange = {\n            anchor: end,\n            focus: end\n          };\n        }\n      }\n    }\n\n    if (Range.isExpanded(targetRange) && type.startsWith('delete')) {\n      if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n        var [_start, _end] = Range.edges(targetRange);\n        return storeDiff(targetRange.anchor.path, {\n          text: '',\n          end: _end.offset,\n          start: _start.offset\n        });\n      }\n\n      var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n      return scheduleAction(() => Editor.deleteFragment(editor, {\n        direction\n      }), {\n        at: targetRange\n      });\n    }\n\n    switch (type) {\n      case 'deleteByComposition':\n      case 'deleteByCut':\n      case 'deleteByDrag':\n        {\n          return scheduleAction(() => Editor.deleteFragment(editor), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteContent':\n      case 'deleteContentForward':\n        {\n          var {\n            anchor\n          } = targetRange;\n\n          if (Range.isCollapsed(targetRange)) {\n            var targetNode = Node.leaf(editor, anchor.path);\n\n            if (anchor.offset < targetNode.text.length) {\n              return storeDiff(anchor.path, {\n                text: '',\n                start: anchor.offset,\n                end: anchor.offset + 1\n              });\n            }\n          }\n\n          return scheduleAction(() => Editor.deleteForward(editor), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteContentBackward':\n        {\n          var _nativeTargetRange;\n\n          var {\n            anchor: _anchor\n          } = targetRange; // If we have a mismatch between the native and slate selection being collapsed\n          // we are most likely deleting a zero-width placeholder and thus should perform it\n          // as an action to ensure correct behavior (mostly happens with mark placeholders)\n\n          var nativeCollapsed = isDOMSelection(nativeTargetRange) ? nativeTargetRange.isCollapsed : !!((_nativeTargetRange = nativeTargetRange) !== null && _nativeTargetRange !== void 0 && _nativeTargetRange.collapsed);\n\n          if (nativeCollapsed && Range.isCollapsed(targetRange) && _anchor.offset > 0) {\n            return storeDiff(_anchor.path, {\n              text: '',\n              start: _anchor.offset - 1,\n              end: _anchor.offset\n            });\n          }\n\n          return scheduleAction(() => Editor.deleteBackward(editor), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteEntireSoftLine':\n        {\n          return scheduleAction(() => {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n          }, {\n            at: targetRange\n          });\n        }\n\n      case 'deleteHardLineBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'block'\n          }), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteSoftLineBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'line'\n          }), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteHardLineForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'block'\n          }), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteSoftLineForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'line'\n          }), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteWordBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'word'\n          }), {\n            at: targetRange\n          });\n        }\n\n      case 'deleteWordForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'word'\n          }), {\n            at: targetRange\n          });\n        }\n\n      case 'insertLineBreak':\n        {\n          return scheduleAction(() => Editor.insertSoftBreak(editor), {\n            at: targetRange\n          });\n        }\n\n      case 'insertParagraph':\n        {\n          return scheduleAction(() => Editor.insertBreak(editor), {\n            at: targetRange\n          });\n        }\n\n      case 'insertCompositionText':\n      case 'deleteCompositionText':\n      case 'insertFromComposition':\n      case 'insertFromDrop':\n      case 'insertFromPaste':\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText':\n        {\n          if ((data === null || data === void 0 ? void 0 : data.constructor.name) === 'DataTransfer') {\n            return scheduleAction(() => ReactEditor.insertData(editor, data), {\n              at: targetRange\n            });\n          }\n\n          if (typeof data === 'string' && data.includes('\\n')) {\n            return scheduleAction(() => Editor.insertSoftBreak(editor), {\n              at: Range.end(targetRange)\n            });\n          }\n\n          var text = data !== null && data !== void 0 ? data : ''; // COMPAT: If we are writing inside a placeholder, the ime inserts the text inside\n          // the placeholder itself and thus includes the zero-width space inside edit events.\n\n          if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {\n            text = text.replace('\\uFEFF', '');\n          }\n\n          if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n            var [_start2, _end2] = Range.edges(targetRange);\n            var diff = {\n              start: _start2.offset,\n              end: _end2.offset,\n              text\n            }; // COMPAT: Swiftkey has a weird bug where the target range of the 2nd word\n            // inserted after a mark placeholder is inserted with an anchor offset off by 1.\n            // So writing 'some text' will result in 'some ttext'. Luckily all 'normal' insert\n            // text events are fired with the correct target ranges, only the final 'insertComposition'\n            // isn't, so we can adjust the target range start offset if we are confident this is the\n            // swiftkey insert causing the issue.\n\n            if (text && insertPositionHint && type === 'insertCompositionText') {\n              var hintPosition = insertPositionHint.start + insertPositionHint.text.search(/\\S|$/);\n              var diffPosition = diff.start + diff.text.search(/\\S|$/);\n\n              if (diffPosition === hintPosition + 1 && diff.end === insertPositionHint.start + insertPositionHint.text.length) {\n                diff.start -= 1;\n                insertPositionHint = null;\n                scheduleFlush();\n              } else {\n                insertPositionHint = false;\n              }\n            } else if (type === 'insertText') {\n              if (insertPositionHint === null) {\n                insertPositionHint = diff;\n              } else if (insertPositionHint && Range.isCollapsed(targetRange) && insertPositionHint.end + insertPositionHint.text.length === _start2.offset) {\n                insertPositionHint = _objectSpread$3(_objectSpread$3({}, insertPositionHint), {}, {\n                  text: insertPositionHint.text + text\n                });\n              } else {\n                insertPositionHint = false;\n              }\n            } else {\n              insertPositionHint = false;\n            }\n\n            storeDiff(_start2.path, diff);\n            return;\n          }\n\n          return scheduleAction(() => Editor.insertText(editor, text), {\n            at: targetRange\n          });\n        }\n    }\n  };\n\n  var hasPendingAction = () => {\n    return !!EDITOR_TO_PENDING_ACTION.get(editor);\n  };\n\n  var hasPendingDiffs = () => {\n    var _EDITOR_TO_PENDING_DI5;\n\n    return !!((_EDITOR_TO_PENDING_DI5 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI5 !== void 0 && _EDITOR_TO_PENDING_DI5.length);\n  };\n\n  var hasPendingChanges = () => {\n    return hasPendingAction() || hasPendingDiffs();\n  };\n\n  var isFlushing = () => {\n    return flushing;\n  };\n\n  var handleUserSelect = range => {\n    EDITOR_TO_PENDING_SELECTION.set(editor, range);\n\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n\n    var {\n      selection\n    } = editor;\n\n    if (!range) {\n      return;\n    }\n\n    var pathChanged = !selection || !Path.equals(selection.anchor.path, range.anchor.path);\n    var parentPathChanged = !selection || !Path.equals(selection.anchor.path.slice(0, -1), range.anchor.path.slice(0, -1));\n\n    if (pathChanged && insertPositionHint || parentPathChanged) {\n      insertPositionHint = false;\n    }\n\n    if (pathChanged || !hasPendingDiffs()) {\n      flushTimeoutId = setTimeout(flush, FLUSH_DELAY);\n    }\n  };\n\n  var handleInput = () => {\n    if (hasPendingAction() || !hasPendingDiffs()) {\n      flush();\n    }\n  };\n\n  var handleKeyDown = _ => {\n    // COMPAT: Swiftkey closes the keyboard when typing inside a empty node\n    // directly next to a non-contenteditable element (= the placeholder).\n    // The only event fired soon enough for us to allow hiding the placeholder\n    // without swiftkey picking it up is the keydown event, so we have to hide it\n    // here. See https://github.com/ianstormtaylor/slate/pull/4988#issuecomment-1201050535\n    if (!hasPendingDiffs()) {\n      updatePlaceholderVisibility(true);\n      setTimeout(updatePlaceholderVisibility);\n    }\n  };\n\n  var scheduleFlush = () => {\n    if (!hasPendingAction()) {\n      actionTimeoutId = setTimeout(flush);\n    }\n  };\n\n  var handleDomMutations = mutations => {\n    if (hasPendingDiffs() || hasPendingAction()) {\n      return;\n    }\n\n    if (mutations.some(mutation => isTrackedMutation(editor, mutation, mutations))) {\n      var _EDITOR_TO_FORCE_REND;\n\n      // Cause a re-render to restore the dom state if we encounter tracked mutations without\n      // a corresponding pending action.\n      (_EDITOR_TO_FORCE_REND = EDITOR_TO_FORCE_RENDER.get(editor)) === null || _EDITOR_TO_FORCE_REND === void 0 ? void 0 : _EDITOR_TO_FORCE_REND();\n    }\n  };\n\n  return {\n    flush,\n    scheduleFlush,\n    hasPendingDiffs,\n    hasPendingAction,\n    hasPendingChanges,\n    isFlushing,\n    handleUserSelect,\n    handleCompositionEnd,\n    handleCompositionStart,\n    handleDOMBeforeInput,\n    handleKeyDown,\n    handleDomMutations,\n    handleInput\n  };\n}\n\nfunction useIsMounted() {\n  var isMountedRef = useRef(false);\n  useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef.current;\n}\n\nfunction useMutationObserver(node, callback, options) {\n  var [mutationObserver] = useState(() => new MutationObserver(callback));\n  useIsomorphicLayoutEffect(() => {\n    // Discard mutations caused during render phase. This works due to react calling\n    // useLayoutEffect synchronously after the render phase before the next tick.\n    mutationObserver.takeRecords();\n  });\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    }\n\n    mutationObserver.observe(node.current, options);\n    return () => mutationObserver.disconnect();\n  }, []);\n}\n\nvar _excluded$2 = [\"node\"];\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar MUTATION_OBSERVER_CONFIG = {\n  subtree: true,\n  childList: true,\n  characterData: true\n};\nfunction useAndroidInputManager(_ref) {\n  var {\n    node\n  } = _ref,\n      options = _objectWithoutProperties(_ref, _excluded$2);\n\n  if (!IS_ANDROID) {\n    return null;\n  }\n\n  var editor = useSlateStatic();\n  var isMounted = useIsMounted();\n  var [inputManager] = useState(() => createAndroidInputManager(_objectSpread$2({\n    editor\n  }, options)));\n  useMutationObserver(node, inputManager.handleDomMutations, MUTATION_OBSERVER_CONFIG);\n  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush);\n\n  if (isMounted) {\n    inputManager.flush();\n  }\n\n  return inputManager;\n}\n\nfunction useTrackUserInput() {\n  var editor = useSlateStatic();\n  var receivedUserInput = useRef(false);\n  var animationFrameIdRef = useRef(0);\n  var onUserInput = useCallback(() => {\n    if (receivedUserInput.current) {\n      return;\n    }\n\n    receivedUserInput.current = true;\n    var window = ReactEditor.getWindow(editor);\n    window.cancelAnimationFrame(animationFrameIdRef.current);\n    animationFrameIdRef.current = window.requestAnimationFrame(() => {\n      receivedUserInput.current = false;\n    });\n  }, []);\n  useEffect(() => () => cancelAnimationFrame(animationFrameIdRef.current), []);\n  return {\n    receivedUserInput,\n    onUserInput\n  };\n}\n\nvar _excluded$1 = [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderPlaceholder\", \"scrollSelectionIntoView\", \"style\", \"as\", \"disableDefaultStyles\"],\n    _excluded2 = [\"text\"];\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Children = props => /*#__PURE__*/React.createElement(React.Fragment, null, useChildren(props));\n/**\r\n * Editable.\r\n */\n\n\nvar Editable = props => {\n  var _EDITOR_TO_PLACEHOLDE, _EDITOR_TO_PLACEHOLDE2;\n\n  var {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    renderPlaceholder = props => /*#__PURE__*/React.createElement(DefaultPlaceholder, Object.assign({}, props)),\n    scrollSelectionIntoView = defaultScrollSelectionIntoView,\n    style: userStyle = {},\n    as: Component = 'div',\n    disableDefaultStyles = false\n  } = props,\n      attributes = _objectWithoutProperties(props, _excluded$1);\n\n  var editor = useSlate(); // Rerender editor when composition status changed\n\n  var [isComposing, setIsComposing] = useState(false);\n  var ref = useRef(null);\n  var deferredOperations = useRef([]);\n  var {\n    onUserInput,\n    receivedUserInput\n  } = useTrackUserInput();\n  var [, forceRender] = useReducer(s => s + 1, 0);\n  EDITOR_TO_FORCE_RENDER.set(editor, forceRender); // Update internal state on each render.\n\n  IS_READ_ONLY.set(editor, readOnly); // Keep track of some state for the event handler logic.\n\n  var state = useMemo(() => ({\n    isDraggingInternally: false,\n    isUpdatingSelection: false,\n    latestElement: null,\n    hasMarkPlaceholder: false\n  }), []); // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]); // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n\n  var onDOMSelectionChange = useCallback(throttle(() => {\n    if ((IS_ANDROID || !ReactEditor.isComposing(editor)) && (!state.isUpdatingSelection || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing()) && !state.isDraggingInternally) {\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var {\n        activeElement\n      } = root;\n      var el = ReactEditor.toDOMNode(editor, editor);\n      var domSelection = root.getSelection();\n\n      if (activeElement === el) {\n        state.latestElement = activeElement;\n        IS_FOCUSED.set(editor, true);\n      } else {\n        IS_FOCUSED.delete(editor);\n      }\n\n      if (!domSelection) {\n        return Transforms.deselect(editor);\n      }\n\n      var {\n        anchorNode,\n        focusNode\n      } = domSelection;\n      var anchorNodeSelectable = ReactEditor.hasEditableTarget(editor, anchorNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode);\n      var focusNodeSelectable = ReactEditor.hasEditableTarget(editor, focusNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, focusNode);\n\n      if (anchorNodeSelectable && focusNodeSelectable) {\n        var range = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true\n        });\n\n        if (range) {\n          if (!ReactEditor.isComposing(editor) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingChanges()) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing())) {\n            Transforms.select(editor, range);\n          } else {\n            androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleUserSelect(range);\n          }\n        }\n      } // Deselect the editor if the dom selection is not selectable in readonly mode\n\n\n      if (readOnly && (!anchorNodeSelectable || !focusNodeSelectable)) {\n        Transforms.deselect(editor);\n      }\n    }\n  }, 100), [readOnly]);\n  var scheduleOnDOMSelectionChange = useMemo(() => debounce(onDOMSelectionChange, 0), [onDOMSelectionChange]);\n  var androidInputManager = useAndroidInputManager({\n    node: ref,\n    onDOMSelectionChange,\n    scheduleOnDOMSelectionChange\n  });\n  useIsomorphicLayoutEffect(() => {\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n    } // Make sure the DOM selection state is in sync.\n\n\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n\n    if (!domSelection || !ReactEditor.isFocused(editor) || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingAction()) {\n      return;\n    }\n\n    var setDomSelection = forceChange => {\n      var hasDomSelection = domSelection.type !== 'None'; // If the DOM selection is properly unset, we're done.\n\n      if (!selection && !hasDomSelection) {\n        return;\n      } // verify that the dom selection is in the editor\n\n\n      var editorElement = EDITOR_TO_ELEMENT.get(editor);\n      var hasDomSelectionInEditor = false;\n\n      if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {\n        hasDomSelectionInEditor = true;\n      } // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n\n\n      if (hasDomSelection && hasDomSelectionInEditor && selection && !forceChange) {\n        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true,\n          // domSelection is not necessarily a valid Slate range\n          // (e.g. when clicking on contentEditable:false element)\n          suppressThrow: true\n        });\n\n        if (slateRange && Range.equals(slateRange, selection)) {\n          var _anchorNode$parentEle;\n\n          if (!state.hasMarkPlaceholder) {\n            return;\n          } // Ensure selection is inside the mark placeholder\n\n\n          var {\n            anchorNode\n          } = domSelection;\n\n          if (anchorNode !== null && anchorNode !== void 0 && (_anchorNode$parentEle = anchorNode.parentElement) !== null && _anchorNode$parentEle !== void 0 && _anchorNode$parentEle.hasAttribute('data-slate-mark-placeholder')) {\n            return;\n          }\n        }\n      } // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n\n\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true\n        });\n        return;\n      } // Otherwise the DOM selection is out of sync, so update it.\n\n\n      state.isUpdatingSelection = true;\n      var newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n\n      if (newDomRange) {\n        if (Range.isBackward(selection)) {\n          domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n        } else {\n          domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n        }\n\n        scrollSelectionIntoView(editor, newDomRange);\n      } else {\n        domSelection.removeAllRanges();\n      }\n\n      return newDomRange;\n    };\n\n    var newDomRange = setDomSelection();\n    var ensureSelection = (androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.isFlushing()) === 'action';\n\n    if (!IS_ANDROID || !ensureSelection) {\n      setTimeout(() => {\n        // COMPAT: In Firefox, it's not enough to create a range, you also need\n        // to focus the contenteditable element too. (2016/11/16)\n        if (newDomRange && IS_FIREFOX) {\n          var el = ReactEditor.toDOMNode(editor, editor);\n          el.focus();\n        }\n\n        state.isUpdatingSelection = false;\n      });\n      return;\n    }\n\n    var timeoutId = null;\n    var animationFrameId = requestAnimationFrame(() => {\n      if (ensureSelection) {\n        var ensureDomSelection = forceChange => {\n          try {\n            var el = ReactEditor.toDOMNode(editor, editor);\n            el.focus();\n            setDomSelection(forceChange);\n          } catch (e) {// Ignore, dom and state might be out of sync\n          }\n        }; // Compat: Android IMEs try to force their selection by manually re-applying it even after we set it.\n        // This essentially would make setting the slate selection during an update meaningless, so we force it\n        // again here. We can't only do it in the setTimeout after the animation frame since that would cause a\n        // visible flicker.\n\n\n        ensureDomSelection();\n        timeoutId = setTimeout(() => {\n          // COMPAT: While setting the selection in an animation frame visually correctly sets the selection,\n          // it doesn't update GBoards spellchecker state. We have to manually trigger a selection change after\n          // the animation frame to ensure it displays the correct state.\n          ensureDomSelection(true);\n          state.isUpdatingSelection = false;\n        });\n      }\n    });\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }); // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n\n  var onDOMBeforeInput = useCallback(event => {\n    onUserInput();\n\n    if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      var _EDITOR_TO_USER_SELEC;\n\n      // COMPAT: BeforeInput events aren't cancelable on android, so we have to handle them differently using the android input manager.\n      if (androidInputManager) {\n        return androidInputManager.handleDOMBeforeInput(event);\n      } // Some IMEs/Chrome extensions like e.g. Grammarly set the selection immediately before\n      // triggering a `beforeinput` expecting the change to be applied to the immediately before\n      // set selection.\n\n\n      scheduleOnDOMSelectionChange.flush();\n      onDOMSelectionChange.flush();\n      var {\n        selection\n      } = editor;\n      var {\n        inputType: type\n      } = event;\n      var data = event.dataTransfer || event.data || undefined;\n      var isCompositionChange = type === 'insertCompositionText' || type === 'deleteCompositionText'; // COMPAT: use composition change events as a hint to where we should insert\n      // composition text if we aren't composing to work around https://github.com/ianstormtaylor/slate/issues/5038\n\n      if (isCompositionChange && ReactEditor.isComposing(editor)) {\n        return;\n      }\n\n      var native = false;\n\n      if (type === 'insertText' && selection && Range.isCollapsed(selection) && // Only use native character insertion for single characters a-z or space for now.\n      // Long-press events (hold a + press 4 = ) to choose a special character otherwise\n      // causes duplicate inserts.\n      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) && // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405\n      // When there is an inline element, e.g. a link, and you select\n      // right after it (the start of the next node).\n      selection.anchor.offset !== 0) {\n        var _node$parentElement, _window$getComputedSt;\n\n        native = true; // Skip native if there are marks, as\n        // `insertText` will insert a node, not just text.\n\n        if (editor.marks) {\n          native = false;\n        } // Chrome also has issues correctly editing the end of anchor elements: https://bugs.chromium.org/p/chromium/issues/detail?id=1259100\n        // Therefore we don't allow native events to insert text at the end of anchor nodes.\n\n\n        var {\n          anchor\n        } = selection;\n        var [node, offset] = ReactEditor.toDOMPoint(editor, anchor);\n        var anchorNode = (_node$parentElement = node.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.closest('a');\n        var window = ReactEditor.getWindow(editor);\n\n        if (native && anchorNode && ReactEditor.hasDOMNode(editor, anchorNode)) {\n          var _lastText$textContent;\n\n          // Find the last text node inside the anchor.\n          var lastText = window === null || window === void 0 ? void 0 : window.document.createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT).lastChild();\n\n          if (lastText === node && ((_lastText$textContent = lastText.textContent) === null || _lastText$textContent === void 0 ? void 0 : _lastText$textContent.length) === offset) {\n            native = false;\n          }\n        } // Chrome has issues with the presence of tab characters inside elements with whiteSpace = 'pre'\n        // causing abnormal insert behavior: https://bugs.chromium.org/p/chromium/issues/detail?id=1219139\n\n\n        if (native && node.parentElement && (window === null || window === void 0 ? void 0 : (_window$getComputedSt = window.getComputedStyle(node.parentElement)) === null || _window$getComputedSt === void 0 ? void 0 : _window$getComputedSt.whiteSpace) === 'pre') {\n          var block = Editor.above(editor, {\n            at: anchor.path,\n            match: n => Element$1.isElement(n) && Editor.isBlock(editor, n)\n          });\n\n          if (block && Node.string(block[0]).includes('\\t')) {\n            native = false;\n          }\n        }\n      } // COMPAT: For the deleting forward/backward input types we don't want\n      // to change the selection because it is the range that will be deleted,\n      // and those commands determine that for themselves.\n\n\n      if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n        var [targetRange] = event.getTargetRanges();\n\n        if (targetRange) {\n          var range = ReactEditor.toSlateRange(editor, targetRange, {\n            exactMatch: false,\n            suppressThrow: false\n          });\n\n          if (!selection || !Range.equals(selection, range)) {\n            native = false;\n            var selectionRef = !isCompositionChange && editor.selection && Editor.rangeRef(editor, editor.selection);\n            Transforms.select(editor, range);\n\n            if (selectionRef) {\n              EDITOR_TO_USER_SELECTION.set(editor, selectionRef);\n            }\n          }\n        }\n      } // Composition change types occur while a user is composing text and can't be\n      // cancelled. Let them through and wait for the composition to end.\n\n\n      if (isCompositionChange) {\n        return;\n      }\n\n      if (!native) {\n        event.preventDefault();\n      } // COMPAT: If the selection is expanded, even if the command seems like\n      // a delete forward/backward command it should delete the selection.\n\n\n      if (selection && Range.isExpanded(selection) && type.startsWith('delete')) {\n        var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n        Editor.deleteFragment(editor, {\n          direction\n        });\n        return;\n      }\n\n      switch (type) {\n        case 'deleteByComposition':\n        case 'deleteByCut':\n        case 'deleteByDrag':\n          {\n            Editor.deleteFragment(editor);\n            break;\n          }\n\n        case 'deleteContent':\n        case 'deleteContentForward':\n          {\n            Editor.deleteForward(editor);\n            break;\n          }\n\n        case 'deleteContentBackward':\n          {\n            Editor.deleteBackward(editor);\n            break;\n          }\n\n        case 'deleteEntireSoftLine':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteHardLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n\n        case 'deleteSoftLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteHardLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n\n        case 'deleteSoftLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteWordBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n\n        case 'deleteWordForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n\n        case 'insertLineBreak':\n          Editor.insertSoftBreak(editor);\n          break;\n\n        case 'insertParagraph':\n          {\n            Editor.insertBreak(editor);\n            break;\n          }\n\n        case 'insertFromComposition':\n        case 'insertFromDrop':\n        case 'insertFromPaste':\n        case 'insertFromYank':\n        case 'insertReplacementText':\n        case 'insertText':\n          {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              if (ReactEditor.isComposing(editor)) {\n                setIsComposing(false);\n                IS_COMPOSING.set(editor, false);\n              }\n            } // use a weak comparison instead of 'instanceof' to allow\n            // programmatic access of paste events coming from external windows\n            // like cypress where cy.window does not work realibly\n\n\n            if ((data === null || data === void 0 ? void 0 : data.constructor.name) === 'DataTransfer') {\n              ReactEditor.insertData(editor, data);\n            } else if (typeof data === 'string') {\n              // Only insertText operations use the native functionality, for now.\n              // Potentially expand to single character deletes, as well.\n              if (native) {\n                deferredOperations.current.push(() => Editor.insertText(editor, data));\n              } else {\n                Editor.insertText(editor, data);\n              }\n            }\n\n            break;\n          }\n      } // Restore the actual user section if nothing manually set it.\n\n\n      var toRestore = (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(editor)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();\n      EDITOR_TO_USER_SELECTION.delete(editor);\n\n      if (toRestore && (!editor.selection || !Range.equals(editor.selection, toRestore))) {\n        Transforms.select(editor, toRestore);\n      }\n    }\n  }, [readOnly, propsOnDOMBeforeInput]); // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  // https://github.com/facebook/react/issues/11211\n\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n      // @ts-ignore The `beforeinput` event isn't recognized.\n      ref.current.addEventListener('beforeinput', onDOMBeforeInput);\n    }\n\n    return () => {\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput);\n      }\n    };\n  }, [onDOMBeforeInput]); // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n\n  useIsomorphicLayoutEffect(() => {\n    var window = ReactEditor.getWindow(editor);\n    window.document.addEventListener('selectionchange', scheduleOnDOMSelectionChange);\n    return () => {\n      window.document.removeEventListener('selectionchange', scheduleOnDOMSelectionChange);\n    };\n  }, [scheduleOnDOMSelectionChange]);\n  var decorations = decorate([editor, []]);\n\n  if (placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === '' && !isComposing) {\n    var start = Editor.start(editor, []);\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start\n    });\n  }\n\n  var {\n    marks\n  } = editor;\n  state.hasMarkPlaceholder = false;\n\n  if (editor.selection && Range.isCollapsed(editor.selection) && marks) {\n    var {\n      anchor\n    } = editor.selection;\n    var leaf = Node.leaf(editor, anchor.path);\n\n    var rest = _objectWithoutProperties(leaf, _excluded2); // While marks isn't a 'complete' text, we can still use loose Text.equals\n    // here which only compares marks anyway.\n\n\n    if (!Text$1.equals(leaf, marks, {\n      loose: true\n    })) {\n      state.hasMarkPlaceholder = true;\n      var unset = Object.fromEntries(Object.keys(rest).map(mark => [mark, null]));\n      decorations.push(_objectSpread$1(_objectSpread$1(_objectSpread$1({\n        [MARK_PLACEHOLDER_SYMBOL]: true\n      }, unset), marks), {}, {\n        anchor,\n        focus: anchor\n      }));\n    }\n  } // Update EDITOR_TO_MARK_PLACEHOLDER_MARKS in setTimeout useEffect to ensure we don't set it\n  // before we receive the composition end event.\n\n\n  useEffect(() => {\n    setTimeout(() => {\n      var {\n        selection\n      } = editor;\n\n      if (selection) {\n        var {\n          anchor: _anchor\n        } = selection;\n\n        var _text = Node.leaf(editor, _anchor.path); // While marks isn't a 'complete' text, we can still use loose Text.equals\n        // here which only compares marks anyway.\n\n\n        if (marks && !Text$1.equals(_text, marks, {\n          loose: true\n        })) {\n          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks);\n          return;\n        }\n      }\n\n      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n    });\n  });\n  var placeholderHeight = (_EDITOR_TO_PLACEHOLDE = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor)) === null || _EDITOR_TO_PLACEHOLDE === void 0 ? void 0 : (_EDITOR_TO_PLACEHOLDE2 = _EDITOR_TO_PLACEHOLDE.getBoundingClientRect()) === null || _EDITOR_TO_PLACEHOLDE2 === void 0 ? void 0 : _EDITOR_TO_PLACEHOLDE2.height;\n  return /*#__PURE__*/React.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/React.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/React.createElement(RestoreDOM, {\n    node: ref,\n    receivedUserInput: receivedUserInput\n  }, /*#__PURE__*/React.createElement(Component, Object.assign({\n    role: readOnly ? undefined : 'textbox',\n    \"aria-multiline\": readOnly ? undefined : true\n  }, attributes, {\n    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n    // have to use hacks to make these replacement-based features work.\n    // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop\n    // mismatch warning app moves to browser. Pass-through consumer props when\n    // not CAN_USE_DOM (SSR) and default to falsy value\n    spellCheck: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.spellCheck : false,\n    autoCorrect: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCorrect : 'false',\n    autoCapitalize: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCapitalize : 'false',\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    // explicitly set this\n    contentEditable: !readOnly,\n    // in some cases, a decoration needs access to the range / selection to decorate a text node,\n    // then you will select the whole text node when you select part the of text\n    // this magic zIndex=\"-1\" will fix it\n    zindex: -1,\n    suppressContentEditableWarning: true,\n    ref: ref,\n    style: _objectSpread$1(_objectSpread$1({}, disableDefaultStyles ? {} : _objectSpread$1({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Prevent the default outline styles.\n      outline: 'none',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, placeholderHeight ? {\n      minHeight: placeholderHeight\n    } : {})), userStyle),\n    onBeforeInput: useCallback(event => {\n      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n      // fall back to React's leaky polyfill instead just for it. It\n      // only works for the `insertText` input type.\n      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && ReactEditor.hasSelectableTarget(editor, event.target)) {\n        event.preventDefault();\n\n        if (!ReactEditor.isComposing(editor)) {\n          var _text2 = event.data;\n          Editor.insertText(editor, _text2);\n        }\n      }\n    }, [readOnly]),\n    onInput: useCallback(event => {\n      if (androidInputManager) {\n        androidInputManager.handleInput();\n        return;\n      } // Flush native operations, as native events will have propogated\n      // and we can correctly compare DOM text values in components\n      // to stop rendering, so that browser functions like autocorrect\n      // and spellcheck work as expected.\n\n\n      for (var op of deferredOperations.current) {\n        op();\n      }\n\n      deferredOperations.current = [];\n    }, []),\n    onBlur: useCallback(event => {\n      if (readOnly || state.isUpdatingSelection || !ReactEditor.hasSelectableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      } // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n\n\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n\n      var {\n        relatedTarget\n      } = event;\n      var el = ReactEditor.toDOMNode(editor, editor); // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n\n      if (relatedTarget === el) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n\n\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n\n\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n\n        if (Element$1.isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      } // COMPAT: Safari doesn't always remove the selection even if the content-\n      // editable element no longer has focus. Refer to:\n      // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n\n\n      if (IS_SAFARI) {\n        var domSelection = root.getSelection();\n        domSelection === null || domSelection === void 0 ? void 0 : domSelection.removeAllRanges();\n      }\n\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, attributes.onBlur]),\n    onClick: useCallback(event => {\n      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node); // At this time, the Slate document may be arbitrarily different,\n        // because onClick handlers can change the document before we get here.\n        // Therefore we must check that this path actually exists,\n        // and that it still refers to the same node.\n\n        if (!Editor.hasPath(editor, path) || Node.get(editor, path) !== node) {\n          return;\n        }\n\n        if (event.detail === TRIPLE_CLICK && path.length >= 1) {\n          var blockPath = path;\n\n          if (!(Element$1.isElement(node) && Editor.isBlock(editor, node))) {\n            var _block$;\n\n            var block = Editor.above(editor, {\n              match: n => Element$1.isElement(n) && Editor.isBlock(editor, n),\n              at: path\n            });\n            blockPath = (_block$ = block === null || block === void 0 ? void 0 : block[1]) !== null && _block$ !== void 0 ? _block$ : path.slice(0, 1);\n          }\n\n          var range = Editor.range(editor, blockPath);\n          Transforms.select(editor, range);\n          return;\n        }\n\n        if (readOnly) {\n          return;\n        }\n\n        var _start = Editor.start(editor, path);\n\n        var end = Editor.end(editor, path);\n        var startVoid = Editor.void(editor, {\n          at: _start\n        });\n        var endVoid = Editor.void(editor, {\n          at: end\n        });\n\n        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {\n          var _range = Editor.range(editor, _start);\n\n          Transforms.select(editor, _range);\n        }\n      }\n    }, [readOnly, attributes.onClick]),\n    onCompositionEnd: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n        if (ReactEditor.isComposing(editor)) {\n          setIsComposing(false);\n          IS_COMPOSING.set(editor, false);\n        }\n\n        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionEnd(event);\n\n        if (isEventHandled(event, attributes.onCompositionEnd) || IS_ANDROID) {\n          return;\n        } // COMPAT: In Chrome, `beforeinput` events for compositions\n        // aren't correct and never fire the \"insertFromComposition\"\n        // type that we need. So instead, insert whenever a composition\n        // ends since it will already have been committed to the DOM.\n\n\n        if (!IS_SAFARI && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_WECHATBROWSER && !IS_UC_MOBILE && event.data) {\n          var placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);\n          EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor); // Ensure we insert text with the marks the user was actually seeing\n\n          if (placeholderMarks !== undefined) {\n            EDITOR_TO_USER_MARKS.set(editor, editor.marks);\n            editor.marks = placeholderMarks;\n          }\n\n          Editor.insertText(editor, event.data);\n          var userMarks = EDITOR_TO_USER_MARKS.get(editor);\n          EDITOR_TO_USER_MARKS.delete(editor);\n\n          if (userMarks !== undefined) {\n            editor.marks = userMarks;\n          }\n        }\n      }\n    }, [attributes.onCompositionEnd]),\n    onCompositionUpdate: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {\n        if (!ReactEditor.isComposing(editor)) {\n          setIsComposing(true);\n          IS_COMPOSING.set(editor, true);\n        }\n      }\n    }, [attributes.onCompositionUpdate]),\n    onCompositionStart: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleCompositionStart(event);\n\n        if (isEventHandled(event, attributes.onCompositionStart) || IS_ANDROID) {\n          return;\n        }\n\n        setIsComposing(true);\n        var {\n          selection\n        } = editor;\n\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n            return;\n          }\n\n          var inline = Editor.above(editor, {\n            match: n => Element$1.isElement(n) && Editor.isInline(editor, n),\n            mode: 'highest'\n          });\n\n          if (inline) {\n            var [, inlinePath] = inline;\n\n            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n              var point = Editor.after(editor, inlinePath);\n              Transforms.setSelection(editor, {\n                anchor: point,\n                focus: point\n              });\n            }\n          }\n        }\n      }\n    }, [attributes.onCompositionStart]),\n    onCopy: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData, 'copy');\n      }\n    }, [attributes.onCopy]),\n    onCut: useCallback(event => {\n      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData, 'cut');\n        var {\n          selection\n        } = editor;\n\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n          } else {\n            var node = Node.parent(editor, selection.anchor.path);\n\n            if (Editor.isVoid(editor, node)) {\n              Transforms.delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onCut]),\n    onDragOver: useCallback(event => {\n      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {\n        // Only when the target is void, call `preventDefault` to signal\n        // that drops are allowed. Editable content is droppable by\n        // default, and calling `preventDefault` hides the cursor.\n        var node = ReactEditor.toSlateNode(editor, event.target);\n\n        if (Element$1.isElement(node) && Editor.isVoid(editor, node)) {\n          event.preventDefault();\n        }\n      }\n    }, [attributes.onDragOver]),\n    onDragStart: useCallback(event => {\n      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        var voidMatch = Element$1.isElement(node) && Editor.isVoid(editor, node) || Editor.void(editor, {\n          at: path,\n          voids: true\n        }); // If starting a drag on a void node, make sure it is selected\n        // so that it shows up in the selection's fragment.\n\n        if (voidMatch) {\n          var range = Editor.range(editor, path);\n          Transforms.select(editor, range);\n        }\n\n        state.isDraggingInternally = true;\n        ReactEditor.setFragmentData(editor, event.dataTransfer, 'drag');\n      }\n    }, [readOnly, attributes.onDragStart]),\n    onDrop: useCallback(event => {\n      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {\n        event.preventDefault(); // Keep a reference to the dragged range before updating selection\n\n        var draggedRange = editor.selection; // Find the range where the drop happened\n\n        var range = ReactEditor.findEventRange(editor, event);\n        var data = event.dataTransfer;\n        Transforms.select(editor, range);\n\n        if (state.isDraggingInternally) {\n          if (draggedRange && !Range.equals(draggedRange, range) && !Editor.void(editor, {\n            at: range,\n            voids: true\n          })) {\n            Transforms.delete(editor, {\n              at: draggedRange\n            });\n          }\n        }\n\n        ReactEditor.insertData(editor, data); // When dragging from another source into the editor, it's possible\n        // that the current editor does not have focus.\n\n        if (!ReactEditor.isFocused(editor)) {\n          ReactEditor.focus(editor);\n        }\n      }\n\n      state.isDraggingInternally = false;\n    }, [readOnly, attributes.onDrop]),\n    onDragEnd: useCallback(event => {\n      if (!readOnly && state.isDraggingInternally && attributes.onDragEnd && ReactEditor.hasTarget(editor, event.target)) {\n        attributes.onDragEnd(event);\n      } // When dropping on a different droppable element than the current editor,\n      // `onDrop` is not called. So we need to clean up in `onDragEnd` instead.\n      // Note: `onDragEnd` is only called when `onDrop` is not called\n\n\n      state.isDraggingInternally = false;\n    }, [readOnly, attributes.onDragEnd]),\n    onFocus: useCallback(event => {\n      if (!readOnly && !state.isUpdatingSelection && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement; // COMPAT: If the editor has nested editable elements, the focus\n        // can go to them. In Firefox, this must be prevented because it\n        // results in issues with keyboard navigation. (2017/03/30)\n\n        if (IS_FIREFOX && event.target !== el) {\n          el.focus();\n          return;\n        }\n\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, attributes.onFocus]),\n    onKeyDown: useCallback(event => {\n      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target)) {\n        androidInputManager === null || androidInputManager === void 0 ? void 0 : androidInputManager.handleKeyDown(event);\n        var {\n          nativeEvent\n        } = event; // COMPAT: The composition end event isn't fired reliably in all browsers,\n        // so we sometimes might end up stuck in a composition state even though we\n        // aren't composing any more.\n\n        if (ReactEditor.isComposing(editor) && nativeEvent.isComposing === false) {\n          IS_COMPOSING.set(editor, false);\n          setIsComposing(false);\n        }\n\n        if (isEventHandled(event, attributes.onKeyDown) || ReactEditor.isComposing(editor)) {\n          return;\n        }\n\n        var {\n          selection\n        } = editor;\n        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];\n        var isRTL = getDirection(Node.string(element)) === 'rtl'; // COMPAT: Since we prevent the default behavior on\n        // `beforeinput` events, the browser doesn't think there's ever\n        // any history stack to undo or redo, so we have to manage these\n        // hotkeys ourselves. (2019/11/06)\n\n        if (Hotkeys.isRedo(nativeEvent)) {\n          event.preventDefault();\n          var maybeHistoryEditor = editor;\n\n          if (typeof maybeHistoryEditor.redo === 'function') {\n            maybeHistoryEditor.redo();\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isUndo(nativeEvent)) {\n          event.preventDefault();\n          var _maybeHistoryEditor = editor;\n\n          if (typeof _maybeHistoryEditor.undo === 'function') {\n            _maybeHistoryEditor.undo();\n          }\n\n          return;\n        } // COMPAT: Certain browsers don't handle the selection updates\n        // properly. In Chrome, the selection isn't properly extended.\n        // And in Firefox, the selection isn't properly collapsed.\n        // (2017/10/17)\n\n\n        if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            reverse: true\n          });\n          return;\n        }\n\n        if (Hotkeys.isMoveLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line'\n          });\n          return;\n        }\n\n        if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus',\n            reverse: true\n          });\n          return;\n        }\n\n        if (Hotkeys.isExtendLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus'\n          });\n          return;\n        } // COMPAT: If a void node is selected, or a zero-width text node\n        // adjacent to an inline is selected, we need to handle these\n        // hotkeys manually because browsers won't be able to skip over\n        // the void node with the zero-width space not being an empty\n        // string.\n\n\n        if (Hotkeys.isMoveBackward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: !isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: 'start'\n            });\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isMoveForward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: 'end'\n            });\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: !isRTL\n          });\n          return;\n        }\n\n        if (Hotkeys.isMoveWordForward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: isRTL\n          });\n          return;\n        } // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to guessing at the input intention for hotkeys.\n        // COMPAT: In iOS, some of these hotkeys are handled in the\n\n\n        if (!HAS_BEFORE_INPUT_SUPPORT) {\n          // We don't have a core behavior for these, but they change the\n          // DOM if we don't prevent them, so we have to.\n          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {\n            event.preventDefault();\n            return;\n          }\n\n          if (Hotkeys.isSoftBreak(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertSoftBreak(editor);\n            return;\n          }\n\n          if (Hotkeys.isSplitBlock(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertBreak(editor);\n            return;\n          }\n\n          if (Hotkeys.isDeleteBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor);\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor);\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'line'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'line'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'word'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'word'\n              });\n            }\n\n            return;\n          }\n        } else {\n          if (IS_CHROME || IS_SAFARI) {\n            // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n            // an event when deleting backwards in a selected void inline node\n            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {\n              var currentNode = Node.parent(editor, selection.anchor.path);\n\n              if (Element$1.isElement(currentNode) && Editor.isVoid(editor, currentNode) && (Editor.isInline(editor, currentNode) || Editor.isBlock(editor, currentNode))) {\n                event.preventDefault();\n                Editor.deleteBackward(editor, {\n                  unit: 'block'\n                });\n                return;\n              }\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onKeyDown]),\n    onPaste: useCallback(event => {\n      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to React's `onPaste` here instead.\n        // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n        // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent)) {\n          event.preventDefault();\n          ReactEditor.insertData(editor, event.clipboardData);\n        }\n      }\n    }, [readOnly, attributes.onPaste])\n  }), /*#__PURE__*/React.createElement(Children, {\n    decorations: decorations,\n    node: editor,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    selection: editor.selection\n  })))));\n};\n/**\r\n * The default placeholder element\r\n */\n\nvar DefaultPlaceholder = _ref => {\n  var {\n    attributes,\n    children\n  } = _ref;\n  return (\n    /*#__PURE__*/\n    // COMPAT: Artificially add a line-break to the end on the placeholder element\n    // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter\n    React.createElement(\"span\", Object.assign({}, attributes), children, IS_ANDROID && /*#__PURE__*/React.createElement(\"br\", null))\n  );\n};\n/**\r\n * A default memoized decorate function.\r\n */\n\nvar defaultDecorate = () => [];\n/**\r\n * A default implement to scroll dom range into view.\r\n */\n\nvar defaultScrollSelectionIntoView = (editor, domRange) => {\n  // This was affecting the selection of multiple blocks and dragging behavior,\n  // so enabled only if the selection has been collapsed.\n  if (domRange.getBoundingClientRect && (!editor.selection || editor.selection && Range.isCollapsed(editor.selection))) {\n    var leafEl = domRange.startContainer.parentElement;\n    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);\n    scrollIntoView(leafEl, {\n      scrollMode: 'if-needed'\n    }); // @ts-expect-error an unorthodox delete D:\n\n    delete leafEl.getBoundingClientRect;\n  }\n};\n/**\r\n * Check if an event is overrided by a handler.\r\n */\n\n\nvar isEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  } // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n\n\n  var shouldTreatEventAsHandled = handler(event);\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n\n  return event.isDefaultPrevented() || event.isPropagationStopped();\n};\n/**\r\n * Check if a DOM event is overrided by a handler.\r\n */\n\nvar isDOMEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  } // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n\n\n  var shouldTreatEventAsHandled = handler(event);\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n\n  return event.defaultPrevented;\n};\n\n/**\r\n * A React context for sharing the `focused` state of the editor.\r\n */\n\nvar FocusedContext = /*#__PURE__*/createContext(false);\n/**\r\n * Get the current `focused` state of the editor.\r\n */\n\nvar useFocused = () => {\n  return useContext(FocusedContext);\n};\n\nfunction isError(error) {\n  return error instanceof Error;\n}\n/**\r\n * A React context for sharing the editor selector context in a way to control rerenders\r\n */\n\n\nvar SlateSelectorContext = /*#__PURE__*/createContext({});\n\nvar refEquality = (a, b) => a === b;\n/**\r\n * use redux style selectors to prevent rerendering on every keystroke.\r\n * Bear in mind rerendering can only prevented if the returned value is a value type or for reference types (e.g. objects and arrays) add a custom equality function.\r\n *\r\n * Example:\r\n * ```\r\n *  const isSelectionActive = useSlateSelector(editor => Boolean(editor.selection));\r\n * ```\r\n */\n\n\nfunction useSlateSelector(selector) {\n  var equalityFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : refEquality;\n  var [, forceRender] = useReducer(s => s + 1, 0);\n  var context = useContext(SlateSelectorContext);\n\n  if (!context) {\n    throw new Error(\"The `useSlateSelector` hook must be used inside the <Slate> component's context.\");\n  }\n\n  var {\n    getSlate,\n    addEventListener\n  } = context;\n  var latestSubscriptionCallbackError = useRef();\n  var latestSelector = useRef(() => null);\n  var latestSelectedState = useRef(null);\n  var selectedState;\n\n  try {\n    if (selector !== latestSelector.current || latestSubscriptionCallbackError.current) {\n      selectedState = selector(getSlate());\n    } else {\n      selectedState = latestSelectedState.current;\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current && isError(err)) {\n      err.message += \"\\nThe error may be correlated with this previous error:\\n\".concat(latestSubscriptionCallbackError.current.stack, \"\\n\\n\");\n    }\n\n    throw err;\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    latestSelector.current = selector;\n    latestSelectedState.current = selectedState;\n    latestSubscriptionCallbackError.current = undefined;\n  });\n  useIsomorphicLayoutEffect(() => {\n    function checkForUpdates() {\n      try {\n        var newSelectedState = latestSelector.current(getSlate());\n\n        if (equalityFn(newSelectedState, latestSelectedState.current)) {\n          return;\n        }\n\n        latestSelectedState.current = newSelectedState;\n      } catch (err) {\n        // we ignore all errors here, since when the component\n        // is re-rendered, the selectors are called again, and\n        // will throw again, if neither props nor store state\n        // changed\n        latestSubscriptionCallbackError.current = err;\n      }\n\n      forceRender();\n    }\n\n    var unsubscribe = addEventListener(checkForUpdates);\n    checkForUpdates();\n    return () => unsubscribe();\n  }, // don't rerender on equalityFn change since we want to be able to define it inline\n  [addEventListener, getSlate]);\n  return selectedState;\n}\n/**\r\n * Create selector context with editor updating on every editor change\r\n */\n\nfunction getSelectorContext(editor) {\n  var eventListeners = useRef([]).current;\n  var slateRef = useRef({\n    editor\n  }).current;\n  var onChange = useCallback(editor => {\n    slateRef.editor = editor;\n    eventListeners.forEach(listener => listener(editor));\n  }, []);\n  var selectorContext = useMemo(() => {\n    return {\n      getSlate: () => slateRef.editor,\n      addEventListener: callback => {\n        eventListeners.push(callback);\n        return () => {\n          eventListeners.splice(eventListeners.indexOf(callback), 1);\n        };\n      }\n    };\n  }, [eventListeners, slateRef]);\n  return {\n    selectorContext,\n    onChange\n  };\n}\n\nvar _excluded = [\"editor\", \"children\", \"onChange\", \"value\"];\n/**\r\n * A wrapper around the provider to handle `onChange` events, because the editor\r\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\r\n */\n\nvar Slate = props => {\n  var {\n    editor,\n    children,\n    onChange,\n    value\n  } = props,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var unmountRef = useRef(false);\n  var [context, setContext] = React.useState(() => {\n    if (!Node.isNodeList(value)) {\n      throw new Error(\"[Slate] value is invalid! Expected a list of elements but got: \".concat(Scrubber.stringify(value)));\n    }\n\n    if (!Editor.isEditor(editor)) {\n      throw new Error(\"[Slate] editor is invalid! You passed: \".concat(Scrubber.stringify(editor)));\n    }\n\n    editor.children = value;\n    Object.assign(editor, rest);\n    return {\n      v: 0,\n      editor\n    };\n  });\n  var {\n    selectorContext,\n    onChange: handleSelectorChange\n  } = getSelectorContext(editor);\n  var onContextChange = useCallback(() => {\n    if (onChange) {\n      onChange(editor.children);\n    }\n\n    setContext(prevContext => ({\n      v: prevContext.v + 1,\n      editor\n    }));\n    handleSelectorChange(editor);\n  }, [onChange]);\n  useEffect(() => {\n    EDITOR_TO_ON_CHANGE.set(editor, onContextChange);\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {});\n      unmountRef.current = true;\n    };\n  }, []);\n  var [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor));\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor));\n  });\n  useIsomorphicLayoutEffect(() => {\n    var fn = () => setIsFocused(ReactEditor.isFocused(editor));\n\n    if (IS_REACT_VERSION_17_OR_ABOVE) {\n      // In React >= 17 onFocus and onBlur listen to the focusin and focusout events during the bubbling phase.\n      // Therefore in order for <Editable />'s handlers to run first, which is necessary for ReactEditor.isFocused(editor)\n      // to return the correct value, we have to listen to the focusin and focusout events without useCapture here.\n      document.addEventListener('focusin', fn);\n      document.addEventListener('focusout', fn);\n      return () => {\n        document.removeEventListener('focusin', fn);\n        document.removeEventListener('focusout', fn);\n      };\n    } else {\n      document.addEventListener('focus', fn, true);\n      document.addEventListener('blur', fn, true);\n      return () => {\n        document.removeEventListener('focus', fn, true);\n        document.removeEventListener('blur', fn, true);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(SlateSelectorContext.Provider, {\n    value: selectorContext\n  }, /*#__PURE__*/React.createElement(SlateContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(EditorContext.Provider, {\n    value: context.editor\n  }, /*#__PURE__*/React.createElement(FocusedContext.Provider, {\n    value: isFocused\n  }, children))));\n};\n\n/**\r\n * Get the current editor object from the React context.\r\n * @deprecated Use useSlateStatic instead.\r\n */\n\nvar useEditor = () => {\n  var editor = useContext(EditorContext);\n\n  if (!editor) {\n    throw new Error(\"The `useEditor` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return editor;\n};\n\n/**\r\n * Get the current slate selection.\r\n * Only triggers a rerender when the selection actually changes\r\n */\n\nvar useSlateSelection = () => {\n  return useSlateSelector(editor => editor.selection, isSelectionEqual);\n};\n\nvar isSelectionEqual = (a, b) => {\n  if (!a && !b) return true;\n  if (!a || !b) return false;\n  return Range.equals(a, b);\n};\n\n/**\r\n * Utilities for single-line deletion\r\n */\n\nvar doRectsIntersect = (rect, compareRect) => {\n  var middle = (compareRect.top + compareRect.bottom) / 2;\n  return rect.top <= middle && rect.bottom >= middle;\n};\n\nvar areRangesSameLine = (editor, range1, range2) => {\n  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();\n  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);\n};\n/**\r\n * A helper utility that returns the end portion of a `Range`\r\n * which is located on a single line.\r\n *\r\n * @param {Editor} editor The editor object to compare against\r\n * @param {Range} parentRange The parent range to compare against\r\n * @returns {Range} A valid portion of the parentRange which is one a single line\r\n */\n\n\nvar findCurrentLineRange = (editor, parentRange) => {\n  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));\n  var positions = Array.from(Editor.positions(editor, {\n    at: parentRange\n  }));\n  var left = 0;\n  var right = positions.length;\n  var middle = Math.floor(right / 2);\n\n  if (areRangesSameLine(editor, Editor.range(editor, positions[left]), parentRangeBoundary)) {\n    return Editor.range(editor, positions[left], parentRangeBoundary);\n  }\n\n  if (positions.length < 2) {\n    return Editor.range(editor, positions[positions.length - 1], parentRangeBoundary);\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (areRangesSameLine(editor, Editor.range(editor, positions[middle]), parentRangeBoundary)) {\n      right = middle;\n    } else {\n      left = middle;\n    }\n\n    middle = Math.floor((left + right) / 2);\n  }\n\n  return Editor.range(editor, positions[right], parentRangeBoundary);\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\r\n * `withReact` adds React and DOM specific behaviors to the editor.\r\n *\r\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\r\n * this plugin.\r\n *\r\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\r\n */\n\nvar withReact = editor => {\n  var e = editor;\n  var {\n    apply,\n    onChange,\n    deleteBackward,\n    addMark,\n    removeMark\n  } = e; // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap());\n\n  e.addMark = (key, value) => {\n    var _EDITOR_TO_SCHEDULE_F, _EDITOR_TO_PENDING_DI;\n\n    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(e)) === null || _EDITOR_TO_SCHEDULE_F === void 0 ? void 0 : _EDITOR_TO_SCHEDULE_F();\n\n    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e) && (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(e)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null);\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e);\n    addMark(key, value);\n  };\n\n  e.removeMark = key => {\n    var _EDITOR_TO_PENDING_DI2;\n\n    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e) && (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(e)) !== null && _EDITOR_TO_PENDING_DI2 !== void 0 && _EDITOR_TO_PENDING_DI2.length) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null);\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e);\n    removeMark(key);\n  };\n\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit);\n    }\n\n    if (e.selection && Range.isCollapsed(e.selection)) {\n      var parentBlockEntry = Editor.above(e, {\n        match: n => Element$1.isElement(n) && Editor.isBlock(e, n),\n        at: e.selection\n      });\n\n      if (parentBlockEntry) {\n        var [, parentBlockPath] = parentBlockEntry;\n        var parentElementRange = Editor.range(e, parentBlockPath, e.selection.anchor);\n        var currentLineRange = findCurrentLineRange(e, parentElementRange);\n\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(e, {\n            at: currentLineRange\n          });\n        }\n      }\n    }\n  }; // This attempts to reset the NODE_TO_KEY entry to the correct value\n  // as apply() changes the object reference and hence invalidates the NODE_TO_KEY entry\n\n\n  e.apply = op => {\n    var matches = [];\n    var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e);\n\n    if (pendingDiffs !== null && pendingDiffs !== void 0 && pendingDiffs.length) {\n      var transformed = pendingDiffs.map(textDiff => transformTextDiff(textDiff, op)).filter(Boolean);\n      EDITOR_TO_PENDING_DIFFS.set(e, transformed);\n    }\n\n    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e);\n\n    if (pendingSelection) {\n      EDITOR_TO_PENDING_SELECTION.set(e, transformPendingRange(e, pendingSelection, op));\n    }\n\n    var pendingAction = EDITOR_TO_PENDING_ACTION.get(e);\n\n    if (pendingAction !== null && pendingAction !== void 0 && pendingAction.at) {\n      var at = Point.isPoint(pendingAction === null || pendingAction === void 0 ? void 0 : pendingAction.at) ? transformPendingPoint(e, pendingAction.at, op) : transformPendingRange(e, pendingAction.at, op);\n      EDITOR_TO_PENDING_ACTION.set(e, at ? _objectSpread(_objectSpread({}, pendingAction), {}, {\n        at\n      }) : null);\n    }\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n      case 'split_node':\n        {\n          matches.push(...getMatches(e, op.path));\n          break;\n        }\n\n      case 'set_selection':\n        {\n          var _EDITOR_TO_USER_SELEC;\n\n          // Selection was manually set, don't restore the user selection after the change.\n          (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(e)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();\n          EDITOR_TO_USER_SELECTION.delete(e);\n          break;\n        }\n\n      case 'insert_node':\n      case 'remove_node':\n        {\n          matches.push(...getMatches(e, Path.parent(op.path)));\n          break;\n        }\n\n      case 'merge_node':\n        {\n          var prevPath = Path.previous(op.path);\n          matches.push(...getMatches(e, prevPath));\n          break;\n        }\n\n      case 'move_node':\n        {\n          var commonPath = Path.common(Path.parent(op.path), Path.parent(op.newPath));\n          matches.push(...getMatches(e, commonPath));\n          break;\n        }\n    }\n\n    apply(op);\n\n    for (var [path, key] of matches) {\n      var [node] = Editor.node(e, path);\n      NODE_TO_KEY.set(node, key);\n    }\n  };\n\n  e.setFragmentData = data => {\n    var {\n      selection\n    } = e;\n\n    if (!selection) {\n      return;\n    }\n\n    var [start, end] = Range.edges(selection);\n    var startVoid = Editor.void(e, {\n      at: start.path\n    });\n    var endVoid = Editor.void(e, {\n      at: end.path\n    });\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return;\n    } // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n\n\n    var domRange = ReactEditor.toDOMRange(e, selection);\n    var contents = domRange.cloneContents();\n    var attach = contents.childNodes[0]; // Make sure attach is non-empty, since empty nodes will not get copied.\n\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node;\n      }\n    }); // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n\n    if (endVoid) {\n      var [voidNode] = endVoid;\n      var r = domRange.cloneRange();\n      var domNode = ReactEditor.toDOMNode(e, voidNode);\n      r.setEndAfter(domNode);\n      contents = r.cloneContents();\n    } // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n\n\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]');\n    } // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n\n\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(zw => {\n      var isNewline = zw.getAttribute('data-slate-zero-width') === 'n';\n      zw.textContent = isNewline ? '\\n' : '';\n    }); // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n\n    if (isDOMText(attach)) {\n      var span = attach.ownerDocument.createElement('span'); // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n\n      span.style.whiteSpace = 'pre';\n      span.appendChild(attach);\n      contents.appendChild(span);\n      attach = span;\n    }\n\n    var fragment = e.getFragment();\n    var string = JSON.stringify(fragment);\n    var encoded = window.btoa(encodeURIComponent(string));\n    attach.setAttribute('data-slate-fragment', encoded);\n    data.setData('application/x-slate-fragment', encoded); // Add the content to a <div> so that we can get its inner HTML.\n\n    var div = contents.ownerDocument.createElement('div');\n    div.appendChild(contents);\n    div.setAttribute('hidden', 'true');\n    contents.ownerDocument.body.appendChild(div);\n    data.setData('text/html', div.innerHTML);\n    data.setData('text/plain', getPlainText(div));\n    contents.ownerDocument.body.removeChild(div);\n    return data;\n  };\n\n  e.insertData = data => {\n    if (!e.insertFragmentData(data)) {\n      e.insertTextData(data);\n    }\n  };\n\n  e.insertFragmentData = data => {\n    /**\r\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\r\n     */\n    var fragment = data.getData('application/x-slate-fragment') || getSlateFragmentAttribute(data);\n\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      e.insertFragment(parsed);\n      return true;\n    }\n\n    return false;\n  };\n\n  e.insertTextData = data => {\n    var text = data.getData('text/plain');\n\n    if (text) {\n      var lines = text.split(/\\r\\n|\\r|\\n/);\n      var split = false;\n\n      for (var line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, {\n            always: true\n          });\n        }\n\n        e.insertText(line);\n        split = true;\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  e.onChange = () => {\n    // COMPAT: React doesn't batch `setState` hook calls, which means that the\n    // children and selection can get out of sync for one render pass. So we\n    // have to use this unstable API to ensure it batches them. (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    ReactDOM.unstable_batchedUpdates(() => {\n      var onContextChange = EDITOR_TO_ON_CHANGE.get(e);\n\n      if (onContextChange) {\n        onContextChange();\n      }\n\n      onChange();\n    });\n  };\n\n  return e;\n};\n\nvar getMatches = (e, path) => {\n  var matches = [];\n\n  for (var [n, p] of Editor.levels(e, {\n    at: path\n  })) {\n    var key = ReactEditor.findKey(e, n);\n    matches.push([p, key]);\n  }\n\n  return matches;\n};\n\nexport { DefaultElement, DefaultLeaf, DefaultPlaceholder, Editable, ReactEditor, Slate, useEditor, useFocused, useReadOnly, useSelected, useSlate, useSlateSelection, useSlateSelector, useSlateStatic, useSlateWithV, withReact };\n//# sourceMappingURL=index.es.js.map\n"],"sourceRoot":""}