(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1843:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return x}));var n=r(0),a=r.n(n),i=r(1),o=r.n(i),s=r(415),c=r(1838),l=r(1266),d=r(1840),u=r(13),p=r(11),b=r(5),m=r(437);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){let t=e.entry,r=e.depth,n=e.innerRef,i=e.draggableProps,o=e.dragHandleProps,c=e.isDragging,l=e.isdropTarget,d=e.textId,f=e.onDelete,y=e.onCollapse,j=e.onExpand;const E=Object(s.a)().t,h=b.a.link("backendTextTOCEntryEdit",d,t.id),O=t.isExpanded?y:j,x=t.isExpanded?"DisclosureUp32":"DisclosureDown32";return a.a.createElement(m.h,g({ref:n},i),a.a.createElement(m.g,{$isDragging:c,$depth:r,$isTarget:l},a.a.createElement(m.b,null,a.a.createElement(m.a,{onClick:()=>f(t.id),"aria-label":E("actions.delete")},a.a.createElement(u.a.IconComposer,{size:24,icon:"delete24"})),a.a.createElement(m.a,{as:p.b,to:h,"aria-label":E("actions.edit")},a.a.createElement(u.a.IconComposer,{size:24,icon:"annotate24"})),a.a.createElement(m.d,g({"aria-describedby":"toc-drag-handle-instructions"},o),a.a.createElement(u.a.IconComposer,{size:30,icon:"grabber32"}))),a.a.createElement(m.k,null,t.hasChildren&&a.a.createElement(m.a,{onClick:O,"aria-label":E("actions.edit"),style:{marginBlockStart:"2px"}},a.a.createElement(u.a.IconComposer,{size:28,icon:x})),a.a.createElement(m.j,null,t.data?t.data.title:""),!!r&&a.a.createElement(m.c,{icon:"tocLink16"}))))}f.displayName="Text.TOC.List.Entry",f.propTypes={entry:o.a.object.isRequired,depth:o.a.number.isRequired,innerRef:o.a.func,draggableProps:o.a.object,dragHandleProps:o.a.object,isDragging:o.a.bool,setCombine:o.a.func,combine:o.a.string,textId:o.a.string,onDelete:o.a.func,isStart:o.a.bool,onSetStart:o.a.func};var y=r(246),j=r(4),E=r(9);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e){let t=e.tree,r=e.setTree,i=e.textId,o=e.error,u=e.setError;const p=Object(s.a)().t,b=h(Object(n.useState)(!1),2),g=b[0],O=b[1],x=h(Object(n.useState)(Object.keys(t.items).length-1),2),I=x[0],w=x[1],T=h(Object(n.useState)(Object.keys(t.items).length-1),2),v=T[0],C=T[1],D=Object(E.a)(j.W.update),S=async e=>{u(null);const n=[e,...Object(y.d)(e,t.items)],a=Object(y.h)(n,t.items),o=Object(y.a)({...t,items:a}),s=await D(i,{attributes:{toc:o}});if(null!=s&&s.errors)return u(s.errors);r(Object(y.b)(o))},k="reorder"===o?p("errors.toc_reorder"):Array.isArray(o)?o.map(e=>e.detail).join(". "):o;return t?a.a.createElement(m.l,{className:"full-width",$count:I},o&&a.a.createElement(m.f,null,k),g&&a.a.createElement(m.e,{$count:v}),a.a.createElement(m.i,{$count:Object.keys(t.items).length-1},a.a.createElement(d.a,{tree:t,renderItem:e=>{let n=e.item,o=e.provided,s=e.snapshot,c=e.depth;const d=o.dragHandleProps;delete d["aria-roledescription"];return a.a.createElement(f,{entry:n,depth:c,innerRef:o.innerRef,draggableProps:o.draggableProps,dragHandleProps:d,isDragging:s.isDragging,isdropTarget:s.combineTargetFor,placeholder:o.placeholder,textId:i,onDelete:S,onCollapse:()=>{const e=Object(l.a)(t,n.id,{isExpanded:!1});r(e);const a=Object(y.c)(n,e.items);w(I-a)},onExpand:()=>{const e=Object(l.a)(t,n.id,{isExpanded:!0});r(e);const a=Object(y.c)(e.items[n.id],e.items);w(I+a)}})},onDragStart:e=>{O(!0);const r=Object(y.c)(t.items[e],t.items);C(I-r)},onDragEnd:async(e,n)=>{let a;if(O(!1),"root"===n.parentId&&isNaN(n.index)){a={parentId:"root",index:Object(y.f)(e.parentId,t.items)+1}}else a=Object(y.g)(n.parentId,t.items)?n:{parentId:Object(y.e)(n.parentId,t.items)};const o=Object(c.a)(t,e,a);(async e=>{u(null);const t=Object(y.a)(e),r=await D(i,{attributes:{toc:t}});null!=r&&r.errors&&u("reorder")})(o),r(o)},isDragEnabled:!0,isNestingEnabled:!0,offsetPerLevel:0}),a.a.createElement("span",{className:"screen-reader-text",id:"toc-drag-handle-instructions"},p("texts.toc.drag_handle_instructions")))):null}x.displayName="Text.TOC.List",x.propTypes={tree:o.a.object.isRequired,setTree:o.a.func.isRequired,textId:o.a.string.isRequired}}}]);
//# sourceMappingURL=chunk-12-0d32203057ad3a840066.js.map