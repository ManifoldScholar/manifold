{"version":3,"file":"build/chunk-702-a72c96e4e58d116a1bea.js","mappings":"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","sources":["webpack://manifold-client/./src/global/components/form/CodeArea/darkTheme.js","webpack://manifold-client/./src/global/components/form/CodeArea/lightTheme.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/links.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/images.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/iframes.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/textBlocks.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/general.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/getters.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/shared.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/spans.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/layoutBlocks.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/removeNode.js","webpack://manifold-client/./src/global/components/form/ContentEditor/plugins/withInlines.js","webpack://manifold-client/./src/global/components/form/ContentEditor/plugins/withImages.js","webpack://manifold-client/./src/global/components/form/ContentEditor/plugins/withShortcuts.js","webpack://manifold-client/./src/global/components/form/ContentEditor/utils/slate/transforms/listIndents.js","webpack://manifold-client/./src/global/components/form/ContentEditor/plugins/withHtmlAwareBreaks.js","webpack://manifold-client/./src/global/components/form/ContentEditor/plugins/index.js","webpack://manifold-client/./src/global/components/form/ContentEditor/contexts/htmlBreadcrumbsContext.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/renderers/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/renderers/HtmlLabel.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/renderers/Leaf.js","webpack://manifold-client/./src/global/components/form/ContentEditor/hotkeys/handlers.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/renderers/Image.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/renderers/Void.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/renderers/Element.js","webpack://manifold-client/./src/global/components/form/ContentEditor/hotkeys/index.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/HtmlEditor.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/index.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/content.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/BlockButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/MarkButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/insert/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/insert/LinkForm.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/insert/Modal.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/utils.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/LinkButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/insert/ImageForm.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/ImageButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/insert/IframeForm.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/IframeButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/BlockSelect.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/FunctionButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/buttons/SpanButton.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/ToolbarRTE.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/ToolbarHTML.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/Toggle/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/Toggle/index.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/controls/ToggleBar.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/styles.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/EditorControls.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/Editor.js","webpack://manifold-client/./src/global/components/form/ContentEditor/components/Wrapper.js"],"sourcesContent":["import { config } from \"ace-builds\";\nimport idleFingersUrl from \"ace-builds/src-noconflict/theme-idle_fingers\";\n\nconfig.setModuleUrl(\n  \"ace-builds/src-noconflict/theme-idle_fingers\",\n  idleFingersUrl\n);\n\n/* eslint-disable max-len, no-unused-vars */\nwindow.ace.define(\n  \"ace-builds/src-noconflict/theme-idle_fingers\",\n  [\"require\", \"exports\", \"module\", \"ace/lib/dom\"],\n  (acequire, _exports, module) => {\n    exports = _exports;\n    exports.isDark = true;\n    exports.cssClass = \"ace-idle-fingers\";\n    exports.cssText = `\n      .ace-idle-fingers .ace_gutter {\n        background: #3b3b3b;\n        color: rgb(153,153,153);\n      }\n\n      .ace-idle-fingers .ace_print-margin {\n        width: 1px;\n        background: #3b3b3b;\n      }\n\n      .ace-idle-fingers {\n        color: var(--color-base-neutral10);\n        border: 1px solid #555555;\n      }\n\n      .ace-idle-fingers .ace_cursor {\n        color: #91FF00;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selection {\n        background: rgba(90, 100, 126, 0.88);\n      }\n\n      .ace-idle-fingers.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #323232;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_step {\n        background: rgb(102, 82, 0);\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid #404040;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_active-line {\n        background:  var(--color-base-neutral110);\n      }\n\n      .ace-idle-fingers .ace_gutter-active-line {\n        background-color: #353637\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(90, 100, 126, 0.88)\n      }\n\n      .ace-idle-fingers .ace_invisible {\n        color: var(--color-base-neutral40);\n      }\n\n      .ace-idle-fingers .ace_keyword,\n      .ace-idle-fingers .ace_meta {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_constant,\n      .ace-idle-fingers .ace_constant.ace_character,\n      .ace-idle-fingers .ace_constant.ace_character.ace_escape,\n      .ace-idle-fingers .ace_constant.ace_other,\n      .ace-idle-fingers .ace_support.ace_constant {\n        color: var(--color-base-blue45);\n      }\n\n      .ace-idle-fingers .ace_invalid:not(.ace_invisible) {\n        color: var(--color-base-neutral40);\n        background: var(--color-base-red45);\n      }\n\n      .ace-idle-fingers .ace_fold {\n        background-color: #CC7833;\n        border-color: #FFFFFF;\n      }\n\n      .ace-idle-fingers .ace_support.ace_function {\n        color: #B83426;\n      }\n\n      .ace-idle-fingers .ace_variable.ace_parameter {\n        font-style: italic;\n      }\n\n      .ace-idle-fingers .ace_string {\n        color: var(--color-base-green20);\n      }\n\n      .ace-idle-fingers .ace_string.ace_regexp {\n        color: #CCCC33;\n      }\n\n      .ace-idle-fingers .ace_comment {\n        font-style: italic;\n        color: #BC9458;\n      }\n\n      .ace-idle-fingers .ace_meta.ace_tag {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_entity.ace_name {\n        color: #FFC66D;\n      }\n\n      .ace-idle-fingers .ace_collab.ace_user1 {\n        color: #323232;\n        background-color: #FFF980;\n      }\n\n      .ace-idle-fingers .ace_indent-guide {\n        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMwMjLyZYiPj/8PAAreAwAI1g0AAAAAElFTkSuQmCC) right repeat-y\n      }\n    `;\n    const dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n  }\n);\n/* eslint-enable max-len, no-unused-vars */\n","import { config } from \"ace-builds\";\nimport kuroirUrl from \"ace-builds/src-noconflict/theme-kuroir\";\n\nconfig.setModuleUrl(\"ace-builds/src-noconflict/theme-kuroir\", kuroirUrl);\n\n/* eslint-disable max-len, no-unused-vars */\nwindow.ace.define(\n  \"ace-builds/src-noconflict/theme-kuroir\",\n  [\"require\", \"exports\", \"module\", \"ace/lib/dom\"],\n  (acequire, _exports, module) => {\n    exports = _exports;\n    exports.isDark = false;\n    exports.cssClass = \"ace-kuroir\";\n    exports.cssText = `\n      .ace-kuroir .ace_gutter {\n        background: var(--color-base-neutral30);\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_print-margin {\n        width: 1px;\n        background: #e8e8e8;\n      }\n\n      .ace-kuroir {\n        background-color: #E8E9E8;\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_cursor {\n        color: #202020;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selection {\n        background: var(--color-base-yellow20);\n      }\n\n      .ace-kuroir.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #E8E9E8;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_step {\n        background: rgb(198, 219, 174);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid rgba(0, 0, 0, 0.29);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_active-line {\n        background: var(--color-base-yellow45);\n      }\n\n      .ace-kuroir .ace_gutter-active-line {\n        background-color: rgba(245, 228, 37, .5);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(245, 170, 0, 0.57);\n      }\n\n      .ace-kuroir .ace_invisible {\n        color: #BFBFBF\n      }\n\n      .ace-kuroir .ace_fold {\n        border-color: #363636;\n      }\n\n      .ace-kuroir .ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_constant.ace_numeric {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support.ace_type {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_function {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_keyword {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_storage {\n        color:#A52A2A;\n      }\n\n      .ace-kuroir .ace_invalid.ace_illegal {\n        color:#FD1224;\n        background-color:rgba(255, 6, 0, 0.15);\n      }\n\n      .ace-kuroir .ace_invalid.ace_deprecated {\n        text-decoration:underline;\n        font-style:italic;\n        color:#FD1732;\n        background-color:#E8E9E8;\n      }\n\n      .ace-kuroir .ace_string {\n        color: var(--color-base-green75);\n      }\n\n      .ace-kuroir .ace_string.ace_regexp {\n        color:#417E00;\n        background-color:#C9D4BE; }\n\n      .ace-kuroir .ace_comment {\n        color:rgba(148, 148, 148, 0.91);\n        background-color:rgba(220, 220, 220, 0.56);\n      }\n\n      .ace-kuroir .ace_variable {\n        color: var(--color-text-neutral100);\n      }\n\n      .ace-kuroir .ace_meta.ace_tag {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_markup.ace_heading {\n        color:#B8012D;\n        background-color:rgba(191, 97, 51, 0.051);\n      }\n\n      .ace-kuroir .ace_markup.ace_list {\n        color:#8F5B26;\n      }\n\n      .ace-kuroir .ace_indent-guide {\n          background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\n      }\n\n      .ace-kuroir .ace_indent-guide-active {\n        background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\n      }\n    `;\n    const dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n  }\n);\n/* eslint-enable max-len, no-unused-vars */\n","import { Transforms, Editor, Range, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const unwrapLink = editor => {\n  Transforms.unwrapNodes(editor, {\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n.type === \"a\"\n  });\n  ReactEditor.focus(editor);\n};\n\nexport const wrapLink = (editor, url, text) => {\n  const { selection } = editor ?? {};\n  if (!selection) return;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n  const link = {\n    type: \"a\",\n    htmlAttrs: { href: url },\n    children: isCollapsed ? [{ text: text ?? url }] : []\n  };\n\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, link);\n  } else {\n    Transforms.wrapNodes(editor, link, { split: true });\n    Transforms.collapse(editor, { edge: \"end\" });\n  }\n\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const insertImage = (editor, url, alt) => {\n  const text = { text: \"\", slateOnly: true };\n  const image = {\n    type: \"img\",\n    htmlAttrs: { src: url, alt: alt ?? \"\" },\n    children: [text]\n  };\n  const [node] = Editor.above(editor, editor.selection);\n  if (Editor.isEmpty(editor, node)) {\n    Transforms.removeNodes(editor);\n  }\n  Transforms.insertNodes(editor, image);\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const insertIframe = (editor, url, title) => {\n  const text = { text: \"\", slateOnly: true };\n  const type = /api\\/proxy\\//.test(url) ? \"video\" : \"iframe\";\n  const controls = type === \"video\" ? \"\" : undefined;\n  const embed = {\n    type,\n    htmlAttrs: { src: url, title, controls },\n    children: [text]\n  };\n  const [node] = Editor.above(editor, editor.selection);\n  if (Editor.isEmpty(editor, node)) {\n    Transforms.removeNodes(editor);\n  }\n  Transforms.insertNodes(editor, embed);\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Element, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\n\nconst LIST_TYPES = [\"ol\", \"ul\"];\n\nconst handleLiTextChild = ({ editor, node, path, format }) => {\n  const { anchor, focus } = editor.selection;\n  const start = node.text.substring(0, anchor.offset);\n  const target = node.text.substring(anchor.offset, focus.offset);\n  const end = node.text.substring(focus.offset);\n\n  const children = [\n    ...(start && [\n      {\n        type: \"list-sibling\",\n        slateOnly: true,\n        children: [{ text: start }]\n      }\n    ]),\n    { type: format, children: [{ text: target }] },\n    ...(end && [\n      {\n        type: \"list-sibling\",\n        slateOnly: true,\n        children: [{ text: end }]\n      }\n    ])\n  ];\n\n  Transforms.insertNodes(editor, children, { at: path });\n};\n\nexport const toggleTextBlock = ({\n  editor,\n  format,\n  node: initialNode,\n  path,\n  split = false\n}) => {\n  if (\n    initialNode &&\n    has(initialNode, \"text\") &&\n    Node.parent(editor, path).type === \"li\"\n  )\n    return handleLiTextChild({ editor, node: initialNode, path, format });\n\n  const node =\n    initialNode && has(initialNode, \"text\")\n      ? Node.parent(editor, path)\n      : initialNode;\n\n  if (node.type === \"pre\") Editor.removeMark(editor, \"code\", true);\n\n  const type = LIST_TYPES.includes(format) ? \"li\" : format;\n\n  Transforms.unwrapNodes(editor, {\n    match: (n, p) =>\n      !Editor.isEditor(n) &&\n      Element.isElement(n) &&\n      LIST_TYPES.includes(n.type) &&\n      isEqual(p, path),\n    split: true\n  });\n\n  if (node.slateOnly || format !== node.type) {\n    const htmlAttrs = node.htmlAttrs?.class\n      ? { class: node.htmlAttrs?.class }\n      : undefined;\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.setNodes(\n        editor,\n        {\n          type,\n          slateOnly: undefined,\n          htmlAttrs: type !== \"li\" ? htmlAttrs : undefined\n        },\n        { split }\n      );\n      if (type === \"li\") {\n        Transforms.wrapNodes(editor, { type: format, htmlAttrs, children: [] });\n      }\n      if (format === \"pre\") Editor.addMark(editor, \"code\", true);\n      ReactEditor.focus(editor);\n    });\n  }\n\n  Transforms.setNodes(editor, { type: \"p\", slateOnly: undefined }, { split });\n  ReactEditor.focus(editor);\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const clearSlate = editor => {\n  const count = Array(editor.children.length).keys();\n  [...count].forEach(() => {\n    try {\n      Transforms.removeNodes(editor, { at: [0] });\n    } catch (e) {\n      return e;\n    }\n  });\n};\n\nexport const setSelectionAtPoint = (editor, path, offset = 0) => {\n  Transforms.select(editor, {\n    anchor: { path, offset },\n    focus: { path, offset }\n  });\n};\n\nexport const formatNodeLabel = node => {\n  let label = node.type === \"void\" ? node.nodeName : node.type;\n  const { htmlAttrs } = node ?? {};\n  if (htmlAttrs?.id) label = `${label}#${htmlAttrs.id}`;\n  if (htmlAttrs?.class)\n    label = `${label}.${htmlAttrs.class?.replaceAll(\" \", \".\")}`;\n  return label;\n};\n","import { Editor, Node, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport has from \"lodash/has\";\nimport { formatNodeLabel } from \"./general\";\n\nexport const getListItemNode = (editor, path) =>\n  Editor.above(editor, {\n    at: path,\n    match: n => n.type === \"li\"\n  }) ?? [];\n\nexport const getListNode = (editor, path) =>\n  Editor.above(editor, {\n    at: path,\n    match: n => n.type === \"ul\" || n.type === \"ol\"\n  }) ?? [];\n\n// Use Node.string() rather than this when appropriate\nexport const getTextContent = (editor, iterator, str = \"\") => {\n  const { value } = iterator.next();\n  if (!value) return str;\n  const [node] = value;\n  const nextStr = node.text ? str + node.text : str;\n  return getTextContent(editor, iterator, nextStr);\n};\n\nexport const getCommonBlock = (editor, condition = () => true) => {\n  const range = Editor.unhangRange(editor, editor.selection, { voids: true });\n\n  const [common, path] = Node.common(\n    editor,\n    range.anchor.path,\n    range.focus.path\n  );\n\n  if (\n    (Editor.isBlock(editor, common) || Editor.isEditor(common)) &&\n    condition(common)\n  ) {\n    return [common, path];\n  } else {\n    return Editor.above(editor, {\n      at: path,\n      match: n =>\n        (Editor.isBlock(editor, n) || Editor.isEditor(n)) && condition(n)\n    });\n  }\n};\n\nexport const getAncestors = (editor, iterator, list = {}) => {\n  const { value } = iterator.next();\n  if (!value) return list;\n  const [node, path] = value;\n  const key = ReactEditor.findKey(editor, node);\n  const next =\n    node.type && !node.slateOnly\n      ? { ...list, [key.id]: { label: formatNodeLabel(node), path } }\n      : list;\n  return getAncestors(editor, iterator, next);\n};\n\nexport const getNearestOfType = (editor, types) => {\n  const [nearest, path] = Editor.above(editor, {\n    at: Editor.unhangRange(editor, editor.selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      types.includes(n.type) &&\n      !n.nodeName &&\n      !n.slateOnly\n  });\n  return { nearest, path };\n};\n\nexport const isElementActive = (editor, format) => {\n  const { selection } = editor;\n  if (!selection) return [false];\n\n  const nearest = Editor.above(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      Element.isElement(n) &&\n      !n.nodeName &&\n      !n.slateOnly &&\n      n.type === format\n  });\n\n  const [node, path] = nearest ?? [];\n\n  // Include path in return so we can determine highest or lowest for display.\n  return nearest ? [node.type === format, path] : [false];\n};\n\nexport const isTextBlockActive = (editor, format) => {\n  const { selection } = editor;\n  if (!selection) return [false];\n\n  const block = Editor.above(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      Editor.isBlock(editor, n) &&\n      !n.nodeName &&\n      !n.slateOnly &&\n      n.type === format\n  });\n\n  const [node, path] = block ?? [];\n\n  // Include path in return so we can determine highest or lowest for display.\n  return block ? [node?.type === format, path] : [false];\n};\n\nexport const isMarkActive = (editor, format) => {\n  if (!editor.selection) return false;\n  const node = Node.get(editor, editor.selection.focus.path);\n  const marks = node.text ? Editor.marks(editor) : false;\n\n  if (format === \"code\") {\n    const [pre] = Editor.above(editor, { match: n => n.type === \"pre\" }) ?? [];\n    if (pre) return false;\n  }\n  return marks ? marks[format] === true : false;\n};\n\nexport const isLinkActive = editor => {\n  const [link] = Editor.nodes(editor, {\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n.type === \"a\"\n  });\n  return !!link;\n};\n\nexport const isEmptyAndChildless = (editor, node) => {\n  const onlyChildIsEmptyText =\n    node.children.length === 1 && has(node.children[0], \"text\");\n  return (\n    Editor.isEmpty(editor, node) &&\n    (onlyChildIsEmptyText || !node.children.length)\n  );\n};\n","import { Transforms, Editor, Range } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport { nestableElements } from \"../../elements\";\nimport { isMarkActive, getCommonBlock } from \"../getters\";\nimport { toggleTextBlock } from \"./textBlocks\";\nimport { insertOrWrapSpan, unwrapSpan } from \"./spans\";\nimport { wrapLayoutBlock } from \"./layoutBlocks\";\n\nexport const unwrapNode = ({ editor, format, path }) => {\n  if (format === \"span\") return unwrapSpan({ editor, path });\n\n  Transforms.liftNodes(editor, {\n    match: (n, p) => {\n      return n.type === format && isEqual(p, path);\n    },\n    at: path\n  });\n  ReactEditor.focus(editor);\n};\n\nexport const toggleOrWrapNode = (editor, format) => {\n  const isCollapsed = Range.isCollapsed(editor.selection);\n\n  if (format === \"span\") {\n    return insertOrWrapSpan(editor, isCollapsed);\n  }\n\n  const formatIsContainer = nestableElements.includes(format);\n  const formatIsText = !formatIsContainer;\n\n  const condition = formatIsContainer\n    ? n => !Editor.isEditor(n) && !n.nodeName && !n.text\n    : n => !Editor.isEditor(n) && !n.nodeName;\n\n  const [common, path] = getCommonBlock(editor, condition);\n\n  if (formatIsText)\n    return toggleTextBlock({\n      editor,\n      format,\n      node: common,\n      path,\n      split: !isCollapsed\n    });\n\n  return wrapLayoutBlock({\n    editor,\n    format,\n    node: common,\n    path,\n    split: !isCollapsed\n  });\n};\n\nexport const toggleMark = (editor, format) => {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Path, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\nimport { isEmptyAndChildless } from \"../getters\";\n\nexport const insertOrWrapSpan = (editor, isCollapsed) => {\n  if (isCollapsed) {\n    Transforms.insertNodes(\n      editor,\n      { type: \"span\", children: [{ text: \"\" }] },\n      { at: editor.selection.anchor, select: true }\n    );\n  } else {\n    Transforms.wrapNodes(\n      editor,\n      { type: \"span\", children: [] },\n      { split: true }\n    );\n  }\n  ReactEditor.focus(editor);\n};\n\nexport const unwrapSpan = ({ editor, path }) => {\n  const parentPath = Path.parent(path);\n  const [newParent] = Editor.node(editor, { at: parentPath });\n  if (Editor.hasBlocks(editor, newParent)) {\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.wrapNodes(\n        editor,\n        { type: \"div\", slateOnly: true },\n        {\n          at: path,\n          match: (n, p) => {\n            return n.type === \"span\" && isEqual(p, path);\n          }\n        }\n      );\n      Transforms.removeNodes(editor, {\n        match: (n, p) => {\n          return has(n, \"text\") && !n.text && isEqual(p, Path.next(path));\n        },\n        at: parentPath\n      });\n      Transforms.liftNodes(editor, {\n        match: (n, p) => {\n          return n.type === \"div\" && isEqual(p, path);\n        },\n        at: path\n      });\n      const parent = Node.get(editor, parentPath);\n      if (isEmptyAndChildless(editor, parent)) {\n        Transforms.removeNodes(editor, {\n          at: Path.parent(parentPath),\n          match: n => {\n            return isEqual(n, parent);\n          }\n        });\n      }\n      ReactEditor.focus(editor);\n    });\n  }\n};\n","import { Transforms, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { rteElements } from \"../../elements\";\nimport has from \"lodash/has\";\n\nexport const wrapLayoutBlock = ({\n  editor,\n  format,\n  node: initialNode,\n  path: initialPath,\n  split\n}) => {\n  if (split)\n    return Transforms.wrapNodes(editor, { type: format }, { split: true });\n\n  const node =\n    initialNode && has(initialNode, \"text\")\n      ? Node.parent(editor, initialPath)\n      : initialNode;\n  const path = ReactEditor.findPath(editor, node);\n\n  Transforms.removeNodes(editor);\n\n  if (!rteElements.includes(node.type)) {\n    Transforms.insertNodes(\n      editor,\n      {\n        ...node,\n        children: [{ type: format, children: node.children }]\n      },\n      { at: path, select: true }\n    );\n  } else {\n    Transforms.insertNodes(\n      editor,\n      {\n        type: format,\n        children: [node]\n      },\n      { at: path, select: true }\n    );\n  }\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Node, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport has from \"lodash/has\";\nimport isEqual from \"lodash/isEqual\";\nimport { isEmptyAndChildless } from \"../getters\";\n\n// This function removes a specific node at any point in the selection hierarchy, not just the lowest one like the other transforms. It is used to handle delete via the html element labels.\n\nexport const removeNode = (editor, path) => {\n  const node = Node.get(editor, path);\n\n  // can't delete the root node\n  if (path.length === 1 && path[0] === 0) return;\n\n  // if the node is empty, just remove it\n  if (isEmptyAndChildless(editor, node))\n    return Transforms.removeNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path)\n    });\n\n  // if the node is inline, it's safe to unwrap; the parent node is already setup for inline children\n  if (Editor.isInline(editor, node)) {\n    return Transforms.unwrapNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path)\n    });\n  }\n\n  // if this is a list node, we're going to enforce some proper structure\n  // replace all li nodes with p nodes before removing the list tag\n  if (node.type === \"ol\" || node.type === \"ul\") {\n    node.children.forEach(c => {\n      const childPath = ReactEditor.findPath(editor, c);\n      Transforms.setNodes(\n        editor,\n        { type: \"p\", slateOnly: undefined },\n        { at: childPath, mode: \"highest\" }\n      );\n      if (c.children) {\n        c.children.forEach(nc => {\n          if (nc.type === \"ol\" || nc.type === \"ul\") {\n            const nestedChildPath = ReactEditor.findPath(editor, nc);\n            return Transforms.unwrapNodes(editor, {\n              match: n =>\n                !Editor.isEditor(n) && Element.isElement(n) && n.type === \"p\",\n              at: nestedChildPath,\n              mode: \"lowest\"\n            });\n          }\n        });\n      }\n    });\n    return Transforms.unwrapNodes(editor, {\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path),\n      at: path\n    });\n  }\n\n  // // now that we know the node is block, determine its children type\n  const hasBlockChildren = Editor.hasBlocks(editor, node);\n\n  // remove the code mark also if this is a pre tag created with the code block RTE button\n  if (node.type === \"pre\" && node.children[0].code)\n    Transforms.setNodes(\n      editor,\n      { ...node.children[0], code: undefined },\n      { at: [...path, 0], mode: \"highest\" }\n    );\n\n  // also safe to unwrap, we're just bumping blocks a level up the tree\n  if (hasBlockChildren)\n    return Transforms.unwrapNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        !n.slateOnly &&\n        isEqual(p, path)\n    });\n\n  // if the children are inline, there's a normalization issue because we'd be moving inline nodes up to parent with block children\n  if (!hasBlockChildren)\n    Editor.withoutNormalizing(editor, () => {\n      let pathCounter = 0;\n      node.children.forEach(c => {\n        // remove if empty text node\n        if (has(c, \"text\") && !Node.string(c)) {\n          Transforms.removeNodes(editor, { at: [...path, pathCounter] });\n        } else {\n          // wrap in a slateOnly div to prevent it from disappearing in normalization\n          Transforms.wrapNodes(\n            editor,\n            { type: \"div\", slateOnly: true },\n            { at: [...path, pathCounter] }\n          );\n          pathCounter += 1;\n        }\n      });\n      // now unwrap the node\n      Transforms.unwrapNodes(editor, {\n        at: path,\n        match: (n, p) =>\n          !Editor.isEditor(n) &&\n          Element.isElement(n) &&\n          n.type === node.type &&\n          !n.slateOnly &&\n          isEqual(p, path)\n      });\n    });\n};\n","import { inlineNodes } from \"../utils/elements\";\nimport { wrapLink, insertImage, insertIframe } from \"../utils/slate/transforms\";\nimport { isValidUrl, isImageUrl, isVideoUrl } from \"../utils/helpers\";\nimport { mathMLElements } from \"reader/containers/annotation/annotatable-components/mathHelpers\";\n\n/* eslint-disable no-param-reassign */\nconst withInlines = editor => {\n  const { insertText, isInline } = editor;\n\n  editor.isInline = element => {\n    const isInlineMath =\n      (element.type === \"math\" && element.htmlAttrs?.display === \"inline\") ||\n      (element.type !== \"math\" && mathMLElements.includes(element.type));\n\n    return (\n      isInlineMath || inlineNodes.includes(element.type) || isInline(element)\n    );\n  };\n\n  editor.insertText = text => {\n    const isImage = isImageUrl(text);\n    const isVideo = isVideoUrl(text);\n    const isLink = isValidUrl(text);\n\n    if (isImage) {\n      return insertImage(editor, text);\n    }\n    if (isVideo) {\n      return insertIframe(editor, text);\n    }\n    if (isLink) {\n      return wrapLink(editor, text);\n    }\n    insertText(text);\n  };\n\n  return editor;\n};\n\nexport default withInlines;\n","import { insertImage } from \"../utils/slate/transforms\";\nimport { isImageUrl } from \"../utils/helpers\";\n\n/* eslint-disable no-param-reassign */\nconst withImages = editor => {\n  const { insertData } = editor;\n\n  editor.insertData = data => {\n    const text = data.getData(\"text/plain\");\n    const { files } = data;\n\n    const image = files?.item(0);\n\n    if (image) {\n      const reader = new FileReader();\n      const [mime] = image.type.split(\"/\");\n      if (mime === \"image\") {\n        reader.addEventListener(\"load\", () => {\n          const url = reader.result;\n          insertImage(editor, url);\n        });\n\n        reader.readAsDataURL(image);\n        return;\n      }\n    }\n\n    if (isImageUrl(text)) {\n      insertImage(editor, text);\n    } else {\n      insertData(data);\n    }\n  };\n\n  return editor;\n};\n\nexport default withImages;\n","import { Editor, Element, Range, Transforms, Node } from \"slate\";\nimport { toggleOrWrapNode } from \"../utils/slate/transforms\";\n\nconst SHORTCUTS = {\n  \"*\": \"ul\",\n  \"-\": \"ul\",\n  \"+\": \"ul\",\n  \"1.\": \"ol\",\n  \">\": \"blockquote\",\n  \"#\": \"h1\",\n  \"##\": \"h2\",\n  \"###\": \"h3\",\n  \"####\": \"h4\",\n  \"#####\": \"h5\",\n  \"######\": \"h6\",\n  \"```\": \"pre\"\n};\n\nconst INLINE_SHORTCUTS = {\n  \"*\": \"italic\",\n  \"**\": \"bold\",\n  \"`\": \"code\",\n  \"~\": \"strikethrough\"\n};\n\n/* eslint-disable no-param-reassign */\nconst withShortcuts = editor => {\n  const { insertText } = editor;\n\n  // Insert block elements from .md shortcuts\n  editor.insertText = text => {\n    const { selection } = editor;\n    const { anchor } = selection;\n\n    if (text.endsWith(\" \") && selection && Range.isCollapsed(selection)) {\n      /* eslint-disable no-unused-vars */\n      const [block, path] =\n        Editor.above(editor, {\n          match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n        }) ?? [];\n      const start = Editor.start(editor, path);\n      const range = { anchor, focus: start };\n\n      const blockType =\n        SHORTCUTS[Editor.string(editor, range) + text.slice(0, -1)];\n\n      if (blockType) {\n        Transforms.select(editor, range);\n        if (!Range.isCollapsed(range)) {\n          Transforms.delete(editor);\n        }\n        return toggleOrWrapNode(editor, blockType);\n      }\n    }\n\n    // Insert inline elements (Slate \"marks\") from .md\n    let shortcut;\n    const shortCutChars = [\"*\", \"`\", \"~\"];\n\n    if (shortCutChars.includes(text)) {\n      const [textNode, textNodePath] = Editor.first(editor, anchor.path);\n      const beforeText = Node.string(textNode);\n\n      if (text === \"~\") {\n        shortcut = \"~\";\n      }\n      if (text === \"`\") {\n        shortcut = \"`\";\n      }\n      if (text === \"*\") {\n        if (beforeText.endsWith(\"*\")) shortcut = \"**\";\n        if (beforeText.indexOf(\"**\") === -1) shortcut = \"*\";\n      }\n\n      if (shortcut) {\n        const startIndex = beforeText.indexOf(shortcut);\n        const endIndex =\n          shortcut.length - 1 > 0 ? -(shortcut.length - 1) : undefined;\n        const target = beforeText.slice(startIndex + shortcut.length, endIndex);\n\n        if (shortcut === \"`\" && target === \"`\") return insertText(text);\n\n        if (startIndex >= 0 && target) {\n          const contentAnchor = { path: textNodePath, offset: startIndex };\n          const contentFocus = {\n            path: textNodePath,\n            offset: beforeText.length\n          };\n\n          return Editor.withoutNormalizing(editor, () => {\n            Transforms.select(editor, {\n              anchor: contentAnchor,\n              focus: contentFocus\n            });\n            Editor.addMark(editor, INLINE_SHORTCUTS[shortcut], true);\n            Transforms.delete(editor, {\n              at: contentAnchor,\n              distance: shortcut.length,\n              unit: \"character\"\n            });\n            Transforms.collapse(editor, { edge: \"end\" });\n            if (shortcut.length > 1) {\n              Transforms.delete(editor, {\n                distance: shortcut.length - 1,\n                unit: \"character\",\n                reverse: true\n              });\n            }\n          });\n        }\n      }\n    }\n\n    return insertText(text);\n  };\n\n  return editor;\n};\n\nexport default withShortcuts;\n","import { Editor as SlateEditor, Transforms, Node, Point } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { getListNode, getListItemNode } from \"../getters\";\nimport { setSelectionAtPoint } from \"../general\";\nimport { unwrapNode } from \"./shared\";\nimport { rteElements } from \"../../elements\";\nimport has from \"lodash/has\";\n\nconst getTextLocation = (editor, iterator, path, str = \"\") => {\n  const { value } = iterator.next();\n  if (!value) return { textContent: str, lastPath: path };\n  const [node, nodePath] = value;\n  if (node.type === \"list-sibling\")\n    return getTextLocation(editor, Node.children(editor, nodePath), nodePath);\n  const isTextNode = has(node, \"text\");\n  const nextStr = isTextNode ? node.text : str;\n  const nextPath = isTextNode ? nodePath : path;\n  return getTextLocation(editor, iterator, nextPath, nextStr);\n};\n\n// There must be a better way to achieve this with Range, but I haven't taken the time to figure it out. -LD\nconst getIndentSelectionLocation = (editor, path) => {\n  const textIterator = Node.children(editor, path);\n  const { textContent, lastPath } = getTextLocation(editor, textIterator, path);\n  return { path: lastPath, offset: textContent.length };\n};\n\nconst nestListItem = ({ editor, srcPath, destPath, node, type }) => {\n  const children = Array.isArray(node) ? node : [node];\n  Transforms.removeNodes(editor, { at: srcPath });\n  Transforms.insertNodes(editor, [{ type, children }], {\n    at: destPath\n  });\n};\n\nconst liftListItem = ({ editor, srcPath, destPath, unwrap = true }) => {\n  if (destPath) Transforms.moveNodes(editor, { at: srcPath, to: destPath });\n  if (unwrap) {\n    const targetPath = destPath ?? srcPath;\n    Transforms.unwrapNodes(editor, { at: targetPath });\n  }\n};\n\nconst handleInlineItemChildren = ({ editor, at, nodes }) => {\n  if (nodes)\n    return Transforms.insertNodes(\n      editor,\n      [{ type: \"list-sibling\", slateOnly: true, children: nodes }],\n      { at }\n    );\n  return Transforms.unwrapNodes(editor, {\n    at,\n    match: n => n.type === \"list-sibling\"\n  });\n};\n\nconst findListChild = iterator => {\n  const { value } = iterator.next();\n  if (!value) return [];\n  const [node, path] = value;\n  if (node.type === \"ul\" || node.type === \"ol\") return [node, path];\n  return findListChild(iterator);\n};\n\nexport const increaseIndent = editor => {\n  const [node, path] = getListItemNode(editor, editor.selection);\n  const [listNode, listNodePath] = getListNode(editor, path);\n\n  if (!node || !listNode) return;\n\n  const listType = listNode.type;\n  const index = [...path].pop();\n\n  const nodeStart = SlateEditor.start(editor, path);\n  const listStart = SlateEditor.start(editor, listNodePath);\n\n  // If this is the first element in a list, indent the entire (sub)list\n  if (Point.equals(nodeStart, listStart))\n    return SlateEditor.withoutNormalizing(editor, () => {\n      nestListItem({\n        editor,\n        srcPath: listNodePath,\n        destPath: listNodePath,\n        node: listNode,\n        type: listType\n      });\n      const { path: selectionPath, offset } = getIndentSelectionLocation(\n        editor,\n        [...listNodePath, 0, 0]\n      );\n      setSelectionAtPoint(editor, selectionPath, offset);\n    });\n\n  const prevItemPath = [...path.slice(0, -1), index - 1];\n  const [prevItem] = SlateEditor.node(editor, prevItemPath);\n\n  if (!prevItem) return;\n\n  const iterator = Node.children(editor, prevItemPath);\n  const [subListNode, subListPath] = findListChild(iterator);\n\n  if (subListNode) {\n    return Transforms.moveNodes(editor, {\n      at: path,\n      to: [...subListPath, subListNode.children.length]\n    });\n  }\n\n  SlateEditor.withoutNormalizing(editor, () => {\n    if (SlateEditor.hasBlocks(editor, prevItem)) {\n      const destPath = [...prevItemPath, prevItem.children.length];\n      nestListItem({\n        editor,\n        srcPath: path,\n        destPath,\n        node,\n        type: listType\n      });\n      const { path: selectionPath, offset } = getIndentSelectionLocation(\n        editor,\n        [...destPath, 0]\n      );\n      setSelectionAtPoint(editor, selectionPath, offset);\n      return;\n    }\n\n    handleInlineItemChildren({\n      editor,\n      at: [...prevItemPath, 0],\n      nodes: prevItem.children\n    });\n    const destPath = [...prevItemPath, 1];\n    nestListItem({\n      editor,\n      srcPath: path,\n      destPath,\n      node,\n      type: listType\n    });\n    const { path: selectionPath, offset } = getIndentSelectionLocation(editor, [\n      ...destPath,\n      0\n    ]);\n    setSelectionAtPoint(editor, selectionPath, offset);\n  });\n};\n\nexport const decreaseIndent = ({ editor, canUnwrapRoot }) => {\n  const [node, path] = getListItemNode(editor, editor.selection);\n  const [parentLi, parentPath] = getListItemNode(editor, path);\n  const [listNode, listNodePath] = getListNode(editor, path);\n  const listParent = Node.parent(editor, listNodePath);\n  const isWrappedList = listParent?.type === \"ul\" || listParent?.type === \"ol\";\n\n  if (!node) return;\n\n  if ((!listNode || !isWrappedList) && !parentLi) {\n    const format = rteElements.includes(listParent?.type)\n      ? listParent.type\n      : \"p\";\n\n    if (canUnwrapRoot) {\n      Transforms.setNodes(editor, { type: format }, { at: path });\n      return unwrapNode({ editor, format, path });\n    }\n    return null;\n  }\n\n  const nodeStart = SlateEditor.start(editor, path);\n  const listStart = SlateEditor.start(editor, listNodePath);\n\n  // If this is the first element in a list, unindent the entire (sub)list\n  if (Point.equals(nodeStart, listStart))\n    return SlateEditor.withoutNormalizing(editor, () => {\n      if (isWrappedList) {\n        return liftListItem({ editor, srcPath: listNodePath });\n      }\n      const destIndex = [...parentPath].pop() + 1;\n      const destPath = [...parentPath.slice(0, -1), destIndex];\n      liftListItem({ editor, srcPath: listNodePath, destPath });\n      handleInlineItemChildren({ editor, at: [...destPath.slice(0, -1), 0] });\n    });\n\n  if (!parentLi) return;\n\n  SlateEditor.withoutNormalizing(editor, () => {\n    const destIndex = [...parentPath].pop() + 1;\n    const destPath = [...parentPath.slice(0, -1), destIndex];\n    liftListItem({ editor, srcPath: path, destPath, unwrap: false });\n  });\n};\n","import { Editor, Range, Transforms, Element, Point, Node } from \"slate\";\nimport { rteElements, nestableElements } from \"../utils/elements\";\nimport { decreaseIndent } from \"../utils/slate/transforms/listIndents\";\nimport { getListItemNode } from \"../utils/slate/getters\";\n\n// The plugins here provide sane defaults for dealing with enter/delete given that we have nested html structure, in particular nested blocks, which isn't accounted for in the default slate implementation.\n\n/* eslint-disable no-param-reassign */\nconst withHtmlAwareBreaks = editor => {\n  const { insertBreak, deleteBackward } = editor;\n\n  editor.insertBreak = () => {\n    const { selection } = editor;\n    const isCollapsed = selection && Range.isCollapsed(selection);\n\n    // If the selection is a range, delete the content; this is default Slate behavior\n    if (!isCollapsed) {\n      Transforms.delete(editor);\n    }\n\n    /* eslint-disable no-unused-vars */\n    // Grab the node where the user hit enter\n    const [node, nodePath] = Editor.above(editor, selection);\n    // Grab the nearest block node to determine what to insert\n    const [block, blockPath] = Editor.above(editor, {\n      at: selection,\n      match: n => Editor.isBlock(editor, n) && !n.slateOnly\n    });\n    // Remove all attributes other than the type/tag and marks, so we don't copy id, classes, anything that can't be updated in the RTE\n    const {\n      children,\n      htmlAttrs,\n      slateOnly,\n      inline,\n      nodeName,\n      srcdoc,\n      htmlChildren,\n      ...next\n    } = block;\n    // Insert a paragraph if this node type isn't editable in the RTE; handle unwrapping the list item if we're on an empty li\n    if (\n      !rteElements.includes(next.type) &&\n      !nestableElements.includes(next.type)\n    )\n      next.type = \"p\";\n    if (\n      next.type === \"a\" ||\n      next.type === \"img\" ||\n      next.type === \"iframe\" ||\n      next.type === \"video\"\n    )\n      next.type = \"p\";\n    if (next.type === \"li\") {\n      const liIsEmpty = Editor.isEmpty(editor, block);\n      if (isCollapsed && liIsEmpty)\n        return decreaseIndent({ editor, canUnwrapRoot: true });\n      // Since the new element we're inserting is an element in an existing list, we'll keep the classname around in case indents are handled with classes\n      next.htmlAttrs = htmlAttrs?.class ? { class: htmlAttrs?.class } : {};\n    }\n\n    try {\n      Editor.withoutNormalizing(editor, () => {\n        Transforms.insertNodes(\n          editor,\n          { ...next, children: [{ text: \"\" }] },\n          { at: selection, select: true }\n        );\n      });\n    } catch (e) {\n      insertBreak();\n    }\n  };\n\n  // Check for nested empty inlines, again such as <p><span>my text</span></p>, and ensure that they are removed when all text content is deleted\n  const removeEmptyInline = (node, path) => {\n    const { selection } = editor;\n\n    const start = Editor.start(editor, path);\n    const textContent = Node.string(node);\n\n    // Using <= 1 rather than === 0 here is a choice; the result is that the inner span is removed when all its text content is, which is before the outer block wrapper, usually a paragraph, is deleted. This has the effect of cleaning up styles and other attributes, in case the user types new text in the pargraph node instead of deleting it. But as with all these choices, of course, the user could have wanted to keep those span styles around for the new text.\n    if (Point.isBefore(start, selection.anchor) && textContent.length <= 1) {\n      Transforms.unwrapNodes(editor, {\n        at: path,\n        match: n => Editor.isInline(editor, n)\n      });\n\n      const [inline, inlinePath] =\n        Editor.above(editor, {\n          match: n => n.type && Editor.isInline(editor, n)\n        }) ?? [];\n\n      if (inline) return removeEmptyInline(inline, inlinePath);\n    }\n  };\n\n  // If the parent block exists only for Slate normalization, remove it too.\n  const maybeUnwrapSlateOnlyNode = (node, path) => {\n    const { selection } = editor;\n    const start = Editor.start(editor, path);\n\n    if (\n      !Editor.isEditor(node) &&\n      node.slateOnly &&\n      Point.equals(selection.anchor, start)\n    ) {\n      Transforms.unwrapNodes(editor, { at: path, match: n => n.slateOnly });\n    }\n  };\n\n  editor.deleteBackward = (...args) => {\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [li] = getListItemNode(editor, editor.selection);\n      if (li) {\n        const liIsEmpty = Editor.isEmpty(editor, li);\n        if (liIsEmpty) return decreaseIndent({ editor, canUnwrapRoot: true });\n      }\n\n      const [inline, inlinePath] =\n        Editor.above(editor, {\n          match: n => n.type && Editor.isInline(editor, n)\n        }) ?? [];\n\n      if (inline) {\n        removeEmptyInline(inline, inlinePath);\n      }\n\n      const [nearestBlock, path] =\n        Editor.above(editor, {\n          match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n        }) ?? [];\n\n      maybeUnwrapSlateOnlyNode(nearestBlock, path);\n\n      const [blockToTransform, transformPath] = nearestBlock.slateOnly\n        ? Editor.above(editor, {\n            match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n          })\n        : [nearestBlock, path];\n\n      if (blockToTransform) {\n        const start = Editor.start(editor, transformPath);\n\n        if (\n          !Editor.isEditor(blockToTransform) &&\n          Element.isElement(blockToTransform) &&\n          blockToTransform.type !== \"p\" &&\n          Point.equals(selection.anchor, start)\n        ) {\n          // It's an RTE default / best practice to replace non-paragraph block nodes with a paragraph rather than removing them from the tree. This prevents other nodes from colliding in unwanted ways, such as when another block ends up in a table.\n          Transforms.setNodes(\n            editor,\n            { type: \"p\" },\n            { at: transformPath, select: true }\n          );\n\n          if (blockToTransform.type === \"li\") {\n            Transforms.unwrapNodes(editor, {\n              match: n =>\n                !Editor.isEditor(n) &&\n                Element.isElement(n) &&\n                (n.type === \"ul\" || n.type === \"ol\"),\n              split: true\n            });\n          }\n          return;\n        }\n      }\n    }\n    deleteBackward(...args);\n  };\n\n  return editor;\n};\n\nexport default withHtmlAwareBreaks;\n","import withVoids from \"./withVoids\";\nimport withInlines from \"./withInlines\";\nimport withImages from \"./withImages\";\nimport withShortcuts from \"./withShortcuts\";\nimport withHtmlAwareBreaks from \"./withHtmlAwareBreaks\";\n\nconst withPlugins = editor =>\n  withInlines(\n    withHtmlAwareBreaks(withShortcuts(withVoids(withImages(editor))))\n  );\n\nexport default withPlugins;\n\nexport { withVoids, withInlines, withImages, withShortcuts };\n","import { createContext, useContext } from \"react\";\n\nexport const HtmlBreadcrumbsContext = createContext([]);\n\nexport const useHtmlBreadcrumbs = () => {\n  const context = useContext(HtmlBreadcrumbsContext);\n\n  return context;\n};\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultFocusStyle,\n  formLabelPrimary,\n  respond\n} from \"theme/styles/mixins\";\nimport { rteElements, inlineNodes, markElements } from \"../../utils/elements\";\n\nexport const ButtonGroup = styled.div`\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  position: absolute;\n  top: 5px;\n  right: auto;\n  left: 5px;\n  color: var(--color-accent-primary);\n\n  ${({ $visible }) => $visible && `display: flex;`}\n  ${respond(`right: -60px; left: auto; top: -5px;`, 65)}\n`;\n\nexport const InteriorButton = styled.button`\n  ${buttonUnstyled}\n  width: 34px;\n  height: 34px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: var(--color-neutral-text-light);\n  background: var(--color-base-neutral90);\n  border-radius: 4px;\n  border: 1px solid var(--color);\n\n  &:hover {\n    color: ${({ $color }) =>\n      $color === \"red\"\n        ? `var(--color-notification-error-light)`\n        : `var(--color-accent-primary)`};\n    border-color: ${({ $color }) =>\n      $color === \"red\"\n        ? `var(--color-notification-error-light)`\n        : `var(--color-accent-primary)`};\n  }\n`;\n\nexport const Content = styled.img`\n  display: inline;\n  ${({ $selected }) => $selected && `${defaultFocusStyle} outline-offset: 1px;`}\n`;\nexport const ImageWrapper = styled.span`\n  display: inline-block;\n  width: max-content;\n  max-width: 100%;\n  position: relative;\n\n  &.responsive-iframe {\n    display: block;\n    width: 100%;\n    overflow: visible;\n  }\n`;\n\nexport const VoidOuter = styled.div`\n  & + & {\n    margin-block-start: 20px;\n  }\n`;\n\nexport const VoidInner = styled.div`\n  display: block;\n  margin-inline-start: -5%;\n  width: 110%;\n  padding-inline: 8%;\n  padding-block-end: 20px;\n  padding-block-start: 20px;\n  position: relative;\n  background-color: var(--drawer-bg-color);\n  box-shadow: 3px 3px 10px var(--color-base-neutral100);\n  border-radius: 4px;\n  border: 0;\n\n  .scheme-light & {\n    background-color: var(--color-base-neutral20);\n    box-shadow: 3px 3px 10px var(--color-base-neutral30);\n  }\n\n  ${({ $selected }) =>\n    $selected &&\n    `outline: solid 2px var(--disabled-control-color); outline-offset: 1px;`}\n`;\n\nexport const VoidLabel = styled.span`\n  ${formLabelPrimary}\n  font-size: 14px;\n  color: var(--color-base-yellow20);\n  display: inline-flex;\n  gap: 6px;\n  align-items: center;\n\n  .scheme-light & {\n    color: var(--color-base-violet75);\n  }\n\n  > svg {\n    margin-top: 1px;\n  }\n`;\n\nexport const HrOuter = styled.span`\n  display: inline-flex;\n  width: 100%;\n`;\n\nexport const HrInner = styled.span`\n  flex-grow: 1;\n  margin: 0;\n  width: 100%;\n`;\n\nexport const COLOR_MAP = {\n  green: {\n    light: \"var(--color-interaction-dark)\",\n    dark: \"var(--color-accent-primary)\"\n  },\n  blue: { light: \"var(--color-base-blue75)\", dark: \"var(--color-base-blue45)\" },\n  violet: {\n    dark: \"var(--color-base-violet45)\",\n    light: \"var(--color-base-violet75)\"\n  }\n};\n\nexport const ElementLabel = styled.span`\n  position: absolute;\n  display: inline-block;\n  left: -8px;\n  top: -26px;\n  font-size: 14px;\n  line-height: 1;\n  padding: 2px;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n  font-family: var(--font-family-heading);\n  font-weight: var(--font-weight-regular);\n  border: 0px solid;\n  border-bottom: 0;\n  white-space: nowrap;\n  text-indent: 0;\n  z-index: 10;\n  padding-inline: 4px;\n  padding-block-start: 2px;\n  padding-block-end: 4px;\n  text-decoration: none;\n  text-transform: none;\n  font-variant: none;\n\n  .scheme-dark & {\n    background: ${({ $color }) => COLOR_MAP[$color].dark};\n    color: var(--drawer-bg-color);\n  }\n\n  .scheme-light & {\n    background: ${({ $color }) => COLOR_MAP[$color].light};\n    color: var(--background-color);\n  }\n\n  &:hover {\n    z-index: 20;\n  }\n`;\n\nexport const EditableElementLabel = styled(ElementLabel)`\n  top: -35px;\n  padding-block-start: 4px;\n  display: flex;\n  align-items: center;\n\n  > span {\n    line-height: 1;\n  }\n`;\n\nexport const ClassInput = styled.input`\n  appearance: none;\n  background: rgba(255, 255, 255, 0.75);\n  border: none;\n  padding: 0;\n  height: 18px;\n  margin-inline-start: 3px;\n  width: 150px;\n\n  .scheme-light & {\n    background: rgba(0, 0, 0, 0.5);\n  }\n\n  &:focus-visible {\n    outline: 1px solid;\n  }\n`;\n\nexport const TagButtons = styled.div`\n  display: flex;\n  gap: 4px;\n  margin-inline-start: 8px;\n  margin-inline-end: 4px;\n`;\n\nexport const DeleteButton = styled.button`\n  ${buttonUnstyled}\n  display: flex;\n  align-items: center;\n  border-radius: 2px;\n  padding: 2px;\n\n  &:hover,\n  &:focus-visible {\n    color: var(--error-color);\n    background: var(--background-color);\n  }\n\n  &:disabled {\n    cursor: default;\n\n    &:hover {\n      background: none;\n      color: inherit;\n    }\n  }\n`;\n\nexport const LiftButton = styled(DeleteButton)`\n  &:hover,\n  &:focus-visible {\n    color: var(--hover-color);\n    background: var(--background-color);\n  }\n`;\n\nexport const getHtmlOutlineStyles = (nodeName, darkMode) => {\n  /* eslint-disable no-nested-ternary */\n  const color = rteElements.includes(nodeName)\n    ? \"green\"\n    : inlineNodes.includes(nodeName) || markElements.includes(nodeName)\n    ? \"blue\"\n    : \"violet\";\n\n  return {\n    outline: \"2px dotted\",\n    outlineColor: darkMode ? COLOR_MAP[color].dark : COLOR_MAP[color].light,\n    borderRadius: \"2px\",\n    borderTopLeftRadius: 0,\n    outlineOffset: \"6px\",\n    position: \"relative\"\n  };\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { rteElements, inlineNodes, markElements } from \"../../utils/elements\";\nimport { formatNodeLabel } from \"../../utils/slate/general\";\nimport { removeNode } from \"../../utils/slate/transforms/removeNode\";\nimport { unwrapNode } from \"../../utils/slate/transforms\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport debounce from \"lodash/debounce\";\nimport { useSlateStatic, ReactEditor } from \"slate-react\";\nimport { Transforms, Editor } from \"slate\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport * as Styled from \"./styles\";\n\nexport default function HtmlLabel({ visible, element }) {\n  const editor = useSlateStatic();\n  const inputRef = useRef(null);\n\n  const { t } = useTranslation();\n\n  const { editingCrumb: editing } = useHtmlBreadcrumbs();\n\n  useEffect(() => {\n    if (inputRef.current && editing) inputRef.current.focus();\n  }, [editing]);\n\n  if (!visible) return null;\n\n  /* eslint-disable no-nested-ternary */\n  const color = rteElements.includes(element.type)\n    ? \"green\"\n    : inlineNodes.includes(element.type) || markElements.includes(element.type)\n    ? \"blue\"\n    : \"violet\";\n\n  const path = !markElements.includes(element.type)\n    ? ReactEditor.findPath(editor, element)\n    : [];\n\n  const disableDelete =\n    path.length === 1 ||\n    (element.type === \"li\" && !Editor.isEmpty(editor, element));\n\n  const disableLift = path.length <= 2 || element.type === \"li\";\n\n  const updateClassName = e => {\n    e.persist();\n    const doUpdate = debounce(() => {\n      Transforms.setNodes(\n        editor,\n        {\n          ...element,\n          htmlAttrs: {\n            ...element.htmlAttrs,\n            class: e.target.value.replaceAll(\".\", \" \").trim()\n          }\n        },\n        { at: path, mode: \"highest\" }\n      );\n    }, 1000);\n    doUpdate(e);\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    removeNode(editor, path);\n  };\n\n  const tagAndId = element.htmlAttrs?.id\n    ? `${element.type}#${element.htmlAttrs.id}`\n    : element.type;\n  const formattedClass = element.htmlAttrs?.class?.trim().replaceAll(\" \", \".\");\n\n  return editing ? (\n    <Styled.EditableElementLabel contentEditable={false} $color={color}>\n      <span>{tagAndId}.</span>\n      <Styled.ClassInput\n        ref={inputRef}\n        defaultValue={formattedClass}\n        onChange={e => updateClassName(e)}\n      />\n      <Styled.TagButtons>\n        <Styled.LiftButton\n          onClick={e => {\n            e.preventDefault();\n            unwrapNode({ editor, format: element.type, path });\n          }}\n          aria-label={t(\"editor.controls.labels.lift\")}\n          disabled={disableLift}\n        >\n          <IconComposer icon=\"arrowUp16\" size={16} />\n        </Styled.LiftButton>\n        <Styled.DeleteButton\n          onClick={handleDelete}\n          aria-label={t(\"actions.delete\")}\n          disabled={disableDelete}\n        >\n          <IconComposer icon=\"delete24\" size={16} />\n        </Styled.DeleteButton>\n      </Styled.TagButtons>\n    </Styled.EditableElementLabel>\n  ) : (\n    <Styled.ElementLabel $color={color}>\n      {formatNodeLabel(element)}\n    </Styled.ElementLabel>\n  );\n}\n","import React from \"react\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\n\nexport default function SlateLeaf({ attributes, children, leaf, darkMode }) {\n  const { selectedCrumb } = useHtmlBreadcrumbs();\n  const showHtml = selectedCrumb === \"all\";\n\n  let leafChildren = children;\n\n  if (leaf.bold) {\n    leafChildren = (\n      <strong\n        style={showHtml ? getHtmlOutlineStyles(\"strong\", darkMode) : undefined}\n      >\n        {leafChildren}\n        <HtmlLabel element={{ type: \"strong\" }} visible={showHtml} />\n      </strong>\n    );\n  }\n\n  if (leaf.italic) {\n    leafChildren = (\n      <em style={showHtml ? getHtmlOutlineStyles(\"em\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"em\" }} visible={showHtml} />\n      </em>\n    );\n  }\n\n  if (leaf.i) {\n    leafChildren = (\n      <i style={showHtml ? getHtmlOutlineStyles(\"i\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"i\" }} visible={showHtml} />\n      </i>\n    );\n  }\n\n  if (leaf.underline) {\n    leafChildren = (\n      <u style={showHtml ? getHtmlOutlineStyles(\"u\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"u\" }} visible={showHtml} />\n      </u>\n    );\n  }\n\n  if (leaf.strikethrough) {\n    leafChildren = (\n      <s style={showHtml ? getHtmlOutlineStyles(\"s\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"s\" }} visible={showHtml} />\n      </s>\n    );\n  }\n\n  if (leaf.del) {\n    leafChildren = (\n      <del style={showHtml ? getHtmlOutlineStyles(\"del\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"del\" }} visible={showHtml} />\n      </del>\n    );\n  }\n\n  if (leaf.code) {\n    leafChildren = (\n      <code\n        style={showHtml ? getHtmlOutlineStyles(\"code\", darkMode) : undefined}\n      >\n        {leafChildren}\n        <HtmlLabel element={{ type: \"code\" }} visible={showHtml} />\n      </code>\n    );\n  }\n\n  return <span {...attributes}>{leafChildren}</span>;\n}\n","import { wrapLink, unwrapLink } from \"../utils/slate/transforms\";\nimport { getCommonBlock, isLinkActive } from \"../utils/slate/getters\";\nimport { isValidUrl } from \"../utils/helpers\";\nimport { Transforms, Range, Node } from \"slate\";\n\nexport const handleLinkHotkey = editor => {\n  if (isLinkActive(editor)) return unwrapLink(editor);\n\n  const { selection } = editor;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n\n  // If the selection is a range of text, check to see if that range is a url; if so, turn it into a link.\n  if (!isCollapsed) {\n    const [block] = getCommonBlock(editor);\n    const textContent = Node.string(block);\n    if (isValidUrl(textContent)) return wrapLink(editor, textContent);\n  }\n\n  // Otherwise, open the link insert modal\n  const button = document.getElementsByName(\"link-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const handleImageHotkey = e => {\n  if (e) e.preventDefault();\n  const button = document.getElementsByName(\"img-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const handleIframeHotkey = e => {\n  if (e) e.preventDefault();\n  const button = document.getElementsByName(\"iframe-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const insertSoftBreak = editor => {\n  Transforms.insertText(editor, \"\\n\");\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Utility from \"global/components/utility\";\nimport {\n  useSlateStatic,\n  ReactEditor,\n  useFocused,\n  useSelected\n} from \"slate-react\";\nimport { Transforms, Editor } from \"slate\";\nimport { handleImageHotkey, handleIframeHotkey } from \"../../hotkeys/handlers\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport * as Styled from \"./styles\";\n\nexport default function ImageRenderer({\n  element,\n  children,\n  attributes,\n  as,\n  showHtml,\n  darkMode\n}) {\n  const editor = useSlateStatic();\n  const focused = useFocused();\n  const selected = useSelected();\n  const path = ReactEditor.findPath(editor, element);\n\n  const onRemove = e => {\n    e.preventDefault();\n\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.removeNodes(editor, { at: path });\n      Transforms.insertNodes(\n        editor,\n        { type: \"p\", children: [{ text: \"\" }] },\n        { select: true }\n      );\n    });\n  };\n\n  const wrapperClassName = classNames({\n    \"responsive-iframe\": as === \"iframe\" || as === \"video\"\n  });\n\n  const { htmlAttrs } = element ?? {};\n  const className = htmlAttrs?.class ?? undefined;\n  const epubType = htmlAttrs?.[\"data-epub-type\"] || undefined;\n\n  return (\n    <div\n      className={htmlAttrs?.inline ? \"inline-block\" : undefined}\n      {...attributes}\n      style={showHtml ? getHtmlOutlineStyles(\"a\", darkMode) : undefined}\n    >\n      {children}\n      <span contentEditable={false}>\n        <Styled.ImageWrapper\n          className={wrapperClassName}\n          data-epub-type={epubType}\n        >\n          <Styled.Content\n            as={as ?? \"img\"}\n            src={htmlAttrs.src}\n            alt={!as ? htmlAttrs.alt : undefined}\n            title={as ? htmlAttrs.title : undefined}\n            controls={as === \"video\" ? true : undefined}\n            $selected={selected && focused}\n            className={className}\n            width={htmlAttrs?.width}\n            height={htmlAttrs?.height}\n          />\n          <Styled.ButtonGroup $visible={selected}>\n            <Styled.InteriorButton\n              onClick={\n                as === \"iframe\" || as === \"video\"\n                  ? handleIframeHotkey\n                  : handleImageHotkey\n              }\n            >\n              <Utility.IconComposer icon=\"annotate24\" size={24} />\n            </Styled.InteriorButton>\n            <Styled.InteriorButton $color=\"red\" onClick={onRemove}>\n              <Utility.IconComposer icon=\"delete24\" size={24} />\n            </Styled.InteriorButton>\n          </Styled.ButtonGroup>\n        </Styled.ImageWrapper>\n      </span>\n      <HtmlLabel element={element} visible={showHtml} />\n    </div>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport { ReactEditor, useFocused, useSelected } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport * as Styled from \"./styles\";\n\nexport default function VoidRenderer({\n  element,\n  children,\n  attributes,\n  theme,\n  darkMode,\n  showHtml\n}) {\n  const focused = useFocused();\n  const selected = useSelected();\n\n  const { srcdoc } = element ?? {};\n\n  const ref = useRef();\n\n  useEffect(() => {\n    if (ref.current && !ref.current.shadowRoot) {\n      const shadow = ref.current.attachShadow({ mode: \"open\" });\n      const container = document.createElement(\"div\");\n      const containerClass = `manifold-text-section ${\n        darkMode ? \"scheme-dark\" : \"scheme-light\"\n      }`;\n      container.setAttribute(\"class\", containerClass);\n      const style = document.createElement(\"style\");\n      style.textContent = theme;\n      shadow.appendChild(style);\n      container.innerHTML = srcdoc;\n      shadow.appendChild(container);\n    }\n    if (ref.current?.shadowRoot) {\n      const shadow = ref.current.shadowRoot;\n      const container = shadow.childNodes[1];\n      const containerClass = `manifold-text-section ${\n        darkMode ? \"scheme-dark\" : \"scheme-light\"\n      }`;\n      container.setAttribute(\"class\", containerClass);\n    }\n  }, [srcdoc, theme, darkMode]);\n\n  return (\n    <Styled.VoidOuter {...attributes}>\n      {children}\n      <Styled.VoidInner\n        contentEditable={false}\n        $selected={selected && focused}\n        style={showHtml ? getHtmlOutlineStyles(\"div\", darkMode) : undefined}\n      >\n        <Styled.VoidLabel>\n          <Utility.IconComposer\n            svgProps={{ style: { flexShrink: 0 } }}\n            icon=\"code24\"\n          />\n          <span>Preview only. Switch to HTML mode to edit this block:</span>\n        </Styled.VoidLabel>\n        <div ref={ref} />\n        <HtmlLabel element={element} visible={showHtml} />\n      </Styled.VoidInner>\n    </Styled.VoidOuter>\n  );\n}\n","import React from \"react\";\nimport Image from \"./Image\";\nimport Void from \"./Void\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport {\n  rteElements,\n  renderedElements,\n  markElements,\n  nestableElements\n} from \"../../utils/elements\";\nimport classNames from \"classnames\";\nimport * as Styled from \"./styles\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport { useSlateStatic, ReactEditor } from \"slate-react\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\n\nexport default function SlateElement({\n  attributes,\n  children,\n  element,\n  theme,\n  darkMode\n}) {\n  const className = element.htmlAttrs?.class || undefined;\n  const epubType = element.htmlAttrs?.[\"data-epub-type\"] || undefined;\n\n  const editor = useSlateStatic();\n  const { id } = ReactEditor.findKey(editor, element);\n  const { selectedCrumb } = useHtmlBreadcrumbs();\n  const showHtml =\n    (selectedCrumb === id || selectedCrumb === \"all\") && !element.slateOnly;\n\n  if (element.type === \"br\") {\n    return (\n      <p\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"p\", darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </p>\n    );\n  }\n  if (element.type === \"wbr\") {\n    return <></>;\n  }\n  if (element.type === \"hr\") {\n    return (\n      <Styled.HrOuter contentEditable={false} {...attributes}>\n        {children}\n        <Styled.HrInner>\n          <hr\n            className={className}\n            data-epub-type={epubType}\n            style={showHtml ? getHtmlOutlineStyles(\"hr\", darkMode) : undefined}\n          />\n        </Styled.HrInner>\n        <HtmlLabel element={element} visible={showHtml} />\n      </Styled.HrOuter>\n    );\n  }\n  if (element.type === \"void\") {\n    return (\n      <Void\n        attributes={attributes}\n        element={element}\n        theme={theme}\n        darkMode={darkMode}\n        showHtml={showHtml}\n      >\n        {children}\n      </Void>\n    );\n  }\n  if (element.type === \"img\") {\n    return (\n      <Image\n        attributes={attributes}\n        element={element}\n        showHtml={showHtml}\n        darkMode={darkMode}\n      >\n        {children}\n      </Image>\n    );\n  }\n  if (element.type === \"iframe\" || element.type === \"video\") {\n    return (\n      <Image\n        as={element.type}\n        attributes={attributes}\n        element={element}\n        showHtml={showHtml}\n        darkMode={darkMode}\n      >\n        {children}\n      </Image>\n    );\n  }\n  if (element.type === \"a\") {\n    return (\n      <a\n        className={className}\n        data-epub-type={epubType}\n        href={element.htmlAttrs?.href}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"a\", darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </a>\n    );\n  }\n  if (element.type === \"pre\") {\n    return (\n      <pre\n        className={className}\n        data-epub-type={epubType}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"pre\", darkMode) : undefined}\n      >\n        <code>{children}</code>\n        <HtmlLabel element={element} visible={showHtml} />\n      </pre>\n    );\n  }\n  if (element.type === \"div\" && element.inline) {\n    return (\n      <div\n        className={classNames(\"inline-block\", className)}\n        data-epub-type={epubType}\n        {...attributes}\n      >\n        {children}\n      </div>\n    );\n  }\n  if (\n    rteElements.includes(element.type) ||\n    renderedElements.includes(element.type) ||\n    markElements.includes(element.type) ||\n    nestableElements.includes(element.type) ||\n    element.type === \"span\"\n  ) {\n    const Tag = element.type === \"list-sibling\" ? \"span\" : element.type;\n    return (\n      <Tag\n        className={className}\n        data-epub-type={epubType}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(Tag, darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </Tag>\n    );\n  }\n\n  return null;\n}\n","import {\n  increaseIndent,\n  decreaseIndent\n} from \"../utils/slate/transforms/listIndents\";\nimport { toggleMark, toggleOrWrapNode } from \"../utils/slate/transforms\";\nimport { getListItemNode } from \"../utils/slate/getters\";\nimport {\n  handleLinkHotkey,\n  handleImageHotkey,\n  handleIframeHotkey,\n  insertSoftBreak\n} from \"./handlers\";\n\nexport const captureHotKeys = (e, editor) => {\n  if (e.key === \"Enter\") {\n    if (e.shiftKey) {\n      e.preventDefault();\n      return insertSoftBreak(editor);\n    }\n    return;\n  }\n\n  if (e.key === \"Tab\") {\n    // Check that the selection is a list item before preventing default\n    const [node] = getListItemNode(editor, editor.selection);\n    if (!node) return;\n\n    e.preventDefault();\n\n    if (e.shiftKey) {\n      return decreaseIndent({ editor });\n    }\n    return increaseIndent(editor);\n  }\n\n  if (!e.metaKey && !e.ctrlKey) return;\n\n  /* eslint-disable default-case */\n  // Prevent default only if we match a case so we don't block undo, paste, etc.\n  if ((e.metaKey && e.altKey) || (e.ctrlKey && e.shiftKey)) {\n    switch (e.keyCode) {\n      case 48:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"p\");\n      case 49:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h1\");\n      case 50:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h2\");\n      case 51:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h3\");\n      case 52:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h4\");\n      case 53:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h5\");\n      case 54:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h6\");\n      case 55:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"ol\");\n      case 56:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"ul\");\n      case 57:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"blockquote\");\n      case 69:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"pre\");\n    }\n  }\n\n  if (e.shiftKey && e.key === \"s\") {\n    e.preventDefault();\n    return toggleMark(editor, \"strikethrough\");\n  }\n\n  switch (e.key) {\n    case \"b\":\n      e.preventDefault();\n      return toggleMark(editor, \"bold\");\n    case \"i\":\n      e.preventDefault();\n      return toggleMark(editor, \"italic\");\n    case \"u\":\n      e.preventDefault();\n      return toggleMark(editor, \"underline\");\n    case \"e\":\n      e.preventDefault();\n      return toggleMark(editor, \"code\");\n    case \"k\":\n      e.preventDefault();\n      return handleLinkHotkey(editor);\n    case \"g\":\n      e.preventDefault();\n      return handleImageHotkey();\n    case \"m\":\n      e.preventDefault();\n      return handleIframeHotkey();\n  }\n};\n","import React from \"react\";\nimport { config } from \"ace-builds\";\nimport Editor from \"react-ace\";\n\nimport \"ace-builds/src-noconflict/mode-css\";\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/mode-html\";\n\nimport \"../../CodeArea/darkTheme\";\nimport \"../../CodeArea/lightTheme\";\n\nimport cssWorkerUrl from \"ace-builds/src-noconflict/worker-css\";\nimport htmlWorkerUrl from \"ace-builds/src-noconflict/worker-html\";\nimport jsWorkerUrl from \"ace-builds/src-noconflict/worker-javascript\";\n\nconfig.setModuleUrl(\"ace/mode/css_worker\", cssWorkerUrl);\nconfig.setModuleUrl(\"ace/mode/html_worker\", htmlWorkerUrl);\nconfig.setModuleUrl(\"ace/mode/javascript_worker\", jsWorkerUrl);\n\nexport default function HtmlEditor(props) {\n  const { aceRef, nextRef, prevRef, darkMode, ...rest } = props;\n  return (\n    <Editor\n      ref={aceRef}\n      theme={darkMode ? \"idle_fingers\" : \"kuroir\"}\n      editorProps={{ $blockScrolling: true }}\n      width=\"100%\"\n      minLines={40}\n      maxLines={10000}\n      wrapEnabled\n      showPrintMargin={false}\n      onLoad={editor => {\n        editor.once(\"change\", () => {\n          editor.session.getUndoManager().reset();\n        });\n        editor.commands.removeCommand(\"find\");\n        editor.renderer.setPadding(24, 24);\n        editor.renderer.setScrollMargin(24, 24);\n        const input = editor.textInput.getElement();\n        input.addEventListener(\"keydown\", e => {\n          if (e.key === \"ArrowDown\") {\n            const scroller = document.querySelector(\".top.pad-xl\");\n            scroller.scrollBy(0, 16);\n          }\n          if (e.key === \"ArrowUp\") {\n            const scroller = document.querySelector(\".top.pad-xl\");\n            scroller.scrollBy(0, -16);\n          }\n        });\n      }}\n      onFocus={() => {\n        if (aceRef.current) aceRef.current.editor.gotoLine(0, 0, true);\n      }}\n      editorOptions={{ enableAutoIndent: true }}\n      commands={[\n        {\n          name: \"tab\",\n          bindKey: { win: \"Tab\", mac: \"Tab\" },\n          exec: () => {\n            nextRef.current.focus();\n          }\n        },\n        {\n          name: \"shiftTab\",\n          bindKey: { win: \"Shift+Tab\", mac: \"Shift+Tab\" },\n          exec: () => {\n            prevRef.current.focus();\n          }\n        }\n      ]}\n      {...rest}\n    />\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { headingTertiary } from \"theme/styles/mixins\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  align-items: center;\n  padding: 0 4px 8px 4px;\n`;\n\nexport const Label = styled.span`\n  ${headingTertiary}\n  font-style: normal;\n  font-weight: 400;\n  font-size: 17px;\n  color: var(--input-color);\n`;\n\nexport const Header = styled.div`\n  padding-block-end: 6px;\n\n  span {\n    display: inline-block;\n  }\n\n  span + span {\n    margin-block-start: 12px;\n  }\n`;\n\nexport const Description = styled.span`\n  min-width: 175px;\n`;\n\nexport const HotKey = styled.div``;\n\nexport const HotKeyLabel = styled.span`\n  whitespace: nowrap;\n`;\n\nexport const TextPlaceholder = styled.span`\n  whitespace: nowrap;\n  font-style: normal;\n  display: inline-block;\n`;\n\nexport const Key = styled.span`\n  display: inline-flex;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  padding-block-start: 6px;\n  padding-block-end: 10px;\n  padding-inline: 10px;\n  background-color: var(--background-color);\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-weight-semibold);\n  border-radius: 4px;\n  font-style: normal;\n  line-height: 1;\n`;\n\nexport const Keys = styled.div`\n  display: flex;\n  gap: 8px;\n  flex-wrap: no-wrap;\n  margin-block-start: 8px;\n  align-items: center;\n`;\n","import React, { Fragment } from \"react\";\nimport * as Styled from \"./styles\";\n\nexport default function TooltipContent({ label, description, hotkeys = [] }) {\n  return (\n    <Styled.Wrapper>\n      <Styled.Header>\n        <Styled.Label>{label}</Styled.Label>\n        {description && <Styled.Description>{description}</Styled.Description>}\n      </Styled.Header>\n      {hotkeys.map(hk => (\n        <Styled.HotKey key={hk.label}>\n          <Styled.HotKeyLabel>{hk.label}</Styled.HotKeyLabel>\n          <Styled.Keys>\n            {hk.keys.map((k, i) => (\n              /* eslint-disable react/no-array-index-key */\n              <Fragment key={`${k}_${i}`}>\n                <Styled.Key>{k}</Styled.Key>\n                {hk.inline && i === 0 && (\n                  <Styled.TextPlaceholder>[text]</Styled.TextPlaceholder>\n                )}\n              </Fragment>\n            ))}\n          </Styled.Keys>\n        </Styled.HotKey>\n      ))}\n    </Styled.Wrapper>\n  );\n}\n","export const hotkeys = {\n  p: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"0\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"0\"] }\n  ],\n  h1: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"1\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"1\"] },\n    { label: \"Markdown\", keys: [\"#\", \"Space\"] }\n  ],\n  h2: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"2\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"2\"] },\n    { label: \"Markdown\", keys: [\"##\", \"Space\"] }\n  ],\n  h3: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"3\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"3\"] },\n    { label: \"Markdown\", keys: [\"###\", \"Space\"] }\n  ],\n  h4: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"4\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"4\"] },\n    { label: \"Markdown\", keys: [\"####\", \"Space\"] }\n  ],\n  h5: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"5\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"5\"] },\n    { label: \"Markdown\", keys: [\"#####\", \"Space\"] }\n  ],\n  h6: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"6\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"6\"] },\n    { label: \"Markdown\", keys: [\"######\", \"Space\"] }\n  ],\n  ol: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"7\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"7\"] },\n    { label: \"Markdown\", keys: [\"1.\", \"Space\"] }\n  ],\n  ul: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"8\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"8\"] },\n    { label: \"Markdown\", keys: [\"-\", \"Space\"] }\n  ],\n  blockquote: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"9\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"9\"] },\n    { label: \"Markdown\", keys: [\">\", \"Space\"] }\n  ],\n  link: [\n    { label: \"Mac\", keys: [\"Cmd\", \"K\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"K\"] }\n  ],\n  pre: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"E\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"E\"] },\n    { label: \"Markdown\", keys: [\"```\", \"Space\"] }\n  ],\n  italic: [\n    { label: \"Mac\", keys: [\"Cmd\", \"I\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"I\"] },\n    { label: \"Markdown\", keys: [\"*\", \"*\"], inline: true }\n  ],\n  strikethrough: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Shift\", \"S\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"S\"] },\n    { label: \"Markdown\", keys: [\"~\", \"~\"], inline: true }\n  ],\n  bold: [\n    { label: \"Mac\", keys: [\"Cmd\", \"B\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"B\"] },\n    { label: \"Markdown\", keys: [\"**\", \"**\"], inline: true }\n  ],\n  underline: [\n    { label: \"Mac\", keys: [\"Cmd\", \"U\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"U\"] }\n  ],\n  code: [\n    { label: \"Mac\", keys: [\"Cmd\", \"E\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"E\"] },\n    { label: \"Markdown\", keys: [\"`\", \"`\"], inline: true }\n  ],\n  undo: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Z\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Z\"] }\n  ],\n  redo: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Shift\", \"Z\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Y\"] }\n  ],\n  img: [\n    { label: \"Mac\", keys: [\"Cmd\", \"G\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"G\"] }\n  ],\n  iframe: [\n    { label: \"Mac\", keys: [\"Cmd\", \"M\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"M\"] }\n  ]\n};\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultTransitionProps,\n  formLabelPrimary,\n  defaultFocusStyle\n} from \"theme/styles/mixins\";\nimport IconComposer from \"global/components/utility/IconComposer\";\n\nexport const Button = styled.button`\n  ${buttonUnstyled}\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n  width: 28px;\n  background-color: transparent;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps};\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-weight-semibold);\n  border-radius: 4px;\n  margin-inline-start: 3px;\n\n  &:hover {\n    background-color: var(--background-color);\n    color: inherit;\n  }\n\n  &[data-active=\"true\"] {\n    color: var(--drawer-bg-color);\n    background-color: var(--color-accent-primary);\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SelectTooltipWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nexport const TooltipIcon = styled.div`\n  position: relative;\n  width: max-content;\n  margin-block-start: -3px;\n  margin-inline-start: 5px;\n  cursor: pointer;\n`;\n\nexport const SelectWrapper = styled.div`\n  position: relative;\n  display: inline-block;\n`;\n\nexport const Select = styled.select`\n  ${buttonUnstyled}\n  font-family: var(--font-family-sans);\n  line-height: 22px;\n  font-size: 14px;\n  width: 120px;\n  height: 28px;\n  display: inline-block;\n  border-radius: 4px;\n  padding-block-start: 2px;\n  padding-block-end: 4px;\n  padding-inline-start: 8px;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps};\n\n  .backend & {\n    color: var(--color);\n\n    &[data-active=\"true\"] {\n      color: var(--drawer-bg-color);\n      background-color: ${({ $color }) => $color};\n    }\n\n    &:hover {\n      background-color: var(--background-color);\n      color: var(--color);\n    }\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SpanButton = styled(Select)`\n  width: auto;\n  padding-inline: 8px;\n\n  .backend & {\n    &[data-active=\"true\"] {\n      color: var(--drawer-bg-color);\n      background-color: var(--color-base-blue45);\n    }\n\n    &:hover {\n      background-color: var(--background-color);\n      color: var(--color);\n    }\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SelectIcon = styled(IconComposer)`\n  position: absolute;\n  top: 25%;\n  right: 4px;\n  pointer-events: none;\n\n  select[data-active=\"true\"]:not(:hover) + & {\n    color: var(--drawer-bg-color);\n  }\n`;\n\nexport const StylesButton = styled.button`\n  ${buttonUnstyled}\n  ${formLabelPrimary}\n  padding-inline-start: 12px;\n  padding-inline-end: 16px;\n  padding-block: 6px;\n  background-color: var(--box-bg-color);\n  border-radius: 4px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-inline-start: auto;\n\n  svg {\n    margin-top: 3px;\n  }\n\n  &:hover {\n    background-color: var(--color-accent-primary);\n    color: var(--box-bg-color);\n  }\n`;\n","import React, { forwardRef } from \"react\";\nimport { Editor } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleOrWrapNode, removeNode } from \"../../../utils/slate/transforms\";\nimport {\n  isElementActive,\n  getNearestOfType\n} from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst BlockButton = ({ format, icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  const [active] = isElementActive(editor, format);\n\n  const onClick = e => {\n    e.preventDefault();\n\n    if (!selection) return;\n\n    if (active) {\n      const { path } = getNearestOfType(editor, [format]);\n\n      if (format === \"pre\") Editor.removeMark(editor, \"code\", true);\n\n      return removeNode(editor, path);\n    }\n\n    toggleOrWrapNode(editor, format);\n  };\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${format}`)}\n          hotkeys={hotkeys[format]}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.format\", { format })}\n        data-active={active}\n        onClick={onClick}\n        tabIndex={-1}\n      >\n        {icon && <Utility.IconComposer icon={icon} size={size} />}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(BlockButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleMark } from \"../../../utils/slate/transforms\";\nimport { isMarkActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst MarkButton = ({ format, label, icon, isFirst, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${format}`)}\n          hotkeys={hotkeys[format]}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.format\", { format })}\n        data-active={isMarkActive(editor, format)}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleMark(editor, format);\n        }}\n        tabIndex={isFirst ? 0 : -1}\n      >\n        {icon && <Utility.IconComposer icon={icon} />}\n        {label && label}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(MarkButton);\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultHoverStyle,\n  utilityPrimary,\n  fluidScale\n} from \"theme/styles/mixins\";\nimport Utility from \"global/components/utility\";\nimport Dialog from \"global/components/dialog\";\n\nexport const Form = styled.form`\n  > * + * {\n    margin-block-start: 50px;\n  }\n`;\n\nexport const CloseButton = styled.button`\n  ${buttonUnstyled}\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n  font-size: 17px;\n  cursor: pointer;\n\n  ${({ $primary }) =>\n    $primary &&\n    `\n    cursor: pointer;\n\n    &:hover {\n      ${defaultHoverStyle}\n      outline: 0;\n    }\n\n    &:focus-visible {\n      color: var(--focus-color);\n    }\n  `}\n`;\n\nconst CLOSE_ICON_SIZE = \"24px\";\n\nexport const CloseText = styled.span`\n  ${utilityPrimary}\n  margin-right: 6px;\n  font-size: 12px;\n  font-weight: var(--font-weight-semibold);\n  line-height: ${CLOSE_ICON_SIZE};\n  letter-spacing: 0.125em;\n`;\n\nexport const CloseIcon = styled(Utility.IconComposer)`\n  width: ${CLOSE_ICON_SIZE};\n  height: ${CLOSE_ICON_SIZE};\n`;\n\nexport const ModalHeader = styled.header`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-block-start: 0;\n`;\n\nexport const HeaderIcon = styled(Utility.IconComposer)`\n  color: var(--color-accent-primary);\n  margin-top: 2px;\n`;\n\nexport const Heading = styled.span`\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-top: -2px;\n\n  h2 {\n    margin-top: -6px;\n  }\n`;\n\nexport const ModalBody = styled.div`\n  width: 100%;\n`;\n\nexport const Modal = styled(Dialog.Wrapper)`\n  max-width: 600px;\n  padding-block: ${fluidScale(\"50px\", \"30px\")};\n  padding-inline: ${fluidScale(\"60px\", \"40px\")};\n`;\n\nexport const ButtonGroup = styled.div`\n  display: flex;\n  gap: 24px;\n  margin-top: 64px;\n`;\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertLinkForm({ urlRef, textRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.text}\n        ref={textRef}\n        name=\"text\"\n        label={t(\"editor.forms.link_text_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.url}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.link_url_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { useUID } from \"react-uid\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertModal(props) {\n  const { form, resolve, reject, heading, icon, resolveLabel } = props;\n  const uid = useUID();\n  const { t } = useTranslation();\n\n  const handleResolveClick = e => {\n    e.preventDefault();\n    resolve(e);\n  };\n\n  const handleRejectClick = e => {\n    e.preventDefault();\n    reject(e);\n  };\n\n  const buttonClasses = \"button-secondary button-secondary--outlined\";\n\n  return (\n    <Styled.Modal\n      maxWidth={600}\n      showCloseButton={false}\n      closeOnOverlayClick={false}\n      labelledBy={t(\"editor.forms.labelled_by_uid\", { uid })}\n      describedBy={t(\"editor.forms.described_by_uid\", { uid })}\n      onEsc={props.reject}\n    >\n      <>\n        <Styled.ModalHeader className=\"dialog__header\">\n          <Styled.Heading>\n            <Styled.HeaderIcon icon={icon} />\n            <h2 id={t(\"editor.forms.labelled_by_uid\", { uid })}>{heading}</h2>\n          </Styled.Heading>\n          <Styled.CloseButton onClick={handleRejectClick} tabIndex={0}>\n            <Styled.CloseText>{t(\"actions.close\")}</Styled.CloseText>\n            <Styled.CloseIcon icon=\"close24\" size={24} />\n          </Styled.CloseButton>\n        </Styled.ModalHeader>\n        <Styled.ModalBody className=\"dialog__body\">\n          {form}\n          <Styled.ButtonGroup>\n            {typeof resolve === \"function\" && (\n              <button\n                onClick={handleResolveClick}\n                className={buttonClasses}\n                data-id=\"accept\"\n              >\n                <span>{resolveLabel}</span>\n              </button>\n            )}\n            <button\n              className={classNames(buttonClasses, \"button-secondary--dull\")}\n              onClick={handleRejectClick}\n              data-id=\"reject\"\n            >\n              <span>{t(\"actions.cancel\")}</span>\n            </button>\n          </Styled.ButtonGroup>\n        </Styled.ModalBody>\n      </>\n    </Styled.Modal>\n  );\n}\n\nInsertModal.displayName = \"ContentEditor.Insert.Modal\";\n\nInsertModal.propTypes = {\n  resolve: PropTypes.func,\n  reject: PropTypes.func.isRequired,\n  heading: PropTypes.string,\n  options: PropTypes.object,\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const onModalClose = (editor, selection) => close => {\n  close();\n  const selectionToUse = editor.selection ?? selection;\n\n  // I don't know exactly why this works, but there's some relevant, though potentially outdated, discussion here: https://github.com/ianstormtaylor/slate/issues/2097. The issue is that the focus() call fails unless it happens after the focus trap closes, and when a user hits cancel and we're not performing any node transformations after closing the modal, that doesn't happen without a timeout.\n  setTimeout(() => {\n    Transforms.select(editor, selectionToUse);\n    ReactEditor.focus(editor);\n  }, 200);\n};\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor, Range } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport InsertLinkForm from \"./insert/LinkForm\";\nimport { useConfirmation } from \"hooks\";\nimport Modal from \"./insert/Modal\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport { wrapLink, unwrapLink } from \"../../../utils/slate/transforms\";\nimport { isLinkActive } from \"../../../utils/slate/getters\";\n\nimport * as Styled from \"./styles\";\n\nconst LinkButton = ({ icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const active = isLinkActive(editor);\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const textRef = useRef(null);\n  const { t } = useTranslation();\n\n  const addLink = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    const text = textRef?.current?.inputElement?.value;\n    if (!url) return;\n    close();\n    wrapLink(editor, url, text);\n  };\n\n  const getLinkData = e => {\n    e.preventDefault();\n    const { selection } = editor ?? {};\n    if (!selection) return;\n\n    if (active) return unwrapLink(editor);\n\n    const heading = t(\"editor.forms.link_insert_heading\");\n\n    const isCollapsed = Range.isCollapsed(selection);\n    const defaultValues = !isCollapsed\n      ? { text: Editor.string(editor, selection) }\n      : {};\n\n    const form = (\n      <InsertLinkForm\n        urlRef={urlRef}\n        textRef={textRef}\n        defaultValues={defaultValues}\n      />\n    );\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addLink,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.link`)}\n          hotkeys={hotkeys.link}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        name=\"link-modal-trigger\"\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.link\")}\n        data-active={active}\n        onClick={getLinkData}\n        tabIndex={-1}\n      >\n        {icon && <Utility.IconComposer icon={icon} size={size} />}\n        {confirmation && <Modal {...confirmation} />}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(LinkButton);\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertImageForm({ urlRef, altRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.src}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.image_url_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.alt}\n        ref={altRef}\n        name=\"alt\"\n        label={t(\"editor.forms.alt_text_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor, Element as SlateElement } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport Modal from \"./insert/Modal\";\nimport { useConfirmation } from \"hooks\";\nimport InsertImageForm from \"./insert/ImageForm\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport { insertImage } from \"../../../utils/slate/transforms\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport * as Styled from \"./styles\";\n\nconst ImageButton = ({ icon, size, ...rest }, ref) => {\n  const { t } = useTranslation();\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const altRef = useRef(null);\n\n  const addImage = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    if (!url) return;\n    const alt = altRef?.current?.inputElement?.value;\n    close();\n    return insertImage(editor, url, alt);\n  };\n\n  const updateImage = attrs => close => {\n    const url = urlRef?.current?.inputElement?.value ?? attrs.src;\n    if (!url) return;\n    const alt = altRef?.current?.inputElement?.value;\n    close();\n    Transforms.setNodes(editor, {\n      htmlAttrs: { ...attrs, src: url, alt }\n    });\n    ReactEditor.focus(editor);\n  };\n\n  const getImageData = e => {\n    e.preventDefault();\n    if (!selection) return;\n\n    const heading = t(\"editor.forms.image_insert_heading\");\n    const form = <InsertImageForm urlRef={urlRef} altRef={altRef} />;\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addImage,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const updateImageData = e => {\n    e.preventDefault();\n\n    const [[image]] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: n =>\n          !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === \"img\"\n      })\n    );\n\n    const attrs = image?.htmlAttrs ?? {};\n    const defaultValues = {\n      src: attrs.src,\n      alt: attrs.alt\n    };\n\n    const heading = t(\"editor.forms.image_update_heading\");\n    const form = (\n      <InsertImageForm\n        defaultValues={defaultValues}\n        urlRef={urlRef}\n        altRef={altRef}\n      />\n    );\n\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: updateImage(attrs),\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.update\")\n      });\n  };\n\n  const [active] = isElementActive(editor, \"img\");\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.img`)}\n          description={t(`editor.tooltips.descriptions.img`)}\n          hotkeys={hotkeys.img}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <div>\n        <Styled.Button\n          name=\"img-modal-trigger\"\n          ref={ref}\n          {...rest}\n          aria-label={t(\"editor.controls.labels.image\")}\n          data-active={active}\n          onClick={active ? updateImageData : getImageData}\n          tabIndex={-1}\n        >\n          {icon && <Utility.IconComposer icon={icon} size={size} />}\n        </Styled.Button>\n        {confirmation && <Modal {...confirmation} />}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(ImageButton);\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertIframeForm({ urlRef, titleRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.src}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.iframe_url_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.title}\n        ref={titleRef}\n        name=\"title\"\n        label={t(\"editor.forms.title_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor, Element as SlateElement } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Modal from \"./insert/Modal\";\nimport InsertIframeForm from \"./insert/IframeForm\";\nimport { useConfirmation } from \"hooks\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport { insertIframe } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst IframeButton = ({ icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const titleRef = useRef(null);\n  const { t } = useTranslation();\n\n  const addIframe = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    if (!url) return;\n    const title = titleRef?.current?.inputElement?.value;\n    if (!url) return;\n    close();\n    return insertIframe(editor, url, title);\n  };\n\n  const updateIframe = attrs => close => {\n    const url = urlRef?.current?.inputElement?.value ?? attrs.src;\n    if (!url) return;\n    const title = titleRef?.current?.inputElement?.value;\n    const type = /api\\/proxy\\//.test(url) ? \"video\" : \"iframe\";\n    close();\n    Transforms.setNodes(editor, {\n      type,\n      htmlAttrs: { ...attrs, src: url, title }\n    });\n    ReactEditor.focus(editor);\n  };\n\n  const getIframeData = e => {\n    e.preventDefault();\n    if (!selection) return;\n\n    const heading = t(\"editor.forms.iframe_insert_heading\");\n    const form = <InsertIframeForm urlRef={urlRef} titleRef={titleRef} />;\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addIframe,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const updateIframeData = e => {\n    e.preventDefault();\n\n    const [[iframe]] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: n =>\n          (!Editor.isEditor(n) &&\n            SlateElement.isElement(n) &&\n            n.type === \"iframe\") ||\n          n.type === \"video\"\n      })\n    );\n\n    const attrs = iframe?.htmlAttrs ?? {};\n    const defaultValues = {\n      src: attrs.src,\n      title: attrs.title\n    };\n\n    const heading = t(\"editor.forms.iframe_update_heading\");\n    const form = (\n      <InsertIframeForm\n        defaultValues={defaultValues}\n        urlRef={urlRef}\n        titleRef={titleRef}\n      />\n    );\n\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: updateIframe(attrs),\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const [activeIframe] = isElementActive(editor, \"iframe\");\n  const [activeVideo] = isElementActive(editor, \"video\");\n\n  const active = activeIframe || activeVideo;\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.iframe`)}\n          description={t(`editor.tooltips.descriptions.iframe`)}\n          hotkeys={hotkeys.iframe}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <div>\n        <Styled.Button\n          name=\"iframe-modal-trigger\"\n          ref={ref}\n          {...rest}\n          aria-label={t(\"editor.controls.labels.iframe\")}\n          data-active={active}\n          onClick={active ? updateIframeData : getIframeData}\n          tabIndex={-1}\n        >\n          {icon && <Utility.IconComposer icon={icon} size={size} />}\n        </Styled.Button>\n        {confirmation && <Modal {...confirmation} />}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(IframeButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport {\n  isTextBlockActive,\n  isElementActive\n} from \"../../../utils/slate/getters\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport * as Styled from \"./styles\";\n\nconst getActiveBlock = (editor, opts, name) => {\n  const isActive = name === \"textBlock\" ? isTextBlockActive : isElementActive;\n  const active = opts\n    .map(o => [o, isActive(editor, o)].flat())\n    .filter(o => o[1])\n    .sort((a, b) => a[2].length - b[2].length)\n    .pop();\n\n  // I can't decide whether it's better to show as active the lowest block or show nothing as active if the selection is nested in multiple blocks.\n  // const activeCount = opts.map(o => isActive(editor, o)).filter(Boolean).length;\n  // if (activeCount !== 1) return \"\";\n\n  return active ? active[0] : \"\";\n};\n\nconst BlockSelect = ({ options, name, color, ariaLabel, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  const renderOptions = options.map(o => (\n    <option key={o.format} value={o.format} hidden={!o.format}>\n      {o.label}\n    </option>\n  ));\n\n  const active = getActiveBlock(\n    editor,\n    options.map(o => o.format),\n    name\n  );\n\n  return (\n    <Styled.SelectTooltipWrapper>\n      <Styled.SelectWrapper>\n        <Styled.Select\n          ref={ref}\n          {...rest}\n          aria-label={ariaLabel}\n          data-active={active !== \"\"}\n          $color={color ?? \"var(--color-accent-primary)\"}\n          value={active}\n          onChange={e => {\n            e.preventDefault();\n            if (!selection) return;\n            toggleOrWrapNode(editor, e.target.value);\n          }}\n          tabIndex={-1}\n        >\n          {renderOptions}\n        </Styled.Select>\n        <Styled.SelectIcon icon=\"disclosureDown24\" size={16} />\n      </Styled.SelectWrapper>\n      <Tooltip\n        content={\n          active &&\n          (name === \"textBlock\" ||\n            active === \"blockquote\" ||\n            active === \"pre\") ? (\n            <TooltipContent\n              label={t(`editor.tooltips.labels.${active}`)}\n              hotkeys={hotkeys[active]}\n            />\n          ) : (\n            <TooltipContent\n              label={t(`editor.tooltips.labels.${name}`)}\n              description={t(`editor.tooltips.descriptions.${name}`)}\n            />\n          )\n        }\n        xOffset=\"0\"\n        yOffset=\"43px\"\n        delay={0}\n      >\n        <Styled.TooltipIcon>\n          <IconComposer icon=\"info16\" size={14} />\n        </Styled.TooltipIcon>\n      </Tooltip>\n    </Styled.SelectTooltipWrapper>\n  );\n};\n\nexport default forwardRef(BlockSelect);\n","import React, { forwardRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport * as Styled from \"./styles\";\n\nconst FunctionButton = (\n  { label, icon, onClick, isFirst, tooltip, ...rest },\n  ref\n) => {\n  const { t } = useTranslation();\n\n  const Button = label ? Styled.StylesButton : Styled.Button;\n  const renderButton = (\n    <Button\n      ref={ref}\n      {...rest}\n      aria-label={t(\"editor.controls.labels.format\", { format: tooltip })}\n      onClick={onClick}\n      tabIndex={isFirst ? 0 : -1}\n    >\n      {icon && <Utility.IconComposer icon={icon} size={24} />}\n      {label && label}\n    </Button>\n  );\n\n  return tooltip ? (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${tooltip}`)}\n          hotkeys={hotkeys[tooltip]}\n        />\n      }\n      xOffset=\"-50px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      {renderButton}\n    </Tooltip>\n  ) : (\n    renderButton\n  );\n};\n\nexport default forwardRef(FunctionButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst SpanButton = ({ format, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.span`)}\n          description={t(`editor.tooltips.descriptions.span`)}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.SpanButton\n        as=\"button\"\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.span\")}\n        data-active={isElementActive(editor, format)[0]}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleOrWrapNode(editor, format);\n        }}\n        tabIndex={-1}\n      >\n        Span\n      </Styled.SpanButton>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(SpanButton);\n","import styled from \"@emotion/styled\";\nimport {\n  respond,\n  buttonUnstyled,\n  defaultFocusStyle\n} from \"theme/styles/mixins\";\nimport { COLOR_MAP } from \"../renderers/styles\";\nimport IconComposer from \"global/components/utility/IconComposer\";\n\nexport const Toolbar = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  row-gap: 5px;\n  align-items: center;\n  column-gap: 3px;\n  border: 1px solid var(--TextArea-border-color);\n  border-bottom-color: var(--textarea-border-color);\n  padding-inline: 1.25em;\n  padding-block: 1em;\n  background-color: var(--drawer-bg-color);\n  border-top-left-radius: var(--box-border-radius);\n  border-top-right-radius: var(--box-border-radius);\n  color: var(--color);\n  min-height: 73px;\n`;\n\nexport const ToolGroup = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: center;\n  gap: 8px;\n\n  ${respond(`gap: 3px;`, 30)}\n`;\n\nexport const ToolbarSpacer = styled.div`\n  margin-inline: 12px;\n  border-left: 1px solid var(--background-color);\n  height: 24px;\n`;\n\nexport const ToggleBar = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  row-gap: 12px;\n  justify-content: space-between;\n  margin-block-end: 32px;\n`;\n\nexport const BreadcrumbsBar = styled.div`\n  border-left: 1px solid;\n  border-right: 1px solid;\n  background: ${({ $darkMode }) =>\n    $darkMode ? `var(--TextArea-border-color)` : `var(--color-base-neutral30)`};\n  border-color: var(--TextArea-border-color);\n  color: var(--drawer-bg-color);\n  padding-inline: 1.5em;\n  padding-block-start: 3px;\n  padding-block-end: 6px;\n  min-height: 30px;\n  font-family: var(--font-family-heading);\n  display: flex;\n  align-items: center;\n  gap: 20px;\n`;\n\nexport const Breadcrumbs = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  column-gap: 8px;\n`;\n\nexport const Breadcrumb = styled.button`\n  ${buttonUnstyled}\n  white-space: nowrap;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  max-width: 300px;\n  flex-shrink: 0;\n  min-height: 24px;\n\n  &:hover {\n    color: ${({ $color, $darkMode }) =>\n      $darkMode ? COLOR_MAP[$color].dark : COLOR_MAP[$color].light};\n  }\n\n  &:focus-visible {\n    color: ${({ $color, $darkMode }) =>\n      $darkMode ? COLOR_MAP[$color].dark : COLOR_MAP[$color].light};\n    outline: 0;\n  }\n`;\n\nexport const Spacer = styled(IconComposer)`\n  transform: rotate(-90deg);\n  margin-block-start: 4px;\n  flex-shrink: 0;\n`;\n\nexport const ShowHideButton = styled.button`\n  ${buttonUnstyled}\n  display: flex;\n  align-items: center;\n  margin-inline-start: auto;\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n","import React, { Fragment, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  MarkButton,\n  BlockButton,\n  LinkButton,\n  ImageButton,\n  IframeButton,\n  BlockSelect,\n  FunctionButton,\n  SpanButton\n} from \"./buttons\";\nimport {\n  MenuBar as ReakitMenuBar,\n  MenuItem as ReakitMenuItem,\n  useMenuBarState\n} from \"reakit/Menu\";\nimport { Node } from \"slate\";\nimport { useSlateStatic, useSlateSelection } from \"slate-react\";\nimport { getAncestors } from \"../../utils/slate/getters\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport { rteElements, inlineNodes } from \"../../utils/elements\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport isEmpty from \"lodash/isEmpty\";\nimport * as Styled from \"./styles\";\n\nexport default function ToolbarRTE({ onClickUndo, onClickRedo, darkMode }) {\n  const { t } = useTranslation();\n\n  const menu = useMenuBarState({\n    orientation: \"horizontal\",\n    loop: true,\n    wrap: \"horizontal\"\n  });\n\n  const editor = useSlateStatic();\n  const selection = useSlateSelection();\n  const path = selection?.anchor?.path;\n\n  let ancestors = {};\n  if (path) {\n    const iterator = Node.ancestors(editor, selection?.anchor.path);\n    ancestors = getAncestors(editor, iterator);\n  }\n\n  const {\n    setSelectedCrumb,\n    selectedCrumb,\n    editingCrumb,\n    setEditingCrumb\n  } = useHtmlBreadcrumbs();\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (editingCrumb) {\n      setEditingCrumb(false);\n      setSelectedCrumb(null);\n    }\n  }, [editor.selection]);\n\n  const onToggleHtmlOutlines = useCallback(\n    e => {\n      e.preventDefault();\n\n      const val = selectedCrumb === \"all\" ? null : \"all\";\n      setSelectedCrumb(val);\n    },\n    [selectedCrumb, setSelectedCrumb]\n  );\n\n  const handleHoverFocus = useCallback(\n    a => {\n      if (!editingCrumb) setSelectedCrumb(a);\n    },\n    [editingCrumb]\n  );\n\n  const clearHoverFocus = useCallback(() => {\n    if (!editingCrumb) setSelectedCrumb(null);\n  }, [editingCrumb]);\n\n  return (\n    <>\n      <ReakitMenuBar\n        as={Styled.Toolbar}\n        aria-label={t(\"editor.controls.labels.toolbar_rte\")}\n        {...menu}\n      >\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={FunctionButton}\n            icon=\"undo24\"\n            onClick={onClickUndo}\n            tooltip=\"undo\"\n            isFirst\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={FunctionButton}\n            icon=\"redo24\"\n            onClick={onClickRedo}\n            tooltip=\"redo\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockSelect}\n            name=\"container\"\n            ariaLabel={t(\"editor.controls.labels.layout_block_select\")}\n            options={[\n              { format: \"div\", label: t(\"editor.tooltips.labels.div\") },\n              { format: \"header\", label: t(\"editor.tooltips.labels.header\") },\n              { format: \"footer\", label: t(\"editor.tooltips.labels.footer\") },\n              { format: \"section\", label: t(\"editor.tooltips.labels.section\") },\n              { format: \"article\", label: t(\"editor.tooltips.labels.article\") },\n              {\n                format: \"blockquote\",\n                label: t(\"editor.tooltips.labels.blockquote\")\n              },\n              { format: \"pre\", label: t(\"editor.tooltips.labels.pre\") },\n              { format: \"figure\", label: t(\"editor.tooltips.labels.figure\") },\n              {\n                format: \"figcaption\",\n                label: t(\"editor.tooltips.labels.figcaption\")\n              },\n              {\n                format: \"\",\n                label: t(\n                  \"editor.controls.labels.layout_block_select_placeholder\"\n                )\n              }\n            ]}\n            color=\"var(--color-base-violet45)\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockSelect}\n            name=\"textBlock\"\n            ariaLabel={t(\"editor.controls.labels.text_block_select\")}\n            options={[\n              { format: \"p\", label: t(\"editor.tooltips.labels.p\") },\n              { format: \"h1\", label: t(\"editor.tooltips.labels.h1\") },\n              { format: \"h2\", label: t(\"editor.tooltips.labels.h2\") },\n              { format: \"h3\", label: t(\"editor.tooltips.labels.h3\") },\n              { format: \"h4\", label: t(\"editor.tooltips.labels.h4\") },\n              { format: \"h5\", label: t(\"editor.tooltips.labels.h5\") },\n              { format: \"h6\", label: t(\"editor.tooltips.labels.h6\") },\n              {\n                format: \"\",\n                label: t(\"editor.controls.labels.text_block_select_placeholder\")\n              }\n            ]}\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem as={SpanButton} format=\"span\" {...menu} />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"bold24\"\n            format=\"bold\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"italic24\"\n            format=\"italic\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"underline24\"\n            format=\"underline\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"strikethrough24\"\n            format=\"strikethrough\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"code24\"\n            format=\"code\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"orderedList24\"\n            format=\"ol\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"unorderedList24\"\n            format=\"ul\"\n            {...menu}\n          />\n          {/* <ReakitMenuItem\n            as={BlockButton}\n            icon=\"blockQuote24\"\n            format=\"blockquote\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"codeBlock24\"\n            format=\"pre\"\n            {...menu}\n          /> */}\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem as={LinkButton} icon=\"RTELink24\" {...menu} />\n          <ReakitMenuItem as={ImageButton} icon=\"RTEImage24\" {...menu} />\n          <ReakitMenuItem as={IframeButton} icon=\"iframe24\" {...menu} />\n        </Styled.ToolGroup>\n      </ReakitMenuBar>\n      <Styled.BreadcrumbsBar $darkMode={darkMode}>\n        <Styled.Breadcrumbs>\n          {!isEmpty(ancestors) &&\n            Object.keys(ancestors)\n              .sort(\n                (a, b) => ancestors[a].path.length - ancestors[b].path.length\n              )\n              .map((a, i) => {\n                /* eslint-disable no-nested-ternary */\n                const tag = ancestors[a].label.split(\".\")[0].split(\"#\")[0];\n                const color = rteElements.includes(tag)\n                  ? \"green\"\n                  : inlineNodes.includes(tag)\n                  ? \"blue\"\n                  : \"violet\";\n\n                return (\n                  <Fragment key={a}>\n                    <Styled.Breadcrumb\n                      $color={color}\n                      $darkMode={darkMode}\n                      onMouseEnter={() => handleHoverFocus(a)}\n                      onMouseLeave={clearHoverFocus}\n                      onFocus={() => handleHoverFocus(a)}\n                      onBlur={clearHoverFocus}\n                      onClick={e => {\n                        e.preventDefault();\n                        setSelectedCrumb(a);\n                        setEditingCrumb(true);\n                      }}\n                    >\n                      {ancestors[a].label}\n                    </Styled.Breadcrumb>\n                    {i < Object.keys(ancestors).length - 1 && (\n                      <Styled.Spacer icon=\"disclosureDown16\" size={16} />\n                    )}\n                  </Fragment>\n                );\n              })}\n        </Styled.Breadcrumbs>\n        <Styled.ShowHideButton\n          onClick={onToggleHtmlOutlines}\n          aria-label={\n            selectedCrumb === \"all\"\n              ? t(\"editor.controls.labels.hide_html\")\n              : t(\"editor.controls.labels.show_html\")\n          }\n        >\n          <IconComposer icon=\"eyeball24\" size={24} />\n        </Styled.ShowHideButton>\n      </Styled.BreadcrumbsBar>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { FunctionButton } from \"./buttons\";\nimport {\n  MenuBar as ReakitMenuBar,\n  MenuItem as ReakitMenuItem,\n  useMenuBarState\n} from \"reakit/Menu\";\nimport * as Styled from \"./styles\";\n\nexport default function ToolbarHTML({\n  onClickUndo,\n  onClickRedo,\n  toggleStyles,\n  cssVisible,\n  controlsRef\n}) {\n  const { t } = useTranslation();\n  const menu = useMenuBarState({\n    orientation: \"horizontal\",\n    loop: true,\n    wrap: \"horizontal\"\n  });\n  return (\n    <ReakitMenuBar\n      as={Styled.Toolbar}\n      aria-label={t(\"editor.controls.labels.toolbar_html\")}\n      {...menu}\n    >\n      <ReakitMenuItem\n        ref={controlsRef}\n        as={FunctionButton}\n        icon=\"undo24\"\n        onClick={onClickUndo}\n        isFirst\n        {...menu}\n      />\n      <ReakitMenuItem\n        as={FunctionButton}\n        icon=\"redo24\"\n        onClick={onClickRedo}\n        {...menu}\n      />\n      <ReakitMenuItem\n        as={FunctionButton}\n        label={\n          cssVisible\n            ? t(\"editor.controls.labels.hide_styles\")\n            : t(\"editor.controls.labels.show_styles\")\n        }\n        icon={cssVisible ? \"eyeClosed32\" : \"eyeOpen32\"}\n        onClick={toggleStyles}\n        {...menu}\n      />\n    </ReakitMenuBar>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  utilityPrimary,\n  defaultTransitionProps,\n  respond\n} from \"theme/styles/mixins\";\n\nexport const Wrapper = styled.div`\n  ${buttonUnstyled}\n  ${utilityPrimary}\n  display: inline-flex;\n  border: 1px solid;\n  border-radius: 16px;\n  color: var(--color-accent-primary);\n  width: 100%;\n\n  ${respond(`width: auto;`, 60)};\n`;\n\nexport const Button = styled.button`\n  ${buttonUnstyled}\n  ${utilityPrimary}\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding-inline: ${({ $padding }) => $padding};\n  font-size: 14px;\n  font-weight: var(--font-weight-medium);\n  text-decoration: none;\n  text-transform: none;\n  letter-spacing: 0;\n  border-top-left-radius: 14px;\n  border-bottom-left-radius: 14px;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps},\n    border-color ${defaultTransitionProps};\n  width: 50%;\n\n  ${respond(`width: auto;`, 60)}\n\n  ${({ $active }) =>\n    $active\n      ? `\n      color: var(--color-neutral-text-extra-dark);\n      background-color: var(--hover-color);\n      border-color: var(--hover-color);\n\n      &:hover {\n        color: var(--color-neutral-text-extra-dark);\n      }\n\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }`\n      : `\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }\n\n      &:hover {\n        color: inherit;\n        background-color: inherit;\n        border-color: inherit;\n      }\n      `}\n\n  span {\n    padding-top: 7px;\n    padding-bottom: 9px;\n  }\n\n  svg {\n    width: 24px;\n    height: 24px;\n    padding-bottom: 2px;\n    margin: 0;\n  }\n\n  * + & {\n    border-left: 1px solid;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-top-right-radius: 14px;\n    border-bottom-right-radius: 14px;\n  }\n`;\n\nexport const MobileLabel = styled.span`\n  ${respond(`display: none;`, 40)};\n`;\n\nexport const Label = styled.span`\n  ${MobileLabel} + & {\n    display: none;\n\n    ${respond(`display: inline;`, 40)};\n  }\n`;\n","import React from \"react\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport * as Styled from \"./styles\";\n\nexport default function Toggle({ options, padding = \"20px\" }) {\n  const [left, right] = options;\n\n  return (\n    <Styled.Wrapper>\n      <Styled.Button\n        $active={left.active}\n        $padding={padding}\n        onClick={left.onClick}\n      >\n        <IconComposer\n          icon={left.icon || \"code16\"}\n          size={left.iconSize || 16}\n          className=\"button-icon-secondary__icon button-icon-secondary__icon--large\"\n        />\n        {left.mobileLabel && (\n          <Styled.MobileLabel>{left.mobileLabel}</Styled.MobileLabel>\n        )}\n        <Styled.Label>{left.label}</Styled.Label>\n      </Styled.Button>\n      <Styled.Button\n        $active={right.active}\n        $padding={padding}\n        onClick={right.onClick}\n      >\n        <IconComposer\n          icon={right.icon || \"code16\"}\n          size={right.iconSize || 16}\n          className=\"button-icon-secondary__icon button-icon-secondary__icon--large\"\n        />\n        {right.mobileLabel && (\n          <Styled.MobileLabel>{right.mobileLabel}</Styled.MobileLabel>\n        )}\n        <Styled.Label>{right.label}</Styled.Label>\n      </Styled.Button>\n    </Styled.Wrapper>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Toggle from \"./Toggle\";\nimport * as Styled from \"./styles\";\n\nexport default function ToggleBar({\n  htmlMode,\n  onClickEditorToggle,\n  darkMode,\n  onClickDarkModeToggle\n}) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.ToggleBar>\n      <Toggle\n        options={[\n          {\n            label: t(\"editor.controls.toggles.html_label\"),\n            mobileLabel: t(\"editor.controls.toggles.html_label_mobile\"),\n            icon: \"editorHTML24\",\n            active: htmlMode,\n            onClick: onClickEditorToggle(true)\n          },\n          {\n            label: t(\"editor.controls.toggles.rte_label\"),\n            mobileLabel: t(\"editor.controls.toggles.rte_label_mobile\"),\n            icon: \"editorRTE24\",\n            active: !htmlMode,\n            onClick: onClickEditorToggle(false)\n          }\n        ]}\n      />\n      <Toggle\n        options={[\n          {\n            label: t(\"editor.controls.toggles.dark_mode_label\"),\n            icon: \"darkMode16\",\n            iconSize: 12,\n            active: darkMode,\n            onClick: onClickDarkModeToggle(true)\n          },\n          {\n            label: t(\"editor.controls.toggles.light_mode_label\"),\n            icon: \"lightMode16\",\n            iconSize: 12,\n            active: !darkMode,\n            onClick: onClickDarkModeToggle(false)\n          }\n        ]}\n        padding=\"16px\"\n      />\n    </Styled.ToggleBar>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { defaultTransitionProps } from \"theme/styles/mixins\";\nimport { Editable as BaseEditable } from \"slate-react\";\nimport InputError from \"../../InputError\";\n\nexport const Editor = styled.div`\n  width: 100%;\n  resize: vertical;\n  outline: none;\n  transition: border-color ${defaultTransitionProps};\n  position: relative;\n  border-radius: var(--box-border-radius);\n\n  &:focus-visible {\n    border-color: var(--TextArea-focus-color);\n  }\n`;\n\nexport const EditorSecondary = styled(Editor)`\n  --TextArea-border-color: var(--textarea-border-color);\n  --TextArea-focus-color: var(--highlight-color);\n\n  font-family: var(--input-font-family);\n  background-color: var(--input-bg-color);\n  border-radius: var(--box-border-radius);\n\n  &::placeholder {\n    color: var(--color-neutral-ui-light);\n  }\n\n  &.error {\n    --TextArea-border-color: var(--error-color);\n  }\n`;\n\nexport const EditableWrapper = styled.div`\n  min-height: 700px;\n  border: 1px solid var(--TextArea-border-color);\n  border-top: 0;\n  border-bottom-left-radius: var(--box-border-radius);\n  border-bottom-right-radius: var(--box-border-radius);\n  background-color: var(--background-color);\n  overflow: hidden;\n  overflow-x: auto;\n\n  .ace_editor {\n    border-bottom-left-radius: 6px;\n    border-bottom-right-radius: 6px;\n    border: 0;\n    overflow: visible;\n  }\n\n  .ace_gutter {\n    min-height: 699px !important;\n    overflow: visible;\n    border-bottom-left-radius: var(--box-border-radius);\n  }\n\n  .ace_scroller {\n    min-height: 699px !important;\n    overflow: visible;\n    border-bottom-right-radius: var(--box-border-radius);\n  }\n\n  .ace_gutter-cell:last-of-type {\n    border-bottom-left-radius: var(--box-border-radius);\n  }\n\n  ${({ $cssVisible }) =>\n    $cssVisible &&\n    `\n    .ace_cursor {\n      display: none;\n    }\n  `}\n`;\n\nexport const Editable = styled(BaseEditable)`\n  max-width: 850px;\n  margin: auto;\n  padding-block: 4em;\n  padding-inline: var(--container-padding-inline-fluid);\n\n  &:focus-visible {\n    outline: none;\n  }\n\n  *[data-slate-placeholder] {\n    top: auto !important;\n  }\n`;\n\nexport const Controls = styled.div`\n  position: sticky;\n  top: -80px;\n  z-index: 200;\n  background-color: var(--drawer-bg-color);\n  padding-top: 30px;\n`;\n\nexport const HTMLError = styled(InputError)`\n  margin-block-end: 20px;\n\n  > span {\n    margin: 0;\n  }\n`;\n","import React from \"react\";\nimport { ToolbarRTE, ToolbarHTML, ToggleBar } from \"./controls\";\nimport * as Styled from \"./styles\";\n\nexport default function EditorControls({\n  htmlMode,\n  cssVisible,\n  darkMode,\n  onClickEditorToggle,\n  onClickDarkModeToggle,\n  onClickRedo,\n  onClickUndo,\n  toggleStyles,\n  errors,\n  controlsRef\n}) {\n  return (\n    <Styled.Controls id=\"editor-controls\">\n      <ToggleBar\n        htmlMode={htmlMode}\n        darkMode={darkMode}\n        onClickEditorToggle={onClickEditorToggle}\n        onClickDarkModeToggle={onClickDarkModeToggle}\n      />\n      {!!errors.length && <Styled.HTMLError errors={errors} />}\n      {htmlMode ? (\n        <ToolbarHTML\n          onClickUndo={onClickUndo}\n          onClickRedo={onClickRedo}\n          toggleStyles={toggleStyles}\n          cssVisible={cssVisible}\n          controlsRef={controlsRef}\n        />\n      ) : (\n        <ToolbarRTE\n          onClickUndo={onClickUndo}\n          onClickRedo={onClickRedo}\n          darkMode={darkMode}\n        />\n      )}\n    </Styled.Controls>\n  );\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport classNames from \"classnames\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor as SlateEditor } from \"slate\";\nimport { withReact, ReactEditor, useSlate } from \"slate-react\";\nimport { HistoryEditor } from \"slate-history\";\nimport Leaf from \"./renderers/Leaf\";\nimport Element from \"./renderers/Element\";\nimport { captureHotKeys } from \"../hotkeys\";\nimport { serializeToHtml, serializeToSlate } from \"../serializers\";\nimport { clearSlate } from \"../utils/slate/general\";\nimport HtmlEditor from \"./HtmlEditor\";\nimport Controls from \"./EditorControls\";\nimport { formatHtml } from \"../utils/helpers\";\nimport * as Styled from \"./styles\";\n\nexport default function Editor({\n  localHtml,\n  localSlate,\n  setLocalHtml,\n  onChangeHtml,\n  setLocalSlate,\n  stylesheets,\n  hasErrors,\n  setHasErrors,\n  warnErrors,\n  setWarnErrors,\n  nextRef,\n  htmlMode,\n  toggleHtmlMode\n}) {\n  const editor = useSlate();\n  const aceRef = useRef();\n  const controlsRef = useRef();\n\n  const [showCss, toggleCss] = useState(false);\n  const [darkMode, setDarkMode] = useState(true);\n\n  const { t } = useTranslation();\n\n  // Since the editor overflows the visible area and we scroll the whole drawer, we have to manually handle scroll when arrow keys are used to move the cursor out of view.\n  useEffect(() => {\n    const active = document.activeElement;\n    if (active?.id === \"content-editable\" && editor.selection && !htmlMode) {\n      const [node] = ReactEditor.toDOMPoint(editor, editor.selection.focus);\n      const rect = node.parentElement.getBoundingClientRect();\n      const buttons = document.getElementById(\"editor-button-overlay\");\n      const controls = document.getElementById(\"editor-controls\");\n      const buttonsRect = buttons.getBoundingClientRect();\n      const controlsRect = controls.getBoundingClientRect();\n      const isInView =\n        rect.bottom < buttonsRect.top && rect.y > controlsRect.bottom;\n      if (!isInView) {\n        node.parentElement.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n    }\n  }, [editor, editor.selection, htmlMode]);\n\n  const theme = stylesheets?.map(s => s?.attributes.styles).join(\"\\n\");\n\n  const renderElement = useCallback(\n    props => <Element {...props} theme={theme} darkMode={darkMode} />,\n    [theme, darkMode]\n  );\n\n  const renderLeaf = useCallback(\n    props => <Leaf {...props} darkMode={darkMode} />,\n    [darkMode]\n  );\n\n  const toggleEditorView = () => {\n    if (htmlMode) {\n      const json = serializeToSlate(localHtml);\n      setLocalSlate(json);\n      clearSlate(editor);\n      Transforms.insertNodes(editor, json);\n      Transforms.select(editor, {\n        anchor: SlateEditor.start(editor, [0]),\n        focus: SlateEditor.start(editor, [0])\n      });\n      return toggleHtmlMode(false);\n    }\n\n    const html = formatHtml(serializeToHtml(localSlate));\n    setLocalHtml(html);\n    toggleCss(false);\n    return toggleHtmlMode(true);\n  };\n\n  const onClickToggle = val => e => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (hasErrors) {\n      setWarnErrors(\"switch\");\n      return;\n    }\n    if (val && htmlMode) return;\n    if (!val && !htmlMode) return;\n    toggleEditorView();\n  };\n\n  const onValidateHtml = messages => {\n    const errorFound = messages.find(msg => msg.type === \"error\");\n    if (!errorFound) {\n      setHasErrors(false);\n      return setWarnErrors(false);\n    }\n    setHasErrors(true);\n  };\n\n  const htmlProps = {\n    onChange: onChangeHtml,\n    value: localHtml,\n    onValidate: onValidateHtml,\n    mode: \"html\",\n    aceRef,\n    nextRef,\n    prevRef: controlsRef,\n    darkMode\n  };\n\n  const cssProps = {\n    value: theme,\n    mode: \"css\",\n    readOnly: true,\n    onValidate: () => {},\n    aceRef,\n    nextRef,\n    prevRef: controlsRef,\n    darkMode\n  };\n\n  const codeAreaProps = showCss ? cssProps : htmlProps;\n\n  const toggleStyles = e => {\n    e.preventDefault();\n    toggleCss(!showCss);\n  };\n\n  const onClickUndo = e => {\n    e.preventDefault();\n    if (!htmlMode) return HistoryEditor.undo(editor);\n    aceRef.current.editor.undo();\n  };\n\n  const onClickRedo = e => {\n    e.preventDefault();\n    if (!htmlMode) return HistoryEditor.redo(editor);\n    aceRef.current.editor.redo();\n  };\n\n  const wrapperClasses = classNames(\n    \"manifold-text-section text-section font-size-2\",\n    {\n      \"scheme-dark\": darkMode,\n      \"scheme-light\": !darkMode\n    }\n  );\n\n  const onClickDarkModeToggle = val => e => {\n    e.preventDefault();\n    setDarkMode(val);\n  };\n\n  /* eslint-disable no-nested-ternary */\n  const errors = warnErrors\n    ? Array.isArray(hasErrors)\n      ? hasErrors\n      : [\n          {\n            source: { pointer: \"/data/attributes/body\" },\n            detail: t(`errors.invalid_html_${warnErrors}`)\n          }\n        ]\n    : [];\n\n  return (\n    <>\n      <Controls\n        htmlMode={htmlMode}\n        darkMode={darkMode}\n        onClickEditorToggle={onClickToggle}\n        onClickDarkModeToggle={onClickDarkModeToggle}\n        onClickUndo={onClickUndo}\n        onClickRedo={onClickRedo}\n        toggleStyles={toggleStyles}\n        cssVisible={showCss}\n        errors={errors}\n        controlsRef={controlsRef}\n      />\n      <Styled.EditableWrapper className={wrapperClasses} $cssVisible={showCss}>\n        {!htmlMode && (\n          <Styled.Editable\n            id={\"content-editable\"}\n            as=\"div\"\n            renderElement={renderElement}\n            renderLeaf={renderLeaf}\n            placeholder={t(\"editor.elements.placeholder\")}\n            spellCheck={false}\n            onKeyDown={e => captureHotKeys(e, editor)}\n          />\n        )}\n        {htmlMode && <HtmlEditor {...codeAreaProps} />}\n      </Styled.EditableWrapper>\n      {theme && !htmlMode && (\n        <style\n          dangerouslySetInnerHTML={{\n            __html: `@layer stylesheets {${theme}}`\n          }}\n        />\n      )}\n    </>\n  );\n}\n\nEditor.displayName = \"Global.Forms.ContentEditor.Editor\";\n","import React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FieldWrapper from \"../../FieldWrapper\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Slate, withReact, ReactEditor } from \"slate-react\";\nimport { createEditor, Transforms } from \"slate\";\nimport { withHistory, HistoryEditor } from \"slate-history\";\nimport withPlugins from \"../plugins\";\nimport throttle from \"lodash/throttle\";\nimport { serializeToHtml, removeFormatting } from \"../serializers\";\nimport { clearSlate } from \"../utils/slate/general\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\nimport Editor from \"./Editor\";\nimport { HtmlBreadcrumbsContext } from \"../contexts/htmlBreadcrumbsContext\";\nimport * as Styled from \"./styles\";\n\nexport default function EditorWrapper({\n  set: setFormValue,\n  stylesheets,\n  initialHtmlValue,\n  initialSlateValue,\n  hasErrors,\n  setHasErrors,\n  warnErrors,\n  setWarnErrors,\n  nextRef\n}) {\n  const editorRef = useRef();\n  if (!editorRef.current)\n    editorRef.current = withReact(withHistory(withPlugins(createEditor())));\n  const editor = editorRef.current;\n\n  const prevSlate = useRef(initialSlateValue);\n  const prevHtml = useRef(initialHtmlValue);\n\n  const [htmlMode, toggleHtmlMode] = useState(has(initialSlateValue, \"error\"));\n  const [selectedCrumb, setSelectedCrumb] = useState();\n  const [editingCrumb, setEditingCrumb] = useState(false);\n  const [localHtml, setLocalHtml] = useState(initialHtmlValue);\n  const [localSlate, setLocalSlate] = useState(\n    has(initialSlateValue, \"error\")\n      ? initialSlateValue.default\n      : initialSlateValue\n  );\n\n  // The value prop on the Slate provider component is unhelpfully named. It is really initialSlateValue and is only read once, so it's easy for Slate to get out of sync when waiting for data from the api. This resets the editor each time the form model changes.\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!htmlMode && !isEqual(prevSlate.current, initialSlateValue)) {\n      clearSlate(editor);\n      Transforms.insertNodes(editor, initialSlateValue);\n      return;\n    }\n    if (!isEqual(prevHtml.current, initialHtmlValue)) {\n      setLocalHtml(initialHtmlValue);\n    }\n  }, [initialSlateValue, initialHtmlValue]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const setFormValueFromSlate = throttle(\n    val => setFormValue(serializeToHtml(val)),\n    500\n  );\n\n  const onChangeSlate = val => {\n    setLocalSlate(val);\n    const changes = editor?.history?.undos ?? [];\n    const shouldUpdateFormValue =\n      changes.length > 1 || changes[0]?.selectionBefore;\n    if (shouldUpdateFormValue) setFormValueFromSlate(val);\n  };\n\n  const setFormValueFromHtml = throttle(\n    val => setFormValue(removeFormatting(val)),\n    500\n  );\n\n  const onChangeHtml = val => {\n    setLocalHtml(val);\n    setFormValueFromHtml(val);\n  };\n\n  const handleError = ({ resetErrorBoundary }) => {\n    HistoryEditor.undo(editor);\n    resetErrorBoundary();\n    return null;\n  };\n\n  return (\n    <FieldWrapper className=\"wide\">\n      <Styled.EditorSecondary\n        className={hasErrors && warnErrors ? \"error\" : undefined}\n      >\n        <ErrorBoundary fallbackRender={handleError}>\n          <HtmlBreadcrumbsContext.Provider\n            value={{\n              selectedCrumb,\n              setSelectedCrumb,\n              editingCrumb,\n              setEditingCrumb\n            }}\n          >\n            <Slate\n              editor={editor}\n              initialValue={localSlate}\n              onChange={onChangeSlate}\n            >\n              <Editor\n                localHtml={localHtml}\n                setLocalHtml={setLocalHtml}\n                onChangeHtml={onChangeHtml}\n                localSlate={localSlate}\n                setLocalSlate={setLocalSlate}\n                stylesheets={stylesheets}\n                htmlMode={htmlMode}\n                toggleHtmlMode={toggleHtmlMode}\n                hasErrors={hasErrors}\n                setHasErrors={setHasErrors}\n                warnErrors={warnErrors}\n                setWarnErrors={setWarnErrors}\n                nextRef={nextRef}\n              />\n            </Slate>\n          </HtmlBreadcrumbsContext.Provider>\n        </ErrorBoundary>\n      </Styled.EditorSecondary>\n    </FieldWrapper>\n  );\n}\n\nEditorWrapper.displayName = \"Global.Form.ContentEditor.Wrapper\";\n\nEditorWrapper.propTypes = {\n  set: PropTypes.func,\n  stylesheets: PropTypes.arrayOf(PropTypes.object),\n  sectionId: PropTypes.string,\n  sectionBody: PropTypes.string\n};\n"],"names":["config","setModuleUrl","idleFingersUrl","window","ace","define","acequire","_exports","module","exports","isDark","cssClass","cssText","importCssString","kuroirUrl","unwrapLink","editor","Transforms","unwrapNodes","match","n","Editor","isEditor","Element","isElement","type","ReactEditor","focus","wrapLink","url","text","selection","isCollapsed","Range","link","htmlAttrs","href","children","insertNodes","wrapNodes","split","collapse","edge","insertImage","alt","image","src","slateOnly","node","above","isEmpty","removeNodes","insertIframe","title","test","embed","controls","undefined","LIST_TYPES","toggleTextBlock","_ref2","format","initialNode","path","has","Node","parent","_ref","anchor","start","substring","offset","target","end","at","handleLiTextChild","removeMark","includes","p","isEqual","_node$htmlAttrs","_node$htmlAttrs2","class","withoutNormalizing","setNodes","addMark","clearSlate","Array","length","keys","forEach","e","setSelectionAtPoint","arguments","select","formatNodeLabel","_htmlAttrs$class","label","nodeName","id","replaceAll","getListItemNode","getListNode","getCommonBlock","condition","range","unhangRange","voids","common","isBlock","getAncestors","iterator","list","value","next","key","findKey","isElementActive","nearest","isTextBlockActive","block","isMarkActive","marks","get","pre","isLinkActive","nodes","isEmptyAndChildless","onlyChildIsEmptyText","unwrapNode","parentPath","Path","newParent","hasBlocks","liftNodes","unwrapSpan","toggleOrWrapNode","insertOrWrapSpan","formatIsContainer","nestableElements","formatIsText","initialPath","findPath","rteElements","wrapLayoutBlock","toggleMark","removeNode","isInline","c","childPath","mode","nc","nestedChildPath","hasBlockChildren","code","pathCounter","string","insertText","element","_element$htmlAttrs","display","mathMLElements","inlineNodes","isImage","isImageUrl","isVideo","isVideoUrl","isLink","isValidUrl","insertData","data","getData","files","item","reader","FileReader","mime","addEventListener","result","readAsDataURL","SHORTCUTS","INLINE_SHORTCUTS","endsWith","blockType","slice","delete","shortcut","textNode","textNodePath","first","beforeText","indexOf","startIndex","endIndex","contentAnchor","contentFocus","distance","unit","reverse","getTextLocation","str","textContent","lastPath","nodePath","isTextNode","nextStr","getIndentSelectionLocation","textIterator","nestListItem","srcPath","destPath","isArray","liftListItem","unwrap","moveNodes","to","targetPath","handleInlineItemChildren","_ref3","findListChild","decreaseIndent","_ref4","canUnwrapRoot","parentLi","listNode","listNodePath","listParent","isWrappedList","nodeStart","SlateEditor","listStart","Point","equals","destIndex","pop","insertBreak","deleteBackward","blockPath","inline","srcdoc","htmlChildren","liIsEmpty","removeEmptyInline","isBefore","inlinePath","li","nearestBlock","maybeUnwrapSlateOnlyNode","blockToTransform","transformPath","withInlines","withHtmlAwareBreaks","withShortcuts","withVoids","withImages","HtmlBreadcrumbsContext","createContext","useHtmlBreadcrumbs","useContext","ButtonGroup","_styled","$visible","respond","InteriorButton","buttonUnstyled","$color","Content","$selected","defaultFocusStyle","ImageWrapper","name","styles","VoidOuter","VoidInner","_ref5","VoidLabel","formLabelPrimary","HrOuter","HrInner","COLOR_MAP","green","light","dark","blue","violet","ElementLabel","_ref6","_ref7","EditableElementLabel","ClassInput","TagButtons","DeleteButton","LiftButton","getHtmlOutlineStyles","darkMode","color","markElements","outline","outlineColor","borderRadius","borderTopLeftRadius","outlineOffset","position","HtmlLabel","_element$htmlAttrs2","visible","useSlateStatic","inputRef","useRef","t","useTranslation","editingCrumb","editing","useEffect","current","disableDelete","disableLift","tagAndId","formattedClass","trim","_jsxs","Styled","contentEditable","_jsx","ref","defaultValue","onChange","persist","debounce","doUpdate","updateClassName","onClick","preventDefault","disabled","IconComposer","icon","size","SlateLeaf","attributes","leaf","selectedCrumb","showHtml","leafChildren","bold","style","italic","i","underline","strikethrough","del","handleImageHotkey","button","document","getElementsByName","click","handleIframeHotkey","ImageRenderer","as","focused","useFocused","selected","useSelected","wrapperClassName","classNames","className","epubType","width","height","Utility","VoidRenderer","theme","_ref$current","shadowRoot","shadow","attachShadow","container","createElement","containerClass","setAttribute","appendChild","innerHTML","childNodes","svgProps","flexShrink","SlateElement","_Fragment","Void","Image","_element$htmlAttrs3","renderedElements","Tag","captureHotKeys","shiftKey","insertSoftBreak","listType","index","selectionPath","prevItemPath","prevItem","subListNode","subListPath","increaseIndent","metaKey","ctrlKey","altKey","keyCode","handleLinkHotkey","HtmlEditor","props","aceRef","nextRef","prevRef","rest","editorProps","$blockScrolling","minLines","maxLines","wrapEnabled","showPrintMargin","onLoad","once","session","getUndoManager","reset","commands","removeCommand","renderer","setPadding","setScrollMargin","textInput","getElement","querySelector","scrollBy","onFocus","gotoLine","editorOptions","enableAutoIndent","bindKey","win","mac","exec","cssWorkerUrl","htmlWorkerUrl","jsWorkerUrl","Wrapper","Label","headingTertiary","Header","Description","HotKey","HotKeyLabel","TextPlaceholder","Key","Keys","TooltipContent","description","hotkeys","map","hk","k","Fragment","h1","h2","h3","h4","h5","h6","ol","ul","blockquote","undo","redo","img","iframe","Button","defaultTransitionProps","SelectTooltipWrapper","TooltipIcon","SelectWrapper","Select","SpanButton","SelectIcon","StylesButton","BlockButton","useSlate","active","Tooltip","content","xOffset","yOffset","delay","getNearestOfType","types","tabIndex","forwardRef","MarkButton","isFirst","event","Form","CloseButton","$primary","defaultHoverStyle","CLOSE_ICON_SIZE","CloseText","utilityPrimary","CloseIcon","ModalHeader","HeaderIcon","Heading","ModalBody","Modal","Dialog","fluidScale","InsertLinkForm","urlRef","textRef","defaultValues","Input","InsertModal","form","resolve","reject","heading","resolveLabel","uid","useUID","handleRejectClick","buttonClasses","maxWidth","showCloseButton","closeOnOverlayClick","labelledBy","describedBy","onEsc","displayName","propTypes","PropTypes","isRequired","options","message","onModalClose","close","selectionToUse","setTimeout","LinkButton","confirm","confirmation","useConfirmation","addLink","_urlRef$current","_textRef$current","inputElement","callback","closeCallback","InsertImageForm","altRef","ImageButton","addImage","_altRef$current","updateImage","attrs","_urlRef$current2","_altRef$current2","from","InsertIframeForm","titleRef","IframeButton","addIframe","_titleRef$current","updateIframe","_titleRef$current2","activeIframe","activeVideo","BlockSelect","ariaLabel","renderOptions","o","hidden","getActiveBlock","opts","isActive","flat","filter","sort","a","b","FunctionButton","tooltip","renderButton","Toolbar","ToolGroup","ToolbarSpacer","ToggleBar","BreadcrumbsBar","$darkMode","Breadcrumbs","Breadcrumb","Spacer","ShowHideButton","ToolbarRTE","_selection$anchor","onClickUndo","onClickRedo","menu","useMenuBarState","orientation","loop","wrap","useSlateSelection","ancestors","setSelectedCrumb","setEditingCrumb","onToggleHtmlOutlines","useCallback","handleHoverFocus","clearHoverFocus","ReakitMenuBar","ReakitMenuItem","Object","tag","onMouseEnter","onMouseLeave","onBlur","ToolbarHTML","toggleStyles","cssVisible","controlsRef","$padding","$active","MobileLabel","Toggle","padding","left","right","iconSize","mobileLabel","htmlMode","onClickEditorToggle","onClickDarkModeToggle","EditorSecondary","EditableWrapper","$cssVisible","Editable","BaseEditable","Controls","HTMLError","InputError","EditorControls","errors","localHtml","localSlate","setLocalHtml","onChangeHtml","setLocalSlate","stylesheets","hasErrors","setHasErrors","warnErrors","setWarnErrors","toggleHtmlMode","showCss","toggleCss","useState","setDarkMode","activeElement","toDOMPoint","rect","parentElement","getBoundingClientRect","buttons","getElementById","buttonsRect","controlsRect","bottom","top","y","scrollIntoView","behavior","s","join","renderElement","renderLeaf","Leaf","codeAreaProps","readOnly","onValidate","messages","find","msg","wrapperClasses","source","pointer","detail","val","stopPropagation","toggleEditorView","json","serializeToSlate","html","formatHtml","serializeToHtml","HistoryEditor","placeholder","spellCheck","onKeyDown","dangerouslySetInnerHTML","__html","EditorWrapper","set","setFormValue","initialHtmlValue","initialSlateValue","editorRef","withReact","withHistory","withPlugins","createEditor","prevSlate","prevHtml","default","setFormValueFromSlate","throttle","setFormValueFromHtml","removeFormatting","FieldWrapper","ErrorBoundary","fallbackRender","resetErrorBoundary","Provider","Slate","initialValue","_editor$history","_changes$","changes","history","undos","selectionBefore","sectionId","sectionBody"],"sourceRoot":""}