{"version":3,"file":"build/chunk-170-eebd0fcdfa24206c521c.js","mappings":"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","sources":["webpack://manifold-client/./node_modules/direction/index.js","webpack://manifold-client/./node_modules/is-hotkey/lib/index.js","webpack://manifold-client/./node_modules/slate-history/dist/index.es.js","webpack://manifold-client/./node_modules/compute-scroll-into-view/dist/index.js","webpack://manifold-client/./node_modules/scroll-into-view-if-needed/dist/index.js","webpack://manifold-client/./node_modules/slate-dom/dist/index.es.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/freeze.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/element.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/global.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/process.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/scheduler.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObservation.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","webpack://manifold-client/./node_modules/@juggle/resize-observer/lib/ResizeObserver.js","webpack://manifold-client/./node_modules/slate-react/dist/index.es.js"],"sourcesContent":["'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (value.length > 1 && !modifier && !ALIASES[value] && !CODES[name]) {\n        throw new TypeError('Unknown modifier: \"' + value + '\"');\n      }\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","import { isPlainObject } from 'is-plain-object';\nimport { Operation, Editor, Transforms, Path } from 'slate';\n\n// eslint-disable-next-line no-redeclare\nvar History = {\n  /**\n   * Check if a value is a `History` object.\n   */\n  isHistory(value) {\n    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0].operations)) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0].operations));\n  }\n};\n\n/**\n * Weakmaps for attaching state to the editor.\n */\nvar HISTORY = new WeakMap();\nvar SAVING = new WeakMap();\nvar MERGING = new WeakMap();\nvar SPLITTING_ONCE = new WeakMap();\n// eslint-disable-next-line no-redeclare\nvar HistoryEditor = {\n  /**\n   * Check if a value is a `HistoryEditor` object.\n   */\n  isHistoryEditor(value) {\n    return History.isHistory(value.history) && Editor.isEditor(value);\n  },\n  /**\n   * Get the merge flag's current value.\n   */\n  isMerging(editor) {\n    return MERGING.get(editor);\n  },\n  /**\n   * Get the splitting once flag's current value.\n   */\n  isSplittingOnce(editor) {\n    return SPLITTING_ONCE.get(editor);\n  },\n  setSplittingOnce(editor, value) {\n    SPLITTING_ONCE.set(editor, value);\n  },\n  /**\n   * Get the saving flag's current value.\n   */\n  isSaving(editor) {\n    return SAVING.get(editor);\n  },\n  /**\n   * Redo to the previous saved state.\n   */\n  redo(editor) {\n    editor.redo();\n  },\n  /**\n   * Undo to the previous saved state.\n   */\n  undo(editor) {\n    editor.undo();\n  },\n  /**\n   * Apply a series of changes inside a synchronous `fn`, These operations will\n   * be merged into the previous history.\n   */\n  withMerging(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, true);\n    fn();\n    MERGING.set(editor, prev);\n  },\n  /**\n   * Apply a series of changes inside a synchronous `fn`, ensuring that the first\n   * operation starts a new batch in the history. Subsequent operations will be\n   * merged as usual.\n   */\n  withNewBatch(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, true);\n    SPLITTING_ONCE.set(editor, true);\n    fn();\n    MERGING.set(editor, prev);\n    SPLITTING_ONCE.delete(editor);\n  },\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\n   * the new operations into previous save point in the history.\n   */\n  withoutMerging(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, false);\n    fn();\n    MERGING.set(editor, prev);\n  },\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\n   * their operations into the history.\n   */\n  withoutSaving(editor, fn) {\n    var prev = HistoryEditor.isSaving(editor);\n    SAVING.set(editor, false);\n    try {\n      fn();\n    } finally {\n      SAVING.set(editor, prev);\n    }\n  }\n};\n\n/**\n * The `withHistory` plugin keeps track of the operation history of a Slate\n * editor as operations are applied to it, using undo and redo stacks.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\nvar withHistory = editor => {\n  var e = editor;\n  var {\n    apply\n  } = e;\n  e.history = {\n    undos: [],\n    redos: []\n  };\n  e.redo = () => {\n    var {\n      history\n    } = e;\n    var {\n      redos\n    } = history;\n    if (redos.length > 0) {\n      var batch = redos[redos.length - 1];\n      if (batch.selectionBefore) {\n        Transforms.setSelection(e, batch.selectionBefore);\n      }\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (var op of batch.operations) {\n            e.apply(op);\n          }\n        });\n      });\n      history.redos.pop();\n      e.writeHistory('undos', batch);\n    }\n  };\n  e.undo = () => {\n    var {\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n    if (undos.length > 0) {\n      var batch = undos[undos.length - 1];\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          var inverseOps = batch.operations.map(Operation.inverse).reverse();\n          for (var op of inverseOps) {\n            e.apply(op);\n          }\n          if (batch.selectionBefore) {\n            Transforms.setSelection(e, batch.selectionBefore);\n          }\n        });\n      });\n      e.writeHistory('redos', batch);\n      history.undos.pop();\n    }\n  };\n  e.apply = op => {\n    var {\n      operations,\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n    var lastBatch = undos[undos.length - 1];\n    var lastOp = lastBatch && lastBatch.operations[lastBatch.operations.length - 1];\n    var save = HistoryEditor.isSaving(e);\n    var merge = HistoryEditor.isMerging(e);\n    if (save == null) {\n      save = shouldSave(op);\n    }\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false;\n        } else if (operations.length !== 0) {\n          merge = true;\n        } else {\n          merge = shouldMerge(op, lastOp);\n        }\n      }\n      if (HistoryEditor.isSplittingOnce(e)) {\n        merge = false;\n        HistoryEditor.setSplittingOnce(e, undefined);\n      }\n      if (lastBatch && merge) {\n        lastBatch.operations.push(op);\n      } else {\n        var batch = {\n          operations: [op],\n          selectionBefore: e.selection\n        };\n        e.writeHistory('undos', batch);\n      }\n      while (undos.length > 100) {\n        undos.shift();\n      }\n      history.redos = [];\n    }\n    apply(op);\n  };\n  e.writeHistory = (stack, batch) => {\n    e.history[stack].push(batch);\n  };\n  return e;\n};\n/**\n * Check whether to merge an operation into the previous operation.\n */\nvar shouldMerge = (op, prev) => {\n  if (prev && op.type === 'insert_text' && prev.type === 'insert_text' && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n  if (prev && op.type === 'remove_text' && prev.type === 'remove_text' && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n  return false;\n};\n/**\n * Check whether an operation needs to be saved to the history.\n */\nvar shouldSave = (op, prev) => {\n  if (op.type === 'set_selection') {\n    return false;\n  }\n  return true;\n};\n\nexport { HISTORY, History, HistoryEditor, MERGING, SAVING, SPLITTING_ONCE, withHistory };\n//# sourceMappingURL=index.es.js.map\n","const t=t=>\"object\"==typeof t&&null!=t&&1===t.nodeType,e=(t,e)=>(!e||\"hidden\"!==t)&&(\"visible\"!==t&&\"clip\"!==t),n=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const o=getComputedStyle(t,null);return e(o.overflowY,n)||e(o.overflowX,n)||(t=>{const e=(t=>{if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}})(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)})(t)}return!1},o=(t,e,n,o,l,r,i,s)=>r<t&&i>e||r>t&&i<e?0:r<=t&&s<=n||i>=e&&s>=n?r-t-o:i>e&&s<n||r<t&&s>n?i-e+l:0,l=t=>{const e=t.parentElement;return null==e?t.getRootNode().host||null:e},r=(e,r)=>{var i,s,d,h;if(\"undefined\"==typeof document)return[];const{scrollMode:c,block:f,inline:u,boundary:a,skipOverflowHiddenElements:g}=r,p=\"function\"==typeof a?a:t=>t!==a;if(!t(e))throw new TypeError(\"Invalid target\");const m=document.scrollingElement||document.documentElement,w=[];let W=e;for(;t(W)&&p(W);){if(W=l(W),W===m){w.push(W);break}null!=W&&W===document.body&&n(W)&&!n(document.documentElement)||null!=W&&n(W,g)&&w.push(W)}const b=null!=(s=null==(i=window.visualViewport)?void 0:i.width)?s:innerWidth,H=null!=(h=null==(d=window.visualViewport)?void 0:d.height)?h:innerHeight,{scrollX:y,scrollY:M}=window,{height:v,width:E,top:x,right:C,bottom:I,left:R}=e.getBoundingClientRect(),{top:T,right:B,bottom:F,left:V}=(t=>{const e=window.getComputedStyle(t);return{top:parseFloat(e.scrollMarginTop)||0,right:parseFloat(e.scrollMarginRight)||0,bottom:parseFloat(e.scrollMarginBottom)||0,left:parseFloat(e.scrollMarginLeft)||0}})(e);let k=\"start\"===f||\"nearest\"===f?x-T:\"end\"===f?I+F:x+v/2-T+F,D=\"center\"===u?R+E/2-V+B:\"end\"===u?C+B:R-V;const L=[];for(let t=0;t<w.length;t++){const e=w[t],{height:l,width:r,top:i,right:s,bottom:d,left:h}=e.getBoundingClientRect();if(\"if-needed\"===c&&x>=0&&R>=0&&I<=H&&C<=b&&(e===m&&!n(e)||x>=i&&I<=d&&R>=h&&C<=s))return L;const a=getComputedStyle(e),g=parseInt(a.borderLeftWidth,10),p=parseInt(a.borderTopWidth,10),W=parseInt(a.borderRightWidth,10),T=parseInt(a.borderBottomWidth,10);let B=0,F=0;const V=\"offsetWidth\"in e?e.offsetWidth-e.clientWidth-g-W:0,S=\"offsetHeight\"in e?e.offsetHeight-e.clientHeight-p-T:0,X=\"offsetWidth\"in e?0===e.offsetWidth?0:r/e.offsetWidth:0,Y=\"offsetHeight\"in e?0===e.offsetHeight?0:l/e.offsetHeight:0;if(m===e)B=\"start\"===f?k:\"end\"===f?k-H:\"nearest\"===f?o(M,M+H,H,p,T,M+k,M+k+v,v):k-H/2,F=\"start\"===u?D:\"center\"===u?D-b/2:\"end\"===u?D-b:o(y,y+b,b,g,W,y+D,y+D+E,E),B=Math.max(0,B+M),F=Math.max(0,F+y);else{B=\"start\"===f?k-i-p:\"end\"===f?k-d+T+S:\"nearest\"===f?o(i,d,l,p,T+S,k,k+v,v):k-(i+l/2)+S/2,F=\"start\"===u?D-h-g:\"center\"===u?D-(h+r/2)+V/2:\"end\"===u?D-s+W+V:o(h,s,r,g,W+V,D,D+E,E);const{scrollLeft:t,scrollTop:n}=e;B=0===Y?0:Math.max(0,Math.min(n+B/Y,e.scrollHeight-l/Y+S)),F=0===X?0:Math.max(0,Math.min(t+F/X,e.scrollWidth-r/X+V)),k+=n-B,D+=t-F}L.push({el:e,top:B,left:F})}return L};export{r as compute};//# sourceMappingURL=index.js.map\n","import{compute as t}from\"compute-scroll-into-view\";const o=t=>!1===t?{block:\"end\",inline:\"nearest\"}:(t=>t===Object(t)&&0!==Object.keys(t).length)(t)?t:{block:\"start\",inline:\"nearest\"};function e(e,r){if(!e.isConnected||!(t=>{let o=t;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(t=>{const o=window.getComputedStyle(t);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((t=>\"object\"==typeof t&&\"function\"==typeof t.behavior)(r))return r.behavior(t(e,r));const l=\"boolean\"==typeof r||null==r?void 0:r.behavior;for(const{el:a,top:i,left:s}of t(e,o(r))){const t=i-n.top+n.bottom,o=s-n.left+n.right;a.scroll({top:t,left:o,behavior:l})}}export{e as default};//# sourceMappingURL=index.js.map\n","import { Transforms, Element, Editor, Scrubber, Range, Node, Text, Path, Point } from 'slate';\nimport { isHotkey } from 'is-hotkey';\n\n/**\n * Types.\n */\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nvar DOMNode = globalThis.Node;\nvar DOMElement = globalThis.Element;\nvar DOMText = globalThis.Text;\nvar DOMRange = globalThis.Range;\nvar DOMSelection = globalThis.Selection;\nvar DOMStaticRange = globalThis.StaticRange;\n/**\n * Returns the host window of a DOM node\n */\nvar getDefaultView = value => {\n  return value && value.ownerDocument && value.ownerDocument.defaultView || null;\n};\n/**\n * Check if a DOM node is a comment node.\n */\nvar isDOMComment = value => {\n  return isDOMNode(value) && value.nodeType === 8;\n};\n/**\n * Check if a DOM node is an element node.\n */\nvar isDOMElement = value => {\n  return isDOMNode(value) && value.nodeType === 1;\n};\n/**\n * Check if a value is a DOM node.\n */\nvar isDOMNode = value => {\n  var window = getDefaultView(value);\n  return !!window && value instanceof window.Node;\n};\n/**\n * Check if a value is a DOM selection.\n */\nvar isDOMSelection = value => {\n  var window = value && value.anchorNode && getDefaultView(value.anchorNode);\n  return !!window && value instanceof window.Selection;\n};\n/**\n * Check if a DOM node is an element node.\n */\nvar isDOMText = value => {\n  return isDOMNode(value) && value.nodeType === 3;\n};\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\nvar isPlainTextOnlyPaste = event => {\n  return event.clipboardData && event.clipboardData.getData('text/plain') !== '' && event.clipboardData.types.length === 1;\n};\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\nvar normalizeDOMPoint = domPoint => {\n  var [node, offset] = domPoint;\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var index = isLast ? offset - 1 : offset;\n    [node, index] = getEditableChildAndIndex(node, index, isLast ? 'backward' : 'forward');\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset;\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward');\n    }\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0;\n  }\n  // Return the node and offset.\n  return [node, offset];\n};\n/**\n * Determines whether the active element is nested within a shadowRoot\n */\nvar hasShadowRoot = node => {\n  var parent = node && node.parentNode;\n  while (parent) {\n    if (parent.toString() === '[object ShadowRoot]') {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n};\n/**\n * Get the nearest editable child and index at `index` in a `parent`, preferring\n * `direction`.\n */\nvar getEditableChildAndIndex = (parent, index, direction) => {\n  var {\n    childNodes\n  } = parent;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false;\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) {\n      break;\n    }\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n    child = childNodes[i];\n    index = i;\n    i += direction === 'forward' ? 1 : -1;\n  }\n  return [child, index];\n};\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\nvar getEditableChild = (parent, index, direction) => {\n  var [child] = getEditableChildAndIndex(parent, index, direction);\n  return child;\n};\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\nvar getPlainText = domNode => {\n  var text = '';\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue;\n  }\n  if (isDOMElement(domNode)) {\n    for (var childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode);\n    }\n    var display = getComputedStyle(domNode).getPropertyValue('display');\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n';\n    }\n  }\n  return text;\n};\n/**\n * Get x-slate-fragment attribute from data-slate-fragment\n */\nvar catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m;\nvar getSlateFragmentAttribute = dataTransfer => {\n  var htmlData = dataTransfer.getData('text/html');\n  var [, fragment] = htmlData.match(catchSlateFragment) || [];\n  return fragment;\n};\n/**\n * Get the dom selection from Shadow Root if possible, otherwise from the document\n */\nvar getSelection = root => {\n  if (root.getSelection != null) {\n    return root.getSelection();\n  }\n  return document.getSelection();\n};\n/**\n * Check whether a mutation originates from a editable element inside the editor.\n */\nvar isTrackedMutation = (editor, mutation, batch) => {\n  var {\n    target\n  } = mutation;\n  if (isDOMElement(target) && target.matches('[contentEditable=\"false\"]')) {\n    return false;\n  }\n  var {\n    document\n  } = DOMEditor.getWindow(editor);\n  if (document.contains(target)) {\n    return DOMEditor.hasDOMNode(editor, target, {\n      editable: true\n    });\n  }\n  var parentMutation = batch.find(_ref => {\n    var {\n      addedNodes,\n      removedNodes\n    } = _ref;\n    for (var node of addedNodes) {\n      if (node === target || node.contains(target)) {\n        return true;\n      }\n    }\n    for (var _node of removedNodes) {\n      if (_node === target || _node.contains(target)) {\n        return true;\n      }\n    }\n  });\n  if (!parentMutation || parentMutation === mutation) {\n    return false;\n  }\n  // Target add/remove is tracked. Track the mutation if we track the parent mutation.\n  return isTrackedMutation(editor, parentMutation, batch);\n};\n/**\n * Retrieves the deepest active element in the DOM, considering nested shadow DOMs.\n */\nvar getActiveElement = () => {\n  var activeElement = document.activeElement;\n  while ((_activeElement = activeElement) !== null && _activeElement !== void 0 && _activeElement.shadowRoot && (_activeElement$shadow = activeElement.shadowRoot) !== null && _activeElement$shadow !== void 0 && _activeElement$shadow.activeElement) {\n    var _activeElement, _activeElement$shadow, _activeElement2;\n    activeElement = (_activeElement2 = activeElement) === null || _activeElement2 === void 0 || (_activeElement2 = _activeElement2.shadowRoot) === null || _activeElement2 === void 0 ? void 0 : _activeElement2.activeElement;\n  }\n  return activeElement;\n};\n/**\n * @returns `true` if `otherNode` is before `node` in the document; otherwise, `false`.\n */\nvar isBefore = (node, otherNode) => Boolean(node.compareDocumentPosition(otherNode) & DOMNode.DOCUMENT_POSITION_PRECEDING);\n/**\n * @returns `true` if `otherNode` is after `node` in the document; otherwise, `false`.\n */\nvar isAfter = (node, otherNode) => Boolean(node.compareDocumentPosition(otherNode) & DOMNode.DOCUMENT_POSITION_FOLLOWING);\n\nvar _navigator$userAgent$, _navigator$userAgent$2;\nvar IS_IOS = typeof navigator !== 'undefined' && typeof window !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar IS_APPLE = typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent);\nvar IS_ANDROID = typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent);\nvar IS_FIREFOX = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nvar IS_WEBKIT = typeof navigator !== 'undefined' && /AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent);\n// \"modern\" Edge was released at 79.x\nvar IS_EDGE_LEGACY = typeof navigator !== 'undefined' && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])(?:\\.)/i.test(navigator.userAgent);\nvar IS_CHROME = typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent);\n// Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\nvar IS_CHROME_LEGACY = typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])(?:\\.)/i.test(navigator.userAgent);\nvar IS_ANDROID_CHROME_LEGACY = IS_ANDROID && typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-5]?\\d)(?:\\.)/i.test(navigator.userAgent);\n// Firefox did not support `beforeInput` until `v87`.\nvar IS_FIREFOX_LEGACY = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])(?:\\.)).*/i.test(navigator.userAgent);\n// UC mobile browser\nvar IS_UC_MOBILE = typeof navigator !== 'undefined' && /.*UCBrowser/.test(navigator.userAgent);\n// Wechat browser (not including mac wechat)\nvar IS_WECHATBROWSER = typeof navigator !== 'undefined' && /.*Wechat/.test(navigator.userAgent) && !/.*MacWechat/.test(navigator.userAgent); // avoid lookbehind (buggy in safari < 16.4)\n// Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\n// Check if the browser is Safari and older than 17\ntypeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) && /Version\\/(\\d+)/.test(navigator.userAgent) && ((_navigator$userAgent$ = navigator.userAgent.match(/Version\\/(\\d+)/)) !== null && _navigator$userAgent$ !== void 0 && _navigator$userAgent$[1] ? parseInt((_navigator$userAgent$2 = navigator.userAgent.match(/Version\\/(\\d+)/)) === null || _navigator$userAgent$2 === void 0 ? void 0 : _navigator$userAgent$2[1], 10) < 17 : false);\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\nvar HAS_BEFORE_INPUT_SUPPORT = (!IS_CHROME_LEGACY || !IS_ANDROID_CHROME_LEGACY) && !IS_EDGE_LEGACY &&\n// globalThis is undefined in older browsers\ntypeof globalThis !== 'undefined' && globalThis.InputEvent &&\n// @ts-ignore The `getTargetRanges` property isn't recognized.\ntypeof globalThis.InputEvent.prototype.getTargetRanges === 'function';\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n/**\n * An auto-incrementing identifier for keys.\n */\nvar n = 0;\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\nclass Key {\n  constructor() {\n    _defineProperty(this, \"id\", void 0);\n    this.id = \"\".concat(n++);\n  }\n}\n\n/**\n * Two weak maps that allow us rebuild a path given a node. They are populated\n * at render time such that after a render occurs we can always backtrack.\n */\nvar IS_NODE_MAP_DIRTY = new WeakMap();\nvar NODE_TO_INDEX = new WeakMap();\nvar NODE_TO_PARENT = new WeakMap();\n/**\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\n * are used to resolve DOM event-related logic into Slate actions.\n */\nvar EDITOR_TO_WINDOW = new WeakMap();\nvar EDITOR_TO_ELEMENT = new WeakMap();\nvar EDITOR_TO_PLACEHOLDER_ELEMENT = new WeakMap();\nvar ELEMENT_TO_NODE = new WeakMap();\nvar NODE_TO_ELEMENT = new WeakMap();\nvar NODE_TO_KEY = new WeakMap();\nvar EDITOR_TO_KEY_TO_ELEMENT = new WeakMap();\n/**\n * Weak maps for storing editor-related state.\n */\nvar IS_READ_ONLY = new WeakMap();\nvar IS_FOCUSED = new WeakMap();\nvar IS_COMPOSING = new WeakMap();\nvar EDITOR_TO_USER_SELECTION = new WeakMap();\n/**\n * Weak map for associating the context `onChange` context with the plugin.\n */\nvar EDITOR_TO_ON_CHANGE = new WeakMap();\n/**\n * Weak maps for saving pending state on composition stage.\n */\nvar EDITOR_TO_SCHEDULE_FLUSH = new WeakMap();\nvar EDITOR_TO_PENDING_INSERTION_MARKS = new WeakMap();\nvar EDITOR_TO_USER_MARKS = new WeakMap();\n/**\n * Android input handling specific weak-maps\n */\nvar EDITOR_TO_PENDING_DIFFS = new WeakMap();\nvar EDITOR_TO_PENDING_ACTION = new WeakMap();\nvar EDITOR_TO_PENDING_SELECTION = new WeakMap();\nvar EDITOR_TO_FORCE_RENDER = new WeakMap();\n/**\n * Symbols.\n */\nvar PLACEHOLDER_SYMBOL = Symbol('placeholder');\nvar MARK_PLACEHOLDER_SYMBOL = Symbol('mark-placeholder');\n\n// eslint-disable-next-line no-redeclare\nvar DOMEditor = {\n  androidPendingDiffs: editor => EDITOR_TO_PENDING_DIFFS.get(editor),\n  androidScheduleFlush: editor => {\n    var _EDITOR_TO_SCHEDULE_F;\n    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(editor)) === null || _EDITOR_TO_SCHEDULE_F === void 0 || _EDITOR_TO_SCHEDULE_F();\n  },\n  blur: editor => {\n    var el = DOMEditor.toDOMNode(editor, editor);\n    var root = DOMEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, false);\n    if (root.activeElement === el) {\n      el.blur();\n    }\n  },\n  deselect: editor => {\n    var {\n      selection\n    } = editor;\n    var root = DOMEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = getSelection(root);\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges();\n    }\n    if (selection) {\n      Transforms.deselect(editor);\n    }\n  },\n  findDocumentOrShadowRoot: editor => {\n    var el = DOMEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode();\n    if (root instanceof Document || root instanceof ShadowRoot) {\n      return root;\n    }\n    return el.ownerDocument;\n  },\n  findEventRange: (editor, event) => {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent;\n    }\n    var {\n      clientX: x,\n      clientY: y,\n      target\n    } = event;\n    if (x == null || y == null) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n    var node = DOMEditor.toSlateNode(editor, event.target);\n    var path = DOMEditor.findPath(editor, node);\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Element.isElement(node) && Editor.isVoid(editor, node)) {\n      var rect = target.getBoundingClientRect();\n      var isPrev = editor.isInline(node) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n      var edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end'\n      });\n      var point = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);\n      if (point) {\n        var _range = Editor.range(editor, point);\n        return _range;\n      }\n    }\n    // Else resolve a range from the caret position where the drop occured.\n    var domRange;\n    var {\n      document\n    } = DOMEditor.getWindow(editor);\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y);\n    } else {\n      var position = document.caretPositionFromPoint(x, y);\n      if (position) {\n        domRange = document.createRange();\n        domRange.setStart(position.offsetNode, position.offset);\n        domRange.setEnd(position.offsetNode, position.offset);\n      }\n    }\n    if (!domRange) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n    // Resolve a Slate range from the DOM range.\n    var range = DOMEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n      suppressThrow: false\n    });\n    return range;\n  },\n  findKey: (editor, node) => {\n    var key = NODE_TO_KEY.get(node);\n    if (!key) {\n      key = new Key();\n      NODE_TO_KEY.set(node, key);\n    }\n    return key;\n  },\n  findPath: (editor, node) => {\n    var path = [];\n    var child = node;\n    while (true) {\n      var parent = NODE_TO_PARENT.get(child);\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path;\n        } else {\n          break;\n        }\n      }\n      var i = NODE_TO_INDEX.get(child);\n      if (i == null) {\n        break;\n      }\n      path.unshift(i);\n      child = parent;\n    }\n    throw new Error(\"Unable to find the path for Slate node: \".concat(Scrubber.stringify(node)));\n  },\n  focus: function focus(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      retries: 5\n    };\n    // Return if already focused\n    if (IS_FOCUSED.get(editor)) {\n      return;\n    }\n    // Retry setting focus if the editor has pending operations.\n    // The DOM (selection) is unstable while changes are applied.\n    // Retry until retries are exhausted or editor is focused.\n    if (options.retries <= 0) {\n      throw new Error('Could not set focus, editor seems stuck with pending operations');\n    }\n    if (editor.operations.length > 0) {\n      setTimeout(() => {\n        DOMEditor.focus(editor, {\n          retries: options.retries - 1\n        });\n      }, 10);\n      return;\n    }\n    var el = DOMEditor.toDOMNode(editor, editor);\n    var root = DOMEditor.findDocumentOrShadowRoot(editor);\n    if (root.activeElement !== el) {\n      // Ensure that the DOM selection state is set to the editor's selection\n      if (editor.selection && root instanceof Document) {\n        var domSelection = getSelection(root);\n        var domRange = DOMEditor.toDOMRange(editor, editor.selection);\n        domSelection === null || domSelection === void 0 || domSelection.removeAllRanges();\n        domSelection === null || domSelection === void 0 || domSelection.addRange(domRange);\n      }\n      // Create a new selection in the top of the document if missing\n      if (!editor.selection) {\n        Transforms.select(editor, Editor.start(editor, []));\n      }\n      // IS_FOCUSED should be set before calling el.focus() to ensure that\n      // FocusedContext is updated to the correct value\n      IS_FOCUSED.set(editor, true);\n      el.focus({\n        preventScroll: true\n      });\n    }\n  },\n  getWindow: editor => {\n    var window = EDITOR_TO_WINDOW.get(editor);\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor');\n    }\n    return window;\n  },\n  hasDOMNode: function hasDOMNode(editor, target) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      editable = false\n    } = options;\n    var editorEl = DOMEditor.toDOMNode(editor, editor);\n    var targetEl;\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = isDOMElement(target) ? target : target.parentElement;\n    } catch (err) {\n      if (err instanceof Error && !err.message.includes('Permission denied to access property \"nodeType\"')) {\n        throw err;\n      }\n    }\n    if (!targetEl) {\n      return false;\n    }\n    return targetEl.closest(\"[data-slate-editor]\") === editorEl && (!editable || targetEl.isContentEditable ? true : typeof targetEl.isContentEditable === 'boolean' &&\n    // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined\n    // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable=\"false\"(readOnly)\n    targetEl.closest('[contenteditable=\"false\"]') === editorEl || !!targetEl.getAttribute('data-slate-zero-width'));\n  },\n  hasEditableTarget: (editor, target) => isDOMNode(target) && DOMEditor.hasDOMNode(editor, target, {\n    editable: true\n  }),\n  hasRange: (editor, range) => {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);\n  },\n  hasSelectableTarget: (editor, target) => DOMEditor.hasEditableTarget(editor, target) || DOMEditor.isTargetInsideNonReadonlyVoid(editor, target),\n  hasTarget: (editor, target) => isDOMNode(target) && DOMEditor.hasDOMNode(editor, target),\n  insertData: (editor, data) => {\n    editor.insertData(data);\n  },\n  insertFragmentData: (editor, data) => editor.insertFragmentData(data),\n  insertTextData: (editor, data) => editor.insertTextData(data),\n  isComposing: editor => {\n    return !!IS_COMPOSING.get(editor);\n  },\n  isFocused: editor => !!IS_FOCUSED.get(editor),\n  isReadOnly: editor => !!IS_READ_ONLY.get(editor),\n  isTargetInsideNonReadonlyVoid: (editor, target) => {\n    if (IS_READ_ONLY.get(editor)) return false;\n    var slateNode = DOMEditor.hasTarget(editor, target) && DOMEditor.toSlateNode(editor, target);\n    return Element.isElement(slateNode) && Editor.isVoid(editor, slateNode);\n  },\n  setFragmentData: (editor, data, originEvent) => editor.setFragmentData(data, originEvent),\n  toDOMNode: (editor, node) => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    var domNode = Editor.isEditor(node) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(DOMEditor.findKey(editor, node));\n    if (!domNode) {\n      throw new Error(\"Cannot resolve a DOM node from Slate node: \".concat(Scrubber.stringify(node)));\n    }\n    return domNode;\n  },\n  toDOMPoint: (editor, point) => {\n    var [node] = Editor.node(editor, point.path);\n    var el = DOMEditor.toDOMNode(editor, node);\n    var domPoint;\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, {\n      at: point\n    })) {\n      point = {\n        path: point.path,\n        offset: 0\n      };\n    }\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    var selector = \"[data-slate-string], [data-slate-zero-width]\";\n    var texts = Array.from(el.querySelectorAll(selector));\n    var start = 0;\n    for (var i = 0; i < texts.length; i++) {\n      var text = texts[i];\n      var domNode = text.childNodes[0];\n      if (domNode == null || domNode.textContent == null) {\n        continue;\n      }\n      var {\n        length\n      } = domNode.textContent;\n      var attr = text.getAttribute('data-slate-length');\n      var trueLength = attr == null ? length : parseInt(attr, 10);\n      var end = start + trueLength;\n      // Prefer putting the selection inside the mark placeholder to ensure\n      // composed text is displayed with the correct marks.\n      var nextText = texts[i + 1];\n      if (point.offset === end && nextText !== null && nextText !== void 0 && nextText.hasAttribute('data-slate-mark-placeholder')) {\n        var _nextText$textContent;\n        var domText = nextText.childNodes[0];\n        domPoint = [\n        // COMPAT: If we don't explicity set the dom point to be on the actual\n        // dom text element, chrome will put the selection behind the actual dom\n        // text element, causing domRange.getBoundingClientRect() calls on a collapsed\n        // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)\n        // which will cause issues when scrolling to it.\n        domText instanceof DOMText ? domText : nextText, (_nextText$textContent = nextText.textContent) !== null && _nextText$textContent !== void 0 && _nextText$textContent.startsWith('\\uFEFF') ? 1 : 0];\n        break;\n      }\n      if (point.offset <= end) {\n        var offset = Math.min(length, Math.max(0, point.offset - start));\n        domPoint = [domNode, offset];\n        break;\n      }\n      start = end;\n    }\n    if (!domPoint) {\n      throw new Error(\"Cannot resolve a DOM point from Slate point: \".concat(Scrubber.stringify(point)));\n    }\n    return domPoint;\n  },\n  toDOMRange: (editor, range) => {\n    var {\n      anchor,\n      focus\n    } = range;\n    var isBackward = Range.isBackward(range);\n    var domAnchor = DOMEditor.toDOMPoint(editor, anchor);\n    var domFocus = Range.isCollapsed(range) ? domAnchor : DOMEditor.toDOMPoint(editor, focus);\n    var window = DOMEditor.getWindow(editor);\n    var domRange = window.document.createRange();\n    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;\n    var [endNode, endOffset] = isBackward ? domAnchor : domFocus;\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;\n    var isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width');\n    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;\n    var isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width');\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);\n    return domRange;\n  },\n  toSlateNode: (editor, domNode) => {\n    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(\"[data-slate-node]\");\n    }\n    var node = domEl ? ELEMENT_TO_NODE.get(domEl) : null;\n    if (!node) {\n      throw new Error(\"Cannot resolve a Slate node from DOM node: \".concat(domEl));\n    }\n    return node;\n  },\n  toSlatePoint: (editor, domPoint, options) => {\n    var {\n      exactMatch,\n      suppressThrow,\n      searchDirection = 'backward'\n    } = options;\n    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);\n    var parentNode = nearestNode.parentNode;\n    var textNode = null;\n    var offset = 0;\n    if (parentNode) {\n      var _domNode$textContent, _domNode$textContent2;\n      var editorEl = DOMEditor.toDOMNode(editor, editor);\n      var potentialVoidNode = parentNode.closest('[data-slate-void=\"true\"]');\n      // Need to ensure that the closest void node is actually a void node\n      // within this editor, and not a void node within some parent editor. This can happen\n      // if this editor is within a void node of another editor (\"nested editors\", like in\n      // the \"Editable Voids\" example on the docs site).\n      var voidNode = potentialVoidNode && editorEl.contains(potentialVoidNode) ? potentialVoidNode : null;\n      var potentialNonEditableNode = parentNode.closest('[contenteditable=\"false\"]');\n      var nonEditableNode = potentialNonEditableNode && editorEl.contains(potentialNonEditableNode) ? potentialNonEditableNode : null;\n      var leafNode = parentNode.closest('[data-slate-leaf]');\n      var domNode = null;\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]');\n        if (textNode) {\n          var window = DOMEditor.getWindow(editor);\n          var range = window.document.createRange();\n          range.setStart(textNode, 0);\n          range.setEnd(nearestNode, nearestOffset);\n          var contents = range.cloneContents();\n          var removals = [...Array.prototype.slice.call(contents.querySelectorAll('[data-slate-zero-width]')), ...Array.prototype.slice.call(contents.querySelectorAll('[contenteditable=false]'))];\n          removals.forEach(el => {\n            // COMPAT: While composing at the start of a text node, some keyboards put\n            // the text content inside the zero width space.\n            if (IS_ANDROID && !exactMatch && el.hasAttribute('data-slate-zero-width') && el.textContent.length > 0 && el.textContext !== '\\uFEFF') {\n              if (el.textContent.startsWith('\\uFEFF')) {\n                el.textContent = el.textContent.slice(1);\n              }\n              return;\n            }\n            el.parentNode.removeChild(el);\n          });\n          // COMPAT: Edge has a bug where Range.prototype.toString() will\n          // convert \\n into \\r\\n. The bug causes a loop when slate-dom\n          // attempts to reposition its cursor to match the native position. Use\n          // textContent.length instead.\n          // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n          offset = contents.textContent.length;\n          domNode = textNode;\n        }\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent and taking the\n        // first one that isn't inside a nested editor.\n        var leafNodes = voidNode.querySelectorAll('[data-slate-leaf]');\n        for (var index = 0; index < leafNodes.length; index++) {\n          var current = leafNodes[index];\n          if (DOMEditor.hasDOMNode(editor, current)) {\n            leafNode = current;\n            break;\n          }\n        }\n        // COMPAT: In read-only editors the leaf is not rendered.\n        if (!leafNode) {\n          offset = 1;\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]');\n          domNode = leafNode;\n          offset = domNode.textContent.length;\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent.length;\n          });\n        }\n      } else if (nonEditableNode) {\n        // Find the edge of the nearest leaf in `searchDirection`\n        var getLeafNodes = node => node ? node.querySelectorAll(\n        // Exclude leaf nodes in nested editors\n        '[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])') : [];\n        var elementNode = nonEditableNode.closest('[data-slate-node=\"element\"]');\n        if (searchDirection === 'forward') {\n          var _leafNodes$find;\n          var _leafNodes = [...getLeafNodes(elementNode), ...getLeafNodes(elementNode === null || elementNode === void 0 ? void 0 : elementNode.nextElementSibling)];\n          leafNode = (_leafNodes$find = _leafNodes.find(leaf => isAfter(nonEditableNode, leaf))) !== null && _leafNodes$find !== void 0 ? _leafNodes$find : null;\n        } else {\n          var _leafNodes2$findLast;\n          var _leafNodes2 = [...getLeafNodes(elementNode === null || elementNode === void 0 ? void 0 : elementNode.previousElementSibling), ...getLeafNodes(elementNode)];\n          leafNode = (_leafNodes2$findLast = _leafNodes2.findLast(leaf => isBefore(nonEditableNode, leaf))) !== null && _leafNodes2$findLast !== void 0 ? _leafNodes2$findLast : null;\n        }\n        if (leafNode) {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]');\n          domNode = leafNode;\n          if (searchDirection === 'forward') {\n            offset = 0;\n          } else {\n            offset = domNode.textContent.length;\n            domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n              offset -= el.textContent.length;\n            });\n          }\n        }\n      }\n      if (domNode && offset === domNode.textContent.length &&\n      // COMPAT: Android IMEs might remove the zero width space while composing,\n      // and we don't add it for line-breaks.\n      IS_ANDROID && domNode.getAttribute('data-slate-zero-width') === 'z' && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.startsWith('\\uFEFF') && (\n      // COMPAT: If the parent node is a Slate zero-width space, editor is\n      // because the text node should have no characters. However, during IME\n      // composition the ASCII characters will be prepended to the zero-width\n      // space, so subtract 1 from the offset to account for the zero-width\n      // space character.\n      parentNode.hasAttribute('data-slate-zero-width') ||\n      // COMPAT: In Firefox, `range.cloneContents()` returns an extra trailing '\\n'\n      // when the document ends with a new-line character. This results in the offset\n      // length being off by one, so we need to subtract one to account for this.\n      IS_FIREFOX && (_domNode$textContent2 = domNode.textContent) !== null && _domNode$textContent2 !== void 0 && _domNode$textContent2.endsWith('\\n\\n'))) {\n        offset--;\n      }\n    }\n    if (IS_ANDROID && !textNode && !exactMatch) {\n      var node = parentNode.hasAttribute('data-slate-node') ? parentNode : parentNode.closest('[data-slate-node]');\n      if (node && DOMEditor.hasDOMNode(editor, node, {\n        editable: true\n      })) {\n        var _slateNode = DOMEditor.toSlateNode(editor, node);\n        var {\n          path: _path,\n          offset: _offset\n        } = Editor.start(editor, DOMEditor.findPath(editor, _slateNode));\n        if (!node.querySelector('[data-slate-leaf]')) {\n          _offset = nearestOffset;\n        }\n        return {\n          path: _path,\n          offset: _offset\n        };\n      }\n    }\n    if (!textNode) {\n      if (suppressThrow) {\n        return null;\n      }\n      throw new Error(\"Cannot resolve a Slate point from DOM point: \".concat(domPoint));\n    }\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    var slateNode = DOMEditor.toSlateNode(editor, textNode);\n    var path = DOMEditor.findPath(editor, slateNode);\n    return {\n      path,\n      offset\n    };\n  },\n  toSlateRange: (editor, domRange, options) => {\n    var _focusNode$textConten;\n    var {\n      exactMatch,\n      suppressThrow\n    } = options;\n    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;\n    var anchorNode;\n    var anchorOffset;\n    var focusNode;\n    var focusOffset;\n    var isCollapsed;\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        // COMPAT: In firefox the normal seletion way does not work\n        // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n        if (IS_FIREFOX && domRange.rangeCount > 1) {\n          focusNode = domRange.focusNode; // Focus node works fine\n          var firstRange = domRange.getRangeAt(0);\n          var lastRange = domRange.getRangeAt(domRange.rangeCount - 1);\n          // Here we are in the contenteditable mode of a table in firefox\n          if (focusNode instanceof HTMLTableRowElement && firstRange.startContainer instanceof HTMLTableRowElement && lastRange.startContainer instanceof HTMLTableRowElement) {\n            // HTMLElement, becouse Element is a slate element\n            function getLastChildren(element) {\n              if (element.childElementCount > 0) {\n                return getLastChildren(element.children[0]);\n              } else {\n                return element;\n              }\n            }\n            var firstNodeRow = firstRange.startContainer;\n            var lastNodeRow = lastRange.startContainer;\n            // This should never fail as \"The HTMLElement interface represents any HTML element.\"\n            var firstNode = getLastChildren(firstNodeRow.children[firstRange.startOffset]);\n            var lastNode = getLastChildren(lastNodeRow.children[lastRange.startOffset]);\n            // Zero, as we allways take the right one as the anchor point\n            focusOffset = 0;\n            if (lastNode.childNodes.length > 0) {\n              anchorNode = lastNode.childNodes[0];\n            } else {\n              anchorNode = lastNode;\n            }\n            if (firstNode.childNodes.length > 0) {\n              focusNode = firstNode.childNodes[0];\n            } else {\n              focusNode = firstNode;\n            }\n            if (lastNode instanceof HTMLElement) {\n              anchorOffset = lastNode.innerHTML.length;\n            } else {\n              // Fallback option\n              anchorOffset = 0;\n            }\n          } else {\n            // This is the read only mode of a firefox table\n            // Right to left\n            if (firstRange.startContainer === focusNode) {\n              anchorNode = lastRange.endContainer;\n              anchorOffset = lastRange.endOffset;\n              focusOffset = firstRange.startOffset;\n            } else {\n              // Left to right\n              anchorNode = firstRange.startContainer;\n              anchorOffset = firstRange.endOffset;\n              focusOffset = lastRange.startOffset;\n            }\n          }\n        } else {\n          anchorNode = domRange.anchorNode;\n          anchorOffset = domRange.anchorOffset;\n          focusNode = domRange.focusNode;\n          focusOffset = domRange.focusOffset;\n        }\n        // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n        // IsCollapsed might not work in firefox, but this will\n        if (IS_CHROME && hasShadowRoot(anchorNode) || IS_FIREFOX) {\n          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;\n        } else {\n          isCollapsed = domRange.isCollapsed;\n        }\n      } else {\n        anchorNode = domRange.startContainer;\n        anchorOffset = domRange.startOffset;\n        focusNode = domRange.endContainer;\n        focusOffset = domRange.endOffset;\n        isCollapsed = domRange.collapsed;\n      }\n    }\n    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {\n      throw new Error(\"Cannot resolve a Slate range from DOM range: \".concat(domRange));\n    }\n    // COMPAT: Firefox sometimes includes an extra \\n (rendered by TextString\n    // when isTrailing is true) in the focusOffset, resulting in an invalid\n    // Slate point. (2023/11/01)\n    if (IS_FIREFOX && (_focusNode$textConten = focusNode.textContent) !== null && _focusNode$textConten !== void 0 && _focusNode$textConten.endsWith('\\n\\n') && focusOffset === focusNode.textContent.length) {\n      focusOffset--;\n    }\n    var anchor = DOMEditor.toSlatePoint(editor, [anchorNode, anchorOffset], {\n      exactMatch,\n      suppressThrow\n    });\n    if (!anchor) {\n      return null;\n    }\n    var focusBeforeAnchor = isBefore(anchorNode, focusNode) || anchorNode === focusNode && focusOffset < anchorOffset;\n    var focus = isCollapsed ? anchor : DOMEditor.toSlatePoint(editor, [focusNode, focusOffset], {\n      exactMatch,\n      suppressThrow,\n      searchDirection: focusBeforeAnchor ? 'forward' : 'backward'\n    });\n    if (!focus) {\n      return null;\n    }\n    var range = {\n      anchor: anchor,\n      focus: focus\n    };\n    // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n    if (Range.isExpanded(range) && Range.isForward(range) && isDOMElement(focusNode) && Editor.void(editor, {\n      at: range.focus,\n      mode: 'highest'\n    })) {\n      range = Editor.unhangRange(editor, range, {\n        voids: true\n      });\n    }\n    return range;\n  }\n};\n\n/**\n * Check whether a text diff was applied in a way we can perform the pending action on /\n * recover the pending selection.\n */\nfunction verifyDiffState(editor, textDiff) {\n  var {\n    path,\n    diff\n  } = textDiff;\n  if (!Editor.hasPath(editor, path)) {\n    return false;\n  }\n  var node = Node.get(editor, path);\n  if (!Text.isText(node)) {\n    return false;\n  }\n  if (diff.start !== node.text.length || diff.text.length === 0) {\n    return node.text.slice(diff.start, diff.start + diff.text.length) === diff.text;\n  }\n  var nextPath = Path.next(path);\n  if (!Editor.hasPath(editor, nextPath)) {\n    return false;\n  }\n  var nextNode = Node.get(editor, nextPath);\n  return Text.isText(nextNode) && nextNode.text.startsWith(diff.text);\n}\nfunction applyStringDiff(text) {\n  for (var _len = arguments.length, diffs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    diffs[_key - 1] = arguments[_key];\n  }\n  return diffs.reduce((text, diff) => text.slice(0, diff.start) + diff.text + text.slice(diff.end), text);\n}\nfunction longestCommonPrefixLength(str, another) {\n  var length = Math.min(str.length, another.length);\n  for (var i = 0; i < length; i++) {\n    if (str.charAt(i) !== another.charAt(i)) {\n      return i;\n    }\n  }\n  return length;\n}\nfunction longestCommonSuffixLength(str, another, max) {\n  var length = Math.min(str.length, another.length, max);\n  for (var i = 0; i < length; i++) {\n    if (str.charAt(str.length - i - 1) !== another.charAt(another.length - i - 1)) {\n      return i;\n    }\n  }\n  return length;\n}\n/**\n * Remove redundant changes from the diff so that it spans the minimal possible range\n */\nfunction normalizeStringDiff(targetText, diff) {\n  var {\n    start,\n    end,\n    text\n  } = diff;\n  var removedText = targetText.slice(start, end);\n  var prefixLength = longestCommonPrefixLength(removedText, text);\n  var max = Math.min(removedText.length - prefixLength, text.length - prefixLength);\n  var suffixLength = longestCommonSuffixLength(removedText, text, max);\n  var normalized = {\n    start: start + prefixLength,\n    end: end - suffixLength,\n    text: text.slice(prefixLength, text.length - suffixLength)\n  };\n  if (normalized.start === normalized.end && normalized.text.length === 0) {\n    return null;\n  }\n  return normalized;\n}\n/**\n * Return a string diff that is equivalent to applying b after a spanning the range of\n * both changes\n */\nfunction mergeStringDiffs(targetText, a, b) {\n  var start = Math.min(a.start, b.start);\n  var overlap = Math.max(0, Math.min(a.start + a.text.length, b.end) - b.start);\n  var applied = applyStringDiff(targetText, a, b);\n  var sliceEnd = Math.max(b.start + b.text.length, a.start + a.text.length + (a.start + a.text.length > b.start ? b.text.length : 0) - overlap);\n  var text = applied.slice(start, sliceEnd);\n  var end = Math.max(a.end, b.end - a.text.length + (a.end - a.start));\n  return normalizeStringDiff(targetText, {\n    start,\n    end,\n    text\n  });\n}\n/**\n * Get the slate range the text diff spans.\n */\nfunction targetRange(textDiff) {\n  var {\n    path,\n    diff\n  } = textDiff;\n  return {\n    anchor: {\n      path,\n      offset: diff.start\n    },\n    focus: {\n      path,\n      offset: diff.end\n    }\n  };\n}\n/**\n * Normalize a 'pending point' a.k.a a point based on the dom state before applying\n * the pending diffs. Since the pending diffs might have been inserted with different\n * marks we have to 'walk' the offset from the starting position to ensure we still\n * have a valid point inside the document\n */\nfunction normalizePoint(editor, point) {\n  var {\n    path,\n    offset\n  } = point;\n  if (!Editor.hasPath(editor, path)) {\n    return null;\n  }\n  var leaf = Node.get(editor, path);\n  if (!Text.isText(leaf)) {\n    return null;\n  }\n  var parentBlock = Editor.above(editor, {\n    match: n => Element.isElement(n) && Editor.isBlock(editor, n),\n    at: path\n  });\n  if (!parentBlock) {\n    return null;\n  }\n  while (offset > leaf.text.length) {\n    var entry = Editor.next(editor, {\n      at: path,\n      match: Text.isText\n    });\n    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {\n      return null;\n    }\n    offset -= leaf.text.length;\n    leaf = entry[0];\n    path = entry[1];\n  }\n  return {\n    path,\n    offset\n  };\n}\n/**\n * Normalize a 'pending selection' to ensure it's valid in the current document state.\n */\nfunction normalizeRange(editor, range) {\n  var anchor = normalizePoint(editor, range.anchor);\n  if (!anchor) {\n    return null;\n  }\n  if (Range.isCollapsed(range)) {\n    return {\n      anchor,\n      focus: anchor\n    };\n  }\n  var focus = normalizePoint(editor, range.focus);\n  if (!focus) {\n    return null;\n  }\n  return {\n    anchor,\n    focus\n  };\n}\nfunction transformPendingPoint(editor, point, op) {\n  var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);\n  var textDiff = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find(_ref => {\n    var {\n      path\n    } = _ref;\n    return Path.equals(path, point.path);\n  });\n  if (!textDiff || point.offset <= textDiff.diff.start) {\n    return Point.transform(point, op, {\n      affinity: 'backward'\n    });\n  }\n  var {\n    diff\n  } = textDiff;\n  // Point references location inside the diff => transform the point based on the location\n  // the diff will be applied to and add the offset inside the diff.\n  if (point.offset <= diff.start + diff.text.length) {\n    var _anchor = {\n      path: point.path,\n      offset: diff.start\n    };\n    var _transformed = Point.transform(_anchor, op, {\n      affinity: 'backward'\n    });\n    if (!_transformed) {\n      return null;\n    }\n    return {\n      path: _transformed.path,\n      offset: _transformed.offset + point.offset - diff.start\n    };\n  }\n  // Point references location after the diff\n  var anchor = {\n    path: point.path,\n    offset: point.offset - diff.text.length + diff.end - diff.start\n  };\n  var transformed = Point.transform(anchor, op, {\n    affinity: 'backward'\n  });\n  if (!transformed) {\n    return null;\n  }\n  if (op.type === 'split_node' && Path.equals(op.path, point.path) && anchor.offset < op.position && diff.start < op.position) {\n    return transformed;\n  }\n  return {\n    path: transformed.path,\n    offset: transformed.offset + diff.text.length - diff.end + diff.start\n  };\n}\nfunction transformPendingRange(editor, range, op) {\n  var anchor = transformPendingPoint(editor, range.anchor, op);\n  if (!anchor) {\n    return null;\n  }\n  if (Range.isCollapsed(range)) {\n    return {\n      anchor,\n      focus: anchor\n    };\n  }\n  var focus = transformPendingPoint(editor, range.focus, op);\n  if (!focus) {\n    return null;\n  }\n  return {\n    anchor,\n    focus\n  };\n}\nfunction transformTextDiff(textDiff, op) {\n  var {\n    path,\n    diff,\n    id\n  } = textDiff;\n  switch (op.type) {\n    case 'insert_text':\n      {\n        if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n          return textDiff;\n        }\n        if (op.offset <= diff.start) {\n          return {\n            diff: {\n              start: op.text.length + diff.start,\n              end: op.text.length + diff.end,\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n        return {\n          diff: {\n            start: diff.start,\n            end: diff.end + op.text.length,\n            text: diff.text\n          },\n          id,\n          path\n        };\n      }\n    case 'remove_text':\n      {\n        if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n          return textDiff;\n        }\n        if (op.offset + op.text.length <= diff.start) {\n          return {\n            diff: {\n              start: diff.start - op.text.length,\n              end: diff.end - op.text.length,\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n        return {\n          diff: {\n            start: diff.start,\n            end: diff.end - op.text.length,\n            text: diff.text\n          },\n          id,\n          path\n        };\n      }\n    case 'split_node':\n      {\n        if (!Path.equals(op.path, path) || op.position >= diff.end) {\n          return {\n            diff,\n            id,\n            path: Path.transform(path, op, {\n              affinity: 'backward'\n            })\n          };\n        }\n        if (op.position > diff.start) {\n          return {\n            diff: {\n              start: diff.start,\n              end: Math.min(op.position, diff.end),\n              text: diff.text\n            },\n            id,\n            path\n          };\n        }\n        return {\n          diff: {\n            start: diff.start - op.position,\n            end: diff.end - op.position,\n            text: diff.text\n          },\n          id,\n          path: Path.transform(path, op, {\n            affinity: 'forward'\n          })\n        };\n      }\n    case 'merge_node':\n      {\n        if (!Path.equals(op.path, path)) {\n          return {\n            diff,\n            id,\n            path: Path.transform(path, op)\n          };\n        }\n        return {\n          diff: {\n            start: diff.start + op.position,\n            end: diff.end + op.position,\n            text: diff.text\n          },\n          id,\n          path: Path.transform(path, op)\n        };\n      }\n  }\n  var newPath = Path.transform(path, op);\n  if (!newPath) {\n    return null;\n  }\n  return {\n    diff,\n    path: newPath,\n    id\n  };\n}\n\n/**\n * Utilities for single-line deletion\n */\nvar doRectsIntersect = (rect, compareRect) => {\n  var middle = (compareRect.top + compareRect.bottom) / 2;\n  return rect.top <= middle && rect.bottom >= middle;\n};\nvar areRangesSameLine = (editor, range1, range2) => {\n  var rect1 = DOMEditor.toDOMRange(editor, range1).getBoundingClientRect();\n  var rect2 = DOMEditor.toDOMRange(editor, range2).getBoundingClientRect();\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);\n};\n/**\n * A helper utility that returns the end portion of a `Range`\n * which is located on a single line.\n *\n * @param {Editor} editor The editor object to compare against\n * @param {Range} parentRange The parent range to compare against\n * @returns {Range} A valid portion of the parentRange which is one a single line\n */\nvar findCurrentLineRange = (editor, parentRange) => {\n  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));\n  var positions = Array.from(Editor.positions(editor, {\n    at: parentRange\n  }));\n  var left = 0;\n  var right = positions.length;\n  var middle = Math.floor(right / 2);\n  if (areRangesSameLine(editor, Editor.range(editor, positions[left]), parentRangeBoundary)) {\n    return Editor.range(editor, positions[left], parentRangeBoundary);\n  }\n  if (positions.length < 2) {\n    return Editor.range(editor, positions[positions.length - 1], parentRangeBoundary);\n  }\n  while (middle !== positions.length && middle !== left) {\n    if (areRangesSameLine(editor, Editor.range(editor, positions[middle]), parentRangeBoundary)) {\n      right = middle;\n    } else {\n      left = middle;\n    }\n    middle = Math.floor((left + right) / 2);\n  }\n  return Editor.range(editor, positions[left], parentRangeBoundary);\n};\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * `withDOM` adds DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\nvar withDOM = function withDOM(editor) {\n  var clipboardFormatKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x-slate-fragment';\n  var e = editor;\n  var {\n    apply,\n    onChange,\n    deleteBackward,\n    addMark,\n    removeMark\n  } = e;\n  // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap());\n  e.addMark = (key, value) => {\n    var _EDITOR_TO_SCHEDULE_F, _EDITOR_TO_PENDING_DI;\n    (_EDITOR_TO_SCHEDULE_F = EDITOR_TO_SCHEDULE_FLUSH.get(e)) === null || _EDITOR_TO_SCHEDULE_F === void 0 || _EDITOR_TO_SCHEDULE_F();\n    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e) && (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(e)) !== null && _EDITOR_TO_PENDING_DI !== void 0 && _EDITOR_TO_PENDING_DI.length) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null);\n    }\n    EDITOR_TO_USER_MARKS.delete(e);\n    addMark(key, value);\n  };\n  e.removeMark = key => {\n    var _EDITOR_TO_PENDING_DI2;\n    if (!EDITOR_TO_PENDING_INSERTION_MARKS.get(e) && (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(e)) !== null && _EDITOR_TO_PENDING_DI2 !== void 0 && _EDITOR_TO_PENDING_DI2.length) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null);\n    }\n    EDITOR_TO_USER_MARKS.delete(e);\n    removeMark(key);\n  };\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit);\n    }\n    if (e.selection && Range.isCollapsed(e.selection)) {\n      var parentBlockEntry = Editor.above(e, {\n        match: n => Element.isElement(n) && Editor.isBlock(e, n),\n        at: e.selection\n      });\n      if (parentBlockEntry) {\n        var [, parentBlockPath] = parentBlockEntry;\n        var parentElementRange = Editor.range(e, parentBlockPath, e.selection.anchor);\n        var currentLineRange = findCurrentLineRange(e, parentElementRange);\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(e, {\n            at: currentLineRange\n          });\n        }\n      }\n    }\n  };\n  // This attempts to reset the NODE_TO_KEY entry to the correct value\n  // as apply() changes the object reference and hence invalidates the NODE_TO_KEY entry\n  e.apply = op => {\n    var matches = [];\n    var pathRefMatches = [];\n    var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e);\n    if (pendingDiffs !== null && pendingDiffs !== void 0 && pendingDiffs.length) {\n      var transformed = pendingDiffs.map(textDiff => transformTextDiff(textDiff, op)).filter(Boolean);\n      EDITOR_TO_PENDING_DIFFS.set(e, transformed);\n    }\n    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e);\n    if (pendingSelection) {\n      EDITOR_TO_PENDING_SELECTION.set(e, transformPendingRange(e, pendingSelection, op));\n    }\n    var pendingAction = EDITOR_TO_PENDING_ACTION.get(e);\n    if (pendingAction !== null && pendingAction !== void 0 && pendingAction.at) {\n      var at = Point.isPoint(pendingAction === null || pendingAction === void 0 ? void 0 : pendingAction.at) ? transformPendingPoint(e, pendingAction.at, op) : transformPendingRange(e, pendingAction.at, op);\n      EDITOR_TO_PENDING_ACTION.set(e, at ? _objectSpread(_objectSpread({}, pendingAction), {}, {\n        at\n      }) : null);\n    }\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n      case 'split_node':\n        {\n          matches.push(...getMatches(e, op.path));\n          break;\n        }\n      case 'set_selection':\n        {\n          var _EDITOR_TO_USER_SELEC;\n          // Selection was manually set, don't restore the user selection after the change.\n          (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(e)) === null || _EDITOR_TO_USER_SELEC === void 0 || _EDITOR_TO_USER_SELEC.unref();\n          EDITOR_TO_USER_SELECTION.delete(e);\n          break;\n        }\n      case 'insert_node':\n      case 'remove_node':\n        {\n          matches.push(...getMatches(e, Path.parent(op.path)));\n          break;\n        }\n      case 'merge_node':\n        {\n          var prevPath = Path.previous(op.path);\n          matches.push(...getMatches(e, prevPath));\n          break;\n        }\n      case 'move_node':\n        {\n          var commonPath = Path.common(Path.parent(op.path), Path.parent(op.newPath));\n          matches.push(...getMatches(e, commonPath));\n          var changedPath;\n          if (Path.isBefore(op.path, op.newPath)) {\n            matches.push(...getMatches(e, Path.parent(op.path)));\n            changedPath = op.newPath;\n          } else {\n            matches.push(...getMatches(e, Path.parent(op.newPath)));\n            changedPath = op.path;\n          }\n          var changedNode = Node.get(editor, Path.parent(changedPath));\n          var changedNodeKey = DOMEditor.findKey(e, changedNode);\n          var changedPathRef = Editor.pathRef(e, Path.parent(changedPath));\n          pathRefMatches.push([changedPathRef, changedNodeKey]);\n          break;\n        }\n    }\n    apply(op);\n    switch (op.type) {\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'move_node':\n      case 'split_node':\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_selection':\n        {\n          // FIXME: Rename to something like IS_DOM_EDITOR_DESYNCED\n          // to better reflect reality, see #5792\n          IS_NODE_MAP_DIRTY.set(e, true);\n        }\n    }\n    for (var [path, key] of matches) {\n      var [node] = Editor.node(e, path);\n      NODE_TO_KEY.set(node, key);\n    }\n    for (var [pathRef, _key] of pathRefMatches) {\n      if (pathRef.current) {\n        var [_node] = Editor.node(e, pathRef.current);\n        NODE_TO_KEY.set(_node, _key);\n      }\n      pathRef.unref();\n    }\n  };\n  e.setFragmentData = data => {\n    var {\n      selection\n    } = e;\n    if (!selection) {\n      return;\n    }\n    var [start, end] = Range.edges(selection);\n    var startVoid = Editor.void(e, {\n      at: start.path\n    });\n    var endVoid = Editor.void(e, {\n      at: end.path\n    });\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return;\n    }\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    var domRange = DOMEditor.toDOMRange(e, selection);\n    var contents = domRange.cloneContents();\n    var attach = contents.childNodes[0];\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node;\n      }\n    });\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      var [voidNode] = endVoid;\n      var r = domRange.cloneRange();\n      var domNode = DOMEditor.toDOMNode(e, voidNode);\n      r.setEndAfter(domNode);\n      contents = r.cloneContents();\n    }\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]');\n    }\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(zw => {\n      var isNewline = zw.getAttribute('data-slate-zero-width') === 'n';\n      zw.textContent = isNewline ? '\\n' : '';\n    });\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      var span = attach.ownerDocument.createElement('span');\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre';\n      span.appendChild(attach);\n      contents.appendChild(span);\n      attach = span;\n    }\n    var fragment = e.getFragment();\n    var string = JSON.stringify(fragment);\n    var encoded = window.btoa(encodeURIComponent(string));\n    attach.setAttribute('data-slate-fragment', encoded);\n    data.setData(\"application/\".concat(clipboardFormatKey), encoded);\n    // Add the content to a <div> so that we can get its inner HTML.\n    var div = contents.ownerDocument.createElement('div');\n    div.appendChild(contents);\n    div.setAttribute('hidden', 'true');\n    contents.ownerDocument.body.appendChild(div);\n    data.setData('text/html', div.innerHTML);\n    data.setData('text/plain', getPlainText(div));\n    contents.ownerDocument.body.removeChild(div);\n    return data;\n  };\n  e.insertData = data => {\n    if (!e.insertFragmentData(data)) {\n      e.insertTextData(data);\n    }\n  };\n  e.insertFragmentData = data => {\n    /**\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\n     */\n    var fragment = data.getData(\"application/\".concat(clipboardFormatKey)) || getSlateFragmentAttribute(data);\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      e.insertFragment(parsed);\n      return true;\n    }\n    return false;\n  };\n  e.insertTextData = data => {\n    var text = data.getData('text/plain');\n    if (text) {\n      var lines = text.split(/\\r\\n|\\r|\\n/);\n      var split = false;\n      for (var line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, {\n            always: true\n          });\n        }\n        e.insertText(line);\n        split = true;\n      }\n      return true;\n    }\n    return false;\n  };\n  e.onChange = options => {\n    var onContextChange = EDITOR_TO_ON_CHANGE.get(e);\n    if (onContextChange) {\n      onContextChange(options);\n    }\n    onChange(options);\n  };\n  return e;\n};\nvar getMatches = (e, path) => {\n  var matches = [];\n  for (var [n, p] of Editor.levels(e, {\n    at: path\n  })) {\n    var key = DOMEditor.findKey(e, n);\n    matches.push([p, key]);\n  }\n  return matches;\n};\n\nvar TRIPLE_CLICK = 3;\n\n/**\n * Hotkey mappings for each platform.\n */\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  insertSoftBreak: 'shift+enter',\n  splitBlock: 'enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z']\n};\n/**\n * Create a platform-aware hotkey checker.\n */\nvar create = key => {\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && isHotkey(generic);\n  var isApple = apple && isHotkey(apple);\n  var isWindows = windows && isHotkey(windows);\n  return event => {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (!IS_APPLE && isWindows && isWindows(event)) return true;\n    return false;\n  };\n};\n/**\n * Hotkeys.\n */\nvar hotkeys = {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSoftBreak: create('insertSoftBreak'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo')\n};\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nvar _excluded = [\"anchor\", \"focus\"],\n  _excluded2 = [\"anchor\", \"focus\"];\nvar shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every(key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);\nvar isDecorationFlagsEqual = (range, other) => {\n  var rangeOwnProps = _objectWithoutProperties(range, _excluded);\n  var otherOwnProps = _objectWithoutProperties(other, _excluded2);\n  return range[PLACEHOLDER_SYMBOL] === other[PLACEHOLDER_SYMBOL] && shallowCompare(rangeOwnProps, otherOwnProps);\n};\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\nvar isElementDecorationsEqual = (list, another) => {\n  if (list.length !== another.length) {\n    return false;\n  }\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n    if (!Range.equals(range, other) || !isDecorationFlagsEqual(range, other)) {\n      return false;\n    }\n  }\n  return true;\n};\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\nvar isTextDecorationsEqual = (list, another) => {\n  if (list.length !== another.length) {\n    return false;\n  }\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n    // compare only offsets because paths doesn't matter for text\n    if (range.anchor.offset !== other.anchor.offset || range.focus.offset !== other.focus.offset || !isDecorationFlagsEqual(range, other)) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport { CAN_USE_DOM, DOMEditor, DOMElement, DOMNode, DOMRange, DOMSelection, DOMStaticRange, DOMText, EDITOR_TO_ELEMENT, EDITOR_TO_FORCE_RENDER, EDITOR_TO_KEY_TO_ELEMENT, EDITOR_TO_ON_CHANGE, EDITOR_TO_PENDING_ACTION, EDITOR_TO_PENDING_DIFFS, EDITOR_TO_PENDING_INSERTION_MARKS, EDITOR_TO_PENDING_SELECTION, EDITOR_TO_PLACEHOLDER_ELEMENT, EDITOR_TO_SCHEDULE_FLUSH, EDITOR_TO_USER_MARKS, EDITOR_TO_USER_SELECTION, EDITOR_TO_WINDOW, ELEMENT_TO_NODE, HAS_BEFORE_INPUT_SUPPORT, hotkeys as Hotkeys, IS_ANDROID, IS_CHROME, IS_COMPOSING, IS_FIREFOX, IS_FIREFOX_LEGACY, IS_FOCUSED, IS_IOS, IS_NODE_MAP_DIRTY, IS_READ_ONLY, IS_UC_MOBILE, IS_WEBKIT, IS_WECHATBROWSER, Key, MARK_PLACEHOLDER_SYMBOL, NODE_TO_ELEMENT, NODE_TO_INDEX, NODE_TO_KEY, NODE_TO_PARENT, PLACEHOLDER_SYMBOL, TRIPLE_CLICK, applyStringDiff, getActiveElement, getDefaultView, getSelection, hasShadowRoot, isAfter, isBefore, isDOMElement, isDOMNode, isDOMSelection, isElementDecorationsEqual, isPlainTextOnlyPaste, isTextDecorationsEqual, isTrackedMutation, mergeStringDiffs, normalizeDOMPoint, normalizePoint, normalizeRange, normalizeStringDiff, targetRange, verifyDiffState, withDOM };\n//# sourceMappingURL=index.es.js.map\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","var resizeObservers = [];\nexport { resizeObservers };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","import getDirection from 'direction';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport React, { createContext, useContext, useRef, useEffect, useLayoutEffect, useState, memo, forwardRef, useCallback, Component, useReducer, useMemo } from 'react';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { Editor, Range, Transforms, Node, Text as Text$1, Path, Point, Element as Element$1, Scrubber } from 'slate';\nimport { DOMEditor, EDITOR_TO_USER_MARKS, EDITOR_TO_PENDING_DIFFS, EDITOR_TO_PENDING_ACTION, EDITOR_TO_PENDING_INSERTION_MARKS, targetRange, verifyDiffState, EDITOR_TO_PENDING_SELECTION, IS_COMPOSING, IS_NODE_MAP_DIRTY, applyStringDiff, isDOMSelection, isTrackedMutation, EDITOR_TO_FORCE_RENDER, normalizeRange, normalizePoint, EDITOR_TO_PLACEHOLDER_ELEMENT, normalizeStringDiff, mergeStringDiffs, CAN_USE_DOM, IS_ANDROID, EDITOR_TO_SCHEDULE_FLUSH, MARK_PLACEHOLDER_SYMBOL, IS_IOS, PLACEHOLDER_SYMBOL, IS_WEBKIT, isTextDecorationsEqual, EDITOR_TO_KEY_TO_ELEMENT, NODE_TO_ELEMENT, ELEMENT_TO_NODE, isElementDecorationsEqual, NODE_TO_INDEX, NODE_TO_PARENT, IS_READ_ONLY, getActiveElement, getSelection, IS_FOCUSED, getDefaultView, EDITOR_TO_WINDOW, EDITOR_TO_ELEMENT, IS_FIREFOX, EDITOR_TO_USER_SELECTION, HAS_BEFORE_INPUT_SUPPORT, isDOMElement, isDOMNode, TRIPLE_CLICK, IS_FIREFOX_LEGACY, IS_WECHATBROWSER, IS_UC_MOBILE, Hotkeys, IS_CHROME, isPlainTextOnlyPaste, EDITOR_TO_ON_CHANGE, withDOM } from 'slate-dom';\nexport { NODE_TO_INDEX, NODE_TO_PARENT } from 'slate-dom';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport ReactDOM from 'react-dom';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n/**\n * A React context for sharing the editor object.\n */\nvar EditorContext = /*#__PURE__*/createContext(null);\n/**\n * Get the current editor object from the React context.\n */\nvar useSlateStatic = () => {\n  var editor = useContext(EditorContext);\n  if (!editor) {\n    throw new Error(\"The `useSlateStatic` hook must be used inside the <Slate> component's context.\");\n  }\n  return editor;\n};\n\n// eslint-disable-next-line no-redeclare\nvar ReactEditor = DOMEditor;\n\nfunction ownKeys$6(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$6(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$6(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$6(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// https://github.com/facebook/draft-js/blob/main/src/component/handlers/composition/DraftEditorCompositionHandler.js#L41\n// When using keyboard English association function, conpositionEnd triggered too fast, resulting in after `insertText` still maintain association state.\nvar RESOLVE_DELAY = 25;\n// Time with no user interaction before the current user action is considered as done.\nvar FLUSH_DELAY = 200;\n// Replace with `const debug = console.log` to debug\nvar debug = function debug() {};\n// Type guard to check if a value is a DataTransfer\nvar isDataTransfer = value => (value === null || value === void 0 ? void 0 : value.constructor.name) === 'DataTransfer';\nfunction createAndroidInputManager(_ref) {\n  var {\n    editor,\n    scheduleOnDOMSelectionChange,\n    onDOMSelectionChange\n  } = _ref;\n  var flushing = false;\n  var compositionEndTimeoutId = null;\n  var flushTimeoutId = null;\n  var actionTimeoutId = null;\n  var idCounter = 0;\n  var insertPositionHint = false;\n  var applyPendingSelection = () => {\n    var pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor);\n    EDITOR_TO_PENDING_SELECTION.delete(editor);\n    if (pendingSelection) {\n      var {\n        selection\n      } = editor;\n      var normalized = normalizeRange(editor, pendingSelection);\n      if (normalized && (!selection || !Range.equals(normalized, selection))) {\n        Transforms.select(editor, normalized);\n      }\n    }\n  };\n  var performAction = () => {\n    var action = EDITOR_TO_PENDING_ACTION.get(editor);\n    EDITOR_TO_PENDING_ACTION.delete(editor);\n    if (!action) {\n      return;\n    }\n    if (action.at) {\n      var target = Point.isPoint(action.at) ? normalizePoint(editor, action.at) : normalizeRange(editor, action.at);\n      if (!target) {\n        return;\n      }\n      var _targetRange = Editor.range(editor, target);\n      if (!editor.selection || !Range.equals(editor.selection, _targetRange)) {\n        Transforms.select(editor, target);\n      }\n    }\n    action.run();\n  };\n  var flush = () => {\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n    if (actionTimeoutId) {\n      clearTimeout(actionTimeoutId);\n      actionTimeoutId = null;\n    }\n    if (!hasPendingDiffs() && !hasPendingAction()) {\n      applyPendingSelection();\n      return;\n    }\n    if (!flushing) {\n      flushing = true;\n      setTimeout(() => flushing = false);\n    }\n    if (hasPendingAction()) {\n      flushing = 'action';\n    }\n    var selectionRef = editor.selection && Editor.rangeRef(editor, editor.selection, {\n      affinity: 'forward'\n    });\n    EDITOR_TO_USER_MARKS.set(editor, editor.marks);\n    debug('flush', EDITOR_TO_PENDING_ACTION.get(editor), EDITOR_TO_PENDING_DIFFS.get(editor));\n    var scheduleSelectionChange = hasPendingDiffs();\n    var diff;\n    while (diff = (_EDITOR_TO_PENDING_DI = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI === void 0 ? void 0 : _EDITOR_TO_PENDING_DI[0]) {\n      var _EDITOR_TO_PENDING_DI, _EDITOR_TO_PENDING_DI2;\n      var pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);\n      if (pendingMarks !== undefined) {\n        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n        editor.marks = pendingMarks;\n      }\n      if (pendingMarks && insertPositionHint === false) {\n        insertPositionHint = null;\n      }\n      var range = targetRange(diff);\n      if (!editor.selection || !Range.equals(editor.selection, range)) {\n        Transforms.select(editor, range);\n      }\n      if (diff.diff.text) {\n        Editor.insertText(editor, diff.diff.text);\n      } else {\n        Editor.deleteFragment(editor);\n      }\n      // Remove diff only after we have applied it to account for it when transforming\n      // pending ranges.\n      EDITOR_TO_PENDING_DIFFS.set(editor, (_EDITOR_TO_PENDING_DI2 = EDITOR_TO_PENDING_DIFFS.get(editor)) === null || _EDITOR_TO_PENDING_DI2 === void 0 ? void 0 : _EDITOR_TO_PENDING_DI2.filter(_ref2 => {\n        var {\n          id\n        } = _ref2;\n        return id !== diff.id;\n      }));\n      if (!verifyDiffState(editor, diff)) {\n        scheduleSelectionChange = false;\n        EDITOR_TO_PENDING_ACTION.delete(editor);\n        EDITOR_TO_USER_MARKS.delete(editor);\n        flushing = 'action';\n        // Ensure we don't restore the pending user (dom) selection\n        // since the document and dom state do not match.\n        EDITOR_TO_PENDING_SELECTION.delete(editor);\n        scheduleOnDOMSelectionChange.cancel();\n        onDOMSelectionChange.cancel();\n        selectionRef === null || selectionRef === void 0 || selectionRef.unref();\n      }\n    }\n    var selection = selectionRef === null || selectionRef === void 0 ? void 0 : selectionRef.unref();\n    if (selection && !EDITOR_TO_PENDING_SELECTION.get(editor) && (!editor.selection || !Range.equals(selection, editor.selection))) {\n      Transforms.select(editor, selection);\n    }\n    if (hasPendingAction()) {\n      performAction();\n      return;\n    }\n    // COMPAT: The selectionChange event is fired after the action is performed,\n    // so we have to manually schedule it to ensure we don't 'throw away' the selection\n    // while rendering if we have pending changes.\n    if (scheduleSelectionChange) {\n      scheduleOnDOMSelectionChange();\n    }\n    scheduleOnDOMSelectionChange.flush();\n    onDOMSelectionChange.flush();\n    applyPendingSelection();\n    var userMarks = EDITOR_TO_USER_MARKS.get(editor);\n    EDITOR_TO_USER_MARKS.delete(editor);\n    if (userMarks !== undefined) {\n      editor.marks = userMarks;\n      editor.onChange();\n    }\n  };\n  var handleCompositionEnd = _event => {\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId);\n    }\n    compositionEndTimeoutId = setTimeout(() => {\n      IS_COMPOSING.set(editor, false);\n      flush();\n    }, RESOLVE_DELAY);\n  };\n  var handleCompositionStart = _event => {\n    IS_COMPOSING.set(editor, true);\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId);\n      compositionEndTimeoutId = null;\n    }\n  };\n  var updatePlaceholderVisibility = function updatePlaceholderVisibility() {\n    var forceHide = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor);\n    if (!placeholderElement) {\n      return;\n    }\n    if (hasPendingDiffs() || forceHide) {\n      placeholderElement.style.display = 'none';\n      return;\n    }\n    placeholderElement.style.removeProperty('display');\n  };\n  var storeDiff = (path, diff) => {\n    var _EDITOR_TO_PENDING_DI3;\n    var pendingDiffs = (_EDITOR_TO_PENDING_DI3 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI3 !== void 0 ? _EDITOR_TO_PENDING_DI3 : [];\n    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs);\n    var target = Node.leaf(editor, path);\n    var idx = pendingDiffs.findIndex(change => Path.equals(change.path, path));\n    if (idx < 0) {\n      var normalized = normalizeStringDiff(target.text, diff);\n      if (normalized) {\n        pendingDiffs.push({\n          path,\n          diff,\n          id: idCounter++\n        });\n      }\n      updatePlaceholderVisibility();\n      return;\n    }\n    var merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff);\n    if (!merged) {\n      pendingDiffs.splice(idx, 1);\n      updatePlaceholderVisibility();\n      return;\n    }\n    pendingDiffs[idx] = _objectSpread$6(_objectSpread$6({}, pendingDiffs[idx]), {}, {\n      diff: merged\n    });\n  };\n  var scheduleAction = function scheduleAction(run) {\n    var {\n      at\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    insertPositionHint = false;\n    EDITOR_TO_PENDING_SELECTION.delete(editor);\n    scheduleOnDOMSelectionChange.cancel();\n    onDOMSelectionChange.cancel();\n    if (hasPendingAction()) {\n      flush();\n    }\n    EDITOR_TO_PENDING_ACTION.set(editor, {\n      at,\n      run\n    });\n    // COMPAT: When deleting before a non-contenteditable element chrome only fires a beforeinput,\n    // (no input) and doesn't perform any dom mutations. Without a flush timeout we would never flush\n    // in this case and thus never actually perform the action.\n    actionTimeoutId = setTimeout(flush);\n  };\n  var handleDOMBeforeInput = event => {\n    var _targetRange2;\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n    if (IS_NODE_MAP_DIRTY.get(editor)) {\n      return;\n    }\n    var {\n      inputType: type\n    } = event;\n    var targetRange = null;\n    var data = event.dataTransfer || event.data || undefined;\n    if (insertPositionHint !== false && type !== 'insertText' && type !== 'insertCompositionText') {\n      insertPositionHint = false;\n    }\n    var [nativeTargetRange] = event.getTargetRanges();\n    if (nativeTargetRange) {\n      targetRange = ReactEditor.toSlateRange(editor, nativeTargetRange, {\n        exactMatch: false,\n        suppressThrow: true\n      });\n    }\n    // COMPAT: SelectionChange event is fired after the action is performed, so we\n    // have to manually get the selection here to ensure it's up-to-date.\n    var window = ReactEditor.getWindow(editor);\n    var domSelection = window.getSelection();\n    if (!targetRange && domSelection) {\n      nativeTargetRange = domSelection;\n      targetRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false,\n        suppressThrow: true\n      });\n    }\n    targetRange = (_targetRange2 = targetRange) !== null && _targetRange2 !== void 0 ? _targetRange2 : editor.selection;\n    if (!targetRange) {\n      return;\n    }\n    // By default, the input manager tries to store text diffs so that we can\n    // defer flushing them at a later point in time. We don't want to flush\n    // for every input event as this can be expensive. However, there are some\n    // scenarios where we cannot safely store the text diff and must instead\n    // schedule an action to let Slate normalize the editor state.\n    var canStoreDiff = true;\n    if (type.startsWith('delete')) {\n      if (Range.isExpanded(targetRange)) {\n        var [_start, _end] = Range.edges(targetRange);\n        var _leaf = Node.leaf(editor, _start.path);\n        if (_leaf.text.length === _start.offset && _end.offset === 0) {\n          var next = Editor.next(editor, {\n            at: _start.path,\n            match: Text$1.isText\n          });\n          if (next && Path.equals(next[1], _end.path)) {\n            targetRange = {\n              anchor: _end,\n              focus: _end\n            };\n          }\n        }\n      }\n      var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n      var [start, end] = Range.edges(targetRange);\n      var [leaf, path] = Editor.leaf(editor, start.path);\n      var diff = {\n        text: '',\n        start: start.offset,\n        end: end.offset\n      };\n      var pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor);\n      var relevantPendingDiffs = pendingDiffs === null || pendingDiffs === void 0 ? void 0 : pendingDiffs.find(change => Path.equals(change.path, path));\n      var diffs = relevantPendingDiffs ? [relevantPendingDiffs.diff, diff] : [diff];\n      var text = applyStringDiff(leaf.text, ...diffs);\n      if (text.length === 0) {\n        // Text leaf will be removed, so we need to schedule an\n        // action to remove it so that Slate can normalize instead\n        // of storing as a diff\n        canStoreDiff = false;\n      }\n      if (Range.isExpanded(targetRange)) {\n        if (canStoreDiff && Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n          var point = {\n            path: targetRange.anchor.path,\n            offset: start.offset\n          };\n          var range = Editor.range(editor, point, point);\n          handleUserSelect(range);\n          return storeDiff(targetRange.anchor.path, {\n            text: '',\n            end: end.offset,\n            start: start.offset\n          });\n        }\n        return scheduleAction(() => Editor.deleteFragment(editor, {\n          direction\n        }), {\n          at: targetRange\n        });\n      }\n    }\n    switch (type) {\n      case 'deleteByComposition':\n      case 'deleteByCut':\n      case 'deleteByDrag':\n        {\n          return scheduleAction(() => Editor.deleteFragment(editor), {\n            at: targetRange\n          });\n        }\n      case 'deleteContent':\n      case 'deleteContentForward':\n        {\n          var {\n            anchor\n          } = targetRange;\n          if (canStoreDiff && Range.isCollapsed(targetRange)) {\n            var targetNode = Node.leaf(editor, anchor.path);\n            if (anchor.offset < targetNode.text.length) {\n              return storeDiff(anchor.path, {\n                text: '',\n                start: anchor.offset,\n                end: anchor.offset + 1\n              });\n            }\n          }\n          return scheduleAction(() => Editor.deleteForward(editor), {\n            at: targetRange\n          });\n        }\n      case 'deleteContentBackward':\n        {\n          var _nativeTargetRange;\n          var {\n            anchor: _anchor\n          } = targetRange;\n          // If we have a mismatch between the native and slate selection being collapsed\n          // we are most likely deleting a zero-width placeholder and thus should perform it\n          // as an action to ensure correct behavior (mostly happens with mark placeholders)\n          var nativeCollapsed = isDOMSelection(nativeTargetRange) ? nativeTargetRange.isCollapsed : !!((_nativeTargetRange = nativeTargetRange) !== null && _nativeTargetRange !== void 0 && _nativeTargetRange.collapsed);\n          if (canStoreDiff && nativeCollapsed && Range.isCollapsed(targetRange) && _anchor.offset > 0) {\n            return storeDiff(_anchor.path, {\n              text: '',\n              start: _anchor.offset - 1,\n              end: _anchor.offset\n            });\n          }\n          return scheduleAction(() => Editor.deleteBackward(editor), {\n            at: targetRange\n          });\n        }\n      case 'deleteEntireSoftLine':\n        {\n          return scheduleAction(() => {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n          }, {\n            at: targetRange\n          });\n        }\n      case 'deleteHardLineBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'block'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteSoftLineBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'line'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteHardLineForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'block'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteSoftLineForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'line'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteWordBackward':\n        {\n          return scheduleAction(() => Editor.deleteBackward(editor, {\n            unit: 'word'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'deleteWordForward':\n        {\n          return scheduleAction(() => Editor.deleteForward(editor, {\n            unit: 'word'\n          }), {\n            at: targetRange\n          });\n        }\n      case 'insertLineBreak':\n        {\n          return scheduleAction(() => Editor.insertSoftBreak(editor), {\n            at: targetRange\n          });\n        }\n      case 'insertParagraph':\n        {\n          return scheduleAction(() => Editor.insertBreak(editor), {\n            at: targetRange\n          });\n        }\n      case 'insertCompositionText':\n      case 'deleteCompositionText':\n      case 'insertFromComposition':\n      case 'insertFromDrop':\n      case 'insertFromPaste':\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText':\n        {\n          if (isDataTransfer(data)) {\n            return scheduleAction(() => ReactEditor.insertData(editor, data), {\n              at: targetRange\n            });\n          }\n          var _text = data !== null && data !== void 0 ? data : '';\n          // COMPAT: If we are writing inside a placeholder, the ime inserts the text inside\n          // the placeholder itself and thus includes the zero-width space inside edit events.\n          if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {\n            _text = _text.replace('\\uFEFF', '');\n          }\n          // Pastes from the Android clipboard will generate `insertText` events.\n          // If the copied text contains any newlines, Android will append an\n          // extra newline to the end of the copied text.\n          if (type === 'insertText' && /.*\\n.*\\n$/.test(_text)) {\n            _text = _text.slice(0, -1);\n          }\n          // If the text includes a newline, split it at newlines and paste each component\n          // string, with soft breaks in between each.\n          if (_text.includes('\\n')) {\n            return scheduleAction(() => {\n              var parts = _text.split('\\n');\n              parts.forEach((line, i) => {\n                if (line) {\n                  Editor.insertText(editor, line);\n                }\n                if (i !== parts.length - 1) {\n                  Editor.insertSoftBreak(editor);\n                }\n              });\n            }, {\n              at: targetRange\n            });\n          }\n          if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n            var [_start2, _end2] = Range.edges(targetRange);\n            var _diff = {\n              start: _start2.offset,\n              end: _end2.offset,\n              text: _text\n            };\n            // COMPAT: Swiftkey has a weird bug where the target range of the 2nd word\n            // inserted after a mark placeholder is inserted with an anchor offset off by 1.\n            // So writing 'some text' will result in 'some ttext'. Luckily all 'normal' insert\n            // text events are fired with the correct target ranges, only the final 'insertComposition'\n            // isn't, so we can adjust the target range start offset if we are confident this is the\n            // swiftkey insert causing the issue.\n            if (_text && insertPositionHint && type === 'insertCompositionText') {\n              var hintPosition = insertPositionHint.start + insertPositionHint.text.search(/\\S|$/);\n              var diffPosition = _diff.start + _diff.text.search(/\\S|$/);\n              if (diffPosition === hintPosition + 1 && _diff.end === insertPositionHint.start + insertPositionHint.text.length) {\n                _diff.start -= 1;\n                insertPositionHint = null;\n                scheduleFlush();\n              } else {\n                insertPositionHint = false;\n              }\n            } else if (type === 'insertText') {\n              if (insertPositionHint === null) {\n                insertPositionHint = _diff;\n              } else if (insertPositionHint && Range.isCollapsed(targetRange) && insertPositionHint.end + insertPositionHint.text.length === _start2.offset) {\n                insertPositionHint = _objectSpread$6(_objectSpread$6({}, insertPositionHint), {}, {\n                  text: insertPositionHint.text + _text\n                });\n              } else {\n                insertPositionHint = false;\n              }\n            } else {\n              insertPositionHint = false;\n            }\n            if (canStoreDiff) {\n              storeDiff(_start2.path, _diff);\n              return;\n            }\n          }\n          return scheduleAction(() => Editor.insertText(editor, _text), {\n            at: targetRange\n          });\n        }\n    }\n  };\n  var hasPendingAction = () => {\n    return !!EDITOR_TO_PENDING_ACTION.get(editor);\n  };\n  var hasPendingDiffs = () => {\n    var _EDITOR_TO_PENDING_DI4;\n    return !!((_EDITOR_TO_PENDING_DI4 = EDITOR_TO_PENDING_DIFFS.get(editor)) !== null && _EDITOR_TO_PENDING_DI4 !== void 0 && _EDITOR_TO_PENDING_DI4.length);\n  };\n  var hasPendingChanges = () => {\n    return hasPendingAction() || hasPendingDiffs();\n  };\n  var isFlushing = () => {\n    return flushing;\n  };\n  var handleUserSelect = range => {\n    EDITOR_TO_PENDING_SELECTION.set(editor, range);\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId);\n      flushTimeoutId = null;\n    }\n    var {\n      selection\n    } = editor;\n    if (!range) {\n      return;\n    }\n    var pathChanged = !selection || !Path.equals(selection.anchor.path, range.anchor.path);\n    var parentPathChanged = !selection || !Path.equals(selection.anchor.path.slice(0, -1), range.anchor.path.slice(0, -1));\n    if (pathChanged && insertPositionHint || parentPathChanged) {\n      insertPositionHint = false;\n    }\n    if (pathChanged || hasPendingDiffs()) {\n      flushTimeoutId = setTimeout(flush, FLUSH_DELAY);\n    }\n  };\n  var handleInput = () => {\n    if (hasPendingAction() || !hasPendingDiffs()) {\n      flush();\n    }\n  };\n  var handleKeyDown = _ => {\n    // COMPAT: Swiftkey closes the keyboard when typing inside a empty node\n    // directly next to a non-contenteditable element (= the placeholder).\n    // The only event fired soon enough for us to allow hiding the placeholder\n    // without swiftkey picking it up is the keydown event, so we have to hide it\n    // here. See https://github.com/ianstormtaylor/slate/pull/4988#issuecomment-1201050535\n    if (!hasPendingDiffs()) {\n      updatePlaceholderVisibility(true);\n      setTimeout(updatePlaceholderVisibility);\n    }\n  };\n  var scheduleFlush = () => {\n    if (!hasPendingAction()) {\n      actionTimeoutId = setTimeout(flush);\n    }\n  };\n  var handleDomMutations = mutations => {\n    if (hasPendingDiffs() || hasPendingAction()) {\n      return;\n    }\n    if (mutations.some(mutation => isTrackedMutation(editor, mutation, mutations))) {\n      var _EDITOR_TO_FORCE_REND;\n      // Cause a re-render to restore the dom state if we encounter tracked mutations without\n      // a corresponding pending action.\n      (_EDITOR_TO_FORCE_REND = EDITOR_TO_FORCE_RENDER.get(editor)) === null || _EDITOR_TO_FORCE_REND === void 0 || _EDITOR_TO_FORCE_REND();\n    }\n  };\n  return {\n    flush,\n    scheduleFlush,\n    hasPendingDiffs,\n    hasPendingAction,\n    hasPendingChanges,\n    isFlushing,\n    handleUserSelect,\n    handleCompositionEnd,\n    handleCompositionStart,\n    handleDOMBeforeInput,\n    handleKeyDown,\n    handleDomMutations,\n    handleInput\n  };\n}\n\nfunction useIsMounted() {\n  var isMountedRef = useRef(false);\n  useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef.current;\n}\n\n/**\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\n */\nvar useIsomorphicLayoutEffect = CAN_USE_DOM ? useLayoutEffect : useEffect;\n\nfunction useMutationObserver(node, callback, options) {\n  var [mutationObserver] = useState(() => new MutationObserver(callback));\n  useIsomorphicLayoutEffect(() => {\n    // Discard mutations caused during render phase. This works due to react calling\n    // useLayoutEffect synchronously after the render phase before the next tick.\n    mutationObserver.takeRecords();\n  });\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    }\n    mutationObserver.observe(node.current, options);\n    return () => mutationObserver.disconnect();\n  }, [mutationObserver, node, options]);\n}\n\nvar _excluded$2 = [\"node\"];\nfunction ownKeys$5(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$5(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$5(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$5(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar MUTATION_OBSERVER_CONFIG$1 = {\n  subtree: true,\n  childList: true,\n  characterData: true\n};\nvar useAndroidInputManager = !IS_ANDROID ? () => null : _ref => {\n  var {\n      node\n    } = _ref,\n    options = _objectWithoutProperties(_ref, _excluded$2);\n  if (!IS_ANDROID) {\n    return null;\n  }\n  var editor = useSlateStatic();\n  var isMounted = useIsMounted();\n  var [inputManager] = useState(() => createAndroidInputManager(_objectSpread$5({\n    editor\n  }, options)));\n  useMutationObserver(node, inputManager.handleDomMutations, MUTATION_OBSERVER_CONFIG$1);\n  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush);\n  if (isMounted) {\n    inputManager.flush();\n  }\n  return inputManager;\n};\n\nfunction ownKeys$4(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$4(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$4(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * Leaf content strings.\n */\nvar String$1 = props => {\n  var {\n    isLast,\n    leaf,\n    parent,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, text);\n  var parentPath = Path.parent(path);\n  var isMarkPlaceholder = Boolean(leaf[MARK_PLACEHOLDER_SYMBOL]);\n  // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n  if (editor.isVoid(parent)) {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      length: Node.string(parent).length\n    });\n  }\n  // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n  if (leaf.text === '' && parent.children[parent.children.length - 1] === text && !editor.isInline(parent) && Editor.string(editor, parentPath) === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isLineBreak: true,\n      isMarkPlaceholder: isMarkPlaceholder\n    });\n  }\n  // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n  if (leaf.text === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isMarkPlaceholder: isMarkPlaceholder\n    });\n  }\n  // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return /*#__PURE__*/React.createElement(TextString, {\n      isTrailing: true,\n      text: leaf.text\n    });\n  }\n  return /*#__PURE__*/React.createElement(TextString, {\n    text: leaf.text\n  });\n};\n/**\n * Leaf strings with text in them.\n */\nvar TextString = props => {\n  var {\n    text,\n    isTrailing = false\n  } = props;\n  var ref = useRef(null);\n  var getTextContent = () => {\n    return \"\".concat(text !== null && text !== void 0 ? text : '').concat(isTrailing ? '\\n' : '');\n  };\n  var [initialText] = useState(getTextContent);\n  // This is the actual text rendering boundary where we interface with the DOM\n  // The text is not rendered as part of the virtual DOM, as since we handle basic character insertions natively,\n  // updating the DOM is not a one way dataflow anymore. What we need here is not reconciliation and diffing\n  // with previous version of the virtual DOM, but rather diffing with the actual DOM element, and replace the DOM <span> content\n  // exactly if and only if its current content does not match our current virtual DOM.\n  // Otherwise the DOM TextNode would always be replaced by React as the user types, which interferes with native text features,\n  // eg makes native spellcheck opt out from checking the text node.\n  // useLayoutEffect: updating our span before browser paint\n  useIsomorphicLayoutEffect(() => {\n    // null coalescing text to make sure we're not outputing \"null\" as a string in the extreme case it is nullish at runtime\n    var textWithTrailing = getTextContent();\n    if (ref.current && ref.current.textContent !== textWithTrailing) {\n      ref.current.textContent = textWithTrailing;\n    }\n    // intentionally not specifying dependencies, so that this effect runs on every render\n    // as this effectively replaces \"specifying the text in the virtual DOM under the <span> below\" on each render\n  });\n  // We intentionally render a memoized <span> that only receives the initial text content when the component is mounted.\n  // We defer to the layout effect above to update the `textContent` of the span element when needed.\n  return /*#__PURE__*/React.createElement(MemoizedText$1, {\n    ref: ref\n  }, initialText);\n};\nvar MemoizedText$1 = /*#__PURE__*/memo( /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-string\": true,\n    ref: ref\n  }, props.children);\n}));\n/**\n * Leaf strings without text, render as zero-width strings.\n */\nvar ZeroWidthString = props => {\n  var {\n    length = 0,\n    isLineBreak = false,\n    isMarkPlaceholder = false\n  } = props;\n  var attributes = {\n    'data-slate-zero-width': isLineBreak ? 'n' : 'z',\n    'data-slate-length': length\n  };\n  if (isMarkPlaceholder) {\n    attributes['data-slate-mark-placeholder'] = true;\n  }\n  return /*#__PURE__*/React.createElement(\"span\", _objectSpread$4({}, attributes), !(IS_ANDROID || IS_IOS) || !isLineBreak ? '\\uFEFF' : null, isLineBreak ? /*#__PURE__*/React.createElement(\"br\", null) : null);\n};\n\nfunction ownKeys$3(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$3(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$3(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n// Delay the placeholder on Android to prevent the keyboard from closing.\n// (https://github.com/ianstormtaylor/slate/pull/5368)\nvar PLACEHOLDER_DELAY = IS_ANDROID ? 300 : 0;\nfunction disconnectPlaceholderResizeObserver(placeholderResizeObserver, releaseObserver) {\n  if (placeholderResizeObserver.current) {\n    placeholderResizeObserver.current.disconnect();\n    if (releaseObserver) {\n      placeholderResizeObserver.current = null;\n    }\n  }\n}\nfunction clearTimeoutRef(timeoutRef) {\n  if (timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = null;\n  }\n}\n/**\n * Individual leaves in a text node with unique formatting.\n */\nvar Leaf = props => {\n  var {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = props => /*#__PURE__*/React.createElement(DefaultLeaf, _objectSpread$3({}, props)),\n    leafPosition\n  } = props;\n  var editor = useSlateStatic();\n  var placeholderResizeObserver = useRef(null);\n  var placeholderRef = useRef(null);\n  var [showPlaceholder, setShowPlaceholder] = useState(false);\n  var showPlaceholderTimeoutRef = useRef(null);\n  var callbackPlaceholderRef = useCallback(placeholderEl => {\n    disconnectPlaceholderResizeObserver(placeholderResizeObserver, placeholderEl == null);\n    if (placeholderEl == null) {\n      var _leaf$onPlaceholderRe;\n      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor);\n      (_leaf$onPlaceholderRe = leaf.onPlaceholderResize) === null || _leaf$onPlaceholderRe === void 0 || _leaf$onPlaceholderRe.call(leaf, null);\n    } else {\n      EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl);\n      if (!placeholderResizeObserver.current) {\n        // Create a new observer and observe the placeholder element.\n        var ResizeObserver$1 = window.ResizeObserver || ResizeObserver;\n        placeholderResizeObserver.current = new ResizeObserver$1(() => {\n          var _leaf$onPlaceholderRe2;\n          (_leaf$onPlaceholderRe2 = leaf.onPlaceholderResize) === null || _leaf$onPlaceholderRe2 === void 0 || _leaf$onPlaceholderRe2.call(leaf, placeholderEl);\n        });\n      }\n      placeholderResizeObserver.current.observe(placeholderEl);\n      placeholderRef.current = placeholderEl;\n    }\n  }, [placeholderRef, leaf, editor]);\n  var children = /*#__PURE__*/React.createElement(String$1, {\n    isLast: isLast,\n    leaf: leaf,\n    parent: parent,\n    text: text\n  });\n  var leafIsPlaceholder = Boolean(leaf[PLACEHOLDER_SYMBOL]);\n  useEffect(() => {\n    if (leafIsPlaceholder) {\n      if (!showPlaceholderTimeoutRef.current) {\n        // Delay the placeholder, so it will not render in a selection\n        showPlaceholderTimeoutRef.current = setTimeout(() => {\n          setShowPlaceholder(true);\n          showPlaceholderTimeoutRef.current = null;\n        }, PLACEHOLDER_DELAY);\n      }\n    } else {\n      clearTimeoutRef(showPlaceholderTimeoutRef);\n      setShowPlaceholder(false);\n    }\n    return () => clearTimeoutRef(showPlaceholderTimeoutRef);\n  }, [leafIsPlaceholder, setShowPlaceholder]);\n  if (leafIsPlaceholder && showPlaceholder) {\n    var placeholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          top: 0,\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none',\n          // Fixes https://github.com/udecode/plate/issues/2315\n          WebkitUserModify: IS_WEBKIT ? 'inherit' : undefined\n        },\n        contentEditable: false,\n        ref: callbackPlaceholderRef\n      }\n    };\n    children = /*#__PURE__*/React.createElement(React.Fragment, null, renderPlaceholder(placeholderProps), children);\n  }\n  // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n  var attributes = {\n    'data-slate-leaf': true\n  };\n  return renderLeaf({\n    attributes,\n    children,\n    leaf,\n    text,\n    leafPosition\n  });\n};\nvar MemoizedLeaf = /*#__PURE__*/React.memo(Leaf, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && Text$1.equals(next.leaf, prev.leaf) && next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];\n});\nvar DefaultLeaf = props => {\n  var {\n    attributes,\n    children\n  } = props;\n  return /*#__PURE__*/React.createElement(\"span\", _objectSpread$3({}, attributes), children);\n};\n\nfunction ownKeys$2(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$2(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$2(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * Text.\n */\nvar Text = props => {\n  var {\n    decorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    renderText = props => /*#__PURE__*/React.createElement(DefaultText, _objectSpread$2({}, props)),\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var ref = useRef(null);\n  var decoratedLeaves = Text$1.decorations(text, decorations);\n  var key = ReactEditor.findKey(editor, text);\n  var children = [];\n  for (var i = 0; i < decoratedLeaves.length; i++) {\n    var {\n      leaf,\n      position\n    } = decoratedLeaves[i];\n    children.push( /*#__PURE__*/React.createElement(MemoizedLeaf, {\n      isLast: isLast && i === decoratedLeaves.length - 1,\n      key: \"\".concat(key.id, \"-\").concat(i),\n      renderPlaceholder: renderPlaceholder,\n      leaf: leaf,\n      leafPosition: position,\n      text: text,\n      parent: parent,\n      renderLeaf: renderLeaf\n    }));\n  }\n  // Update element-related weak maps with the DOM element ref.\n  var callbackRef = useCallback(span => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    if (span) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.set(key, span);\n      NODE_TO_ELEMENT.set(text, span);\n      ELEMENT_TO_NODE.set(span, text);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(text);\n      if (ref.current) {\n        ELEMENT_TO_NODE.delete(ref.current);\n      }\n    }\n    ref.current = span;\n  }, [ref, editor, key, text]);\n  var attributes = {\n    'data-slate-node': 'text',\n    ref: callbackRef\n  };\n  return renderText({\n    text,\n    children,\n    attributes\n  });\n};\nvar MemoizedText = /*#__PURE__*/React.memo(Text, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderText === prev.renderText && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && isTextDecorationsEqual(next.decorations, prev.decorations);\n});\nvar DefaultText = props => {\n  var {\n    attributes,\n    children\n  } = props;\n  return /*#__PURE__*/React.createElement(\"span\", _objectSpread$2({}, attributes), children);\n};\n\nfunction ownKeys$1(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$1(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n/**\n * Element.\n */\nvar Element = props => {\n  var {\n    decorations,\n    element,\n    renderElement = p => /*#__PURE__*/React.createElement(DefaultElement, _objectSpread$1({}, p)),\n    renderPlaceholder,\n    renderLeaf,\n    renderText,\n    selection\n  } = props;\n  var editor = useSlateStatic();\n  var readOnly = useReadOnly();\n  var isInline = editor.isInline(element);\n  var key = ReactEditor.findKey(editor, element);\n  var ref = useCallback(ref => {\n    // Update element-related weak maps with the DOM element ref.\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    if (ref) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.set(key, ref);\n      NODE_TO_ELEMENT.set(element, ref);\n      ELEMENT_TO_NODE.set(ref, element);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 || KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(element);\n    }\n  }, [editor, key, element]);\n  var children = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    renderText,\n    selection\n  });\n  // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n  var attributes = {\n    'data-slate-node': 'element',\n    ref\n  };\n  if (isInline) {\n    attributes['data-slate-inline'] = true;\n  }\n  // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    var text = Node.string(element);\n    var dir = getDirection(text);\n    if (dir === 'rtl') {\n      attributes.dir = dir;\n    }\n  }\n  // If it's a void node, wrap the children in extra void-specific elements.\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true;\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false;\n    }\n    var Tag = isInline ? 'span' : 'div';\n    var [[_text]] = Node.texts(element);\n    children = /*#__PURE__*/React.createElement(Tag, {\n      \"data-slate-spacer\": true,\n      style: {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      }\n    }, /*#__PURE__*/React.createElement(MemoizedText, {\n      renderPlaceholder: renderPlaceholder,\n      decorations: [],\n      isLast: false,\n      parent: element,\n      text: _text\n    }));\n    NODE_TO_INDEX.set(_text, 0);\n    NODE_TO_PARENT.set(_text, element);\n  }\n  return renderElement({\n    attributes,\n    children,\n    element\n  });\n};\nvar MemoizedElement = /*#__PURE__*/React.memo(Element, (prev, next) => {\n  return prev.element === next.element && prev.renderElement === next.renderElement && prev.renderText === next.renderText && prev.renderLeaf === next.renderLeaf && prev.renderPlaceholder === next.renderPlaceholder && isElementDecorationsEqual(prev.decorations, next.decorations) && (prev.selection === next.selection || !!prev.selection && !!next.selection && Range.equals(prev.selection, next.selection));\n});\n/**\n * The default element renderer.\n */\nvar DefaultElement = props => {\n  var {\n    attributes,\n    children,\n    element\n  } = props;\n  var editor = useSlateStatic();\n  var Tag = editor.isInline(element) ? 'span' : 'div';\n  return /*#__PURE__*/React.createElement(Tag, _objectSpread$1(_objectSpread$1({}, attributes), {}, {\n    style: {\n      position: 'relative'\n    }\n  }), children);\n};\n\n/**\n * A React context for sharing the `decorate` prop of the editable.\n */\nvar DecorateContext = /*#__PURE__*/createContext(() => []);\n/**\n * Get the current `decorate` prop of the editable.\n */\nvar useDecorate = () => {\n  return useContext(DecorateContext);\n};\n\n/**\n * A React context for sharing the `selected` state of an element.\n */\nvar SelectedContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `selected` state of an element.\n */\nvar useSelected = () => {\n  return useContext(SelectedContext);\n};\n\n/**\n * Children.\n */\nvar useChildren = props => {\n  var {\n    decorations,\n    node,\n    renderElement,\n    renderPlaceholder,\n    renderText,\n    renderLeaf,\n    selection\n  } = props;\n  var decorate = useDecorate();\n  var editor = useSlateStatic();\n  IS_NODE_MAP_DIRTY.set(editor, false);\n  var path = ReactEditor.findPath(editor, node);\n  var children = [];\n  var isLeafBlock = Element$1.isElement(node) && !editor.isInline(node) && Editor.hasInlines(editor, node);\n  for (var i = 0; i < node.children.length; i++) {\n    var p = path.concat(i);\n    var n = node.children[i];\n    var key = ReactEditor.findKey(editor, n);\n    var range = Editor.range(editor, p);\n    var sel = selection && Range.intersection(range, selection);\n    var ds = decorate([n, p]);\n    for (var dec of decorations) {\n      var d = Range.intersection(dec, range);\n      if (d) {\n        ds.push(d);\n      }\n    }\n    if (Element$1.isElement(n)) {\n      children.push( /*#__PURE__*/React.createElement(SelectedContext.Provider, {\n        key: \"provider-\".concat(key.id),\n        value: !!sel\n      }, /*#__PURE__*/React.createElement(MemoizedElement, {\n        decorations: ds,\n        element: n,\n        key: key.id,\n        renderElement: renderElement,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        renderText: renderText,\n        selection: sel\n      })));\n    } else {\n      children.push( /*#__PURE__*/React.createElement(MemoizedText, {\n        decorations: ds,\n        key: key.id,\n        isLast: isLeafBlock && i === node.children.length - 1,\n        parent: node,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        renderText: renderText,\n        text: n\n      }));\n    }\n    NODE_TO_INDEX.set(n, i);\n    NODE_TO_PARENT.set(n, node);\n  }\n  return children;\n};\n\n/**\n * A React context for sharing the `readOnly` state of the editor.\n */\nvar ReadOnlyContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `readOnly` state of the editor.\n */\nvar useReadOnly = () => {\n  return useContext(ReadOnlyContext);\n};\n\nvar SlateContext = /*#__PURE__*/createContext(null);\n/**\n * Get the current editor object from the React context.\n */\nvar useSlate = () => {\n  var context = useContext(SlateContext);\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n  var {\n    editor\n  } = context;\n  return editor;\n};\nvar useSlateWithV = () => {\n  var context = useContext(SlateContext);\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n  return context;\n};\n\nfunction useTrackUserInput() {\n  var editor = useSlateStatic();\n  var receivedUserInput = useRef(false);\n  var animationFrameIdRef = useRef(0);\n  var onUserInput = useCallback(() => {\n    if (receivedUserInput.current) {\n      return;\n    }\n    receivedUserInput.current = true;\n    var window = ReactEditor.getWindow(editor);\n    window.cancelAnimationFrame(animationFrameIdRef.current);\n    animationFrameIdRef.current = window.requestAnimationFrame(() => {\n      receivedUserInput.current = false;\n    });\n  }, [editor]);\n  useEffect(() => () => cancelAnimationFrame(animationFrameIdRef.current), []);\n  return {\n    receivedUserInput,\n    onUserInput\n  };\n}\n\nvar createRestoreDomManager = (editor, receivedUserInput) => {\n  var bufferedMutations = [];\n  var clear = () => {\n    bufferedMutations = [];\n  };\n  var registerMutations = mutations => {\n    if (!receivedUserInput.current) {\n      return;\n    }\n    var trackedMutations = mutations.filter(mutation => isTrackedMutation(editor, mutation, mutations));\n    bufferedMutations.push(...trackedMutations);\n  };\n  function restoreDOM() {\n    if (bufferedMutations.length > 0) {\n      bufferedMutations.reverse().forEach(mutation => {\n        if (mutation.type === 'characterData') {\n          // We don't want to restore the DOM for characterData mutations\n          // because this interrupts the composition.\n          return;\n        }\n        mutation.removedNodes.forEach(node => {\n          mutation.target.insertBefore(node, mutation.nextSibling);\n        });\n        mutation.addedNodes.forEach(node => {\n          mutation.target.removeChild(node);\n        });\n      });\n      // Clear buffered mutations to ensure we don't undo them twice\n      clear();\n    }\n  }\n  return {\n    registerMutations,\n    restoreDOM,\n    clear\n  };\n};\n\nvar MUTATION_OBSERVER_CONFIG = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true\n};\n// We have to use a class component here since we rely on `getSnapshotBeforeUpdate` which has no FC equivalent\n// to run code synchronously immediately before react commits the component update to the DOM.\nclass RestoreDOMComponent extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"context\", null);\n    _defineProperty(this, \"manager\", null);\n    _defineProperty(this, \"mutationObserver\", null);\n  }\n  observe() {\n    var _this$mutationObserve;\n    var {\n      node\n    } = this.props;\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    }\n    (_this$mutationObserve = this.mutationObserver) === null || _this$mutationObserve === void 0 || _this$mutationObserve.observe(node.current, MUTATION_OBSERVER_CONFIG);\n  }\n  componentDidMount() {\n    var {\n      receivedUserInput\n    } = this.props;\n    var editor = this.context;\n    this.manager = createRestoreDomManager(editor, receivedUserInput);\n    this.mutationObserver = new MutationObserver(this.manager.registerMutations);\n    this.observe();\n  }\n  getSnapshotBeforeUpdate() {\n    var _this$mutationObserve2, _this$mutationObserve3, _this$manager2;\n    var pendingMutations = (_this$mutationObserve2 = this.mutationObserver) === null || _this$mutationObserve2 === void 0 ? void 0 : _this$mutationObserve2.takeRecords();\n    if (pendingMutations !== null && pendingMutations !== void 0 && pendingMutations.length) {\n      var _this$manager;\n      (_this$manager = this.manager) === null || _this$manager === void 0 || _this$manager.registerMutations(pendingMutations);\n    }\n    (_this$mutationObserve3 = this.mutationObserver) === null || _this$mutationObserve3 === void 0 || _this$mutationObserve3.disconnect();\n    (_this$manager2 = this.manager) === null || _this$manager2 === void 0 || _this$manager2.restoreDOM();\n    return null;\n  }\n  componentDidUpdate() {\n    var _this$manager3;\n    (_this$manager3 = this.manager) === null || _this$manager3 === void 0 || _this$manager3.clear();\n    this.observe();\n  }\n  componentWillUnmount() {\n    var _this$mutationObserve4;\n    (_this$mutationObserve4 = this.mutationObserver) === null || _this$mutationObserve4 === void 0 || _this$mutationObserve4.disconnect();\n  }\n  render() {\n    return this.props.children;\n  }\n}\n_defineProperty(RestoreDOMComponent, \"contextType\", EditorContext);\nvar RestoreDOM = IS_ANDROID ? RestoreDOMComponent : _ref => {\n  var {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\n/**\n * A React context for sharing the `composing` state of the editor.\n */\nvar ComposingContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `composing` state of the editor.\n */\nvar useComposing = () => {\n  return useContext(ComposingContext);\n};\n\nvar _excluded$1 = [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderText\", \"renderPlaceholder\", \"scrollSelectionIntoView\", \"style\", \"as\", \"disableDefaultStyles\"],\n  _excluded2 = [\"text\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar Children = props => /*#__PURE__*/React.createElement(React.Fragment, null, useChildren(props));\n/**\n * Editable.\n */\nvar Editable = /*#__PURE__*/forwardRef((props, forwardedRef) => {\n  var defaultRenderPlaceholder = useCallback(props => /*#__PURE__*/React.createElement(DefaultPlaceholder, _objectSpread({}, props)), []);\n  var {\n      autoFocus,\n      decorate = defaultDecorate,\n      onDOMBeforeInput: propsOnDOMBeforeInput,\n      placeholder,\n      readOnly = false,\n      renderElement,\n      renderLeaf,\n      renderText,\n      renderPlaceholder = defaultRenderPlaceholder,\n      scrollSelectionIntoView = defaultScrollSelectionIntoView,\n      style: userStyle = {},\n      as: Component = 'div',\n      disableDefaultStyles = false\n    } = props,\n    attributes = _objectWithoutProperties(props, _excluded$1);\n  var editor = useSlate();\n  // Rerender editor when composition status changed\n  var [isComposing, setIsComposing] = useState(false);\n  var ref = useRef(null);\n  var deferredOperations = useRef([]);\n  var [placeholderHeight, setPlaceholderHeight] = useState();\n  var processing = useRef(false);\n  var {\n    onUserInput,\n    receivedUserInput\n  } = useTrackUserInput();\n  var [, forceRender] = useReducer(s => s + 1, 0);\n  EDITOR_TO_FORCE_RENDER.set(editor, forceRender);\n  // Update internal state on each render.\n  IS_READ_ONLY.set(editor, readOnly);\n  // Keep track of some state for the event handler logic.\n  var state = useMemo(() => ({\n    isDraggingInternally: false,\n    isUpdatingSelection: false,\n    latestElement: null,\n    hasMarkPlaceholder: false\n  }), []);\n  // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]);\n  /**\n   * The AndroidInputManager object has a cyclical dependency on onDOMSelectionChange\n   *\n   * It is defined as a reference to simplify hook dependencies and clarify that\n   * it needs to be initialized.\n   */\n  var androidInputManagerRef = useRef();\n  // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n  var onDOMSelectionChange = useMemo(() => throttle(() => {\n    if (IS_NODE_MAP_DIRTY.get(editor)) {\n      onDOMSelectionChange();\n      return;\n    }\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode();\n    if (!processing.current && IS_WEBKIT && root instanceof ShadowRoot) {\n      processing.current = true;\n      var active = getActiveElement();\n      if (active) {\n        document.execCommand('indent');\n      } else {\n        Transforms.deselect(editor);\n      }\n      processing.current = false;\n      return;\n    }\n    var androidInputManager = androidInputManagerRef.current;\n    if ((IS_ANDROID || !ReactEditor.isComposing(editor)) && (!state.isUpdatingSelection || androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing()) && !state.isDraggingInternally) {\n      var _root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var {\n        activeElement\n      } = _root;\n      var _el = ReactEditor.toDOMNode(editor, editor);\n      var domSelection = getSelection(_root);\n      if (activeElement === _el) {\n        state.latestElement = activeElement;\n        IS_FOCUSED.set(editor, true);\n      } else {\n        IS_FOCUSED.delete(editor);\n      }\n      if (!domSelection) {\n        return Transforms.deselect(editor);\n      }\n      var {\n        anchorNode,\n        focusNode\n      } = domSelection;\n      var anchorNodeSelectable = ReactEditor.hasEditableTarget(editor, anchorNode) || ReactEditor.isTargetInsideNonReadonlyVoid(editor, anchorNode);\n      var focusNodeInEditor = ReactEditor.hasTarget(editor, focusNode);\n      if (anchorNodeSelectable && focusNodeInEditor) {\n        var range = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true\n        });\n        if (range) {\n          if (!ReactEditor.isComposing(editor) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.hasPendingChanges()) && !(androidInputManager !== null && androidInputManager !== void 0 && androidInputManager.isFlushing())) {\n            Transforms.select(editor, range);\n          } else {\n            androidInputManager === null || androidInputManager === void 0 || androidInputManager.handleUserSelect(range);\n          }\n        }\n      }\n      // Deselect the editor if the dom selection is not selectable in readonly mode\n      if (readOnly && (!anchorNodeSelectable || !focusNodeInEditor)) {\n        Transforms.deselect(editor);\n      }\n    }\n  }, 100), [editor, readOnly, state]);\n  var scheduleOnDOMSelectionChange = useMemo(() => debounce(onDOMSelectionChange, 0), [onDOMSelectionChange]);\n  androidInputManagerRef.current = useAndroidInputManager({\n    node: ref,\n    onDOMSelectionChange,\n    scheduleOnDOMSelectionChange\n  });\n  useIsomorphicLayoutEffect(() => {\n    var _androidInputManagerR, _androidInputManagerR2;\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n    }\n    // Make sure the DOM selection state is in sync.\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = getSelection(root);\n    if (!domSelection || !ReactEditor.isFocused(editor) || (_androidInputManagerR = androidInputManagerRef.current) !== null && _androidInputManagerR !== void 0 && _androidInputManagerR.hasPendingAction()) {\n      return;\n    }\n    var setDomSelection = forceChange => {\n      var hasDomSelection = domSelection.type !== 'None';\n      // If the DOM selection is properly unset, we're done.\n      if (!selection && !hasDomSelection) {\n        return;\n      }\n      // Get anchorNode and focusNode\n      var focusNode = domSelection.focusNode;\n      var anchorNode;\n      // COMPAT: In firefox the normal selection way does not work\n      // (https://github.com/ianstormtaylor/slate/pull/5486#issue-1820720223)\n      if (IS_FIREFOX && domSelection.rangeCount > 1) {\n        var firstRange = domSelection.getRangeAt(0);\n        var lastRange = domSelection.getRangeAt(domSelection.rangeCount - 1);\n        // Right to left\n        if (firstRange.startContainer === focusNode) {\n          anchorNode = lastRange.endContainer;\n        } else {\n          // Left to right\n          anchorNode = firstRange.startContainer;\n        }\n      } else {\n        anchorNode = domSelection.anchorNode;\n      }\n      // verify that the dom selection is in the editor\n      var editorElement = EDITOR_TO_ELEMENT.get(editor);\n      var hasDomSelectionInEditor = false;\n      if (editorElement.contains(anchorNode) && editorElement.contains(focusNode)) {\n        hasDomSelectionInEditor = true;\n      }\n      // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n      if (hasDomSelection && hasDomSelectionInEditor && selection && !forceChange) {\n        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true,\n          // domSelection is not necessarily a valid Slate range\n          // (e.g. when clicking on contentEditable:false element)\n          suppressThrow: true\n        });\n        if (slateRange && Range.equals(slateRange, selection)) {\n          var _anchorNode;\n          if (!state.hasMarkPlaceholder) {\n            return;\n          }\n          // Ensure selection is inside the mark placeholder\n          if ((_anchorNode = anchorNode) !== null && _anchorNode !== void 0 && (_anchorNode = _anchorNode.parentElement) !== null && _anchorNode !== void 0 && _anchorNode.hasAttribute('data-slate-mark-placeholder')) {\n            return;\n          }\n        }\n      }\n      // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true\n        });\n        return;\n      }\n      // Otherwise the DOM selection is out of sync, so update it.\n      state.isUpdatingSelection = true;\n      var newDomRange = null;\n      try {\n        newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n      } catch (e) {\n        // Ignore, dom and state might be out of sync\n      }\n      if (newDomRange) {\n        if (ReactEditor.isComposing(editor) && !IS_ANDROID) {\n          domSelection.collapseToEnd();\n        } else if (Range.isBackward(selection)) {\n          domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n        } else {\n          domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n        }\n        scrollSelectionIntoView(editor, newDomRange);\n      } else {\n        domSelection.removeAllRanges();\n      }\n      return newDomRange;\n    };\n    // In firefox if there is more then 1 range and we call setDomSelection we remove the ability to select more cells in a table\n    if (domSelection.rangeCount <= 1) {\n      setDomSelection();\n    }\n    var ensureSelection = ((_androidInputManagerR2 = androidInputManagerRef.current) === null || _androidInputManagerR2 === void 0 ? void 0 : _androidInputManagerR2.isFlushing()) === 'action';\n    if (!IS_ANDROID || !ensureSelection) {\n      setTimeout(() => {\n        state.isUpdatingSelection = false;\n      });\n      return;\n    }\n    var timeoutId = null;\n    var animationFrameId = requestAnimationFrame(() => {\n      if (ensureSelection) {\n        var ensureDomSelection = forceChange => {\n          try {\n            var el = ReactEditor.toDOMNode(editor, editor);\n            el.focus();\n            setDomSelection(forceChange);\n          } catch (e) {\n            // Ignore, dom and state might be out of sync\n          }\n        };\n        // Compat: Android IMEs try to force their selection by manually re-applying it even after we set it.\n        // This essentially would make setting the slate selection during an update meaningless, so we force it\n        // again here. We can't only do it in the setTimeout after the animation frame since that would cause a\n        // visible flicker.\n        ensureDomSelection();\n        timeoutId = setTimeout(() => {\n          // COMPAT: While setting the selection in an animation frame visually correctly sets the selection,\n          // it doesn't update GBoards spellchecker state. We have to manually trigger a selection change after\n          // the animation frame to ensure it displays the correct state.\n          ensureDomSelection(true);\n          state.isUpdatingSelection = false;\n        });\n      }\n    });\n    return () => {\n      cancelAnimationFrame(animationFrameId);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  });\n  // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n  var onDOMBeforeInput = useCallback(event => {\n    handleNativeHistoryEvents(editor, event);\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode();\n    if (processing !== null && processing !== void 0 && processing.current && IS_WEBKIT && root instanceof ShadowRoot) {\n      var ranges = event.getTargetRanges();\n      var range = ranges[0];\n      var newRange = new window.Range();\n      newRange.setStart(range.startContainer, range.startOffset);\n      newRange.setEnd(range.endContainer, range.endOffset);\n      // Translate the DOM Range into a Slate Range\n      var slateRange = ReactEditor.toSlateRange(editor, newRange, {\n        exactMatch: false,\n        suppressThrow: false\n      });\n      Transforms.select(editor, slateRange);\n      event.preventDefault();\n      event.stopImmediatePropagation();\n      return;\n    }\n    onUserInput();\n    if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      var _EDITOR_TO_USER_SELEC;\n      // COMPAT: BeforeInput events aren't cancelable on android, so we have to handle them differently using the android input manager.\n      if (androidInputManagerRef.current) {\n        return androidInputManagerRef.current.handleDOMBeforeInput(event);\n      }\n      // Some IMEs/Chrome extensions like e.g. Grammarly set the selection immediately before\n      // triggering a `beforeinput` expecting the change to be applied to the immediately before\n      // set selection.\n      scheduleOnDOMSelectionChange.flush();\n      onDOMSelectionChange.flush();\n      var {\n        selection\n      } = editor;\n      var {\n        inputType: type\n      } = event;\n      var data = event.dataTransfer || event.data || undefined;\n      var isCompositionChange = type === 'insertCompositionText' || type === 'deleteCompositionText';\n      // COMPAT: use composition change events as a hint to where we should insert\n      // composition text if we aren't composing to work around https://github.com/ianstormtaylor/slate/issues/5038\n      if (isCompositionChange && ReactEditor.isComposing(editor)) {\n        return;\n      }\n      var native = false;\n      if (type === 'insertText' && selection && Range.isCollapsed(selection) &&\n      // Only use native character insertion for single characters a-z or space for now.\n      // Long-press events (hold a + press 4 = ä) to choose a special character otherwise\n      // causes duplicate inserts.\n      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) &&\n      // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405\n      // When there is an inline element, e.g. a link, and you select\n      // right after it (the start of the next node).\n      selection.anchor.offset !== 0) {\n        native = true;\n        // Skip native if there are marks, as\n        // `insertText` will insert a node, not just text.\n        if (editor.marks) {\n          native = false;\n        }\n        // If the NODE_MAP is dirty, we can't trust the selection anchor (eg ReactEditor.toDOMPoint)\n        if (!IS_NODE_MAP_DIRTY.get(editor)) {\n          var _node$parentElement, _window$getComputedSt;\n          // Chrome also has issues correctly editing the end of anchor elements: https://bugs.chromium.org/p/chromium/issues/detail?id=1259100\n          // Therefore we don't allow native events to insert text at the end of anchor nodes.\n          var {\n            anchor\n          } = selection;\n          var [node, offset] = ReactEditor.toDOMPoint(editor, anchor);\n          var anchorNode = (_node$parentElement = node.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.closest('a');\n          var _window = ReactEditor.getWindow(editor);\n          if (native && anchorNode && ReactEditor.hasDOMNode(editor, anchorNode)) {\n            var _lastText$textContent;\n            // Find the last text node inside the anchor.\n            var lastText = _window === null || _window === void 0 ? void 0 : _window.document.createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT).lastChild();\n            if (lastText === node && ((_lastText$textContent = lastText.textContent) === null || _lastText$textContent === void 0 ? void 0 : _lastText$textContent.length) === offset) {\n              native = false;\n            }\n          }\n          // Chrome has issues with the presence of tab characters inside elements with whiteSpace = 'pre'\n          // causing abnormal insert behavior: https://bugs.chromium.org/p/chromium/issues/detail?id=1219139\n          if (native && node.parentElement && (_window === null || _window === void 0 || (_window$getComputedSt = _window.getComputedStyle(node.parentElement)) === null || _window$getComputedSt === void 0 ? void 0 : _window$getComputedSt.whiteSpace) === 'pre') {\n            var block = Editor.above(editor, {\n              at: anchor.path,\n              match: n => Element$1.isElement(n) && Editor.isBlock(editor, n)\n            });\n            if (block && Node.string(block[0]).includes('\\t')) {\n              native = false;\n            }\n          }\n        }\n      }\n      // COMPAT: For the deleting forward/backward input types we don't want\n      // to change the selection because it is the range that will be deleted,\n      // and those commands determine that for themselves.\n      // If the NODE_MAP is dirty, we can't trust the selection anchor (eg ReactEditor.toDOMPoint via ReactEditor.toSlateRange)\n      if ((!type.startsWith('delete') || type.startsWith('deleteBy')) && !IS_NODE_MAP_DIRTY.get(editor)) {\n        var [targetRange] = event.getTargetRanges();\n        if (targetRange) {\n          var _range = ReactEditor.toSlateRange(editor, targetRange, {\n            exactMatch: false,\n            suppressThrow: false\n          });\n          if (!selection || !Range.equals(selection, _range)) {\n            native = false;\n            var selectionRef = !isCompositionChange && editor.selection && Editor.rangeRef(editor, editor.selection);\n            Transforms.select(editor, _range);\n            if (selectionRef) {\n              EDITOR_TO_USER_SELECTION.set(editor, selectionRef);\n            }\n          }\n        }\n      }\n      // Composition change types occur while a user is composing text and can't be\n      // cancelled. Let them through and wait for the composition to end.\n      if (isCompositionChange) {\n        return;\n      }\n      if (!native) {\n        event.preventDefault();\n      }\n      // COMPAT: If the selection is expanded, even if the command seems like\n      // a delete forward/backward command it should delete the selection.\n      if (selection && Range.isExpanded(selection) && type.startsWith('delete')) {\n        var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n        Editor.deleteFragment(editor, {\n          direction\n        });\n        return;\n      }\n      switch (type) {\n        case 'deleteByComposition':\n        case 'deleteByCut':\n        case 'deleteByDrag':\n          {\n            Editor.deleteFragment(editor);\n            break;\n          }\n        case 'deleteContent':\n        case 'deleteContentForward':\n          {\n            Editor.deleteForward(editor);\n            break;\n          }\n        case 'deleteContentBackward':\n          {\n            Editor.deleteBackward(editor);\n            break;\n          }\n        case 'deleteEntireSoftLine':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n        case 'deleteHardLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n        case 'deleteSoftLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n        case 'deleteHardLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n        case 'deleteSoftLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n        case 'deleteWordBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n        case 'deleteWordForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n        case 'insertLineBreak':\n          Editor.insertSoftBreak(editor);\n          break;\n        case 'insertParagraph':\n          {\n            Editor.insertBreak(editor);\n            break;\n          }\n        case 'insertFromComposition':\n        case 'insertFromDrop':\n        case 'insertFromPaste':\n        case 'insertFromYank':\n        case 'insertReplacementText':\n        case 'insertText':\n          {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              if (ReactEditor.isComposing(editor)) {\n                setIsComposing(false);\n                IS_COMPOSING.set(editor, false);\n              }\n            }\n            // use a weak comparison instead of 'instanceof' to allow\n            // programmatic access of paste events coming from external windows\n            // like cypress where cy.window does not work realibly\n            if ((data === null || data === void 0 ? void 0 : data.constructor.name) === 'DataTransfer') {\n              ReactEditor.insertData(editor, data);\n            } else if (typeof data === 'string') {\n              // Only insertText operations use the native functionality, for now.\n              // Potentially expand to single character deletes, as well.\n              if (native) {\n                deferredOperations.current.push(() => Editor.insertText(editor, data));\n              } else {\n                Editor.insertText(editor, data);\n              }\n            }\n            break;\n          }\n      }\n      // Restore the actual user section if nothing manually set it.\n      var toRestore = (_EDITOR_TO_USER_SELEC = EDITOR_TO_USER_SELECTION.get(editor)) === null || _EDITOR_TO_USER_SELEC === void 0 ? void 0 : _EDITOR_TO_USER_SELEC.unref();\n      EDITOR_TO_USER_SELECTION.delete(editor);\n      if (toRestore && (!editor.selection || !Range.equals(editor.selection, toRestore))) {\n        Transforms.select(editor, toRestore);\n      }\n    }\n  }, [editor, onDOMSelectionChange, onUserInput, propsOnDOMBeforeInput, readOnly, scheduleOnDOMSelectionChange]);\n  var callbackRef = useCallback(node => {\n    if (node == null) {\n      onDOMSelectionChange.cancel();\n      scheduleOnDOMSelectionChange.cancel();\n      EDITOR_TO_ELEMENT.delete(editor);\n      NODE_TO_ELEMENT.delete(editor);\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput);\n      }\n    } else {\n      // Attach a native DOM event handler for `beforeinput` events, because React's\n      // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n      // real `beforeinput` events sadly... (2019/11/04)\n      // https://github.com/facebook/react/issues/11211\n      if (HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        node.addEventListener('beforeinput', onDOMBeforeInput);\n      }\n    }\n    ref.current = node;\n    if (typeof forwardedRef === 'function') {\n      forwardedRef(node);\n    } else if (forwardedRef) {\n      forwardedRef.current = node;\n    }\n  }, [onDOMSelectionChange, scheduleOnDOMSelectionChange, editor, onDOMBeforeInput, forwardedRef]);\n  useIsomorphicLayoutEffect(() => {\n    var window = ReactEditor.getWindow(editor);\n    // COMPAT: In Chrome, `selectionchange` events can fire when <input> and\n    // <textarea> elements are appended to the DOM, causing\n    // `editor.selection` to be overwritten in some circumstances.\n    // (2025/01/16) https://issues.chromium.org/issues/389368412\n    var onSelectionChange = _ref => {\n      var {\n        target\n      } = _ref;\n      var targetElement = target instanceof HTMLElement ? target : null;\n      var targetTagName = targetElement === null || targetElement === void 0 ? void 0 : targetElement.tagName;\n      if (targetTagName === 'INPUT' || targetTagName === 'TEXTAREA') {\n        return;\n      }\n      scheduleOnDOMSelectionChange();\n    };\n    // Attach a native DOM event handler for `selectionchange`, because React's\n    // built-in `onSelect` handler doesn't fire for all selection changes. It's\n    // a leaky polyfill that only fires on keypresses or clicks. Instead, we\n    // want to fire for any change to the selection inside the editor.\n    // (2019/11/04) https://github.com/facebook/react/issues/5785\n    window.document.addEventListener('selectionchange', onSelectionChange);\n    // Listen for dragend and drop globally. In Firefox, if a drop handler\n    // initiates an operation that causes the originally dragged element to\n    // unmount, that element will not emit a dragend event. (2024/06/21)\n    var stoppedDragging = () => {\n      state.isDraggingInternally = false;\n    };\n    window.document.addEventListener('dragend', stoppedDragging);\n    window.document.addEventListener('drop', stoppedDragging);\n    return () => {\n      window.document.removeEventListener('selectionchange', onSelectionChange);\n      window.document.removeEventListener('dragend', stoppedDragging);\n      window.document.removeEventListener('drop', stoppedDragging);\n    };\n  }, [scheduleOnDOMSelectionChange, state]);\n  var decorations = decorate([editor, []]);\n  var showPlaceholder = placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === '' && !isComposing;\n  var placeHolderResizeHandler = useCallback(placeholderEl => {\n    if (placeholderEl && showPlaceholder) {\n      var _placeholderEl$getBou;\n      setPlaceholderHeight((_placeholderEl$getBou = placeholderEl.getBoundingClientRect()) === null || _placeholderEl$getBou === void 0 ? void 0 : _placeholderEl$getBou.height);\n    } else {\n      setPlaceholderHeight(undefined);\n    }\n  }, [showPlaceholder]);\n  if (showPlaceholder) {\n    var start = Editor.start(editor, []);\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      onPlaceholderResize: placeHolderResizeHandler,\n      anchor: start,\n      focus: start\n    });\n  }\n  var {\n    marks\n  } = editor;\n  state.hasMarkPlaceholder = false;\n  if (editor.selection && Range.isCollapsed(editor.selection) && marks) {\n    var {\n      anchor\n    } = editor.selection;\n    var leaf = Node.leaf(editor, anchor.path);\n    var rest = _objectWithoutProperties(leaf, _excluded2);\n    // While marks isn't a 'complete' text, we can still use loose Text.equals\n    // here which only compares marks anyway.\n    if (!Text$1.equals(leaf, marks, {\n      loose: true\n    })) {\n      state.hasMarkPlaceholder = true;\n      var unset = Object.fromEntries(Object.keys(rest).map(mark => [mark, null]));\n      decorations.push(_objectSpread(_objectSpread(_objectSpread({\n        [MARK_PLACEHOLDER_SYMBOL]: true\n      }, unset), marks), {}, {\n        anchor,\n        focus: anchor\n      }));\n    }\n  }\n  // Update EDITOR_TO_MARK_PLACEHOLDER_MARKS in setTimeout useEffect to ensure we don't set it\n  // before we receive the composition end event.\n  useEffect(() => {\n    setTimeout(() => {\n      var {\n        selection\n      } = editor;\n      if (selection) {\n        var {\n          anchor: _anchor\n        } = selection;\n        var _text = Node.leaf(editor, _anchor.path);\n        // While marks isn't a 'complete' text, we can still use loose Text.equals\n        // here which only compares marks anyway.\n        if (marks && !Text$1.equals(_text, marks, {\n          loose: true\n        })) {\n          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks);\n          return;\n        }\n      }\n      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n    });\n  });\n  return /*#__PURE__*/React.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/React.createElement(ComposingContext.Provider, {\n    value: isComposing\n  }, /*#__PURE__*/React.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/React.createElement(RestoreDOM, {\n    node: ref,\n    receivedUserInput: receivedUserInput\n  }, /*#__PURE__*/React.createElement(Component, _objectSpread(_objectSpread({\n    role: readOnly ? undefined : 'textbox',\n    \"aria-multiline\": readOnly ? undefined : true\n  }, attributes), {}, {\n    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n    // have to use hacks to make these replacement-based features work.\n    // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop\n    // mismatch warning app moves to browser. Pass-through consumer props when\n    // not CAN_USE_DOM (SSR) and default to falsy value\n    spellCheck: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.spellCheck : false,\n    autoCorrect: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCorrect : 'false',\n    autoCapitalize: HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM ? attributes.autoCapitalize : 'false',\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    // explicitly set this\n    contentEditable: !readOnly,\n    // in some cases, a decoration needs access to the range / selection to decorate a text node,\n    // then you will select the whole text node when you select part the of text\n    // this magic zIndex=\"-1\" will fix it\n    zindex: -1,\n    suppressContentEditableWarning: true,\n    ref: callbackRef,\n    style: _objectSpread(_objectSpread({}, disableDefaultStyles ? {} : _objectSpread({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, placeholderHeight ? {\n      minHeight: placeholderHeight\n    } : {})), userStyle),\n    onBeforeInput: useCallback(event => {\n      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n      // fall back to React's leaky polyfill instead just for it. It\n      // only works for the `insertText` input type.\n      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && ReactEditor.hasSelectableTarget(editor, event.target)) {\n        event.preventDefault();\n        if (!ReactEditor.isComposing(editor)) {\n          var _text2 = event.data;\n          Editor.insertText(editor, _text2);\n        }\n      }\n    }, [attributes.onBeforeInput, editor, readOnly]),\n    onInput: useCallback(event => {\n      if (isEventHandled(event, attributes.onInput)) {\n        return;\n      }\n      if (androidInputManagerRef.current) {\n        androidInputManagerRef.current.handleInput();\n        return;\n      }\n      // Flush native operations, as native events will have propogated\n      // and we can correctly compare DOM text values in components\n      // to stop rendering, so that browser functions like autocorrect\n      // and spellcheck work as expected.\n      for (var op of deferredOperations.current) {\n        op();\n      }\n      deferredOperations.current = [];\n      // COMPAT: Since `beforeinput` doesn't fully `preventDefault`,\n      // there's a chance that content might be placed in the browser's undo stack.\n      // This means undo can be triggered even when the div is not focused,\n      // and it only triggers the input event for the node. (2024/10/09)\n      if (!ReactEditor.isFocused(editor)) {\n        handleNativeHistoryEvents(editor, event.nativeEvent);\n      }\n    }, [attributes.onInput, editor]),\n    onBlur: useCallback(event => {\n      if (readOnly || state.isUpdatingSelection || !ReactEditor.hasSelectableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      }\n      // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n      var {\n        relatedTarget\n      } = event;\n      var el = ReactEditor.toDOMNode(editor, editor);\n      // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n      if (relatedTarget === el) {\n        return;\n      }\n      // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      }\n      // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n        if (Element$1.isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      }\n      // COMPAT: Safari doesn't always remove the selection even if the content-\n      // editable element no longer has focus. Refer to:\n      // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n      if (IS_WEBKIT) {\n        var domSelection = getSelection(root);\n        domSelection === null || domSelection === void 0 || domSelection.removeAllRanges();\n      }\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, state.isUpdatingSelection, state.latestElement, editor, attributes.onBlur]),\n    onClick: useCallback(event => {\n      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        // At this time, the Slate document may be arbitrarily different,\n        // because onClick handlers can change the document before we get here.\n        // Therefore we must check that this path actually exists,\n        // and that it still refers to the same node.\n        if (!Editor.hasPath(editor, path) || Node.get(editor, path) !== node) {\n          return;\n        }\n        if (event.detail === TRIPLE_CLICK && path.length >= 1) {\n          var blockPath = path;\n          if (!(Element$1.isElement(node) && Editor.isBlock(editor, node))) {\n            var _block$;\n            var block = Editor.above(editor, {\n              match: n => Element$1.isElement(n) && Editor.isBlock(editor, n),\n              at: path\n            });\n            blockPath = (_block$ = block === null || block === void 0 ? void 0 : block[1]) !== null && _block$ !== void 0 ? _block$ : path.slice(0, 1);\n          }\n          var range = Editor.range(editor, blockPath);\n          Transforms.select(editor, range);\n          return;\n        }\n        if (readOnly) {\n          return;\n        }\n        var _start = Editor.start(editor, path);\n        var end = Editor.end(editor, path);\n        var startVoid = Editor.void(editor, {\n          at: _start\n        });\n        var endVoid = Editor.void(editor, {\n          at: end\n        });\n        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {\n          var _range2 = Editor.range(editor, _start);\n          Transforms.select(editor, _range2);\n        }\n      }\n    }, [editor, attributes.onClick, readOnly]),\n    onCompositionEnd: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n        var _androidInputManagerR3;\n        if (ReactEditor.isComposing(editor)) {\n          Promise.resolve().then(() => {\n            setIsComposing(false);\n            IS_COMPOSING.set(editor, false);\n          });\n        }\n        (_androidInputManagerR3 = androidInputManagerRef.current) === null || _androidInputManagerR3 === void 0 || _androidInputManagerR3.handleCompositionEnd(event);\n        if (isEventHandled(event, attributes.onCompositionEnd) || IS_ANDROID) {\n          return;\n        }\n        // COMPAT: In Chrome, `beforeinput` events for compositions\n        // aren't correct and never fire the \"insertFromComposition\"\n        // type that we need. So instead, insert whenever a composition\n        // ends since it will already have been committed to the DOM.\n        if (!IS_WEBKIT && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_WECHATBROWSER && !IS_UC_MOBILE && event.data) {\n          var placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor);\n          EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor);\n          // Ensure we insert text with the marks the user was actually seeing\n          if (placeholderMarks !== undefined) {\n            EDITOR_TO_USER_MARKS.set(editor, editor.marks);\n            editor.marks = placeholderMarks;\n          }\n          Editor.insertText(editor, event.data);\n          var userMarks = EDITOR_TO_USER_MARKS.get(editor);\n          EDITOR_TO_USER_MARKS.delete(editor);\n          if (userMarks !== undefined) {\n            editor.marks = userMarks;\n          }\n        }\n      }\n    }, [attributes.onCompositionEnd, editor]),\n    onCompositionUpdate: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {\n        if (!ReactEditor.isComposing(editor)) {\n          setIsComposing(true);\n          IS_COMPOSING.set(editor, true);\n        }\n      }\n    }, [attributes.onCompositionUpdate, editor]),\n    onCompositionStart: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target)) {\n        var _androidInputManagerR4;\n        (_androidInputManagerR4 = androidInputManagerRef.current) === null || _androidInputManagerR4 === void 0 || _androidInputManagerR4.handleCompositionStart(event);\n        if (isEventHandled(event, attributes.onCompositionStart) || IS_ANDROID) {\n          return;\n        }\n        setIsComposing(true);\n        var {\n          selection\n        } = editor;\n        if (selection && Range.isExpanded(selection)) {\n          Editor.deleteFragment(editor);\n          return;\n        }\n      }\n    }, [attributes.onCompositionStart, editor]),\n    onCopy: useCallback(event => {\n      if (ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy) && !isDOMEventTargetInput(event)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData, 'copy');\n      }\n    }, [attributes.onCopy, editor]),\n    onCut: useCallback(event => {\n      if (!readOnly && ReactEditor.hasSelectableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut) && !isDOMEventTargetInput(event)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData, 'cut');\n        var {\n          selection\n        } = editor;\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n          } else {\n            var node = Node.parent(editor, selection.anchor.path);\n            if (Editor.isVoid(editor, node)) {\n              Transforms.delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, editor, attributes.onCut]),\n    onDragOver: useCallback(event => {\n      if (ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {\n        // Only when the target is void, call `preventDefault` to signal\n        // that drops are allowed. Editable content is droppable by\n        // default, and calling `preventDefault` hides the cursor.\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        if (Element$1.isElement(node) && Editor.isVoid(editor, node)) {\n          event.preventDefault();\n        }\n      }\n    }, [attributes.onDragOver, editor]),\n    onDragStart: useCallback(event => {\n      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        var voidMatch = Element$1.isElement(node) && Editor.isVoid(editor, node) || Editor.void(editor, {\n          at: path,\n          voids: true\n        });\n        // If starting a drag on a void node, make sure it is selected\n        // so that it shows up in the selection's fragment.\n        if (voidMatch) {\n          var range = Editor.range(editor, path);\n          Transforms.select(editor, range);\n        }\n        state.isDraggingInternally = true;\n        ReactEditor.setFragmentData(editor, event.dataTransfer, 'drag');\n      }\n    }, [readOnly, editor, attributes.onDragStart, state]),\n    onDrop: useCallback(event => {\n      if (!readOnly && ReactEditor.hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {\n        event.preventDefault();\n        // Keep a reference to the dragged range before updating selection\n        var draggedRange = editor.selection;\n        // Find the range where the drop happened\n        var range = ReactEditor.findEventRange(editor, event);\n        var data = event.dataTransfer;\n        Transforms.select(editor, range);\n        if (state.isDraggingInternally) {\n          if (draggedRange && !Range.equals(draggedRange, range) && !Editor.void(editor, {\n            at: range,\n            voids: true\n          })) {\n            Transforms.delete(editor, {\n              at: draggedRange\n            });\n          }\n        }\n        ReactEditor.insertData(editor, data);\n        // When dragging from another source into the editor, it's possible\n        // that the current editor does not have focus.\n        if (!ReactEditor.isFocused(editor)) {\n          ReactEditor.focus(editor);\n        }\n      }\n    }, [readOnly, editor, attributes.onDrop, state]),\n    onDragEnd: useCallback(event => {\n      if (!readOnly && state.isDraggingInternally && attributes.onDragEnd && ReactEditor.hasTarget(editor, event.target)) {\n        attributes.onDragEnd(event);\n      }\n    }, [readOnly, state, attributes, editor]),\n    onFocus: useCallback(event => {\n      if (!readOnly && !state.isUpdatingSelection && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement;\n        // COMPAT: If the editor has nested editable elements, the focus\n        // can go to them. In Firefox, this must be prevented because it\n        // results in issues with keyboard navigation. (2017/03/30)\n        if (IS_FIREFOX && event.target !== el) {\n          el.focus();\n          return;\n        }\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, state, editor, attributes.onFocus]),\n    onKeyDown: useCallback(event => {\n      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target)) {\n        var _androidInputManagerR5;\n        (_androidInputManagerR5 = androidInputManagerRef.current) === null || _androidInputManagerR5 === void 0 || _androidInputManagerR5.handleKeyDown(event);\n        var {\n          nativeEvent\n        } = event;\n        // COMPAT: The composition end event isn't fired reliably in all browsers,\n        // so we sometimes might end up stuck in a composition state even though we\n        // aren't composing any more.\n        if (ReactEditor.isComposing(editor) && nativeEvent.isComposing === false) {\n          IS_COMPOSING.set(editor, false);\n          setIsComposing(false);\n        }\n        if (isEventHandled(event, attributes.onKeyDown) || ReactEditor.isComposing(editor)) {\n          return;\n        }\n        var {\n          selection\n        } = editor;\n        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];\n        var isRTL = getDirection(Node.string(element)) === 'rtl';\n        // COMPAT: Since we prevent the default behavior on\n        // `beforeinput` events, the browser doesn't think there's ever\n        // any history stack to undo or redo, so we have to manage these\n        // hotkeys ourselves. (2019/11/06)\n        if (Hotkeys.isRedo(nativeEvent)) {\n          event.preventDefault();\n          var maybeHistoryEditor = editor;\n          if (typeof maybeHistoryEditor.redo === 'function') {\n            maybeHistoryEditor.redo();\n          }\n          return;\n        }\n        if (Hotkeys.isUndo(nativeEvent)) {\n          event.preventDefault();\n          var _maybeHistoryEditor = editor;\n          if (typeof _maybeHistoryEditor.undo === 'function') {\n            _maybeHistoryEditor.undo();\n          }\n          return;\n        }\n        // COMPAT: Certain browsers don't handle the selection updates\n        // properly. In Chrome, the selection isn't properly extended.\n        // And in Firefox, the selection isn't properly collapsed.\n        // (2017/10/17)\n        if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            reverse: true\n          });\n          return;\n        }\n        if (Hotkeys.isMoveLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line'\n          });\n          return;\n        }\n        if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus',\n            reverse: true\n          });\n          return;\n        }\n        if (Hotkeys.isExtendLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus'\n          });\n          return;\n        }\n        // COMPAT: If a void node is selected, or a zero-width text node\n        // adjacent to an inline is selected, we need to handle these\n        // hotkeys manually because browsers won't be able to skip over\n        // the void node with the zero-width space not being an empty\n        // string.\n        if (Hotkeys.isMoveBackward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: !isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: isRTL ? 'end' : 'start'\n            });\n          }\n          return;\n        }\n        if (Hotkeys.isMoveForward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: isRTL ? 'start' : 'end'\n            });\n          }\n          return;\n        }\n        if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: !isRTL\n          });\n          return;\n        }\n        if (Hotkeys.isMoveWordForward(nativeEvent)) {\n          event.preventDefault();\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: isRTL\n          });\n          return;\n        }\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to guessing at the input intention for hotkeys.\n        // COMPAT: In iOS, some of these hotkeys are handled in the\n        if (!HAS_BEFORE_INPUT_SUPPORT) {\n          // We don't have a core behavior for these, but they change the\n          // DOM if we don't prevent them, so we have to.\n          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {\n            event.preventDefault();\n            return;\n          }\n          if (Hotkeys.isSoftBreak(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertSoftBreak(editor);\n            return;\n          }\n          if (Hotkeys.isSplitBlock(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertBreak(editor);\n            return;\n          }\n          if (Hotkeys.isDeleteBackward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor);\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteForward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor);\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'line'\n              });\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'line'\n              });\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'word'\n              });\n            }\n            return;\n          }\n          if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n            event.preventDefault();\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'word'\n              });\n            }\n            return;\n          }\n        } else {\n          if (IS_CHROME || IS_WEBKIT) {\n            // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n            // an event when deleting backwards in a selected void inline node\n            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {\n              var currentNode = Node.parent(editor, selection.anchor.path);\n              if (Element$1.isElement(currentNode) && Editor.isVoid(editor, currentNode) && (Editor.isInline(editor, currentNode) || Editor.isBlock(editor, currentNode))) {\n                event.preventDefault();\n                Editor.deleteBackward(editor, {\n                  unit: 'block'\n                });\n                return;\n              }\n            }\n          }\n        }\n      }\n    }, [readOnly, editor, attributes.onKeyDown]),\n    onPaste: useCallback(event => {\n      if (!readOnly && ReactEditor.hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to React's `onPaste` here instead.\n        // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n        // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n        // COMPAT: Safari InputEvents generated by pasting won't include\n        // application/x-slate-fragment items, so use the\n        // ClipboardEvent here. (2023/03/15)\n        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent) || IS_WEBKIT) {\n          event.preventDefault();\n          ReactEditor.insertData(editor, event.clipboardData);\n        }\n      }\n    }, [readOnly, editor, attributes.onPaste])\n  }), /*#__PURE__*/React.createElement(Children, {\n    decorations: decorations,\n    node: editor,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    renderText: renderText,\n    selection: editor.selection\n  }))))));\n});\n/**\n * The default placeholder element\n */\nvar DefaultPlaceholder = _ref2 => {\n  var {\n    attributes,\n    children\n  } = _ref2;\n  return (\n    /*#__PURE__*/\n    // COMPAT: Artificially add a line-break to the end on the placeholder element\n    // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter\n    React.createElement(\"span\", _objectSpread({}, attributes), children, IS_ANDROID && /*#__PURE__*/React.createElement(\"br\", null))\n  );\n};\n/**\n * A default memoized decorate function.\n */\nvar defaultDecorate = () => [];\n/**\n * A default implement to scroll dom range into view.\n */\nvar defaultScrollSelectionIntoView = (editor, domRange) => {\n  // This was affecting the selection of multiple blocks and dragging behavior,\n  // so enabled only if the selection has been collapsed.\n  if (domRange.getBoundingClientRect && (!editor.selection || editor.selection && Range.isCollapsed(editor.selection))) {\n    var leafEl = domRange.startContainer.parentElement;\n    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);\n    scrollIntoView(leafEl, {\n      scrollMode: 'if-needed'\n    });\n    // @ts-expect-error an unorthodox delete D:\n    delete leafEl.getBoundingClientRect;\n  }\n};\n/**\n * Check if an event is overrided by a handler.\n */\nvar isEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  var shouldTreatEventAsHandled = handler(event);\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n  return event.isDefaultPrevented() || event.isPropagationStopped();\n};\n/**\n * Check if the event's target is an input element\n */\nvar isDOMEventTargetInput = event => {\n  return isDOMNode(event.target) && (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement);\n};\n/**\n * Check if a DOM event is overrided by a handler.\n */\nvar isDOMEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  var shouldTreatEventAsHandled = handler(event);\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n  return event.defaultPrevented;\n};\nvar handleNativeHistoryEvents = (editor, event) => {\n  var maybeHistoryEditor = editor;\n  if (event.inputType === 'historyUndo' && typeof maybeHistoryEditor.undo === 'function') {\n    maybeHistoryEditor.undo();\n    return;\n  }\n  if (event.inputType === 'historyRedo' && typeof maybeHistoryEditor.redo === 'function') {\n    maybeHistoryEditor.redo();\n    return;\n  }\n};\n\n/**\n * A React context for sharing the `focused` state of the editor.\n */\nvar FocusedContext = /*#__PURE__*/createContext(false);\n/**\n * Get the current `focused` state of the editor.\n */\nvar useFocused = () => {\n  return useContext(FocusedContext);\n};\n\nfunction isError(error) {\n  return error instanceof Error;\n}\n/**\n * A React context for sharing the editor selector context in a way to control rerenders\n */\nvar SlateSelectorContext = /*#__PURE__*/createContext({});\nvar refEquality = (a, b) => a === b;\n/**\n * use redux style selectors to prevent rerendering on every keystroke.\n * Bear in mind rerendering can only prevented if the returned value is a value type or for reference types (e.g. objects and arrays) add a custom equality function.\n *\n * Example:\n * ```\n *  const isSelectionActive = useSlateSelector(editor => Boolean(editor.selection));\n * ```\n */\nfunction useSlateSelector(selector) {\n  var equalityFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : refEquality;\n  var [, forceRender] = useReducer(s => s + 1, 0);\n  var context = useContext(SlateSelectorContext);\n  if (!context) {\n    throw new Error(\"The `useSlateSelector` hook must be used inside the <Slate> component's context.\");\n  }\n  var {\n    getSlate,\n    addEventListener\n  } = context;\n  var latestSubscriptionCallbackError = useRef();\n  var latestSelector = useRef(() => null);\n  var latestSelectedState = useRef(null);\n  var selectedState;\n  try {\n    if (selector !== latestSelector.current || latestSubscriptionCallbackError.current) {\n      var selectorResult = selector(getSlate());\n      if (equalityFn(latestSelectedState.current, selectorResult)) {\n        selectedState = latestSelectedState.current;\n      } else {\n        selectedState = selectorResult;\n      }\n    } else {\n      selectedState = latestSelectedState.current;\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current && isError(err)) {\n      err.message += \"\\nThe error may be correlated with this previous error:\\n\".concat(latestSubscriptionCallbackError.current.stack, \"\\n\\n\");\n    }\n    throw err;\n  }\n  useIsomorphicLayoutEffect(() => {\n    latestSelector.current = selector;\n    latestSelectedState.current = selectedState;\n    latestSubscriptionCallbackError.current = undefined;\n  });\n  useIsomorphicLayoutEffect(() => {\n    function checkForUpdates() {\n      try {\n        var newSelectedState = latestSelector.current(getSlate());\n        if (equalityFn(newSelectedState, latestSelectedState.current)) {\n          return;\n        }\n        latestSelectedState.current = newSelectedState;\n      } catch (err) {\n        // we ignore all errors here, since when the component\n        // is re-rendered, the selectors are called again, and\n        // will throw again, if neither props nor store state\n        // changed\n        if (err instanceof Error) {\n          latestSubscriptionCallbackError.current = err;\n        } else {\n          latestSubscriptionCallbackError.current = new Error(String(err));\n        }\n      }\n      forceRender();\n    }\n    var unsubscribe = addEventListener(checkForUpdates);\n    checkForUpdates();\n    return () => unsubscribe();\n  },\n  // don't rerender on equalityFn change since we want to be able to define it inline\n  [addEventListener, getSlate]);\n  return selectedState;\n}\n/**\n * Create selector context with editor updating on every editor change\n */\nfunction useSelectorContext(editor) {\n  var eventListeners = useRef([]).current;\n  var slateRef = useRef({\n    editor\n  }).current;\n  var onChange = useCallback(editor => {\n    slateRef.editor = editor;\n    eventListeners.forEach(listener => listener(editor));\n  }, [eventListeners, slateRef]);\n  var selectorContext = useMemo(() => {\n    return {\n      getSlate: () => slateRef.editor,\n      addEventListener: callback => {\n        eventListeners.push(callback);\n        return () => {\n          eventListeners.splice(eventListeners.indexOf(callback), 1);\n        };\n      }\n    };\n  }, [eventListeners, slateRef]);\n  return {\n    selectorContext,\n    onChange\n  };\n}\n\nvar REACT_MAJOR_VERSION = parseInt(React.version.split('.')[0], 10);\n\nvar _excluded = [\"editor\", \"children\", \"onChange\", \"onSelectionChange\", \"onValueChange\", \"initialValue\"];\n/**\n * A wrapper around the provider to handle `onChange` events, because the editor\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\n */\nvar Slate = props => {\n  var {\n      editor,\n      children,\n      onChange,\n      onSelectionChange,\n      onValueChange,\n      initialValue\n    } = props,\n    rest = _objectWithoutProperties(props, _excluded);\n  var [context, setContext] = React.useState(() => {\n    if (!Node.isNodeList(initialValue)) {\n      throw new Error(\"[Slate] initialValue is invalid! Expected a list of elements but got: \".concat(Scrubber.stringify(initialValue)));\n    }\n    if (!Editor.isEditor(editor)) {\n      throw new Error(\"[Slate] editor is invalid! You passed: \".concat(Scrubber.stringify(editor)));\n    }\n    editor.children = initialValue;\n    Object.assign(editor, rest);\n    return {\n      v: 0,\n      editor\n    };\n  });\n  var {\n    selectorContext,\n    onChange: handleSelectorChange\n  } = useSelectorContext(editor);\n  var onContextChange = useCallback(options => {\n    var _options$operation;\n    if (onChange) {\n      onChange(editor.children);\n    }\n    switch (options === null || options === void 0 || (_options$operation = options.operation) === null || _options$operation === void 0 ? void 0 : _options$operation.type) {\n      case 'set_selection':\n        onSelectionChange === null || onSelectionChange === void 0 || onSelectionChange(editor.selection);\n        break;\n      default:\n        onValueChange === null || onValueChange === void 0 || onValueChange(editor.children);\n    }\n    setContext(prevContext => ({\n      v: prevContext.v + 1,\n      editor\n    }));\n    handleSelectorChange(editor);\n  }, [editor, handleSelectorChange, onChange, onSelectionChange, onValueChange]);\n  useEffect(() => {\n    EDITOR_TO_ON_CHANGE.set(editor, onContextChange);\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {});\n    };\n  }, [editor, onContextChange]);\n  var [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor));\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor));\n  }, [editor]);\n  useIsomorphicLayoutEffect(() => {\n    var fn = () => setIsFocused(ReactEditor.isFocused(editor));\n    if (REACT_MAJOR_VERSION >= 17) {\n      // In React >= 17 onFocus and onBlur listen to the focusin and focusout events during the bubbling phase.\n      // Therefore in order for <Editable />'s handlers to run first, which is necessary for ReactEditor.isFocused(editor)\n      // to return the correct value, we have to listen to the focusin and focusout events without useCapture here.\n      document.addEventListener('focusin', fn);\n      document.addEventListener('focusout', fn);\n      return () => {\n        document.removeEventListener('focusin', fn);\n        document.removeEventListener('focusout', fn);\n      };\n    } else {\n      document.addEventListener('focus', fn, true);\n      document.addEventListener('blur', fn, true);\n      return () => {\n        document.removeEventListener('focus', fn, true);\n        document.removeEventListener('blur', fn, true);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(SlateSelectorContext.Provider, {\n    value: selectorContext\n  }, /*#__PURE__*/React.createElement(SlateContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(EditorContext.Provider, {\n    value: context.editor\n  }, /*#__PURE__*/React.createElement(FocusedContext.Provider, {\n    value: isFocused\n  }, children))));\n};\n\n/**\n * Get the current editor object from the React context.\n * @deprecated Use useSlateStatic instead.\n */\nvar useEditor = () => {\n  var editor = useContext(EditorContext);\n  if (!editor) {\n    throw new Error(\"The `useEditor` hook must be used inside the <Slate> component's context.\");\n  }\n  return editor;\n};\n\n/**\n * Get the current slate selection.\n * Only triggers a rerender when the selection actually changes\n */\nvar useSlateSelection = () => {\n  return useSlateSelector(editor => editor.selection, isSelectionEqual);\n};\nvar isSelectionEqual = (a, b) => {\n  if (!a && !b) return true;\n  if (!a || !b) return false;\n  return Range.equals(a, b);\n};\n\n/**\n * `withReact` adds React and DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\nvar withReact = function withReact(editor) {\n  var clipboardFormatKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x-slate-fragment';\n  var e = editor;\n  e = withDOM(e, clipboardFormatKey);\n  var {\n    onChange\n  } = e;\n  e.onChange = options => {\n    // COMPAT: React < 18 doesn't batch `setState` hook calls, which means\n    // that the children and selection can get out of sync for one render\n    // pass. So we have to use this unstable API to ensure it batches them.\n    // (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    var maybeBatchUpdates = REACT_MAJOR_VERSION < 18 ? ReactDOM.unstable_batchedUpdates : callback => callback();\n    maybeBatchUpdates(() => {\n      onChange(options);\n    });\n  };\n  return e;\n};\n\nexport { DefaultElement, DefaultLeaf, DefaultPlaceholder, DefaultText, Editable, ReactEditor, Slate, useComposing, useEditor, useFocused, useReadOnly, useSelected, useSlate, useSlateSelection, useSlateSelector, useSlateStatic, useSlateWithV, withReact };\n//# sourceMappingURL=index.es.js.map\n"],"names":["module","exports","value","String","rtl","test","ltr","RTL","LTR","RegExp","IS_MAC","window","navigator","platform","MODIFIERS","alt","control","meta","shift","ALIASES","add","break","cmd","command","ctl","ctrl","del","down","esc","ins","left","mod","opt","option","return","right","space","spacebar","up","win","windows","CODES","backspace","tab","enter","pause","capslock","escape","pageup","pagedown","end","home","arrowleft","arrowup","arrowright","arrowdown","insert","delete","numlock","scrolllock","f","isHotkey","hotkey","options","event","Array","isArray","array","map","string","parseHotkey","check","e","some","object","compareHotkey","byKey","ret","values","replace","split","length","k","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","optional","endsWith","slice","name","toKeyName","modifier","TypeError","key","which","toKeyCode","err","expected","actual","toLowerCase","toUpperCase","charCodeAt","History","isHistory","redos","undos","isOperationList","operations","SAVING","WeakMap","MERGING","SPLITTING_ONCE","HistoryEditor","isHistoryEditor","history","isEditor","isMerging","editor","get","isSplittingOnce","setSplittingOnce","set","isSaving","redo","undo","withMerging","fn","prev","withNewBatch","withoutMerging","withoutSaving","withHistory","apply","batch","selectionBefore","setSelection","withoutNormalizing","op","pop","writeHistory","inverseOps","inverse","reverse","lastBatch","lastOp","save","merge","shouldSave","shouldMerge","push","selection","stack","type","offset","text","equals","path","t","nodeType","n","clientHeight","scrollHeight","clientWidth","scrollWidth","o","getComputedStyle","overflowY","overflowX","ownerDocument","defaultView","frameElement","l","r","i","s","parentElement","getRootNode","host","d","h","document","scrollMode","c","block","inline","u","boundary","a","skipOverflowHiddenElements","g","p","m","scrollingElement","documentElement","w","W","body","b","visualViewport","width","innerWidth","H","height","innerHeight","scrollX","y","scrollY","M","v","E","top","x","C","bottom","I","R","getBoundingClientRect","T","B","F","V","parseFloat","scrollMarginTop","scrollMarginRight","scrollMarginBottom","scrollMarginLeft","D","L","parseInt","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","offsetWidth","S","offsetHeight","X","Y","Math","max","scrollLeft","scrollTop","min","el","isConnected","parentNode","ShadowRoot","behavior","Object","keys","scroll","_navigator$userAgent$","_navigator$userAgent$2","DOMNode","globalThis","Node","DOMText","Element","Text","getDefaultView","Range","Selection","StaticRange","isDOMElement","isDOMNode","isDOMSelection","anchorNode","isDOMText","getEditableChildAndIndex","parent","index","direction","childNodes","child","triedForward","triedBackward","getAttribute","getEditableChild","getPlainText","domNode","nodeValue","childNode","from","display","getPropertyValue","tagName","catchSlateFragment","getSelection","root","isTrackedMutation","mutation","target","matches","DOMEditor","getWindow","contains","hasDOMNode","editable","parentMutation","find","_ref","addedNodes","removedNodes","node","_node","isBefore","otherNode","Boolean","compareDocumentPosition","DOCUMENT_POSITION_PRECEDING","IS_IOS","userAgent","MSStream","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_WEBKIT","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_ANDROID_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_UC_MOBILE","IS_WECHATBROWSER","CAN_USE_DOM","createElement","match","HAS_BEFORE_INPUT_SUPPORT","InputEvent","prototype","getTargetRanges","_typeof","constructor","_toPropertyKey","arg","input","hint","prim","toPrimitive","res","call","Number","_toPrimitive","_defineProperty","obj","defineProperty","enumerable","configurable","writable","Key","this","id","concat","IS_NODE_MAP_DIRTY","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","EDITOR_TO_PLACEHOLDER_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","IS_COMPOSING","EDITOR_TO_USER_SELECTION","EDITOR_TO_ON_CHANGE","EDITOR_TO_SCHEDULE_FLUSH","EDITOR_TO_PENDING_INSERTION_MARKS","EDITOR_TO_USER_MARKS","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_PENDING_ACTION","EDITOR_TO_PENDING_SELECTION","EDITOR_TO_FORCE_RENDER","PLACEHOLDER_SYMBOL","MARK_PLACEHOLDER_SYMBOL","androidPendingDiffs","androidScheduleFlush","_EDITOR_TO_SCHEDULE_F","blur","toDOMNode","findDocumentOrShadowRoot","activeElement","deselect","domSelection","rangeCount","removeAllRanges","Document","findEventRange","nativeEvent","clientX","clientY","Error","domRange","toSlateNode","findPath","isElement","isVoid","rect","isPrev","isInline","edge","point","before","after","range","caretRangeFromPoint","position","caretPositionFromPoint","createRange","setStart","offsetNode","setEnd","toSlateRange","exactMatch","suppressThrow","findKey","unshift","stringify","focus","arguments","retries","setTimeout","toDOMRange","addRange","select","start","preventScroll","targetEl","editorEl","message","includes","closest","isContentEditable","hasEditableTarget","hasRange","anchor","hasPath","hasSelectableTarget","isTargetInsideNonReadonlyVoid","hasTarget","insertData","data","insertFragmentData","insertTextData","isComposing","isFocused","isReadOnly","slateNode","setFragmentData","originEvent","KEY_TO_ELEMENT","toDOMPoint","domPoint","void","at","texts","querySelectorAll","textContent","attr","nextText","hasAttribute","_nextText$textContent","domText","startsWith","isBackward","domAnchor","domFocus","isCollapsed","startNode","startOffset","endNode","endOffset","isStartAtZeroWidth","isEndAtZeroWidth","domEl","toSlatePoint","searchDirection","nearestNode","nearestOffset","isLast","normalizeDOMPoint","textNode","_domNode$textContent","_domNode$textContent2","potentialVoidNode","voidNode","potentialNonEditableNode","nonEditableNode","leafNode","contents","cloneContents","forEach","textContext","removeChild","leafNodes","current","_leafNodes$find","_leafNodes2$findLast","getLeafNodes","elementNode","nextElementSibling","leaf","DOCUMENT_POSITION_FOLLOWING","isAfter","previousElementSibling","findLast","_slateNode","_path","_offset","querySelector","_focusNode$textConten","anchorOffset","focusNode","focusOffset","startContainer","firstRange","getRangeAt","lastRange","HTMLTableRowElement","getLastChildren","element","childElementCount","children","firstNodeRow","lastNodeRow","firstNode","lastNode","HTMLElement","innerHTML","endContainer","toString","hasShadowRoot","collapsed","focusBeforeAnchor","isExpanded","isForward","mode","unhangRange","voids","verifyDiffState","textDiff","diff","isText","nextPath","nextNode","applyStringDiff","_len","diffs","_key","reduce","normalizeStringDiff","targetText","removedText","prefixLength","str","another","charAt","longestCommonPrefixLength","suffixLength","longestCommonSuffixLength","normalized","targetRange","normalizePoint","parentBlock","above","isBlock","entry","isDescendant","normalizeRange","transformPendingPoint","pendingDiffs","transform","affinity","_anchor","_transformed","transformed","transformPendingRange","doRectsIntersect","compareRect","middle","areRangesSameLine","range1","range2","rect1","rect2","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","defineProperties","withDOM","clipboardFormatKey","onChange","deleteBackward","addMark","removeMark","_EDITOR_TO_PENDING_DI","_EDITOR_TO_PENDING_DI2","unit","parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","parentRange","parentRangeBoundary","positions","floor","findCurrentLineRange","pathRefMatches","newPath","transformTextDiff","pendingSelection","pendingAction","isPoint","getMatches","_EDITOR_TO_USER_SELEC","unref","prevPath","previous","changedPath","commonPath","common","changedNode","changedNodeKey","changedPathRef","pathRef","edges","startVoid","endVoid","attach","trim","cloneRange","setEndAfter","zw","isNewline","span","style","whiteSpace","appendChild","fragment","getFragment","JSON","encoded","btoa","encodeURIComponent","setAttribute","setData","div","getData","dataTransfer","htmlData","getSlateFragmentAttribute","decoded","decodeURIComponent","atob","parsed","parse","insertFragment","lines","line","splitNodes","always","insertText","onContextChange","levels","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","deleteForward","extendBackward","extendForward","italic","insertSoftBreak","splitBlock","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","transposeCharacter","WINDOWS_HOTKEYS","create","generic","apple","isGeneric","isApple","isWindows","hotkeys","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSoftBreak","isSplitBlock","isTransposeCharacter","isUndo","_objectWithoutProperties","source","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","ResizeObserverBoxOptions","_excluded","_excluded2","isDecorationFlagsEqual","other","obj1","obj2","rangeOwnProps","otherOwnProps","every","hasOwnProperty","resizeObservers","msg","trigger","freeze","ResizeObserverSize","inlineSize","blockSize","DOMRectReadOnly","toJSON","_a","fromRect","rectangle","isSVG","SVGElement","isHidden","getBBox","_b","getClientRects","scope","global","cache","scrollRegexp","verticalRegexp","IE","parseDimension","pixel","size","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","calculateBoxSizes","forceRecalculation","has","cs","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","canScrollHorizontally","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderRight","borderBottom","horizontalPadding","verticalPadding","horizontalBorderArea","verticalBorderArea","horizontalScrollbarThickness","verticalScrollbarThickness","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","round","devicePixelRatio","calculateBoxSize","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","ResizeObserverEntry","calculateDepthForNode","Infinity","depth","broadcastActiveObservations","shallowestDepth","callbacks","ro","activeTargets","entries","ot","targetDepth","lastReportedSize","callback","observer","splice","_i","callbacks_1","gatherActiveObservationsAtDepth","skippedTargets","observationTargets","isActive","process","ErrorEvent","createEvent","initEvent","dispatchEvent","queueMicroTask","toggle_1","el_1","createTextNode","MutationObserver","cb","observe","characterData","watching","observerConfig","attributes","childList","subtree","events","time","timeout","Date","now","scheduled","scheduler","Scheduler","_this","stopped","listener","schedule","run","until","elementsHaveResized","requestAnimationFrame","stop","addEventListener","disconnect","removeEventListener","updateCount","ResizeObservation","CONTENT_BOX","isReplacedElement","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","ResizeObserverController","connect","detail","firstObservation","box","unobserve","lastObservation","ResizeObserver","EditorContext","createContext","useSlateStatic","useContext","ReactEditor","ownKeys$6","_objectSpread$6","createAndroidInputManager","scheduleOnDOMSelectionChange","onDOMSelectionChange","flushing","compositionEndTimeoutId","flushTimeoutId","actionTimeoutId","idCounter","insertPositionHint","applyPendingSelection","flush","clearTimeout","hasPendingDiffs","hasPendingAction","selectionRef","rangeRef","marks","scheduleSelectionChange","pendingMarks","deleteFragment","_ref2","cancel","action","_targetRange","performAction","userMarks","updatePlaceholderVisibility","forceHide","placeholderElement","removeProperty","storeDiff","_EDITOR_TO_PENDING_DI3","idx","findIndex","change","overlap","applied","sliceEnd","merged","scheduleAction","_EDITOR_TO_PENDING_DI4","handleUserSelect","pathChanged","parentPathChanged","scheduleFlush","hasPendingChanges","isFlushing","handleCompositionEnd","_event","handleCompositionStart","handleDOMBeforeInput","_targetRange2","inputType","nativeTargetRange","canStoreDiff","_start","_end","relevantPendingDiffs","targetNode","_nativeTargetRange","nativeCollapsed","insertBreak","_text","parts","_start2","_end2","_diff","hintPosition","search","handleKeyDown","_","handleDomMutations","mutations","_EDITOR_TO_FORCE_REND","handleInput","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","_excluded$2","ownKeys$5","MUTATION_OBSERVER_CONFIG$1","useAndroidInputManager","isMountedRef","isMounted","useRef","inputManager","useState","_objectSpread$5","mutationObserver","takeRecords","useMutationObserver","ownKeys$4","String$1","props","parentPath","isMarkPlaceholder","ZeroWidthString","TextString","isTrailing","isLineBreak","ref","getTextContent","initialText","textWithTrailing","MemoizedText$1","memo","forwardRef","_objectSpread$4","ownKeys$3","_objectSpread$3","PLACEHOLDER_DELAY","clearTimeoutRef","timeoutRef","Leaf","renderPlaceholder","renderLeaf","DefaultLeaf","leafPosition","placeholderResizeObserver","placeholderRef","showPlaceholder","setShowPlaceholder","showPlaceholderTimeoutRef","callbackPlaceholderRef","useCallback","placeholderEl","releaseObserver","disconnectPlaceholderResizeObserver","_leaf$onPlaceholderRe","onPlaceholderResize","ResizeObserver$1","_leaf$onPlaceholderRe2","leafIsPlaceholder","placeholderProps","placeholder","pointerEvents","maxWidth","opacity","userSelect","textDecoration","WebkitUserModify","contentEditable","MemoizedLeaf","ownKeys$2","_objectSpread$2","decorations","renderText","DefaultText","decoratedLeaves","callbackRef","MemoizedText","list","isTextDecorationsEqual","ownKeys$1","_objectSpread$1","renderElement","DefaultElement","readOnly","useReadOnly","useChildren","hasInlines","dir","Tag","color","outline","MemoizedElement","isElementDecorationsEqual","DecorateContext","SelectedContext","useSelected","decorate","isLeafBlock","sel","intersection","ds","dec","Provider","ReadOnlyContext","SlateContext","useSlate","context","MUTATION_OBSERVER_CONFIG","characterDataOldValue","RestoreDOMComponent","Component","super","_this$mutationObserve","componentDidMount","receivedUserInput","manager","bufferedMutations","clear","registerMutations","trackedMutations","restoreDOM","insertBefore","nextSibling","createRestoreDomManager","getSnapshotBeforeUpdate","_this$mutationObserve2","_this$mutationObserve3","_this$manager2","_this$manager","pendingMutations","componentDidUpdate","_this$manager3","componentWillUnmount","_this$mutationObserve4","render","RestoreDOM","ComposingContext","_excluded$1","Children","Editable","forwardedRef","defaultRenderPlaceholder","DefaultPlaceholder","autoFocus","defaultDecorate","onDOMBeforeInput","propsOnDOMBeforeInput","scrollSelectionIntoView","defaultScrollSelectionIntoView","userStyle","as","disableDefaultStyles","setIsComposing","deferredOperations","placeholderHeight","setPlaceholderHeight","processing","onUserInput","animationFrameIdRef","cancelAnimationFrame","useTrackUserInput","forceRender","useReducer","state","useMemo","isDraggingInternally","isUpdatingSelection","latestElement","hasMarkPlaceholder","androidInputManagerRef","active","_activeElement","shadowRoot","_activeElement$shadow","_activeElement2","getActiveElement","execCommand","androidInputManager","_root","_el","anchorNodeSelectable","focusNodeInEditor","_androidInputManagerR","_androidInputManagerR2","setDomSelection","forceChange","hasDomSelection","editorElement","hasDomSelectionInEditor","slateRange","_anchorNode","newDomRange","collapseToEnd","setBaseAndExtent","ensureSelection","timeoutId","animationFrameId","ensureDomSelection","handleNativeHistoryEvents","newRange","preventDefault","stopImmediatePropagation","isDOMEventHandled","isCompositionChange","native","_node$parentElement","_window$getComputedSt","_window","_lastText$textContent","lastText","createTreeWalker","NodeFilter","SHOW_TEXT","lastChild","_range","toRestore","onSelectionChange","targetElement","targetTagName","stoppedDragging","placeHolderResizeHandler","_placeholderEl$getBou","rest","loose","unset","fromEntries","mark","role","spellCheck","autoCorrect","autoCapitalize","zindex","suppressContentEditableWarning","wordWrap","minHeight","onBeforeInput","isEventHandled","_text2","onInput","onBlur","relatedTarget","onClick","blockPath","_block$","_range2","onCompositionEnd","_androidInputManagerR3","Promise","resolve","then","placeholderMarks","onCompositionUpdate","onCompositionStart","_androidInputManagerR4","onCopy","isDOMEventTargetInput","clipboardData","onCut","onDragOver","onDragStart","onDrop","draggedRange","onDragEnd","onFocus","onKeyDown","_androidInputManagerR5","isRTL","maybeHistoryEditor","_maybeHistoryEditor","move","collapse","currentNode","onPaste","types","isPlainTextOnlyPaste","leafEl","bind","handler","shouldTreatEventAsHandled","isDefaultPrevented","isPropagationStopped","HTMLInputElement","HTMLTextAreaElement","defaultPrevented","FocusedContext","useFocused","SlateSelectorContext","refEquality","useSlateSelector","selector","equalityFn","selectedState","getSlate","latestSubscriptionCallbackError","latestSelector","latestSelectedState","selectorResult","checkForUpdates","newSelectedState","unsubscribe","REACT_MAJOR_VERSION","Slate","onValueChange","initialValue","setContext","isNodeList","assign","selectorContext","handleSelectorChange","eventListeners","slateRef","useSelectorContext","_options$operation","operation","prevContext","setIsFocused","useSlateSelection","isSelectionEqual","withReact"],"sourceRoot":""}