{"version":3,"sources":["webpack:///./src/global/components/form/CodeArea/darkTheme.js","webpack:///./src/global/components/form/CodeArea/lightTheme.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/links.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/images.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/iframes.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/textBlocks.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/general.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/getters.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/shared.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/spans.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/layoutBlocks.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/removeNode.js","webpack:///./src/global/components/form/ContentEditor/plugins/withInlines.js","webpack:///./src/global/components/form/ContentEditor/plugins/withImages.js","webpack:///./src/global/components/form/ContentEditor/plugins/withShortcuts.js","webpack:///./src/global/components/form/ContentEditor/utils/slate/transforms/listIndents.js","webpack:///./src/global/components/form/ContentEditor/plugins/withHtmlAwareBreaks.js","webpack:///./src/global/components/form/ContentEditor/plugins/index.js","webpack:///./src/global/components/form/ContentEditor/contexts/htmlBreadcrumbsContext.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/styles.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/HtmlLabel.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Leaf.js","webpack:///./src/global/components/form/ContentEditor/hotkeys/handlers.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Image.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Void.js","webpack:///./src/global/components/form/ContentEditor/components/renderers/Element.js","webpack:///./src/global/components/form/ContentEditor/hotkeys/index.js","webpack:///./src/global/components/form/ContentEditor/components/HtmlEditor.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/index.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/TooltipContent/content.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/BlockButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/MarkButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/LinkForm.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/Modal.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/utils.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/LinkButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/ImageForm.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/ImageButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/insert/IframeForm.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/IframeButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/BlockSelect.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/FunctionButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/buttons/SpanButton.js","webpack:///./src/global/components/form/ContentEditor/components/controls/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/ToolbarRTE.js","webpack:///./src/global/components/form/ContentEditor/components/controls/ToolbarHTML.js","webpack:///./src/global/components/form/ContentEditor/components/controls/Toggle/styles.js","webpack:///./src/global/components/form/ContentEditor/components/controls/Toggle/index.js","webpack:///./src/global/components/form/ContentEditor/components/controls/ToggleBar.js","webpack:///./src/global/components/form/ContentEditor/components/styles.js","webpack:///./src/global/components/form/ContentEditor/components/EditorControls.js","webpack:///./src/global/components/form/ContentEditor/components/Editor.js","webpack:///./src/global/components/form/ContentEditor/components/Wrapper.js"],"names":["window","ace","define","acequire","_exports","module","exports","isDark","cssClass","cssText","importCssString","unwrapLink","editor","Transforms","unwrapNodes","match","n","Editor","isEditor","Element","isElement","type","ReactEditor","focus","wrapLink","url","text","selection","isCollapsed","Range","link","htmlAttrs","href","children","insertNodes","wrapNodes","split","collapse","edge","insertImage","alt","image","src","slateOnly","node","above","isEmpty","removeNodes","insertIframe","title","test","embed","controls","undefined","LIST_TYPES","toggleTextBlock","format","initialNode","path","has","Node","parent","anchor","start","substring","offset","target","end","at","handleLiTextChild","removeMark","includes","p","isEqual","class","withoutNormalizing","setNodes","addMark","clearSlate","Array","length","keys","forEach","e","setSelectionAtPoint","select","formatNodeLabel","label","nodeName","id","replaceAll","getListItemNode","getListNode","getCommonBlock","condition","range","unhangRange","voids","common","isBlock","getAncestors","iterator","list","next","value","key","findKey","isElementActive","nearest","isTextBlockActive","block","isMarkActive","marks","get","isLinkActive","nodes","isEmptyAndChildless","onlyChildIsEmptyText","unwrapNode","parentPath","Path","newParent","hasBlocks","liftNodes","unwrapSpan","toggleOrWrapNode","insertOrWrapSpan","formatIsContainer","nestableElements","formatIsText","initialPath","findPath","rteElements","wrapLayoutBlock","toggleMark","removeNode","isInline","c","childPath","mode","nc","nestedChildPath","hasBlockChildren","code","pathCounter","string","withInlines","insertText","element","display","mathMLElements","inlineNodes","isImage","isImageUrl","isVideo","isVideoUrl","isLink","isValidUrl","withImages","insertData","data","getData","files","item","reader","FileReader","addEventListener","result","readAsDataURL","SHORTCUTS","INLINE_SHORTCUTS","withShortcuts","endsWith","blockType","slice","delete","shortcut","first","textNode","textNodePath","beforeText","indexOf","startIndex","endIndex","contentAnchor","contentFocus","distance","unit","reverse","getTextLocation","str","textContent","lastPath","nodePath","isTextNode","nextStr","nextPath","getIndentSelectionLocation","textIterator","nestListItem","srcPath","destPath","isArray","liftListItem","unwrap","moveNodes","to","targetPath","handleInlineItemChildren","findListChild","decreaseIndent","canUnwrapRoot","parentLi","listNode","listNodePath","listParent","isWrappedList","nodeStart","SlateEditor","listStart","Point","equals","destIndex","pop","withHtmlAwareBreaks","insertBreak","deleteBackward","inline","srcdoc","htmlChildren","liIsEmpty","removeEmptyInline","isBefore","inlinePath","maybeUnwrapSlateOnlyNode","li","nearestBlock","blockToTransform","transformPath","withPlugins","withVoids","HtmlBreadcrumbsContext","createContext","useHtmlBreadcrumbs","useContext","ButtonGroup","$visible","respond","InteriorButton","buttonUnstyled","$color","Content","$selected","defaultFocusStyle","ImageWrapper","VoidOuter","VoidInner","VoidLabel","formLabelPrimary","HrOuter","HrInner","COLOR_MAP","green","light","dark","blue","violet","ElementLabel","EditableElementLabel","ClassInput","TagButtons","DeleteButton","LiftButton","getHtmlOutlineStyles","darkMode","color","markElements","outline","outlineColor","borderRadius","borderTopLeftRadius","outlineOffset","position","HtmlLabel","visible","useSlateStatic","inputRef","useRef","t","useTranslation","editing","editingCrumb","useEffect","current","disableDelete","disableLift","tagAndId","formattedClass","trim","contentEditable","ref","defaultValue","onChange","persist","debounce","doUpdate","updateClassName","onClick","preventDefault","aria-label","disabled","IconComposer","icon","size","SlateLeaf","attributes","leaf","showHtml","selectedCrumb","leafChildren","bold","style","italic","underline","strikethrough","handleImageHotkey","button","document","getElementsByName","click","handleIframeHotkey","ImageRenderer","as","focused","useFocused","selected","useSelected","wrapperClassName","classNames","className","epubType","data-epub-type","width","height","VoidRenderer","theme","shadowRoot","shadow","attachShadow","container","createElement","containerClass","setAttribute","appendChild","innerHTML","childNodes","svgProps","flexShrink","SlateElement","renderedElements","Tag","captureHotKeys","shiftKey","insertSoftBreak","listType","index","selectionPath","prevItemPath","prevItem","subListNode","subListPath","increaseIndent","metaKey","ctrlKey","altKey","keyCode","handleLinkHotkey","HtmlEditor","props","aceRef","nextRef","prevRef","rest","editorProps","$blockScrolling","minLines","maxLines","wrapEnabled","showPrintMargin","onLoad","once","session","getUndoManager","reset","commands","removeCommand","renderer","setPadding","setScrollMargin","textInput","getElement","querySelector","scrollBy","onFocus","gotoLine","editorOptions","enableAutoIndent","name","bindKey","win","mac","exec","Wrapper","Label","headingTertiary","Header","Description","HotKey","HotKeyLabel","TextPlaceholder","Key","Keys","TooltipContent","description","hotkeys","map","hk","k","i","h1","h2","h3","h4","h5","h6","ol","ul","blockquote","pre","undo","redo","img","iframe","Button","defaultTransitionProps","SelectTooltipWrapper","TooltipIcon","SelectWrapper","Select","SpanButton","SelectIcon","StylesButton","BlockButton","useSlate","active","Tooltip","content","xOffset","yOffset","delay","data-active","types","getNearestOfType","tabIndex","forwardRef","MarkButton","isFirst","event","Form","CloseButton","$primary","defaultHoverStyle","CloseText","utilityPrimary","CloseIcon","Utility","ModalHeader","HeaderIcon","Heading","ModalBody","Modal","Dialog","fluidScale","InsertLinkForm","urlRef","textRef","defaultValues","InsertModal","form","resolve","reject","heading","resolveLabel","uid","useUID","handleRejectClick","buttonClasses","maxWidth","showCloseButton","closeOnOverlayClick","labelledBy","describedBy","onEsc","data-id","displayName","propTypes","PropTypes","func","isRequired","options","object","message","oneOfType","onModalClose","close","selectionToUse","setTimeout","LinkButton","useConfirmation","confirm","confirmation","addLink","inputElement","callback","closeCallback","InsertImageForm","altRef","ImageButton","addImage","updateImage","attrs","from","InsertIframeForm","titleRef","IframeButton","addIframe","updateIframe","activeIframe","activeVideo","BlockSelect","ariaLabel","renderOptions","o","hidden","opts","isActive","flat","filter","sort","a","b","getActiveBlock","FunctionButton","tooltip","Styled","renderButton","Toolbar","ToolGroup","ToolbarSpacer","ToggleBar","BreadcrumbsBar","$darkMode","Breadcrumbs","Breadcrumb","Spacer","ShowHideButton","ToolbarRTE","onClickUndo","onClickRedo","menu","useMenuBarState","orientation","loop","wrap","useSlateSelection","ancestors","setSelectedCrumb","setEditingCrumb","onToggleHtmlOutlines","useCallback","handleHoverFocus","clearHoverFocus","Object","tag","onMouseEnter","onMouseLeave","onBlur","ToolbarHTML","toggleStyles","cssVisible","controlsRef","$padding","$active","MobileLabel","Toggle","padding","left","right","iconSize","mobileLabel","htmlMode","onClickEditorToggle","onClickDarkModeToggle","EditorSecondary","EditableWrapper","$cssVisible","Editable","BaseEditable","Controls","HTMLError","InputError","EditorControls","errors","localHtml","localSlate","setLocalHtml","onChangeHtml","setLocalSlate","stylesheets","hasErrors","setHasErrors","warnErrors","setWarnErrors","toggleHtmlMode","useState","showCss","toggleCss","setDarkMode","activeElement","toDOMPoint","rect","parentElement","getBoundingClientRect","buttons","getElementById","buttonsRect","controlsRect","bottom","top","y","scrollIntoView","behavior","s","styles","join","renderElement","renderLeaf","codeAreaProps","readOnly","onValidate","messages","find","msg","wrapperClasses","source","pointer","detail","val","stopPropagation","json","serializeToSlate","html","formatHtml","serializeToHtml","toggleEditorView","HistoryEditor","placeholder","spellCheck","onKeyDown","dangerouslySetInnerHTML","__html","EditorWrapper","setFormValue","set","initialHtmlValue","initialSlateValue","editorRef","withReact","withHistory","createEditor","prevSlate","prevHtml","default","setFormValueFromSlate","throttle","setFormValueFromHtml","removeFormatting","FieldWrapper","fallbackRender","resetErrorBoundary","Provider","changes","history","undos","selectionBefore","arrayOf","sectionId","sectionBody"],"mappings":"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","file":"build/chunk-11-d0ae35495781e2667af1.js","sourcesContent":["/* eslint-disable max-len, no-unused-vars */\nwindow.ace.define(\n  \"ace/theme/idle_fingers\",\n  [\"require\", \"exports\", \"module\", \"ace/lib/dom\"],\n  (acequire, _exports, module) => {\n    exports = _exports;\n    exports.isDark = true;\n    exports.cssClass = \"ace-idle-fingers\";\n    exports.cssText = `\n      .ace-idle-fingers .ace_gutter {\n        background: #3b3b3b;\n        color: rgb(153,153,153);\n      }\n\n      .ace-idle-fingers .ace_print-margin {\n        width: 1px;\n        background: #3b3b3b;\n      }\n\n      .ace-idle-fingers {\n        color: var(--color-base-neutral10);\n        border: 1px solid #555555;\n      }\n\n      .ace-idle-fingers .ace_cursor {\n        color: #91FF00;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selection {\n        background: rgba(90, 100, 126, 0.88);\n      }\n\n      .ace-idle-fingers.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #323232;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_step {\n        background: rgb(102, 82, 0);\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid #404040;\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_active-line {\n        background:  var(--color-base-neutral110);\n      }\n\n      .ace-idle-fingers .ace_gutter-active-line {\n        background-color: #353637\n      }\n\n      .ace-idle-fingers .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(90, 100, 126, 0.88)\n      }\n\n      .ace-idle-fingers .ace_invisible {\n        color: var(--color-base-neutral40);\n      }\n\n      .ace-idle-fingers .ace_keyword,\n      .ace-idle-fingers .ace_meta {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_constant,\n      .ace-idle-fingers .ace_constant.ace_character,\n      .ace-idle-fingers .ace_constant.ace_character.ace_escape,\n      .ace-idle-fingers .ace_constant.ace_other,\n      .ace-idle-fingers .ace_support.ace_constant {\n        color: var(--color-base-blue45);\n      }\n\n      .ace-idle-fingers .ace_invalid:not(.ace_invisible) {\n        color: var(--color-base-neutral40);\n        background: var(--color-base-red45);\n      }\n\n      .ace-idle-fingers .ace_fold {\n        background-color: #CC7833;\n        border-color: #FFFFFF;\n      }\n\n      .ace-idle-fingers .ace_support.ace_function {\n        color: #B83426;\n      }\n\n      .ace-idle-fingers .ace_variable.ace_parameter {\n        font-style: italic;\n      }\n\n      .ace-idle-fingers .ace_string {\n        color: var(--color-base-green20);\n      }\n\n      .ace-idle-fingers .ace_string.ace_regexp {\n        color: #CCCC33;\n      }\n\n      .ace-idle-fingers .ace_comment {\n        font-style: italic;\n        color: #BC9458;\n      }\n\n      .ace-idle-fingers .ace_meta.ace_tag {\n        color: var(--color-base-orange45);\n      }\n\n      .ace-idle-fingers .ace_entity.ace_name {\n        color: #FFC66D;\n      }\n\n      .ace-idle-fingers .ace_collab.ace_user1 {\n        color: #323232;\n        background-color: #FFF980;\n      }\n\n      .ace-idle-fingers .ace_indent-guide {\n        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMwMjLyZYiPj/8PAAreAwAI1g0AAAAAElFTkSuQmCC) right repeat-y\n      }\n    `;\n    const dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n  }\n);\n/* eslint-enable max-len, no-unused-vars */\n","/* eslint-disable max-len, no-unused-vars */\nwindow.ace.define(\n  \"ace/theme/kuroir\",\n  [\"require\", \"exports\", \"module\", \"ace/lib/dom\"],\n  (acequire, _exports, module) => {\n    exports = _exports;\n    exports.isDark = false;\n    exports.cssClass = \"ace-kuroir\";\n    exports.cssText = `\n      .ace-kuroir .ace_gutter {\n        background: var(--color-base-neutral30);\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_print-margin {\n        width: 1px;\n        background: #e8e8e8;\n      }\n\n      .ace-kuroir {\n        background-color: #E8E9E8;\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_cursor {\n        color: #202020;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selection {\n        background: var(--color-base-yellow20);\n      }\n\n      .ace-kuroir.ace_multiselect .ace_selection.ace_start {\n        box-shadow: 0 0 3px 0px #E8E9E8;\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_step {\n        background: rgb(198, 219, 174);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_bracket {\n        margin: -1px 0 0 -1px;\n        border: 1px solid rgba(0, 0, 0, 0.29);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_active-line {\n        background: var(--color-base-yellow45);\n      }\n\n      .ace-kuroir .ace_gutter-active-line {\n        background-color: rgba(245, 228, 37, .5);\n      }\n\n      .ace-kuroir .ace_marker-layer .ace_selected-word {\n        border: 1px solid rgba(245, 170, 0, 0.57);\n      }\n\n      .ace-kuroir .ace_invisible {\n        color: #BFBFBF\n      }\n\n      .ace-kuroir .ace_fold {\n        border-color: #363636;\n      }\n\n      .ace-kuroir .ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_constant.ace_numeric {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_support.ace_type {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_function {\n        color: var(--color-base-neutral100);\n      }\n\n      .ace-kuroir .ace_support.ace_constant {\n        color: var(--color-base-blue75);\n      }\n\n      .ace-kuroir .ace_keyword {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_storage {\n        color:#A52A2A;\n      }\n\n      .ace-kuroir .ace_invalid.ace_illegal {\n        color:#FD1224;\n        background-color:rgba(255, 6, 0, 0.15);\n      }\n\n      .ace-kuroir .ace_invalid.ace_deprecated {\n        text-decoration:underline;\n        font-style:italic;\n        color:#FD1732;\n        background-color:#E8E9E8;\n      }\n\n      .ace-kuroir .ace_string {\n        color: var(--color-base-green75);\n      }\n\n      .ace-kuroir .ace_string.ace_regexp {\n        color:#417E00;\n        background-color:#C9D4BE; }\n\n      .ace-kuroir .ace_comment {\n        color:rgba(148, 148, 148, 0.91);\n        background-color:rgba(220, 220, 220, 0.56);\n      }\n\n      .ace-kuroir .ace_variable {\n        color: var(--color-text-neutral100);\n      }\n\n      .ace-kuroir .ace_meta.ace_tag {\n        color: var(--color-base-orange75);\n      }\n\n      .ace-kuroir .ace_markup.ace_heading {\n        color:#B8012D;\n        background-color:rgba(191, 97, 51, 0.051);\n      }\n\n      .ace-kuroir .ace_markup.ace_list {\n        color:#8F5B26;\n      }\n\n      .ace-kuroir .ace_indent-guide {\n          background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\n      }\n\n      .ace-kuroir .ace_indent-guide-active {\n        background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\n      }\n    `;\n    const dom = acequire(\"../lib/dom\");\n    dom.importCssString(exports.cssText, exports.cssClass);\n  }\n);\n/* eslint-enable max-len, no-unused-vars */\n","import { Transforms, Editor, Range, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const unwrapLink = editor => {\n  Transforms.unwrapNodes(editor, {\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n.type === \"a\"\n  });\n  ReactEditor.focus(editor);\n};\n\nexport const wrapLink = (editor, url, text) => {\n  const { selection } = editor ?? {};\n  if (!selection) return;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n  const link = {\n    type: \"a\",\n    htmlAttrs: { href: url },\n    children: isCollapsed ? [{ text: text ?? url }] : []\n  };\n\n  if (isCollapsed) {\n    Transforms.insertNodes(editor, link);\n  } else {\n    Transforms.wrapNodes(editor, link, { split: true });\n    Transforms.collapse(editor, { edge: \"end\" });\n  }\n\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const insertImage = (editor, url, alt) => {\n  const text = { text: \"\", slateOnly: true };\n  const image = {\n    type: \"img\",\n    htmlAttrs: { src: url, alt: alt ?? \"\" },\n    children: [text]\n  };\n  const [node] = Editor.above(editor, editor.selection);\n  if (Editor.isEmpty(editor, node)) {\n    Transforms.removeNodes(editor);\n  }\n  Transforms.insertNodes(editor, image);\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const insertIframe = (editor, url, title) => {\n  const text = { text: \"\", slateOnly: true };\n  const type = /api\\/proxy\\//.test(url) ? \"video\" : \"iframe\";\n  const controls = type === \"video\" ? \"\" : undefined;\n  const embed = {\n    type,\n    htmlAttrs: { src: url, title, controls },\n    children: [text]\n  };\n  const [node] = Editor.above(editor, editor.selection);\n  if (Editor.isEmpty(editor, node)) {\n    Transforms.removeNodes(editor);\n  }\n  Transforms.insertNodes(editor, embed);\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Element, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\n\nconst LIST_TYPES = [\"ol\", \"ul\"];\n\nconst handleLiTextChild = ({ editor, node, path, format }) => {\n  const { anchor, focus } = editor.selection;\n  const start = node.text.substring(0, anchor.offset);\n  const target = node.text.substring(anchor.offset, focus.offset);\n  const end = node.text.substring(focus.offset);\n\n  const children = [\n    ...(start && [\n      {\n        type: \"list-sibling\",\n        slateOnly: true,\n        children: [{ text: start }]\n      }\n    ]),\n    { type: format, children: [{ text: target }] },\n    ...(end && [\n      {\n        type: \"list-sibling\",\n        slateOnly: true,\n        children: [{ text: end }]\n      }\n    ])\n  ];\n\n  Transforms.insertNodes(editor, children, { at: path });\n};\n\nexport const toggleTextBlock = ({\n  editor,\n  format,\n  node: initialNode,\n  path,\n  split = false\n}) => {\n  if (\n    initialNode &&\n    has(initialNode, \"text\") &&\n    Node.parent(editor, path).type === \"li\"\n  )\n    return handleLiTextChild({ editor, node: initialNode, path, format });\n\n  const node =\n    initialNode && has(initialNode, \"text\")\n      ? Node.parent(editor, path)\n      : initialNode;\n\n  if (node.type === \"pre\") Editor.removeMark(editor, \"code\", true);\n\n  const type = LIST_TYPES.includes(format) ? \"li\" : format;\n\n  Transforms.unwrapNodes(editor, {\n    match: (n, p) =>\n      !Editor.isEditor(n) &&\n      Element.isElement(n) &&\n      LIST_TYPES.includes(n.type) &&\n      isEqual(p, path),\n    split: true\n  });\n\n  if (node.slateOnly || format !== node.type) {\n    const htmlAttrs = node.htmlAttrs?.class\n      ? { class: node.htmlAttrs?.class }\n      : undefined;\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.setNodes(\n        editor,\n        {\n          type,\n          slateOnly: undefined,\n          htmlAttrs: type !== \"li\" ? htmlAttrs : undefined\n        },\n        { split }\n      );\n      if (type === \"li\") {\n        Transforms.wrapNodes(editor, { type: format, htmlAttrs, children: [] });\n      }\n      if (format === \"pre\") Editor.addMark(editor, \"code\", true);\n      ReactEditor.focus(editor);\n    });\n  }\n\n  Transforms.setNodes(editor, { type: \"p\", slateOnly: undefined }, { split });\n  ReactEditor.focus(editor);\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const clearSlate = editor => {\n  const count = Array(editor.children.length).keys();\n  [...count].forEach(() => {\n    try {\n      Transforms.removeNodes(editor, { at: [0] });\n    } catch (e) {\n      return e;\n    }\n  });\n};\n\nexport const setSelectionAtPoint = (editor, path, offset = 0) => {\n  Transforms.select(editor, {\n    anchor: { path, offset },\n    focus: { path, offset }\n  });\n};\n\nexport const formatNodeLabel = node => {\n  let label = node.type === \"void\" ? node.nodeName : node.type;\n  const { htmlAttrs } = node ?? {};\n  if (htmlAttrs?.id) label = `${label}#${htmlAttrs.id}`;\n  if (htmlAttrs?.class)\n    label = `${label}.${htmlAttrs.class?.replaceAll(\" \", \".\")}`;\n  return label;\n};\n","import { Editor, Node, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport has from \"lodash/has\";\nimport { formatNodeLabel } from \"./general\";\n\nexport const getListItemNode = (editor, path) =>\n  Editor.above(editor, {\n    at: path,\n    match: n => n.type === \"li\"\n  }) ?? [];\n\nexport const getListNode = (editor, path) =>\n  Editor.above(editor, {\n    at: path,\n    match: n => n.type === \"ul\" || n.type === \"ol\"\n  }) ?? [];\n\n// Use Node.string() rather than this when appropriate\nexport const getTextContent = (editor, iterator, str = \"\") => {\n  const { value } = iterator.next();\n  if (!value) return str;\n  const [node] = value;\n  const nextStr = node.text ? str + node.text : str;\n  return getTextContent(editor, iterator, nextStr);\n};\n\nexport const getCommonBlock = (editor, condition = () => true) => {\n  const range = Editor.unhangRange(editor, editor.selection, { voids: true });\n\n  const [common, path] = Node.common(\n    editor,\n    range.anchor.path,\n    range.focus.path\n  );\n\n  if (\n    (Editor.isBlock(editor, common) || Editor.isEditor(common)) &&\n    condition(common)\n  ) {\n    return [common, path];\n  } else {\n    return Editor.above(editor, {\n      at: path,\n      match: n =>\n        (Editor.isBlock(editor, n) || Editor.isEditor(n)) && condition(n)\n    });\n  }\n};\n\nexport const getAncestors = (editor, iterator, list = {}) => {\n  const { value } = iterator.next();\n  if (!value) return list;\n  const [node, path] = value;\n  const key = ReactEditor.findKey(editor, node);\n  const next =\n    node.type && !node.slateOnly\n      ? { ...list, [key.id]: { label: formatNodeLabel(node), path } }\n      : list;\n  return getAncestors(editor, iterator, next);\n};\n\nexport const getNearestOfType = (editor, types) => {\n  const [nearest, path] = Editor.above(editor, {\n    at: Editor.unhangRange(editor, editor.selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      types.includes(n.type) &&\n      !n.nodeName &&\n      !n.slateOnly\n  });\n  return { nearest, path };\n};\n\nexport const isElementActive = (editor, format) => {\n  const { selection } = editor;\n  if (!selection) return [false];\n\n  const nearest = Editor.above(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      Element.isElement(n) &&\n      !n.nodeName &&\n      !n.slateOnly &&\n      n.type === format\n  });\n\n  const [node, path] = nearest ?? [];\n\n  // Include path in return so we can determine highest or lowest for display.\n  return nearest ? [node.type === format, path] : [false];\n};\n\nexport const isTextBlockActive = (editor, format) => {\n  const { selection } = editor;\n  if (!selection) return [false];\n\n  const block = Editor.above(editor, {\n    at: Editor.unhangRange(editor, selection),\n    match: n =>\n      !Editor.isEditor(n) &&\n      Editor.isBlock(editor, n) &&\n      !n.nodeName &&\n      !n.slateOnly &&\n      n.type === format\n  });\n\n  const [node, path] = block ?? [];\n\n  // Include path in return so we can determine highest or lowest for display.\n  return block ? [node?.type === format, path] : [false];\n};\n\nexport const isMarkActive = (editor, format) => {\n  if (!editor.selection) return false;\n  const node = Node.get(editor, editor.selection.focus.path);\n  const marks = node.text ? Editor.marks(editor) : false;\n\n  if (format === \"code\") {\n    const [pre] = Editor.above(editor, { match: n => n.type === \"pre\" }) ?? [];\n    if (pre) return false;\n  }\n  return marks ? marks[format] === true : false;\n};\n\nexport const isLinkActive = editor => {\n  const [link] = Editor.nodes(editor, {\n    match: n => !Editor.isEditor(n) && Element.isElement(n) && n.type === \"a\"\n  });\n  return !!link;\n};\n\nexport const isEmptyAndChildless = (editor, node) => {\n  const onlyChildIsEmptyText =\n    node.children.length === 1 && has(node.children[0], \"text\");\n  return (\n    Editor.isEmpty(editor, node) &&\n    (onlyChildIsEmptyText || !node.children.length)\n  );\n};\n","import { Transforms, Editor, Range } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport { nestableElements } from \"../../elements\";\nimport { isMarkActive, getCommonBlock } from \"../getters\";\nimport { toggleTextBlock } from \"./textBlocks\";\nimport { insertOrWrapSpan, unwrapSpan } from \"./spans\";\nimport { wrapLayoutBlock } from \"./layoutBlocks\";\n\nexport const unwrapNode = ({ editor, format, path }) => {\n  if (format === \"span\") return unwrapSpan({ editor, path });\n\n  Transforms.liftNodes(editor, {\n    match: (n, p) => {\n      return n.type === format && isEqual(p, path);\n    },\n    at: path\n  });\n  ReactEditor.focus(editor);\n};\n\nexport const toggleOrWrapNode = (editor, format) => {\n  const isCollapsed = Range.isCollapsed(editor.selection);\n\n  if (format === \"span\") {\n    return insertOrWrapSpan(editor, isCollapsed);\n  }\n\n  const formatIsContainer = nestableElements.includes(format);\n  const formatIsText = !formatIsContainer;\n\n  const condition = formatIsContainer\n    ? n => !Editor.isEditor(n) && !n.nodeName && !n.text\n    : n => !Editor.isEditor(n) && !n.nodeName;\n\n  const [common, path] = getCommonBlock(editor, condition);\n\n  if (formatIsText)\n    return toggleTextBlock({\n      editor,\n      format,\n      node: common,\n      path,\n      split: !isCollapsed\n    });\n\n  return wrapLayoutBlock({\n    editor,\n    format,\n    node: common,\n    path,\n    split: !isCollapsed\n  });\n};\n\nexport const toggleMark = (editor, format) => {\n  const isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Path, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\nimport { isEmptyAndChildless } from \"../getters\";\n\nexport const insertOrWrapSpan = (editor, isCollapsed) => {\n  if (isCollapsed) {\n    Transforms.insertNodes(\n      editor,\n      { type: \"span\", children: [{ text: \"\" }] },\n      { at: editor.selection.anchor, select: true }\n    );\n  } else {\n    Transforms.wrapNodes(\n      editor,\n      { type: \"span\", children: [] },\n      { split: true }\n    );\n  }\n  ReactEditor.focus(editor);\n};\n\nexport const unwrapSpan = ({ editor, path }) => {\n  const parentPath = Path.parent(path);\n  const [newParent] = Editor.node(editor, { at: parentPath });\n  if (Editor.hasBlocks(editor, newParent)) {\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.wrapNodes(\n        editor,\n        { type: \"div\", slateOnly: true },\n        {\n          at: path,\n          match: (n, p) => {\n            return n.type === \"span\" && isEqual(p, path);\n          }\n        }\n      );\n      Transforms.removeNodes(editor, {\n        match: (n, p) => {\n          return has(n, \"text\") && !n.text && isEqual(p, Path.next(path));\n        },\n        at: parentPath\n      });\n      Transforms.liftNodes(editor, {\n        match: (n, p) => {\n          return n.type === \"div\" && isEqual(p, path);\n        },\n        at: path\n      });\n      const parent = Node.get(editor, parentPath);\n      if (isEmptyAndChildless(editor, parent)) {\n        Transforms.removeNodes(editor, {\n          at: Path.parent(parentPath),\n          match: n => {\n            return isEqual(n, parent);\n          }\n        });\n      }\n      ReactEditor.focus(editor);\n    });\n  }\n};\n","import { Transforms, Node } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { rteElements } from \"../../elements\";\nimport has from \"lodash/has\";\n\nexport const wrapLayoutBlock = ({\n  editor,\n  format,\n  node: initialNode,\n  path: initialPath,\n  split\n}) => {\n  if (split)\n    return Transforms.wrapNodes(editor, { type: format }, { split: true });\n\n  const node =\n    initialNode && has(initialNode, \"text\")\n      ? Node.parent(editor, initialPath)\n      : initialNode;\n  const path = ReactEditor.findPath(editor, node);\n\n  Transforms.removeNodes(editor);\n\n  if (!rteElements.includes(node.type)) {\n    Transforms.insertNodes(\n      editor,\n      {\n        ...node,\n        children: [{ type: format, children: node.children }]\n      },\n      { at: path, select: true }\n    );\n  } else {\n    Transforms.insertNodes(\n      editor,\n      {\n        type: format,\n        children: [node]\n      },\n      { at: path, select: true }\n    );\n  }\n  ReactEditor.focus(editor);\n};\n","import { Transforms, Editor, Node, Element } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport has from \"lodash/has\";\nimport isEqual from \"lodash/isEqual\";\nimport { isEmptyAndChildless } from \"../getters\";\n\n// This function removes a specific node at any point in the selection hierarchy, not just the lowest one like the other transforms. It is used to handle delete via the html element labels.\n\nexport const removeNode = (editor, path) => {\n  const node = Node.get(editor, path);\n\n  // can't delete the root node\n  if (path.length === 1 && path[0] === 0) return;\n\n  // if the node is empty, just remove it\n  if (isEmptyAndChildless(editor, node))\n    return Transforms.removeNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path)\n    });\n\n  // if the node is inline, it's safe to unwrap; the parent node is already setup for inline children\n  if (Editor.isInline(editor, node)) {\n    return Transforms.unwrapNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path)\n    });\n  }\n\n  // if this is a list node, we're going to enforce some proper structure\n  // replace all li nodes with p nodes before removing the list tag\n  if (node.type === \"ol\" || node.type === \"ul\") {\n    node.children.forEach(c => {\n      const childPath = ReactEditor.findPath(editor, c);\n      Transforms.setNodes(\n        editor,\n        { type: \"p\", slateOnly: undefined },\n        { at: childPath, mode: \"highest\" }\n      );\n      if (c.children) {\n        c.children.forEach(nc => {\n          if (nc.type === \"ol\" || nc.type === \"ul\") {\n            const nestedChildPath = ReactEditor.findPath(editor, nc);\n            return Transforms.unwrapNodes(editor, {\n              match: n =>\n                !Editor.isEditor(n) && Element.isElement(n) && n.type === \"p\",\n              at: nestedChildPath,\n              mode: \"lowest\"\n            });\n          }\n        });\n      }\n    });\n    return Transforms.unwrapNodes(editor, {\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        isEqual(p, path),\n      at: path\n    });\n  }\n\n  // // now that we know the node is block, determine its children type\n  const hasBlockChildren = Editor.hasBlocks(editor, node);\n\n  // remove the code mark also if this is a pre tag created with the code block RTE button\n  if (node.type === \"pre\" && node.children[0].code)\n    Transforms.setNodes(\n      editor,\n      { ...node.children[0], code: undefined },\n      { at: [...path, 0], mode: \"highest\" }\n    );\n\n  // also safe to unwrap, we're just bumping blocks a level up the tree\n  if (hasBlockChildren)\n    return Transforms.unwrapNodes(editor, {\n      at: path,\n      match: (n, p) =>\n        !Editor.isEditor(n) &&\n        Element.isElement(n) &&\n        n.type === node.type &&\n        !n.slateOnly &&\n        isEqual(p, path)\n    });\n\n  // if the children are inline, there's a normalization issue because we'd be moving inline nodes up to parent with block children\n  if (!hasBlockChildren)\n    Editor.withoutNormalizing(editor, () => {\n      let pathCounter = 0;\n      node.children.forEach(c => {\n        // remove if empty text node\n        if (has(c, \"text\") && !Node.string(c)) {\n          Transforms.removeNodes(editor, { at: [...path, pathCounter] });\n        } else {\n          // wrap in a slateOnly div to prevent it from disappearing in normalization\n          Transforms.wrapNodes(\n            editor,\n            { type: \"div\", slateOnly: true },\n            { at: [...path, pathCounter] }\n          );\n          pathCounter += 1;\n        }\n      });\n      // now unwrap the node\n      Transforms.unwrapNodes(editor, {\n        at: path,\n        match: (n, p) =>\n          !Editor.isEditor(n) &&\n          Element.isElement(n) &&\n          n.type === node.type &&\n          !n.slateOnly &&\n          isEqual(p, path)\n      });\n    });\n};\n","import { inlineNodes } from \"../utils/elements\";\nimport { wrapLink, insertImage, insertIframe } from \"../utils/slate/transforms\";\nimport { isValidUrl, isImageUrl, isVideoUrl } from \"../utils/helpers\";\nimport { mathMLElements } from \"reader/containers/annotation/annotatable-components/mathHelpers\";\n\n/* eslint-disable no-param-reassign */\nconst withInlines = editor => {\n  const { insertText, isInline } = editor;\n\n  editor.isInline = element => {\n    const isInlineMath =\n      (element.type === \"math\" && element.htmlAttrs?.display === \"inline\") ||\n      (element.type !== \"math\" && mathMLElements.includes(element.type));\n\n    return (\n      isInlineMath || inlineNodes.includes(element.type) || isInline(element)\n    );\n  };\n\n  editor.insertText = text => {\n    const isImage = isImageUrl(text);\n    const isVideo = isVideoUrl(text);\n    const isLink = isValidUrl(text);\n\n    if (isImage) {\n      return insertImage(editor, text);\n    }\n    if (isVideo) {\n      return insertIframe(editor, text);\n    }\n    if (isLink) {\n      return wrapLink(editor, text);\n    }\n    insertText(text);\n  };\n\n  return editor;\n};\n\nexport default withInlines;\n","import { insertImage } from \"../utils/slate/transforms\";\nimport { isImageUrl } from \"../utils/helpers\";\n\n/* eslint-disable no-param-reassign */\nconst withImages = editor => {\n  const { insertData } = editor;\n\n  editor.insertData = data => {\n    const text = data.getData(\"text/plain\");\n    const { files } = data;\n\n    const image = files?.item(0);\n\n    if (image) {\n      const reader = new FileReader();\n      const [mime] = image.type.split(\"/\");\n      if (mime === \"image\") {\n        reader.addEventListener(\"load\", () => {\n          const url = reader.result;\n          insertImage(editor, url);\n        });\n\n        reader.readAsDataURL(image);\n        return;\n      }\n    }\n\n    if (isImageUrl(text)) {\n      insertImage(editor, text);\n    } else {\n      insertData(data);\n    }\n  };\n\n  return editor;\n};\n\nexport default withImages;\n","import { Editor, Element, Range, Transforms, Node } from \"slate\";\nimport { toggleOrWrapNode } from \"../utils/slate/transforms\";\n\nconst SHORTCUTS = {\n  \"*\": \"ul\",\n  \"-\": \"ul\",\n  \"+\": \"ul\",\n  \"1.\": \"ol\",\n  \">\": \"blockquote\",\n  \"#\": \"h1\",\n  \"##\": \"h2\",\n  \"###\": \"h3\",\n  \"####\": \"h4\",\n  \"#####\": \"h5\",\n  \"######\": \"h6\",\n  \"```\": \"pre\"\n};\n\nconst INLINE_SHORTCUTS = {\n  \"*\": \"italic\",\n  \"**\": \"bold\",\n  \"`\": \"code\",\n  \"~\": \"strikethrough\"\n};\n\n/* eslint-disable no-param-reassign */\nconst withShortcuts = editor => {\n  const { insertText } = editor;\n\n  // Insert block elements from .md shortcuts\n  editor.insertText = text => {\n    const { selection } = editor;\n    const { anchor } = selection;\n\n    if (text.endsWith(\" \") && selection && Range.isCollapsed(selection)) {\n      /* eslint-disable no-unused-vars */\n      const [block, path] =\n        Editor.above(editor, {\n          match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n        }) ?? [];\n      const start = Editor.start(editor, path);\n      const range = { anchor, focus: start };\n\n      const blockType =\n        SHORTCUTS[Editor.string(editor, range) + text.slice(0, -1)];\n\n      if (blockType) {\n        Transforms.select(editor, range);\n        if (!Range.isCollapsed(range)) {\n          Transforms.delete(editor);\n        }\n        return toggleOrWrapNode(editor, blockType);\n      }\n    }\n\n    // Insert inline elements (Slate \"marks\") from .md\n    let shortcut;\n    const shortCutChars = [\"*\", \"`\", \"~\"];\n\n    if (shortCutChars.includes(text)) {\n      const [textNode, textNodePath] = Editor.first(editor, anchor.path);\n      const beforeText = Node.string(textNode);\n\n      if (text === \"~\") {\n        shortcut = \"~\";\n      }\n      if (text === \"`\") {\n        shortcut = \"`\";\n      }\n      if (text === \"*\") {\n        if (beforeText.endsWith(\"*\")) shortcut = \"**\";\n        if (beforeText.indexOf(\"**\") === -1) shortcut = \"*\";\n      }\n\n      if (shortcut) {\n        const startIndex = beforeText.indexOf(shortcut);\n        const endIndex =\n          shortcut.length - 1 > 0 ? -(shortcut.length - 1) : undefined;\n        const target = beforeText.slice(startIndex + shortcut.length, endIndex);\n\n        if (shortcut === \"`\" && target === \"`\") return insertText(text);\n\n        if (startIndex >= 0 && target) {\n          const contentAnchor = { path: textNodePath, offset: startIndex };\n          const contentFocus = {\n            path: textNodePath,\n            offset: beforeText.length\n          };\n\n          return Editor.withoutNormalizing(editor, () => {\n            Transforms.select(editor, {\n              anchor: contentAnchor,\n              focus: contentFocus\n            });\n            Editor.addMark(editor, INLINE_SHORTCUTS[shortcut], true);\n            Transforms.delete(editor, {\n              at: contentAnchor,\n              distance: shortcut.length,\n              unit: \"character\"\n            });\n            Transforms.collapse(editor, { edge: \"end\" });\n            if (shortcut.length > 1) {\n              Transforms.delete(editor, {\n                distance: shortcut.length - 1,\n                unit: \"character\",\n                reverse: true\n              });\n            }\n          });\n        }\n      }\n    }\n\n    return insertText(text);\n  };\n\n  return editor;\n};\n\nexport default withShortcuts;\n","import { Editor as SlateEditor, Transforms, Node, Point } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\nimport { getListNode, getListItemNode } from \"../getters\";\nimport { setSelectionAtPoint } from \"../general\";\nimport { unwrapNode } from \"./shared\";\nimport { rteElements } from \"../../elements\";\nimport has from \"lodash/has\";\n\nconst getTextLocation = (editor, iterator, path, str = \"\") => {\n  const { value } = iterator.next();\n  if (!value) return { textContent: str, lastPath: path };\n  const [node, nodePath] = value;\n  if (node.type === \"list-sibling\")\n    return getTextLocation(editor, Node.children(editor, nodePath), nodePath);\n  const isTextNode = has(node, \"text\");\n  const nextStr = isTextNode ? node.text : str;\n  const nextPath = isTextNode ? nodePath : path;\n  return getTextLocation(editor, iterator, nextPath, nextStr);\n};\n\n// There must be a better way to achieve this with Range, but I haven't taken the time to figure it out. -LD\nconst getIndentSelectionLocation = (editor, path) => {\n  const textIterator = Node.children(editor, path);\n  const { textContent, lastPath } = getTextLocation(editor, textIterator, path);\n  return { path: lastPath, offset: textContent.length };\n};\n\nconst nestListItem = ({ editor, srcPath, destPath, node, type }) => {\n  const children = Array.isArray(node) ? node : [node];\n  Transforms.removeNodes(editor, { at: srcPath });\n  Transforms.insertNodes(editor, [{ type, children }], {\n    at: destPath\n  });\n};\n\nconst liftListItem = ({ editor, srcPath, destPath, unwrap = true }) => {\n  if (destPath) Transforms.moveNodes(editor, { at: srcPath, to: destPath });\n  if (unwrap) {\n    const targetPath = destPath ?? srcPath;\n    Transforms.unwrapNodes(editor, { at: targetPath });\n  }\n};\n\nconst handleInlineItemChildren = ({ editor, at, nodes }) => {\n  if (nodes)\n    return Transforms.insertNodes(\n      editor,\n      [{ type: \"list-sibling\", slateOnly: true, children: nodes }],\n      { at }\n    );\n  return Transforms.unwrapNodes(editor, {\n    at,\n    match: n => n.type === \"list-sibling\"\n  });\n};\n\nconst findListChild = iterator => {\n  const { value } = iterator.next();\n  if (!value) return [];\n  const [node, path] = value;\n  if (node.type === \"ul\" || node.type === \"ol\") return [node, path];\n  return findListChild(iterator);\n};\n\nexport const increaseIndent = editor => {\n  const [node, path] = getListItemNode(editor, editor.selection);\n  const [listNode, listNodePath] = getListNode(editor, path);\n\n  if (!node || !listNode) return;\n\n  const listType = listNode.type;\n  const index = [...path].pop();\n\n  const nodeStart = SlateEditor.start(editor, path);\n  const listStart = SlateEditor.start(editor, listNodePath);\n\n  // If this is the first element in a list, indent the entire (sub)list\n  if (Point.equals(nodeStart, listStart))\n    return SlateEditor.withoutNormalizing(editor, () => {\n      nestListItem({\n        editor,\n        srcPath: listNodePath,\n        destPath: listNodePath,\n        node: listNode,\n        type: listType\n      });\n      const { path: selectionPath, offset } = getIndentSelectionLocation(\n        editor,\n        [...listNodePath, 0, 0]\n      );\n      setSelectionAtPoint(editor, selectionPath, offset);\n    });\n\n  const prevItemPath = [...path.slice(0, -1), index - 1];\n  const [prevItem] = SlateEditor.node(editor, prevItemPath);\n\n  if (!prevItem) return;\n\n  const iterator = Node.children(editor, prevItemPath);\n  const [subListNode, subListPath] = findListChild(iterator);\n\n  if (subListNode) {\n    return Transforms.moveNodes(editor, {\n      at: path,\n      to: [...subListPath, subListNode.children.length]\n    });\n  }\n\n  SlateEditor.withoutNormalizing(editor, () => {\n    if (SlateEditor.hasBlocks(editor, prevItem)) {\n      const destPath = [...prevItemPath, prevItem.children.length];\n      nestListItem({\n        editor,\n        srcPath: path,\n        destPath,\n        node,\n        type: listType\n      });\n      const { path: selectionPath, offset } = getIndentSelectionLocation(\n        editor,\n        [...destPath, 0]\n      );\n      setSelectionAtPoint(editor, selectionPath, offset);\n      return;\n    }\n\n    handleInlineItemChildren({\n      editor,\n      at: [...prevItemPath, 0],\n      nodes: prevItem.children\n    });\n    const destPath = [...prevItemPath, 1];\n    nestListItem({\n      editor,\n      srcPath: path,\n      destPath,\n      node,\n      type: listType\n    });\n    const { path: selectionPath, offset } = getIndentSelectionLocation(editor, [\n      ...destPath,\n      0\n    ]);\n    setSelectionAtPoint(editor, selectionPath, offset);\n  });\n};\n\nexport const decreaseIndent = ({ editor, canUnwrapRoot }) => {\n  const [node, path] = getListItemNode(editor, editor.selection);\n  const [parentLi, parentPath] = getListItemNode(editor, path);\n  const [listNode, listNodePath] = getListNode(editor, path);\n  const listParent = Node.parent(editor, listNodePath);\n  const isWrappedList = listParent?.type === \"ul\" || listParent?.type === \"ol\";\n\n  if (!node) return;\n\n  if ((!listNode || !isWrappedList) && !parentLi) {\n    const format = rteElements.includes(listParent?.type)\n      ? listParent.type\n      : \"p\";\n\n    if (canUnwrapRoot) {\n      Transforms.setNodes(editor, { type: format }, { at: path });\n      return unwrapNode({ editor, format, path });\n    }\n    return null;\n  }\n\n  const nodeStart = SlateEditor.start(editor, path);\n  const listStart = SlateEditor.start(editor, listNodePath);\n\n  // If this is the first element in a list, unindent the entire (sub)list\n  if (Point.equals(nodeStart, listStart))\n    return SlateEditor.withoutNormalizing(editor, () => {\n      if (isWrappedList) {\n        return liftListItem({ editor, srcPath: listNodePath });\n      }\n      const destIndex = [...parentPath].pop() + 1;\n      const destPath = [...parentPath.slice(0, -1), destIndex];\n      liftListItem({ editor, srcPath: listNodePath, destPath });\n      handleInlineItemChildren({ editor, at: [...destPath.slice(0, -1), 0] });\n    });\n\n  if (!parentLi) return;\n\n  SlateEditor.withoutNormalizing(editor, () => {\n    const destIndex = [...parentPath].pop() + 1;\n    const destPath = [...parentPath.slice(0, -1), destIndex];\n    liftListItem({ editor, srcPath: path, destPath, unwrap: false });\n  });\n};\n","import { Editor, Range, Transforms, Element, Point, Node } from \"slate\";\nimport { rteElements, nestableElements } from \"../utils/elements\";\nimport { decreaseIndent } from \"../utils/slate/transforms/listIndents\";\nimport { getListItemNode } from \"../utils/slate/getters\";\n\n// The plugins here provide sane defaults for dealing with enter/delete given that we have nested html structure, in particular nested blocks, which isn't accounted for in the default slate implementation.\n\n/* eslint-disable no-param-reassign */\nconst withHtmlAwareBreaks = editor => {\n  const { insertBreak, deleteBackward } = editor;\n\n  editor.insertBreak = () => {\n    const { selection } = editor;\n    const isCollapsed = selection && Range.isCollapsed(selection);\n\n    // If the selection is a range, delete the content; this is default Slate behavior\n    if (!isCollapsed) {\n      Transforms.delete(editor);\n    }\n\n    /* eslint-disable no-unused-vars */\n    // Grab the node where the user hit enter\n    const [node, nodePath] = Editor.above(editor, selection);\n    // Grab the nearest block node to determine what to insert\n    const [block, blockPath] = Editor.above(editor, {\n      at: selection,\n      match: n => Editor.isBlock(editor, n) && !n.slateOnly\n    });\n    // Remove all attributes other than the type/tag and marks, so we don't copy id, classes, anything that can't be updated in the RTE\n    const {\n      children,\n      htmlAttrs,\n      slateOnly,\n      inline,\n      nodeName,\n      srcdoc,\n      htmlChildren,\n      ...next\n    } = block;\n    // Insert a paragraph if this node type isn't editable in the RTE; handle unwrapping the list item if we're on an empty li\n    if (\n      !rteElements.includes(next.type) &&\n      !nestableElements.includes(next.type)\n    )\n      next.type = \"p\";\n    if (\n      next.type === \"a\" ||\n      next.type === \"img\" ||\n      next.type === \"iframe\" ||\n      next.type === \"video\"\n    )\n      next.type = \"p\";\n    if (next.type === \"li\") {\n      const liIsEmpty = Editor.isEmpty(editor, block);\n      if (isCollapsed && liIsEmpty)\n        return decreaseIndent({ editor, canUnwrapRoot: true });\n      // Since the new element we're inserting is an element in an existing list, we'll keep the classname around in case indents are handled with classes\n      next.htmlAttrs = htmlAttrs?.class ? { class: htmlAttrs?.class } : {};\n    }\n\n    try {\n      Editor.withoutNormalizing(editor, () => {\n        Transforms.insertNodes(\n          editor,\n          { ...next, children: [{ text: \"\" }] },\n          { at: selection, select: true }\n        );\n      });\n    } catch (e) {\n      insertBreak();\n    }\n  };\n\n  // Check for nested empty inlines, again such as <p><span>my text</span></p>, and ensure that they are removed when all text content is deleted\n  const removeEmptyInline = (node, path) => {\n    const { selection } = editor;\n\n    const start = Editor.start(editor, path);\n    const textContent = Node.string(node);\n\n    // Using <= 1 rather than === 0 here is a choice; the result is that the inner span is removed when all its text content is, which is before the outer block wrapper, usually a paragraph, is deleted. This has the effect of cleaning up styles and other attributes, in case the user types new text in the pargraph node instead of deleting it. But as with all these choices, of course, the user could have wanted to keep those span styles around for the new text.\n    if (Point.isBefore(start, selection.anchor) && textContent.length <= 1) {\n      Transforms.unwrapNodes(editor, {\n        at: path,\n        match: n => Editor.isInline(editor, n)\n      });\n\n      const [inline, inlinePath] =\n        Editor.above(editor, {\n          match: n => n.type && Editor.isInline(editor, n)\n        }) ?? [];\n\n      if (inline) return removeEmptyInline(inline, inlinePath);\n    }\n  };\n\n  // If the parent block exists only for Slate normalization, remove it too.\n  const maybeUnwrapSlateOnlyNode = (node, path) => {\n    const { selection } = editor;\n    const start = Editor.start(editor, path);\n\n    if (\n      !Editor.isEditor(node) &&\n      node.slateOnly &&\n      Point.equals(selection.anchor, start)\n    ) {\n      Transforms.unwrapNodes(editor, { at: path, match: n => n.slateOnly });\n    }\n  };\n\n  editor.deleteBackward = (...args) => {\n    const { selection } = editor;\n\n    if (selection && Range.isCollapsed(selection)) {\n      const [li] = getListItemNode(editor, editor.selection);\n      if (li) {\n        const liIsEmpty = Editor.isEmpty(editor, li);\n        if (liIsEmpty) return decreaseIndent({ editor, canUnwrapRoot: true });\n      }\n\n      const [inline, inlinePath] =\n        Editor.above(editor, {\n          match: n => n.type && Editor.isInline(editor, n)\n        }) ?? [];\n\n      if (inline) {\n        removeEmptyInline(inline, inlinePath);\n      }\n\n      const [nearestBlock, path] =\n        Editor.above(editor, {\n          match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n        }) ?? [];\n\n      maybeUnwrapSlateOnlyNode(nearestBlock, path);\n\n      const [blockToTransform, transformPath] = nearestBlock.slateOnly\n        ? Editor.above(editor, {\n            match: n => Element.isElement(n) && Editor.isBlock(editor, n)\n          })\n        : [nearestBlock, path];\n\n      if (blockToTransform) {\n        const start = Editor.start(editor, transformPath);\n\n        if (\n          !Editor.isEditor(blockToTransform) &&\n          Element.isElement(blockToTransform) &&\n          blockToTransform.type !== \"p\" &&\n          Point.equals(selection.anchor, start)\n        ) {\n          // It's an RTE default / best practice to replace non-paragraph block nodes with a paragraph rather than removing them from the tree. This prevents other nodes from colliding in unwanted ways, such as when another block ends up in a table.\n          Transforms.setNodes(\n            editor,\n            { type: \"p\" },\n            { at: transformPath, select: true }\n          );\n\n          if (blockToTransform.type === \"li\") {\n            Transforms.unwrapNodes(editor, {\n              match: n =>\n                !Editor.isEditor(n) &&\n                Element.isElement(n) &&\n                (n.type === \"ul\" || n.type === \"ol\"),\n              split: true\n            });\n          }\n          return;\n        }\n      }\n    }\n    deleteBackward(...args);\n  };\n\n  return editor;\n};\n\nexport default withHtmlAwareBreaks;\n","import withVoids from \"./withVoids\";\nimport withInlines from \"./withInlines\";\nimport withImages from \"./withImages\";\nimport withShortcuts from \"./withShortcuts\";\nimport withHtmlAwareBreaks from \"./withHtmlAwareBreaks\";\n\nconst withPlugins = editor =>\n  withInlines(\n    withHtmlAwareBreaks(withShortcuts(withVoids(withImages(editor))))\n  );\n\nexport default withPlugins;\n\nexport { withVoids, withInlines, withImages, withShortcuts };\n","import { createContext, useContext } from \"react\";\n\nexport const HtmlBreadcrumbsContext = createContext([]);\n\nexport const useHtmlBreadcrumbs = () => {\n  const context = useContext(HtmlBreadcrumbsContext);\n\n  return context;\n};\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultFocusStyle,\n  formLabelPrimary,\n  respond\n} from \"theme/styles/mixins\";\nimport { rteElements, inlineNodes, markElements } from \"../../utils/elements\";\n\nexport const ButtonGroup = styled.div`\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  position: absolute;\n  top: 5px;\n  right: auto;\n  left: 5px;\n  color: var(--color-accent-primary);\n\n  ${({ $visible }) => $visible && `display: flex;`}\n  ${respond(`right: -60px; left: auto; top: -5px;`, 65)}\n`;\n\nexport const InteriorButton = styled.button`\n  ${buttonUnstyled}\n  width: 34px;\n  height: 34px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: var(--color-neutral-text-light);\n  background: var(--color-base-neutral90);\n  border-radius: 4px;\n  border: 1px solid var(--color);\n\n  &:hover {\n    color: ${({ $color }) =>\n      $color === \"red\"\n        ? `var(--color-notification-error-light)`\n        : `var(--color-accent-primary)`};\n    border-color: ${({ $color }) =>\n      $color === \"red\"\n        ? `var(--color-notification-error-light)`\n        : `var(--color-accent-primary)`};\n  }\n`;\n\nexport const Content = styled.img`\n  display: inline;\n  ${({ $selected }) => $selected && `${defaultFocusStyle} outline-offset: 1px;`}\n`;\nexport const ImageWrapper = styled.span`\n  display: inline-block;\n  width: max-content;\n  max-width: 100%;\n  position: relative;\n\n  &.responsive-iframe {\n    display: block;\n    width: 100%;\n    overflow: visible;\n  }\n`;\n\nexport const VoidOuter = styled.div`\n  & + & {\n    margin-block-start: 20px;\n  }\n`;\n\nexport const VoidInner = styled.div`\n  display: block;\n  margin-inline-start: -5%;\n  width: 110%;\n  padding-inline: 8%;\n  padding-block-end: 20px;\n  padding-block-start: 20px;\n  position: relative;\n  background-color: var(--drawer-bg-color);\n  box-shadow: 3px 3px 10px var(--color-base-neutral100);\n  border-radius: 4px;\n  border: 0;\n\n  .scheme-light & {\n    background-color: var(--color-base-neutral20);\n    box-shadow: 3px 3px 10px var(--color-base-neutral30);\n  }\n\n  ${({ $selected }) =>\n    $selected &&\n    `outline: solid 2px var(--disabled-control-color); outline-offset: 1px;`}\n`;\n\nexport const VoidLabel = styled.span`\n  ${formLabelPrimary}\n  font-size: 14px;\n  color: var(--color-base-yellow20);\n  display: inline-flex;\n  gap: 6px;\n  align-items: center;\n\n  .scheme-light & {\n    color: var(--color-base-violet75);\n  }\n\n  > svg {\n    margin-top: 1px;\n  }\n`;\n\nexport const HrOuter = styled.span`\n  display: inline-flex;\n  width: 100%;\n`;\n\nexport const HrInner = styled.span`\n  flex-grow: 1;\n  margin: 0;\n  width: 100%;\n`;\n\nexport const COLOR_MAP = {\n  green: {\n    light: \"var(--color-interaction-dark)\",\n    dark: \"var(--color-accent-primary)\"\n  },\n  blue: { light: \"var(--color-base-blue75)\", dark: \"var(--color-base-blue45)\" },\n  violet: {\n    dark: \"var(--color-base-violet45)\",\n    light: \"var(--color-base-violet75)\"\n  }\n};\n\nexport const ElementLabel = styled.span`\n  position: absolute;\n  display: inline-block;\n  left: -8px;\n  top: -26px;\n  font-size: 14px;\n  line-height: 1;\n  padding: 2px;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n  font-family: var(--font-family-heading);\n  font-weight: var(--font-weight-regular);\n  border: 0px solid;\n  border-bottom: 0;\n  white-space: nowrap;\n  text-indent: 0;\n  z-index: 10;\n  padding-inline: 4px;\n  padding-block-start: 2px;\n  padding-block-end: 4px;\n  text-decoration: none;\n  text-transform: none;\n  font-variant: none;\n\n  .scheme-dark & {\n    background: ${({ $color }) => COLOR_MAP[$color].dark};\n    color: var(--drawer-bg-color);\n  }\n\n  .scheme-light & {\n    background: ${({ $color }) => COLOR_MAP[$color].light};\n    color: var(--background-color);\n  }\n\n  &:hover {\n    z-index: 20;\n  }\n`;\n\nexport const EditableElementLabel = styled(ElementLabel)`\n  top: -35px;\n  padding-block-start: 4px;\n  display: flex;\n  align-items: center;\n\n  > span {\n    line-height: 1;\n  }\n`;\n\nexport const ClassInput = styled.input`\n  appearance: none;\n  background: rgba(255, 255, 255, 0.75);\n  border: none;\n  padding: 0;\n  height: 18px;\n  margin-inline-start: 3px;\n  width: 150px;\n\n  .scheme-light & {\n    background: rgba(0, 0, 0, 0.5);\n  }\n\n  &:focus-visible {\n    outline: 1px solid;\n  }\n`;\n\nexport const TagButtons = styled.div`\n  display: flex;\n  gap: 4px;\n  margin-inline-start: 8px;\n  margin-inline-end: 4px;\n`;\n\nexport const DeleteButton = styled.button`\n  ${buttonUnstyled}\n  display: flex;\n  align-items: center;\n  border-radius: 2px;\n  padding: 2px;\n\n  &:hover,\n  &:focus-visible {\n    color: var(--error-color);\n    background: var(--background-color);\n  }\n\n  &:disabled {\n    cursor: default;\n\n    &:hover {\n      background: none;\n      color: inherit;\n    }\n  }\n`;\n\nexport const LiftButton = styled(DeleteButton)`\n  &:hover,\n  &:focus-visible {\n    color: var(--hover-color);\n    background: var(--background-color);\n  }\n`;\n\nexport const getHtmlOutlineStyles = (nodeName, darkMode) => {\n  /* eslint-disable no-nested-ternary */\n  const color = rteElements.includes(nodeName)\n    ? \"green\"\n    : inlineNodes.includes(nodeName) || markElements.includes(nodeName)\n    ? \"blue\"\n    : \"violet\";\n\n  return {\n    outline: \"2px dotted\",\n    outlineColor: darkMode ? COLOR_MAP[color].dark : COLOR_MAP[color].light,\n    borderRadius: \"2px\",\n    borderTopLeftRadius: 0,\n    outlineOffset: \"6px\",\n    position: \"relative\"\n  };\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { rteElements, inlineNodes, markElements } from \"../../utils/elements\";\nimport { formatNodeLabel } from \"../../utils/slate/general\";\nimport { removeNode } from \"../../utils/slate/transforms/removeNode\";\nimport { unwrapNode } from \"../../utils/slate/transforms\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport debounce from \"lodash/debounce\";\nimport { useSlateStatic, ReactEditor } from \"slate-react\";\nimport { Transforms, Editor } from \"slate\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport * as Styled from \"./styles\";\n\nexport default function HtmlLabel({ visible, element }) {\n  const editor = useSlateStatic();\n  const inputRef = useRef(null);\n\n  const { t } = useTranslation();\n\n  const { editingCrumb: editing } = useHtmlBreadcrumbs();\n\n  useEffect(() => {\n    if (inputRef.current && editing) inputRef.current.focus();\n  }, [editing]);\n\n  if (!visible) return null;\n\n  /* eslint-disable no-nested-ternary */\n  const color = rteElements.includes(element.type)\n    ? \"green\"\n    : inlineNodes.includes(element.type) || markElements.includes(element.type)\n    ? \"blue\"\n    : \"violet\";\n\n  const path = !markElements.includes(element.type)\n    ? ReactEditor.findPath(editor, element)\n    : [];\n\n  const disableDelete =\n    path.length === 1 ||\n    (element.type === \"li\" && !Editor.isEmpty(editor, element));\n\n  const disableLift = path.length <= 2 || element.type === \"li\";\n\n  const updateClassName = e => {\n    e.persist();\n    const doUpdate = debounce(() => {\n      Transforms.setNodes(\n        editor,\n        {\n          ...element,\n          htmlAttrs: {\n            ...element.htmlAttrs,\n            class: e.target.value.replaceAll(\".\", \" \").trim()\n          }\n        },\n        { at: path, mode: \"highest\" }\n      );\n    }, 1000);\n    doUpdate(e);\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    removeNode(editor, path);\n  };\n\n  const tagAndId = element.htmlAttrs?.id\n    ? `${element.type}#${element.htmlAttrs.id}`\n    : element.type;\n  const formattedClass = element.htmlAttrs?.class?.trim().replaceAll(\" \", \".\");\n\n  return editing ? (\n    <Styled.EditableElementLabel contentEditable={false} $color={color}>\n      <span>{tagAndId}.</span>\n      <Styled.ClassInput\n        ref={inputRef}\n        defaultValue={formattedClass}\n        onChange={e => updateClassName(e)}\n      />\n      <Styled.TagButtons>\n        <Styled.LiftButton\n          onClick={e => {\n            e.preventDefault();\n            unwrapNode({ editor, format: element.type, path });\n          }}\n          aria-label={t(\"editor.controls.labels.lift\")}\n          disabled={disableLift}\n        >\n          <IconComposer icon=\"arrowUp16\" size={16} />\n        </Styled.LiftButton>\n        <Styled.DeleteButton\n          onClick={handleDelete}\n          aria-label={t(\"actions.delete\")}\n          disabled={disableDelete}\n        >\n          <IconComposer icon=\"delete24\" size={16} />\n        </Styled.DeleteButton>\n      </Styled.TagButtons>\n    </Styled.EditableElementLabel>\n  ) : (\n    <Styled.ElementLabel $color={color}>\n      {formatNodeLabel(element)}\n    </Styled.ElementLabel>\n  );\n}\n","import React from \"react\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\n\nexport default function SlateLeaf({ attributes, children, leaf, darkMode }) {\n  const { selectedCrumb } = useHtmlBreadcrumbs();\n  const showHtml = selectedCrumb === \"all\";\n\n  let leafChildren = children;\n\n  if (leaf.bold) {\n    leafChildren = (\n      <strong\n        style={showHtml ? getHtmlOutlineStyles(\"strong\", darkMode) : undefined}\n      >\n        {leafChildren}\n        <HtmlLabel element={{ type: \"strong\" }} visible={showHtml} />\n      </strong>\n    );\n  }\n\n  if (leaf.italic) {\n    leafChildren = (\n      <em style={showHtml ? getHtmlOutlineStyles(\"em\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"em\" }} visible={showHtml} />\n      </em>\n    );\n  }\n\n  if (leaf.underline) {\n    leafChildren = (\n      <u style={showHtml ? getHtmlOutlineStyles(\"u\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"u\" }} visible={showHtml} />\n      </u>\n    );\n  }\n\n  if (leaf.strikethrough) {\n    leafChildren = (\n      <s style={showHtml ? getHtmlOutlineStyles(\"s\", darkMode) : undefined}>\n        {leafChildren}\n        <HtmlLabel element={{ type: \"s\" }} visible={showHtml} />\n      </s>\n    );\n  }\n\n  if (leaf.code) {\n    leafChildren = (\n      <code\n        style={showHtml ? getHtmlOutlineStyles(\"code\", darkMode) : undefined}\n      >\n        {leafChildren}\n        <HtmlLabel element={{ type: \"code\" }} visible={showHtml} />\n      </code>\n    );\n  }\n\n  return <span {...attributes}>{leafChildren}</span>;\n}\n","import { wrapLink, unwrapLink } from \"../utils/slate/transforms\";\nimport { getCommonBlock, isLinkActive } from \"../utils/slate/getters\";\nimport { isValidUrl } from \"../utils/helpers\";\nimport { Transforms, Range, Node } from \"slate\";\n\nexport const handleLinkHotkey = editor => {\n  if (isLinkActive(editor)) return unwrapLink(editor);\n\n  const { selection } = editor;\n  const isCollapsed = selection && Range.isCollapsed(selection);\n\n  // If the selection is a range of text, check to see if that range is a url; if so, turn it into a link.\n  if (!isCollapsed) {\n    const [block] = getCommonBlock(editor);\n    const textContent = Node.string(block);\n    if (isValidUrl(textContent)) return wrapLink(editor, textContent);\n  }\n\n  // Otherwise, open the link insert modal\n  const button = document.getElementsByName(\"link-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const handleImageHotkey = e => {\n  if (e) e.preventDefault();\n  const button = document.getElementsByName(\"img-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const handleIframeHotkey = e => {\n  if (e) e.preventDefault();\n  const button = document.getElementsByName(\"iframe-modal-trigger\");\n  if (button[0]) button[0].click();\n};\n\nexport const insertSoftBreak = editor => {\n  Transforms.insertText(editor, \"\\n\");\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Utility from \"global/components/utility\";\nimport {\n  useSlateStatic,\n  ReactEditor,\n  useFocused,\n  useSelected\n} from \"slate-react\";\nimport { Transforms, Editor } from \"slate\";\nimport { handleImageHotkey, handleIframeHotkey } from \"../../hotkeys/handlers\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport * as Styled from \"./styles\";\n\nexport default function ImageRenderer({\n  element,\n  children,\n  attributes,\n  as,\n  showHtml,\n  darkMode\n}) {\n  const editor = useSlateStatic();\n  const focused = useFocused();\n  const selected = useSelected();\n  const path = ReactEditor.findPath(editor, element);\n\n  const onRemove = e => {\n    e.preventDefault();\n\n    return Editor.withoutNormalizing(editor, () => {\n      Transforms.removeNodes(editor, { at: path });\n      Transforms.insertNodes(\n        editor,\n        { type: \"p\", children: [{ text: \"\" }] },\n        { select: true }\n      );\n    });\n  };\n\n  const wrapperClassName = classNames({\n    \"responsive-iframe\": as === \"iframe\" || as === \"video\"\n  });\n\n  const { htmlAttrs } = element ?? {};\n  const className = htmlAttrs?.class ?? undefined;\n  const epubType = htmlAttrs?.[\"data-epub-type\"] || undefined;\n\n  return (\n    <div\n      className={htmlAttrs?.inline ? \"inline-block\" : undefined}\n      {...attributes}\n      style={showHtml ? getHtmlOutlineStyles(\"a\", darkMode) : undefined}\n    >\n      {children}\n      <span contentEditable={false}>\n        <Styled.ImageWrapper\n          className={wrapperClassName}\n          data-epub-type={epubType}\n        >\n          <Styled.Content\n            as={as ?? \"img\"}\n            src={htmlAttrs.src}\n            alt={!as ? htmlAttrs.alt : undefined}\n            title={as ? htmlAttrs.title : undefined}\n            controls={as === \"video\" ? true : undefined}\n            $selected={selected && focused}\n            className={className}\n            width={htmlAttrs?.width}\n            height={htmlAttrs?.height}\n          />\n          <Styled.ButtonGroup $visible={selected}>\n            <Styled.InteriorButton\n              onClick={\n                as === \"iframe\" || as === \"video\"\n                  ? handleIframeHotkey\n                  : handleImageHotkey\n              }\n            >\n              <Utility.IconComposer icon=\"annotate24\" size={24} />\n            </Styled.InteriorButton>\n            <Styled.InteriorButton $color=\"red\" onClick={onRemove}>\n              <Utility.IconComposer icon=\"delete24\" size={24} />\n            </Styled.InteriorButton>\n          </Styled.ButtonGroup>\n        </Styled.ImageWrapper>\n      </span>\n      <HtmlLabel element={element} visible={showHtml} />\n    </div>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport { ReactEditor, useFocused, useSelected } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport * as Styled from \"./styles\";\n\nexport default function VoidRenderer({\n  element,\n  children,\n  attributes,\n  theme,\n  darkMode,\n  showHtml\n}) {\n  const focused = useFocused();\n  const selected = useSelected();\n\n  const { srcdoc } = element ?? {};\n\n  const ref = useRef();\n\n  useEffect(() => {\n    if (ref.current && !ref.current.shadowRoot) {\n      const shadow = ref.current.attachShadow({ mode: \"open\" });\n      const container = document.createElement(\"div\");\n      const containerClass = `manifold-text-section ${\n        darkMode ? \"scheme-dark\" : \"scheme-light\"\n      }`;\n      container.setAttribute(\"class\", containerClass);\n      const style = document.createElement(\"style\");\n      style.textContent = theme;\n      shadow.appendChild(style);\n      container.innerHTML = srcdoc;\n      shadow.appendChild(container);\n    }\n    if (ref.current?.shadowRoot) {\n      const shadow = ref.current.shadowRoot;\n      const container = shadow.childNodes[1];\n      const containerClass = `manifold-text-section ${\n        darkMode ? \"scheme-dark\" : \"scheme-light\"\n      }`;\n      container.setAttribute(\"class\", containerClass);\n    }\n  }, [srcdoc, theme, darkMode]);\n\n  return (\n    <Styled.VoidOuter {...attributes}>\n      {children}\n      <Styled.VoidInner\n        contentEditable={false}\n        $selected={selected && focused}\n        style={showHtml ? getHtmlOutlineStyles(\"div\", darkMode) : undefined}\n      >\n        <Styled.VoidLabel>\n          <Utility.IconComposer\n            svgProps={{ style: { flexShrink: 0 } }}\n            icon=\"code24\"\n          />\n          <span>Preview only. Switch to HTML mode to edit this block:</span>\n        </Styled.VoidLabel>\n        <div ref={ref} />\n        <HtmlLabel element={element} visible={showHtml} />\n      </Styled.VoidInner>\n    </Styled.VoidOuter>\n  );\n}\n","import React from \"react\";\nimport Image from \"./Image\";\nimport Void from \"./Void\";\nimport HtmlLabel from \"./HtmlLabel\";\nimport {\n  rteElements,\n  renderedElements,\n  markElements,\n  nestableElements\n} from \"../../utils/elements\";\nimport classNames from \"classnames\";\nimport * as Styled from \"./styles\";\nimport { getHtmlOutlineStyles } from \"./styles\";\nimport { useSlateStatic, ReactEditor } from \"slate-react\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\n\nexport default function SlateElement({\n  attributes,\n  children,\n  element,\n  theme,\n  darkMode\n}) {\n  const className = element.htmlAttrs?.class || undefined;\n  const epubType = element.htmlAttrs?.[\"data-epub-type\"] || undefined;\n\n  const editor = useSlateStatic();\n  const { id } = ReactEditor.findKey(editor, element);\n  const { selectedCrumb } = useHtmlBreadcrumbs();\n  const showHtml =\n    (selectedCrumb === id || selectedCrumb === \"all\") && !element.slateOnly;\n\n  if (element.type === \"br\") {\n    return (\n      <p\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"p\", darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </p>\n    );\n  }\n  if (element.type === \"hr\") {\n    return (\n      <Styled.HrOuter contentEditable={false} {...attributes}>\n        {children}\n        <Styled.HrInner>\n          <hr\n            className={className}\n            data-epub-type={epubType}\n            style={showHtml ? getHtmlOutlineStyles(\"hr\", darkMode) : undefined}\n          />\n        </Styled.HrInner>\n        <HtmlLabel element={element} visible={showHtml} />\n      </Styled.HrOuter>\n    );\n  }\n  if (element.type === \"void\") {\n    return (\n      <Void\n        attributes={attributes}\n        element={element}\n        theme={theme}\n        darkMode={darkMode}\n        showHtml={showHtml}\n      >\n        {children}\n      </Void>\n    );\n  }\n  if (element.type === \"img\") {\n    return (\n      <Image\n        attributes={attributes}\n        element={element}\n        showHtml={showHtml}\n        darkMode={darkMode}\n      >\n        {children}\n      </Image>\n    );\n  }\n  if (element.type === \"iframe\" || element.type === \"video\") {\n    return (\n      <Image\n        as={element.type}\n        attributes={attributes}\n        element={element}\n        showHtml={showHtml}\n        darkMode={darkMode}\n      >\n        {children}\n      </Image>\n    );\n  }\n  if (element.type === \"a\") {\n    return (\n      <a\n        className={className}\n        data-epub-type={epubType}\n        href={element.htmlAttrs?.href}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"a\", darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </a>\n    );\n  }\n  if (element.type === \"pre\") {\n    return (\n      <pre\n        className={className}\n        data-epub-type={epubType}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(\"pre\", darkMode) : undefined}\n      >\n        <code>{children}</code>\n        <HtmlLabel element={element} visible={showHtml} />\n      </pre>\n    );\n  }\n  if (element.type === \"div\" && element.inline) {\n    return (\n      <div\n        className={classNames(\"inline-block\", className)}\n        data-epub-type={epubType}\n        {...attributes}\n      >\n        {children}\n      </div>\n    );\n  }\n  if (\n    rteElements.includes(element.type) ||\n    renderedElements.includes(element.type) ||\n    markElements.includes(element.type) ||\n    nestableElements.includes(element.type) ||\n    element.type === \"span\"\n  ) {\n    const Tag = element.type === \"list-sibling\" ? \"span\" : element.type;\n    return (\n      <Tag\n        className={className}\n        data-epub-type={epubType}\n        {...attributes}\n        style={showHtml ? getHtmlOutlineStyles(Tag, darkMode) : undefined}\n      >\n        {children}\n        <HtmlLabel element={element} visible={showHtml} />\n      </Tag>\n    );\n  }\n\n  return null;\n}\n","import {\n  increaseIndent,\n  decreaseIndent\n} from \"../utils/slate/transforms/listIndents\";\nimport { toggleMark, toggleOrWrapNode } from \"../utils/slate/transforms\";\nimport { getListItemNode } from \"../utils/slate/getters\";\nimport {\n  handleLinkHotkey,\n  handleImageHotkey,\n  handleIframeHotkey,\n  insertSoftBreak\n} from \"./handlers\";\n\nexport const captureHotKeys = (e, editor) => {\n  if (e.key === \"Enter\") {\n    if (e.shiftKey) {\n      e.preventDefault();\n      return insertSoftBreak(editor);\n    }\n    return;\n  }\n\n  if (e.key === \"Tab\") {\n    // Check that the selection is a list item before preventing default\n    const [node] = getListItemNode(editor, editor.selection);\n    if (!node) return;\n\n    e.preventDefault();\n\n    if (e.shiftKey) {\n      return decreaseIndent({ editor });\n    }\n    return increaseIndent(editor);\n  }\n\n  if (!e.metaKey && !e.ctrlKey) return;\n\n  /* eslint-disable default-case */\n  // Prevent default only if we match a case so we don't block undo, paste, etc.\n  if ((e.metaKey && e.altKey) || (e.ctrlKey && e.shiftKey)) {\n    switch (e.keyCode) {\n      case 48:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"p\");\n      case 49:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h1\");\n      case 50:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h2\");\n      case 51:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h3\");\n      case 52:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h4\");\n      case 53:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h5\");\n      case 54:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"h6\");\n      case 55:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"ol\");\n      case 56:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"ul\");\n      case 57:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"blockquote\");\n      case 69:\n        e.preventDefault();\n        return toggleOrWrapNode(editor, \"pre\");\n    }\n  }\n\n  if (e.shiftKey && e.key === \"s\") {\n    e.preventDefault();\n    return toggleMark(editor, \"strikethrough\");\n  }\n\n  switch (e.key) {\n    case \"b\":\n      e.preventDefault();\n      return toggleMark(editor, \"bold\");\n    case \"i\":\n      e.preventDefault();\n      return toggleMark(editor, \"italic\");\n    case \"u\":\n      e.preventDefault();\n      return toggleMark(editor, \"underline\");\n    case \"e\":\n      e.preventDefault();\n      return toggleMark(editor, \"code\");\n    case \"k\":\n      e.preventDefault();\n      return handleLinkHotkey(editor);\n    case \"g\":\n      e.preventDefault();\n      return handleImageHotkey();\n    case \"m\":\n      e.preventDefault();\n      return handleIframeHotkey();\n  }\n};\n","import React from \"react\";\nimport Editor from \"react-ace\";\nimport \"brace/mode/css\";\nimport \"brace/mode/javascript\";\nimport \"brace/mode/html\";\nimport \"../../CodeArea/darkTheme\";\nimport \"../../CodeArea/lightTheme\";\n\nexport default function HtmlEditor(props) {\n  const { aceRef, nextRef, prevRef, darkMode, ...rest } = props;\n  return (\n    <Editor\n      ref={aceRef}\n      theme={darkMode ? \"idle_fingers\" : \"kuroir\"}\n      editorProps={{ $blockScrolling: true }}\n      width=\"100%\"\n      minLines={40}\n      maxLines={10000}\n      wrapEnabled\n      showPrintMargin={false}\n      onLoad={editor => {\n        editor.once(\"change\", () => {\n          editor.session.getUndoManager().reset();\n        });\n        editor.commands.removeCommand(\"find\");\n        editor.renderer.setPadding(24, 24);\n        editor.renderer.setScrollMargin(24, 24);\n        const input = editor.textInput.getElement();\n        input.addEventListener(\"keydown\", e => {\n          if (e.key === \"ArrowDown\") {\n            const scroller = document.querySelector(\".top.pad-xl\");\n            scroller.scrollBy(0, 16);\n          }\n          if (e.key === \"ArrowUp\") {\n            const scroller = document.querySelector(\".top.pad-xl\");\n            scroller.scrollBy(0, -16);\n          }\n        });\n      }}\n      onFocus={() => {\n        if (aceRef.current) aceRef.current.editor.gotoLine(0, 0, true);\n      }}\n      editorOptions={{ enableAutoIndent: true }}\n      commands={[\n        {\n          name: \"tab\",\n          bindKey: { win: \"Tab\", mac: \"Tab\" },\n          exec: () => {\n            nextRef.current.focus();\n          }\n        },\n        {\n          name: \"shiftTab\",\n          bindKey: { win: \"Shift+Tab\", mac: \"Shift+Tab\" },\n          exec: () => {\n            prevRef.current.focus();\n          }\n        }\n      ]}\n      {...rest}\n    />\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { headingTertiary } from \"theme/styles/mixins\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  align-items: center;\n  padding: 0 4px 8px 4px;\n`;\n\nexport const Label = styled.span`\n  ${headingTertiary}\n  font-style: normal;\n  font-weight: 400;\n  font-size: 17px;\n  color: var(--input-color);\n`;\n\nexport const Header = styled.div`\n  padding-block-end: 6px;\n\n  span {\n    display: inline-block;\n  }\n\n  span + span {\n    margin-block-start: 12px;\n  }\n`;\n\nexport const Description = styled.span`\n  min-width: 175px;\n`;\n\nexport const HotKey = styled.div``;\n\nexport const HotKeyLabel = styled.span`\n  whitespace: nowrap;\n`;\n\nexport const TextPlaceholder = styled.span`\n  whitespace: nowrap;\n  font-style: normal;\n  display: inline-block;\n`;\n\nexport const Key = styled.span`\n  display: inline-flex;\n  flex-wrap: nowrap;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  padding-block-start: 6px;\n  padding-block-end: 10px;\n  padding-inline: 10px;\n  background-color: var(--background-color);\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-weight-semibold);\n  border-radius: 4px;\n  font-style: normal;\n  line-height: 1;\n`;\n\nexport const Keys = styled.div`\n  display: flex;\n  gap: 8px;\n  flex-wrap: no-wrap;\n  margin-block-start: 8px;\n  align-items: center;\n`;\n","import React, { Fragment } from \"react\";\nimport * as Styled from \"./styles\";\n\nexport default function TooltipContent({ label, description, hotkeys = [] }) {\n  return (\n    <Styled.Wrapper>\n      <Styled.Header>\n        <Styled.Label>{label}</Styled.Label>\n        {description && <Styled.Description>{description}</Styled.Description>}\n      </Styled.Header>\n      {hotkeys.map(hk => (\n        <Styled.HotKey key={hk.label}>\n          <Styled.HotKeyLabel>{hk.label}</Styled.HotKeyLabel>\n          <Styled.Keys>\n            {hk.keys.map((k, i) => (\n              /* eslint-disable react/no-array-index-key */\n              <Fragment key={`${k}_${i}`}>\n                <Styled.Key>{k}</Styled.Key>\n                {hk.inline && i === 0 && (\n                  <Styled.TextPlaceholder>[text]</Styled.TextPlaceholder>\n                )}\n              </Fragment>\n            ))}\n          </Styled.Keys>\n        </Styled.HotKey>\n      ))}\n    </Styled.Wrapper>\n  );\n}\n","export const hotkeys = {\n  p: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"0\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"0\"] }\n  ],\n  h1: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"1\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"1\"] },\n    { label: \"Markdown\", keys: [\"#\", \"Space\"] }\n  ],\n  h2: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"2\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"2\"] },\n    { label: \"Markdown\", keys: [\"##\", \"Space\"] }\n  ],\n  h3: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"3\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"3\"] },\n    { label: \"Markdown\", keys: [\"###\", \"Space\"] }\n  ],\n  h4: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"4\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"4\"] },\n    { label: \"Markdown\", keys: [\"####\", \"Space\"] }\n  ],\n  h5: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"5\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"5\"] },\n    { label: \"Markdown\", keys: [\"#####\", \"Space\"] }\n  ],\n  h6: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"6\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"6\"] },\n    { label: \"Markdown\", keys: [\"######\", \"Space\"] }\n  ],\n  ol: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"7\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"7\"] },\n    { label: \"Markdown\", keys: [\"1.\", \"Space\"] }\n  ],\n  ul: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"8\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"8\"] },\n    { label: \"Markdown\", keys: [\"-\", \"Space\"] }\n  ],\n  blockquote: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"9\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"9\"] },\n    { label: \"Markdown\", keys: [\">\", \"Space\"] }\n  ],\n  link: [\n    { label: \"Mac\", keys: [\"Cmd\", \"K\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"K\"] }\n  ],\n  pre: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Option\", \"E\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"E\"] },\n    { label: \"Markdown\", keys: [\"```\", \"Space\"] }\n  ],\n  italic: [\n    { label: \"Mac\", keys: [\"Cmd\", \"I\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"I\"] },\n    { label: \"Markdown\", keys: [\"*\", \"*\"], inline: true }\n  ],\n  strikethrough: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Shift\", \"S\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Shift\", \"S\"] },\n    { label: \"Markdown\", keys: [\"~\", \"~\"], inline: true }\n  ],\n  bold: [\n    { label: \"Mac\", keys: [\"Cmd\", \"B\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"B\"] },\n    { label: \"Markdown\", keys: [\"**\", \"**\"], inline: true }\n  ],\n  underline: [\n    { label: \"Mac\", keys: [\"Cmd\", \"U\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"U\"] }\n  ],\n  code: [\n    { label: \"Mac\", keys: [\"Cmd\", \"E\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"E\"] },\n    { label: \"Markdown\", keys: [\"`\", \"`\"], inline: true }\n  ],\n  undo: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Z\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Z\"] }\n  ],\n  redo: [\n    { label: \"Mac\", keys: [\"Cmd\", \"Shift\", \"Z\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"Y\"] }\n  ],\n  img: [\n    { label: \"Mac\", keys: [\"Cmd\", \"G\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"G\"] }\n  ],\n  iframe: [\n    { label: \"Mac\", keys: [\"Cmd\", \"M\"] },\n    { label: \"Windows\", keys: [\"Ctrl\", \"M\"] }\n  ]\n};\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultTransitionProps,\n  formLabelPrimary,\n  defaultFocusStyle\n} from \"theme/styles/mixins\";\nimport IconComposer from \"global/components/utility/IconComposer\";\n\nexport const Button = styled.button`\n  ${buttonUnstyled}\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n  width: 28px;\n  background-color: none;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps};\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-weight-semibold);\n  border-radius: 4px;\n  margin-inline-start: 3px;\n\n  &:hover {\n    background-color: var(--background-color);\n    color: inherit;\n  }\n\n  &[data-active=\"true\"] {\n    color: var(--drawer-bg-color);\n    background-color: var(--color-accent-primary);\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SelectTooltipWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nexport const TooltipIcon = styled.div`\n  position: relative;\n  width: max-content;\n  margin-block-start: -3px;\n  margin-inline-start: 5px;\n  cursor: pointer;\n`;\n\nexport const SelectWrapper = styled.div`\n  position: relative;\n  display: inline-block;\n`;\n\nexport const Select = styled.select`\n  ${buttonUnstyled}\n  font-family: var(--font-family-sans);\n  line-height: 22px;\n  font-size: 14px;\n  width: 120px;\n  height: 28px;\n  display: inline-block;\n  border-radius: 4px;\n  padding-block-start: 2px;\n  padding-block-end: 4px;\n  padding-inline-start: 8px;\n\n  .backend & {\n    color: var(--color);\n\n    &[data-active=\"true\"] {\n      color: var(--drawer-bg-color);\n      background-color: ${({ $color }) => $color};\n    }\n\n    &:hover {\n      background-color: var(--background-color);\n      color: var(--color);\n    }\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SpanButton = styled(Select)`\n  width: auto;\n  padding-inline: 8px;\n\n  .backend & {\n    &[data-active=\"true\"] {\n      color: var(--drawer-bg-color);\n      background-color: var(--color-base-blue45);\n    }\n\n    &:hover {\n      background-color: var(--background-color);\n      color: var(--color);\n    }\n  }\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n\nexport const SelectIcon = styled(IconComposer)`\n  position: absolute;\n  top: 25%;\n  right: 4px;\n  pointer-events: none;\n\n  select[data-active=\"true\"]:not(:hover) + & {\n    color: var(--drawer-bg-color);\n  }\n`;\n\nexport const StylesButton = styled.button`\n  ${buttonUnstyled}\n  ${formLabelPrimary}\n  padding-inline-start: 12px;\n  padding-inline-end: 16px;\n  padding-block: 6px;\n  background-color: var(--box-bg-color);\n  border-radius: 4px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-inline-start: auto;\n\n  svg {\n    margin-top: 3px;\n  }\n\n  &:hover {\n    background-color: var(--color-accent-primary);\n    color: var(--box-bg-color);\n  }\n`;\n","import React, { forwardRef } from \"react\";\nimport { Editor } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleOrWrapNode, removeNode } from \"../../../utils/slate/transforms\";\nimport {\n  isElementActive,\n  getNearestOfType\n} from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst BlockButton = ({ format, icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  const [active] = isElementActive(editor, format);\n\n  const onClick = e => {\n    e.preventDefault();\n\n    if (!selection) return;\n\n    if (active) {\n      const { path } = getNearestOfType(editor, [format]);\n\n      if (format === \"pre\") Editor.removeMark(editor, \"code\", true);\n\n      return removeNode(editor, path);\n    }\n\n    toggleOrWrapNode(editor, format);\n  };\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${format}`)}\n          hotkeys={hotkeys[format]}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.format\", { format })}\n        data-active={active}\n        onClick={onClick}\n        tabIndex={-1}\n      >\n        {icon && <Utility.IconComposer icon={icon} size={size} />}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(BlockButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleMark } from \"../../../utils/slate/transforms\";\nimport { isMarkActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst MarkButton = ({ format, label, icon, isFirst, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${format}`)}\n          hotkeys={hotkeys[format]}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.format\", { format })}\n        data-active={isMarkActive(editor, format)}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleMark(editor, format);\n        }}\n        tabIndex={isFirst ? 0 : -1}\n      >\n        {icon && <Utility.IconComposer icon={icon} />}\n        {label && label}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(MarkButton);\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  defaultHoverStyle,\n  utilityPrimary,\n  fluidScale\n} from \"theme/styles/mixins\";\nimport Utility from \"global/components/utility\";\nimport Dialog from \"global/components/dialog\";\n\nexport const Form = styled.form`\n  > * + * {\n    margin-block-start: 50px;\n  }\n`;\n\nexport const CloseButton = styled.button`\n  ${buttonUnstyled}\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-end;\n  font-size: 17px;\n  cursor: pointer;\n\n  ${({ $primary }) =>\n    $primary &&\n    `\n    cursor: pointer;\n\n    &:hover {\n      ${defaultHoverStyle}\n      outline: 0;\n    }\n\n    &:focus-visible {\n      color: var(--focus-color);\n    }\n  `}\n`;\n\nconst CLOSE_ICON_SIZE = \"24px\";\n\nexport const CloseText = styled.span`\n  ${utilityPrimary}\n  margin-right: 6px;\n  font-size: 12px;\n  font-weight: var(--font-weight-semibold);\n  line-height: ${CLOSE_ICON_SIZE};\n  letter-spacing: 0.125em;\n`;\n\nexport const CloseIcon = styled(Utility.IconComposer)`\n  width: ${CLOSE_ICON_SIZE};\n  height: ${CLOSE_ICON_SIZE};\n`;\n\nexport const ModalHeader = styled.header`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-block-start: 0;\n`;\n\nexport const HeaderIcon = styled(Utility.IconComposer)`\n  color: var(--color-accent-primary);\n  margin-top: 2px;\n`;\n\nexport const Heading = styled.span`\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-top: -2px;\n\n  h2 {\n    margin-top: -6px;\n  }\n`;\n\nexport const ModalBody = styled.div`\n  width: 100%;\n`;\n\nexport const Modal = styled(Dialog.Wrapper)`\n  max-width: 600px;\n  padding-block: ${fluidScale(\"50px\", \"30px\")};\n  padding-inline: ${fluidScale(\"60px\", \"40px\")};\n`;\n\nexport const ButtonGroup = styled.div`\n  display: flex;\n  gap: 24px;\n  margin-top: 64px;\n`;\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertLinkForm({ urlRef, textRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.text}\n        ref={textRef}\n        name=\"text\"\n        label={t(\"editor.forms.link_text_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.url}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.link_url_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { useUID } from \"react-uid\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertModal(props) {\n  const { form, resolve, reject, heading, icon, resolveLabel } = props;\n  const uid = useUID();\n  const { t } = useTranslation();\n\n  const handleResolveClick = e => {\n    e.preventDefault();\n    resolve(e);\n  };\n\n  const handleRejectClick = e => {\n    e.preventDefault();\n    reject(e);\n  };\n\n  const buttonClasses = \"button-secondary button-secondary--outlined\";\n\n  return (\n    <Styled.Modal\n      maxWidth={600}\n      showCloseButton={false}\n      closeOnOverlayClick={false}\n      labelledBy={t(\"editor.forms.labelled_by_uid\", { uid })}\n      describedBy={t(\"editor.forms.described_by_uid\", { uid })}\n      onEsc={props.reject}\n    >\n      <>\n        <Styled.ModalHeader className=\"dialog__header\">\n          <Styled.Heading>\n            <Styled.HeaderIcon icon={icon} />\n            <h2 id={t(\"editor.forms.labelled_by_uid\", { uid })}>{heading}</h2>\n          </Styled.Heading>\n          <Styled.CloseButton onClick={handleRejectClick} tabIndex={0}>\n            <Styled.CloseText>{t(\"actions.close\")}</Styled.CloseText>\n            <Styled.CloseIcon icon=\"close24\" size={24} />\n          </Styled.CloseButton>\n        </Styled.ModalHeader>\n        <Styled.ModalBody className=\"dialog__body\">\n          {form}\n          <Styled.ButtonGroup>\n            {typeof resolve === \"function\" && (\n              <button\n                onClick={handleResolveClick}\n                className={buttonClasses}\n                data-id=\"accept\"\n              >\n                <span>{resolveLabel}</span>\n              </button>\n            )}\n            <button\n              className={classNames(buttonClasses, \"button-secondary--dull\")}\n              onClick={handleRejectClick}\n              data-id=\"reject\"\n            >\n              <span>{t(\"actions.cancel\")}</span>\n            </button>\n          </Styled.ButtonGroup>\n        </Styled.ModalBody>\n      </>\n    </Styled.Modal>\n  );\n}\n\nInsertModal.displayName = \"ContentEditor.Insert.Modal\";\n\nInsertModal.propTypes = {\n  resolve: PropTypes.func,\n  reject: PropTypes.func.isRequired,\n  heading: PropTypes.string,\n  options: PropTypes.object,\n  message: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n};\n","import { Transforms } from \"slate\";\nimport { ReactEditor } from \"slate-react\";\n\nexport const onModalClose = (editor, selection) => close => {\n  close();\n  const selectionToUse = editor.selection ?? selection;\n\n  // I don't know exactly why this works, but there's some relevant, though potentially outdated, discussion here: https://github.com/ianstormtaylor/slate/issues/2097. The issue is that the focus() call fails unless it happens after the focus trap closes, and when a user hits cancel and we're not performing any node transformations after closing the modal, that doesn't happen without a timeout.\n  setTimeout(() => {\n    Transforms.select(editor, selectionToUse);\n    ReactEditor.focus(editor);\n  }, 200);\n};\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor, Range } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport InsertLinkForm from \"./insert/LinkForm\";\nimport { useConfirmation } from \"hooks\";\nimport Modal from \"./insert/Modal\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport { wrapLink, unwrapLink } from \"../../../utils/slate/transforms\";\nimport { isLinkActive } from \"../../../utils/slate/getters\";\n\nimport * as Styled from \"./styles\";\n\nconst LinkButton = ({ icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const active = isLinkActive(editor);\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const textRef = useRef(null);\n  const { t } = useTranslation();\n\n  const addLink = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    const text = textRef?.current?.inputElement?.value;\n    if (!url) return;\n    close();\n    wrapLink(editor, url, text);\n  };\n\n  const getLinkData = e => {\n    e.preventDefault();\n    const { selection } = editor ?? {};\n    if (!selection) return;\n\n    if (active) return unwrapLink(editor);\n\n    const heading = t(\"editor.forms.link_insert_heading\");\n\n    const isCollapsed = Range.isCollapsed(selection);\n    const defaultValues = !isCollapsed\n      ? { text: Editor.string(editor, selection) }\n      : {};\n\n    const form = (\n      <InsertLinkForm\n        urlRef={urlRef}\n        textRef={textRef}\n        defaultValues={defaultValues}\n      />\n    );\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addLink,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.link`)}\n          hotkeys={hotkeys.link}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.Button\n        name=\"link-modal-trigger\"\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.link\")}\n        data-active={active}\n        onClick={getLinkData}\n        tabIndex={-1}\n      >\n        {icon && <Utility.IconComposer icon={icon} size={size} />}\n        {confirmation && <Modal {...confirmation} />}\n      </Styled.Button>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(LinkButton);\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertImageForm({ urlRef, altRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.src}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.image_url_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.alt}\n        ref={altRef}\n        name=\"alt\"\n        label={t(\"editor.forms.alt_text_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor, Element as SlateElement } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Utility from \"global/components/utility\";\nimport Modal from \"./insert/Modal\";\nimport { useConfirmation } from \"hooks\";\nimport InsertImageForm from \"./insert/ImageForm\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport { insertImage } from \"../../../utils/slate/transforms\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport * as Styled from \"./styles\";\n\nconst ImageButton = ({ icon, size, ...rest }, ref) => {\n  const { t } = useTranslation();\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const altRef = useRef(null);\n\n  const addImage = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    if (!url) return;\n    const alt = altRef?.current?.inputElement?.value;\n    close();\n    return insertImage(editor, url, alt);\n  };\n\n  const updateImage = attrs => close => {\n    const url = urlRef?.current?.inputElement?.value ?? attrs.src;\n    if (!url) return;\n    const alt = altRef?.current?.inputElement?.value;\n    close();\n    Transforms.setNodes(editor, {\n      htmlAttrs: { ...attrs, src: url, alt }\n    });\n    ReactEditor.focus(editor);\n  };\n\n  const getImageData = e => {\n    e.preventDefault();\n    if (!selection) return;\n\n    const heading = t(\"editor.forms.image_insert_heading\");\n    const form = <InsertImageForm urlRef={urlRef} altRef={altRef} />;\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addImage,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const updateImageData = e => {\n    e.preventDefault();\n\n    const [[image]] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: n =>\n          !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === \"img\"\n      })\n    );\n\n    const attrs = image?.htmlAttrs ?? {};\n    const defaultValues = {\n      src: attrs.src,\n      alt: attrs.alt\n    };\n\n    const heading = t(\"editor.forms.image_update_heading\");\n    const form = (\n      <InsertImageForm\n        defaultValues={defaultValues}\n        urlRef={urlRef}\n        altRef={altRef}\n      />\n    );\n\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: updateImage(attrs),\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.update\")\n      });\n  };\n\n  const [active] = isElementActive(editor, \"img\");\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.img`)}\n          description={t(`editor.tooltips.descriptions.img`)}\n          hotkeys={hotkeys.img}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <div>\n        <Styled.Button\n          name=\"img-modal-trigger\"\n          ref={ref}\n          {...rest}\n          aria-label={t(\"editor.controls.labels.image\")}\n          data-active={active}\n          onClick={active ? updateImageData : getImageData}\n          tabIndex={-1}\n        >\n          {icon && <Utility.IconComposer icon={icon} size={size} />}\n        </Styled.Button>\n        {confirmation && <Modal {...confirmation} />}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(ImageButton);\n","import React from \"react\";\nimport { FormBaseInput as Input } from \"../../../../../BaseInput\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Styled from \"./styles\";\n\nexport default function InsertIframeForm({ urlRef, titleRef, defaultValues }) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.Form>\n      <Input\n        defaultValue={defaultValues?.src}\n        ref={urlRef}\n        name=\"url\"\n        label={t(\"editor.forms.iframe_url_label\")}\n      />\n      <Input\n        defaultValue={defaultValues?.title}\n        ref={titleRef}\n        name=\"title\"\n        label={t(\"editor.forms.title_label\")}\n      />\n    </Styled.Form>\n  );\n}\n","import React, { forwardRef, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor, Element as SlateElement } from \"slate\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport Modal from \"./insert/Modal\";\nimport InsertIframeForm from \"./insert/IframeForm\";\nimport { useConfirmation } from \"hooks\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { onModalClose } from \"./utils\";\nimport { insertIframe } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst IframeButton = ({ icon, size, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n  const { confirm, confirmation } = useConfirmation();\n  const urlRef = useRef(null);\n  const titleRef = useRef(null);\n  const { t } = useTranslation();\n\n  const addIframe = close => {\n    const url = urlRef?.current?.inputElement?.value;\n    if (!url) return;\n    const title = titleRef?.current?.inputElement?.value;\n    if (!url) return;\n    close();\n    return insertIframe(editor, url, title);\n  };\n\n  const updateIframe = attrs => close => {\n    const url = urlRef?.current?.inputElement?.value ?? attrs.src;\n    if (!url) return;\n    const title = titleRef?.current?.inputElement?.value;\n    const type = /api\\/proxy\\//.test(url) ? \"video\" : \"iframe\";\n    close();\n    Transforms.setNodes(editor, {\n      type,\n      htmlAttrs: { ...attrs, src: url, title }\n    });\n    ReactEditor.focus(editor);\n  };\n\n  const getIframeData = e => {\n    e.preventDefault();\n    if (!selection) return;\n\n    const heading = t(\"editor.forms.iframe_insert_heading\");\n    const form = <InsertIframeForm urlRef={urlRef} titleRef={titleRef} />;\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: addIframe,\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const updateIframeData = e => {\n    e.preventDefault();\n\n    const [[iframe]] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: n =>\n          (!Editor.isEditor(n) &&\n            SlateElement.isElement(n) &&\n            n.type === \"iframe\") ||\n          n.type === \"video\"\n      })\n    );\n\n    const attrs = iframe?.htmlAttrs ?? {};\n    const defaultValues = {\n      src: attrs.src,\n      title: attrs.title\n    };\n\n    const heading = t(\"editor.forms.iframe_update_heading\");\n    const form = (\n      <InsertIframeForm\n        defaultValues={defaultValues}\n        urlRef={urlRef}\n        titleRef={titleRef}\n      />\n    );\n\n    if (confirm)\n      confirm({\n        heading,\n        icon,\n        form,\n        callback: updateIframe(attrs),\n        closeCallback: onModalClose(editor, selection),\n        resolveLabel: t(\"actions.add\")\n      });\n  };\n\n  const [activeIframe] = isElementActive(editor, \"iframe\");\n  const [activeVideo] = isElementActive(editor, \"video\");\n\n  const active = activeIframe || activeVideo;\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.iframe`)}\n          description={t(`editor.tooltips.descriptions.iframe`)}\n          hotkeys={hotkeys.iframe}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <div>\n        <Styled.Button\n          name=\"iframe-modal-trigger\"\n          ref={ref}\n          {...rest}\n          aria-label={t(\"editor.controls.labels.iframe\")}\n          data-active={active}\n          onClick={active ? updateIframeData : getIframeData}\n          tabIndex={-1}\n        >\n          {icon && <Utility.IconComposer icon={icon} size={size} />}\n        </Styled.Button>\n        {confirmation && <Modal {...confirmation} />}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(IframeButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport {\n  isTextBlockActive,\n  isElementActive\n} from \"../../../utils/slate/getters\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport * as Styled from \"./styles\";\n\nconst getActiveBlock = (editor, opts, name) => {\n  const isActive = name === \"textBlock\" ? isTextBlockActive : isElementActive;\n  const active = opts\n    .map(o => [o, isActive(editor, o)].flat())\n    .filter(o => o[1])\n    .sort((a, b) => a[2].length - b[2].length)\n    .pop();\n\n  // I can't decide whether it's better to show as active the lowest block or show nothing as active if the selection is nested in multiple blocks.\n  // const activeCount = opts.map(o => isActive(editor, o)).filter(Boolean).length;\n  // if (activeCount !== 1) return \"\";\n\n  return active ? active[0] : \"\";\n};\n\nconst BlockSelect = ({ options, name, color, ariaLabel, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  const renderOptions = options.map(o => (\n    <option key={o.format} value={o.format} hidden={!o.format}>\n      {o.label}\n    </option>\n  ));\n\n  const active = getActiveBlock(\n    editor,\n    options.map(o => o.format),\n    name\n  );\n\n  return (\n    <Styled.SelectTooltipWrapper>\n      <Styled.SelectWrapper>\n        <Styled.Select\n          ref={ref}\n          {...rest}\n          aria-label={ariaLabel}\n          data-active={active !== \"\"}\n          $color={color ?? \"var(--color-accent-primary)\"}\n          value={active}\n          onChange={e => {\n            e.preventDefault();\n            if (!selection) return;\n            toggleOrWrapNode(editor, e.target.value);\n          }}\n          tabIndex={-1}\n        >\n          {renderOptions}\n        </Styled.Select>\n        <Styled.SelectIcon icon=\"disclosureDown24\" size={16} />\n      </Styled.SelectWrapper>\n      <Tooltip\n        content={\n          active &&\n          (name === \"textBlock\" ||\n            active === \"blockquote\" ||\n            active === \"pre\") ? (\n            <TooltipContent\n              label={t(`editor.tooltips.labels.${active}`)}\n              hotkeys={hotkeys[active]}\n            />\n          ) : (\n            <TooltipContent\n              label={t(`editor.tooltips.labels.${name}`)}\n              description={t(`editor.tooltips.descriptions.${name}`)}\n            />\n          )\n        }\n        xOffset=\"0\"\n        yOffset=\"43px\"\n        delay={0}\n      >\n        <Styled.TooltipIcon>\n          <IconComposer icon=\"info16\" size={14} />\n        </Styled.TooltipIcon>\n      </Tooltip>\n    </Styled.SelectTooltipWrapper>\n  );\n};\n\nexport default forwardRef(BlockSelect);\n","import React, { forwardRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Utility from \"global/components/utility\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { hotkeys } from \"./TooltipContent/content\";\nimport * as Styled from \"./styles\";\n\nconst FunctionButton = (\n  { label, icon, onClick, isFirst, tooltip, ...rest },\n  ref\n) => {\n  const { t } = useTranslation();\n\n  const Button = label ? Styled.StylesButton : Styled.Button;\n  const renderButton = (\n    <Button\n      ref={ref}\n      {...rest}\n      aria-label={t(\"editor.controls.labels.format\", { format: tooltip })}\n      onClick={onClick}\n      tabIndex={isFirst ? 0 : -1}\n    >\n      {icon && <Utility.IconComposer icon={icon} size={24} />}\n      {label && label}\n    </Button>\n  );\n\n  return tooltip ? (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.${tooltip}`)}\n          hotkeys={hotkeys[tooltip]}\n          description={t(`editor.tooltips.descriptions.${tooltip}`)}\n        />\n      }\n      xOffset=\"-50px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      {renderButton}\n    </Tooltip>\n  ) : (\n    renderButton\n  );\n};\n\nexport default forwardRef(FunctionButton);\n","import React, { forwardRef } from \"react\";\nimport { useSlate, ReactEditor } from \"slate-react\";\nimport { useTranslation } from \"react-i18next\";\nimport Tooltip from \"global/components/atomic/Tooltip\";\nimport TooltipContent from \"./TooltipContent\";\nimport { toggleOrWrapNode } from \"../../../utils/slate/transforms\";\nimport { isElementActive } from \"../../../utils/slate/getters\";\nimport * as Styled from \"./styles\";\n\nconst SpanButton = ({ format, ...rest }, ref) => {\n  const editor = useSlate();\n  const { selection } = editor ?? {};\n\n  const { t } = useTranslation();\n\n  return (\n    <Tooltip\n      content={\n        <TooltipContent\n          label={t(`editor.tooltips.labels.span`)}\n          description={t(`editor.tooltips.descriptions.span`)}\n        />\n      }\n      xOffset=\"-75px\"\n      yOffset=\"43px\"\n      delay={0.5}\n    >\n      <Styled.SpanButton\n        as=\"button\"\n        ref={ref}\n        {...rest}\n        aria-label={t(\"editor.controls.labels.span\")}\n        data-active={isElementActive(editor, format)[0]}\n        onClick={event => {\n          event.preventDefault();\n          if (!selection) return;\n          toggleOrWrapNode(editor, format);\n        }}\n        tabIndex={-1}\n      >\n        Span\n      </Styled.SpanButton>\n    </Tooltip>\n  );\n};\n\nexport default forwardRef(SpanButton);\n","import styled from \"@emotion/styled\";\nimport {\n  respond,\n  buttonUnstyled,\n  defaultFocusStyle\n} from \"theme/styles/mixins\";\nimport { COLOR_MAP } from \"../renderers/styles\";\nimport IconComposer from \"global/components/utility/IconComposer\";\n\nexport const Toolbar = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  row-gap: 5px;\n  align-items: center;\n  column-gap: 3px;\n  border: 1px solid var(--TextArea-border-color);\n  border-bottom-color: var(--textarea-border-color);\n  padding-inline: 1.25em;\n  padding-block: 1em;\n  background-color: var(--drawer-bg-color);\n  border-top-left-radius: var(--box-border-radius);\n  border-top-right-radius: var(--box-border-radius);\n  color: var(--color);\n  min-height: 73px;\n`;\n\nexport const ToolGroup = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: center;\n  gap: 8px;\n\n  ${respond(`gap: 3px;`, 30)}\n`;\n\nexport const ToolbarSpacer = styled.div`\n  margin-inline: 12px;\n  border-left: 1px solid var(--background-color);\n  height: 24px;\n`;\n\nexport const ToggleBar = styled.div`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  row-gap: 12px;\n  justify-content: space-between;\n  margin-block-end: 32px;\n`;\n\nexport const BreadcrumbsBar = styled.div`\n  border-left: 1px solid;\n  border-right: 1px solid;\n  background: ${({ $darkMode }) =>\n    $darkMode ? `var(--TextArea-border-color)` : `var(--color-base-neutral30)`};\n  border-color: var(--TextArea-border-color);\n  color: var(--drawer-bg-color);\n  padding-inline: 1.5em;\n  padding-block-start: 3px;\n  padding-block-end: 6px;\n  min-height: 30px;\n  font-family: var(--font-family-heading);\n  display: flex;\n  align-items: center;\n  gap: 20px;\n`;\n\nexport const Breadcrumbs = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  column-gap: 8px;\n`;\n\nexport const Breadcrumb = styled.button`\n  ${buttonUnstyled}\n  white-space: nowrap;\n  overflow-x: hidden;\n  text-overflow: ellipsis;\n  max-width: 300px;\n  flex-shrink: 0;\n  min-height: 24px;\n\n  &:hover {\n    color: ${({ $color, $darkMode }) =>\n      $darkMode ? COLOR_MAP[$color].dark : COLOR_MAP[$color].light};\n  }\n\n  &:focus-visible {\n    color: ${({ $color, $darkMode }) =>\n      $darkMode ? COLOR_MAP[$color].dark : COLOR_MAP[$color].light};\n    outline: 0;\n  }\n`;\n\nexport const Spacer = styled(IconComposer)`\n  transform: rotate(-90deg);\n  margin-block-start: 4px;\n  flex-shrink: 0;\n`;\n\nexport const ShowHideButton = styled.button`\n  ${buttonUnstyled}\n  display: flex;\n  align-items: center;\n  margin-inline-start: auto;\n\n  &:focus-visible,\n  &:focus {\n    ${defaultFocusStyle}\n  }\n`;\n","import React, { Fragment, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  MarkButton,\n  BlockButton,\n  LinkButton,\n  ImageButton,\n  IframeButton,\n  BlockSelect,\n  FunctionButton,\n  SpanButton\n} from \"./buttons\";\nimport {\n  MenuBar as ReakitMenuBar,\n  MenuItem as ReakitMenuItem,\n  useMenuBarState\n} from \"reakit/Menu\";\nimport { Node } from \"slate\";\nimport { useSlateStatic, useSlateSelection } from \"slate-react\";\nimport { getAncestors } from \"../../utils/slate/getters\";\nimport { useHtmlBreadcrumbs } from \"../../contexts/htmlBreadcrumbsContext\";\nimport { rteElements, inlineNodes } from \"../../utils/elements\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport isEmpty from \"lodash/isEmpty\";\nimport * as Styled from \"./styles\";\n\nexport default function ToolbarRTE({ onClickUndo, onClickRedo, darkMode }) {\n  const { t } = useTranslation();\n\n  const menu = useMenuBarState({\n    orientation: \"horizontal\",\n    loop: true,\n    wrap: \"horizontal\"\n  });\n\n  const editor = useSlateStatic();\n  const selection = useSlateSelection();\n  const path = selection?.anchor?.path;\n\n  let ancestors = {};\n  if (path) {\n    const iterator = Node.ancestors(editor, selection?.anchor.path);\n    ancestors = getAncestors(editor, iterator);\n  }\n\n  const {\n    setSelectedCrumb,\n    selectedCrumb,\n    editingCrumb,\n    setEditingCrumb\n  } = useHtmlBreadcrumbs();\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (editingCrumb) {\n      setEditingCrumb(false);\n      setSelectedCrumb(null);\n    }\n  }, [editor.selection]);\n\n  const onToggleHtmlOutlines = useCallback(\n    e => {\n      e.preventDefault();\n\n      const val = selectedCrumb === \"all\" ? null : \"all\";\n      setSelectedCrumb(val);\n    },\n    [selectedCrumb, setSelectedCrumb]\n  );\n\n  const handleHoverFocus = useCallback(\n    a => {\n      if (!editingCrumb) setSelectedCrumb(a);\n    },\n    [editingCrumb]\n  );\n\n  const clearHoverFocus = useCallback(() => {\n    if (!editingCrumb) setSelectedCrumb(null);\n  }, [editingCrumb]);\n\n  return (\n    <>\n      <ReakitMenuBar\n        as={Styled.Toolbar}\n        aria-label={t(\"editor.controls.labels.toolbar_rte\")}\n        {...menu}\n      >\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={FunctionButton}\n            icon=\"undo24\"\n            onClick={onClickUndo}\n            tooltip=\"undo\"\n            isFirst\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={FunctionButton}\n            icon=\"redo24\"\n            onClick={onClickRedo}\n            tooltip=\"redo\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockSelect}\n            name=\"container\"\n            ariaLabel={t(\"editor.controls.labels.layout_block_select\")}\n            options={[\n              { format: \"div\", label: t(\"editor.tooltips.labels.div\") },\n              { format: \"header\", label: t(\"editor.tooltips.labels.header\") },\n              { format: \"footer\", label: t(\"editor.tooltips.labels.footer\") },\n              { format: \"section\", label: t(\"editor.tooltips.labels.section\") },\n              { format: \"article\", label: t(\"editor.tooltips.labels.article\") },\n              {\n                format: \"blockquote\",\n                label: t(\"editor.tooltips.labels.blockquote\")\n              },\n              { format: \"pre\", label: t(\"editor.tooltips.labels.pre\") },\n              { format: \"figure\", label: t(\"editor.tooltips.labels.figure\") },\n              {\n                format: \"figcaption\",\n                label: t(\"editor.tooltips.labels.figcaption\")\n              },\n              {\n                format: \"\",\n                label: t(\n                  \"editor.controls.labels.layout_block_select_placeholder\"\n                )\n              }\n            ]}\n            color=\"var(--color-base-violet45)\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockSelect}\n            name=\"textBlock\"\n            ariaLabel={t(\"editor.controls.labels.text_block_select\")}\n            options={[\n              { format: \"p\", label: t(\"editor.tooltips.labels.p\") },\n              { format: \"h1\", label: t(\"editor.tooltips.labels.h1\") },\n              { format: \"h2\", label: t(\"editor.tooltips.labels.h2\") },\n              { format: \"h3\", label: t(\"editor.tooltips.labels.h3\") },\n              { format: \"h4\", label: t(\"editor.tooltips.labels.h4\") },\n              { format: \"h5\", label: t(\"editor.tooltips.labels.h5\") },\n              { format: \"h6\", label: t(\"editor.tooltips.labels.h6\") },\n              {\n                format: \"\",\n                label: t(\"editor.controls.labels.text_block_select_placeholder\")\n              }\n            ]}\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem as={SpanButton} format=\"span\" {...menu} />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"bold24\"\n            format=\"bold\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"italic24\"\n            format=\"italic\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"underline24\"\n            format=\"underline\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"strikethrough24\"\n            format=\"strikethrough\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={MarkButton}\n            icon=\"code24\"\n            format=\"code\"\n            {...menu}\n          />\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"orderedList24\"\n            format=\"ol\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"unorderedList24\"\n            format=\"ul\"\n            {...menu}\n          />\n          {/* <ReakitMenuItem\n            as={BlockButton}\n            icon=\"blockQuote24\"\n            format=\"blockquote\"\n            {...menu}\n          />\n          <ReakitMenuItem\n            as={BlockButton}\n            icon=\"codeBlock24\"\n            format=\"pre\"\n            {...menu}\n          /> */}\n          <Styled.ToolbarSpacer />\n        </Styled.ToolGroup>\n        <Styled.ToolGroup>\n          <ReakitMenuItem as={LinkButton} icon=\"RTELink24\" {...menu} />\n          <ReakitMenuItem as={ImageButton} icon=\"RTEImage24\" {...menu} />\n          <ReakitMenuItem as={IframeButton} icon=\"iframe24\" {...menu} />\n        </Styled.ToolGroup>\n      </ReakitMenuBar>\n      <Styled.BreadcrumbsBar $darkMode={darkMode}>\n        <Styled.Breadcrumbs>\n          {!isEmpty(ancestors) &&\n            Object.keys(ancestors)\n              .sort(\n                (a, b) => ancestors[a].path.length - ancestors[b].path.length\n              )\n              .map((a, i) => {\n                /* eslint-disable no-nested-ternary */\n                const tag = ancestors[a].label.split(\".\")[0].split(\"#\")[0];\n                const color = rteElements.includes(tag)\n                  ? \"green\"\n                  : inlineNodes.includes(tag)\n                  ? \"blue\"\n                  : \"violet\";\n\n                return (\n                  <Fragment key={a}>\n                    <Styled.Breadcrumb\n                      $color={color}\n                      $darkMode={darkMode}\n                      onMouseEnter={() => handleHoverFocus(a)}\n                      onMouseLeave={clearHoverFocus}\n                      onFocus={() => handleHoverFocus(a)}\n                      onBlur={clearHoverFocus}\n                      onClick={e => {\n                        e.preventDefault();\n                        setSelectedCrumb(a);\n                        setEditingCrumb(true);\n                      }}\n                    >\n                      {ancestors[a].label}\n                    </Styled.Breadcrumb>\n                    {i < Object.keys(ancestors).length - 1 && (\n                      <Styled.Spacer icon=\"disclosureDown16\" size={16} />\n                    )}\n                  </Fragment>\n                );\n              })}\n        </Styled.Breadcrumbs>\n        <Styled.ShowHideButton\n          onClick={onToggleHtmlOutlines}\n          aria-label={\n            selectedCrumb === \"all\"\n              ? t(\"editor.controls.labels.hide_html\")\n              : t(\"editor.controls.labels.show_html\")\n          }\n        >\n          <IconComposer icon=\"eyeball24\" size={24} />\n        </Styled.ShowHideButton>\n      </Styled.BreadcrumbsBar>\n    </>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { FunctionButton } from \"./buttons\";\nimport {\n  MenuBar as ReakitMenuBar,\n  MenuItem as ReakitMenuItem,\n  useMenuBarState\n} from \"reakit/Menu\";\nimport * as Styled from \"./styles\";\n\nexport default function ToolbarHTML({\n  onClickUndo,\n  onClickRedo,\n  toggleStyles,\n  cssVisible,\n  controlsRef\n}) {\n  const { t } = useTranslation();\n  const menu = useMenuBarState({\n    orientation: \"horizontal\",\n    loop: true,\n    wrap: \"horizontal\"\n  });\n  return (\n    <ReakitMenuBar\n      as={Styled.Toolbar}\n      aria-label={t(\"editor.controls.labels.toolbar_html\")}\n      {...menu}\n    >\n      <ReakitMenuItem\n        ref={controlsRef}\n        as={FunctionButton}\n        icon=\"undo24\"\n        onClick={onClickUndo}\n        isFirst\n        {...menu}\n      />\n      <ReakitMenuItem\n        as={FunctionButton}\n        icon=\"redo24\"\n        onClick={onClickRedo}\n        {...menu}\n      />\n      <ReakitMenuItem\n        as={FunctionButton}\n        label={\n          cssVisible\n            ? t(\"editor.controls.labels.hide_styles\")\n            : t(\"editor.controls.labels.show_styles\")\n        }\n        icon={cssVisible ? \"eyeClosed32\" : \"eyeOpen32\"}\n        onClick={toggleStyles}\n        {...menu}\n      />\n    </ReakitMenuBar>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport {\n  buttonUnstyled,\n  utilityPrimary,\n  defaultTransitionProps,\n  respond\n} from \"theme/styles/mixins\";\n\nexport const Wrapper = styled.div`\n  ${buttonUnstyled}\n  ${utilityPrimary}\n  display: inline-flex;\n  border: 1px solid;\n  border-radius: 16px;\n  color: var(--color-accent-primary);\n  width: 100%;\n\n  ${respond(`width: auto;`, 60)};\n`;\n\nexport const Button = styled.button`\n  ${buttonUnstyled}\n  ${utilityPrimary}\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding-inline: ${({ $padding }) => $padding};\n  font-size: 14px;\n  font-weight: var(--font-weight-medium);\n  text-decoration: none;\n  text-transform: none;\n  letter-spacing: 0;\n  border-top-left-radius: 14px;\n  border-bottom-left-radius: 14px;\n  transition: color ${defaultTransitionProps},\n    background-color ${defaultTransitionProps},\n    border-color ${defaultTransitionProps};\n  width: 50%;\n\n  ${respond(`width: auto;`, 60)}\n\n  ${({ $active }) =>\n    $active\n      ? `\n      color: var(--color-neutral-text-extra-dark);\n      background-color: var(--hover-color);\n      border-color: var(--hover-color);\n\n      &:hover {\n        color: var(--color-neutral-text-extra-dark);\n      }\n\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }`\n      : `\n      &:focus-visible {\n        color: var(--color-base-neutral100);\n        background-color: var(--color-accent-primary-pale);\n        border-color: var(--color-accent-primary-pale);\n        outline: 0;\n      }\n\n      &:hover {\n        color: inherit;\n        background-color: inherit;\n        border-color: inherit;\n      }\n      `}\n\n  span {\n    padding-top: 7px;\n    padding-bottom: 9px;\n  }\n\n  svg {\n    width: 24px;\n    height: 24px;\n    padding-bottom: 2px;\n    margin: 0;\n  }\n\n  * + & {\n    border-left: 1px solid;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    border-top-right-radius: 14px;\n    border-bottom-right-radius: 14px;\n  }\n`;\n\nexport const MobileLabel = styled.span`\n  ${respond(`display: none;`, 40)};\n`;\n\nexport const Label = styled.span`\n  ${MobileLabel} + & {\n    display: none;\n\n    ${respond(`display: inline;`, 40)};\n  }\n`;\n","import React from \"react\";\nimport IconComposer from \"global/components/utility/IconComposer\";\nimport * as Styled from \"./styles\";\n\nexport default function Toggle({ options, padding = \"20px\" }) {\n  const [left, right] = options;\n\n  return (\n    <Styled.Wrapper>\n      <Styled.Button\n        $active={left.active}\n        $padding={padding}\n        onClick={left.onClick}\n      >\n        <IconComposer\n          icon={left.icon || \"code16\"}\n          size={left.iconSize || 16}\n          className=\"button-icon-secondary__icon button-icon-secondary__icon--large\"\n        />\n        {left.mobileLabel && (\n          <Styled.MobileLabel>{left.mobileLabel}</Styled.MobileLabel>\n        )}\n        <Styled.Label>{left.label}</Styled.Label>\n      </Styled.Button>\n      <Styled.Button\n        $active={right.active}\n        $padding={padding}\n        onClick={right.onClick}\n      >\n        <IconComposer\n          icon={right.icon || \"code16\"}\n          size={right.iconSize || 16}\n          className=\"button-icon-secondary__icon button-icon-secondary__icon--large\"\n        />\n        {right.mobileLabel && (\n          <Styled.MobileLabel>{right.mobileLabel}</Styled.MobileLabel>\n        )}\n        <Styled.Label>{right.label}</Styled.Label>\n      </Styled.Button>\n    </Styled.Wrapper>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Toggle from \"./Toggle\";\nimport * as Styled from \"./styles\";\n\nexport default function ToggleBar({\n  htmlMode,\n  onClickEditorToggle,\n  darkMode,\n  onClickDarkModeToggle\n}) {\n  const { t } = useTranslation();\n\n  return (\n    <Styled.ToggleBar>\n      <Toggle\n        options={[\n          {\n            label: t(\"editor.controls.toggles.html_label\"),\n            mobileLabel: t(\"editor.controls.toggles.html_label_mobile\"),\n            icon: \"editorHTML24\",\n            active: htmlMode,\n            onClick: onClickEditorToggle(true)\n          },\n          {\n            label: t(\"editor.controls.toggles.rte_label\"),\n            mobileLabel: t(\"editor.controls.toggles.rte_label_mobile\"),\n            icon: \"editorRTE24\",\n            active: !htmlMode,\n            onClick: onClickEditorToggle(false)\n          }\n        ]}\n      />\n      <Toggle\n        options={[\n          {\n            label: t(\"editor.controls.toggles.dark_mode_label\"),\n            icon: \"darkMode16\",\n            iconSize: 12,\n            active: darkMode,\n            onClick: onClickDarkModeToggle(true)\n          },\n          {\n            label: t(\"editor.controls.toggles.light_mode_label\"),\n            icon: \"lightMode16\",\n            iconSize: 12,\n            active: !darkMode,\n            onClick: onClickDarkModeToggle(false)\n          }\n        ]}\n        padding=\"16px\"\n      />\n    </Styled.ToggleBar>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { defaultTransitionProps } from \"theme/styles/mixins\";\nimport { Editable as BaseEditable } from \"slate-react\";\nimport InputError from \"../../InputError\";\n\nexport const Editor = styled.div`\n  width: 100%;\n  resize: vertical;\n  outline: none;\n  transition: border-color ${defaultTransitionProps};\n  position: relative;\n  border-radius: var(--box-border-radius);\n\n  &:focus-visible {\n    border-color: var(--TextArea-focus-color);\n  }\n`;\n\nexport const EditorSecondary = styled(Editor)`\n  --TextArea-border-color: var(--textarea-border-color);\n  --TextArea-focus-color: var(--highlight-color);\n\n  font-family: var(--input-font-family);\n  background-color: var(--input-bg-color);\n  border-radius: var(--box-border-radius);\n\n  &::placeholder {\n    color: var(--color-neutral-ui-light);\n  }\n\n  &.error {\n    --TextArea-border-color: var(--error-color);\n  }\n`;\n\nexport const EditableWrapper = styled.div`\n  min-height: 700px;\n  border: 1px solid var(--TextArea-border-color);\n  border-top: 0;\n  border-bottom-left-radius: var(--box-border-radius);\n  border-bottom-right-radius: var(--box-border-radius);\n  background-color: var(--background-color);\n  overflow: hidden;\n  overflow-x: auto;\n\n  .ace_editor {\n    border-bottom-left-radius: 6px;\n    border-bottom-right-radius: 6px;\n    border: 0;\n    overflow: visible;\n  }\n\n  .ace_gutter {\n    min-height: 699px !important;\n    overflow: visible;\n    border-bottom-left-radius: var(--box-border-radius);\n  }\n\n  .ace_scroller {\n    min-height: 699px !important;\n    overflow: visible;\n    border-bottom-right-radius: var(--box-border-radius);\n  }\n\n  .ace_gutter-cell:last-of-type {\n    border-bottom-left-radius: var(--box-border-radius);\n  }\n\n  ${({ $cssVisible }) =>\n    $cssVisible &&\n    `\n    .ace_cursor {\n      display: none;\n    }\n  `}\n`;\n\nexport const Editable = styled(BaseEditable)`\n  max-width: 850px;\n  margin: auto;\n  padding-block: 4em;\n  padding-inline: var(--container-padding-inline-fluid);\n`;\n\nexport const Controls = styled.div`\n  position: sticky;\n  top: -80px;\n  z-index: 200;\n  background-color: var(--drawer-bg-color);\n  padding-top: 30px;\n`;\n\nexport const HTMLError = styled(InputError)`\n  margin-block-end: 20px;\n\n  > span {\n    margin: 0;\n  }\n`;\n","import React from \"react\";\nimport { ToolbarRTE, ToolbarHTML, ToggleBar } from \"./controls\";\nimport * as Styled from \"./styles\";\n\nexport default function EditorControls({\n  htmlMode,\n  cssVisible,\n  darkMode,\n  onClickEditorToggle,\n  onClickDarkModeToggle,\n  onClickRedo,\n  onClickUndo,\n  toggleStyles,\n  errors,\n  controlsRef\n}) {\n  return (\n    <Styled.Controls id=\"editor-controls\">\n      <ToggleBar\n        htmlMode={htmlMode}\n        darkMode={darkMode}\n        onClickEditorToggle={onClickEditorToggle}\n        onClickDarkModeToggle={onClickDarkModeToggle}\n      />\n      {!!errors.length && <Styled.HTMLError errors={errors} />}\n      {htmlMode ? (\n        <ToolbarHTML\n          onClickUndo={onClickUndo}\n          onClickRedo={onClickRedo}\n          toggleStyles={toggleStyles}\n          cssVisible={cssVisible}\n          controlsRef={controlsRef}\n        />\n      ) : (\n        <ToolbarRTE\n          onClickUndo={onClickUndo}\n          onClickRedo={onClickRedo}\n          darkMode={darkMode}\n        />\n      )}\n    </Styled.Controls>\n  );\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport classNames from \"classnames\";\nimport { useTranslation } from \"react-i18next\";\nimport { Transforms, Editor as SlateEditor } from \"slate\";\nimport { withReact, ReactEditor, useSlate } from \"slate-react\";\nimport { HistoryEditor } from \"slate-history\";\nimport Leaf from \"./renderers/Leaf\";\nimport Element from \"./renderers/Element\";\nimport { captureHotKeys } from \"../hotkeys\";\nimport { serializeToHtml, serializeToSlate } from \"../serializers\";\nimport { clearSlate } from \"../utils/slate/general\";\nimport HtmlEditor from \"./HtmlEditor\";\nimport Controls from \"./EditorControls\";\nimport { formatHtml } from \"../utils/helpers\";\nimport * as Styled from \"./styles\";\n\nexport default function Editor({\n  localHtml,\n  localSlate,\n  setLocalHtml,\n  onChangeHtml,\n  setLocalSlate,\n  stylesheets,\n  hasErrors,\n  setHasErrors,\n  warnErrors,\n  setWarnErrors,\n  nextRef,\n  htmlMode,\n  toggleHtmlMode\n}) {\n  const editor = useSlate();\n  const aceRef = useRef();\n  const controlsRef = useRef();\n\n  const [showCss, toggleCss] = useState(false);\n  const [darkMode, setDarkMode] = useState(true);\n\n  const { t } = useTranslation();\n\n  // Since the editor overflows the visible area and we scroll the whole drawer, we have to manually handle scroll when arrow keys are used to move the cursor out of view.\n  useEffect(() => {\n    const active = document.activeElement;\n    if (active?.id === \"content-editable\" && editor.selection && !htmlMode) {\n      const [node] = ReactEditor.toDOMPoint(editor, editor.selection.focus);\n      const rect = node.parentElement.getBoundingClientRect();\n      const buttons = document.getElementById(\"editor-button-overlay\");\n      const controls = document.getElementById(\"editor-controls\");\n      const buttonsRect = buttons.getBoundingClientRect();\n      const controlsRect = controls.getBoundingClientRect();\n      const isInView =\n        rect.bottom < buttonsRect.top && rect.y > controlsRect.bottom;\n      if (!isInView) {\n        node.parentElement.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n    }\n  }, [editor, editor.selection, htmlMode]);\n\n  const theme = stylesheets?.map(s => s?.attributes.styles).join(\"\\n\");\n\n  const renderElement = useCallback(\n    props => <Element {...props} theme={theme} darkMode={darkMode} />,\n    [theme, darkMode]\n  );\n\n  const renderLeaf = useCallback(\n    props => <Leaf {...props} darkMode={darkMode} />,\n    [darkMode]\n  );\n\n  const toggleEditorView = () => {\n    if (htmlMode) {\n      const json = serializeToSlate(localHtml);\n      setLocalSlate(json);\n      clearSlate(editor);\n      Transforms.insertNodes(editor, json);\n      Transforms.select(editor, {\n        anchor: SlateEditor.start(editor, [0]),\n        focus: SlateEditor.start(editor, [0])\n      });\n      return toggleHtmlMode(false);\n    }\n\n    const html = formatHtml(serializeToHtml(localSlate));\n    setLocalHtml(html);\n    toggleCss(false);\n    return toggleHtmlMode(true);\n  };\n\n  const onClickToggle = val => e => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (hasErrors) {\n      setWarnErrors(\"switch\");\n      return;\n    }\n    if (val && htmlMode) return;\n    if (!val && !htmlMode) return;\n    toggleEditorView();\n  };\n\n  const onValidateHtml = messages => {\n    const errorFound = messages.find(msg => msg.type === \"error\");\n    if (!errorFound) {\n      setHasErrors(false);\n      return setWarnErrors(false);\n    }\n    setHasErrors(true);\n  };\n\n  const htmlProps = {\n    onChange: onChangeHtml,\n    value: localHtml,\n    onValidate: onValidateHtml,\n    mode: \"html\",\n    aceRef,\n    nextRef,\n    prevRef: controlsRef,\n    darkMode\n  };\n\n  const cssProps = {\n    value: theme,\n    mode: \"css\",\n    readOnly: true,\n    onValidate: () => {},\n    aceRef,\n    nextRef,\n    prevRef: controlsRef,\n    darkMode\n  };\n\n  const codeAreaProps = showCss ? cssProps : htmlProps;\n\n  const toggleStyles = e => {\n    e.preventDefault();\n    toggleCss(!showCss);\n  };\n\n  const onClickUndo = e => {\n    e.preventDefault();\n    if (!htmlMode) return HistoryEditor.undo(editor);\n    aceRef.current.editor.undo();\n  };\n\n  const onClickRedo = e => {\n    e.preventDefault();\n    if (!htmlMode) return HistoryEditor.redo(editor);\n    aceRef.current.editor.redo();\n  };\n\n  const wrapperClasses = classNames(\n    \"manifold-text-section text-section font-size-2\",\n    {\n      \"scheme-dark\": darkMode,\n      \"scheme-light\": !darkMode\n    }\n  );\n\n  const onClickDarkModeToggle = val => e => {\n    e.preventDefault();\n    setDarkMode(val);\n  };\n\n  /* eslint-disable no-nested-ternary */\n  const errors = warnErrors\n    ? Array.isArray(hasErrors)\n      ? hasErrors\n      : [\n          {\n            source: { pointer: \"/data/attributes/body\" },\n            detail: t(`errors.invalid_html_${warnErrors}`)\n          }\n        ]\n    : [];\n\n  return (\n    <>\n      <Controls\n        htmlMode={htmlMode}\n        darkMode={darkMode}\n        onClickEditorToggle={onClickToggle}\n        onClickDarkModeToggle={onClickDarkModeToggle}\n        onClickUndo={onClickUndo}\n        onClickRedo={onClickRedo}\n        toggleStyles={toggleStyles}\n        cssVisible={showCss}\n        errors={errors}\n        controlsRef={controlsRef}\n      />\n      <Styled.EditableWrapper className={wrapperClasses} $cssVisible={showCss}>\n        {!htmlMode && (\n          <Styled.Editable\n            id={\"content-editable\"}\n            as=\"div\"\n            renderElement={renderElement}\n            renderLeaf={renderLeaf}\n            placeholder={t(\"editor.elements.placeholder\")}\n            spellCheck={false}\n            onKeyDown={e => captureHotKeys(e, editor)}\n          />\n        )}\n        {htmlMode && <HtmlEditor {...codeAreaProps} />}\n      </Styled.EditableWrapper>\n      {theme && !htmlMode && (\n        <style\n          dangerouslySetInnerHTML={{\n            __html: `@layer stylesheets {${theme}}`\n          }}\n        />\n      )}\n    </>\n  );\n}\n\nEditor.displayName = \"Global.Forms.ContentEditor.Editor\";\n","import React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FieldWrapper from \"../../FieldWrapper\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Slate, withReact, ReactEditor } from \"slate-react\";\nimport { createEditor, Transforms } from \"slate\";\nimport { withHistory, HistoryEditor } from \"slate-history\";\nimport withPlugins from \"../plugins\";\nimport throttle from \"lodash/throttle\";\nimport { serializeToHtml, removeFormatting } from \"../serializers\";\nimport { clearSlate } from \"../utils/slate/general\";\nimport isEqual from \"lodash/isEqual\";\nimport has from \"lodash/has\";\nimport Editor from \"./Editor\";\nimport { HtmlBreadcrumbsContext } from \"../contexts/htmlBreadcrumbsContext\";\nimport * as Styled from \"./styles\";\n\nexport default function EditorWrapper({\n  set: setFormValue,\n  stylesheets,\n  initialHtmlValue,\n  initialSlateValue,\n  hasErrors,\n  setHasErrors,\n  warnErrors,\n  setWarnErrors,\n  nextRef\n}) {\n  const editorRef = useRef();\n  if (!editorRef.current)\n    editorRef.current = withReact(withHistory(withPlugins(createEditor())));\n  const editor = editorRef.current;\n\n  const prevSlate = useRef(initialSlateValue);\n  const prevHtml = useRef(initialHtmlValue);\n\n  const [htmlMode, toggleHtmlMode] = useState(has(initialSlateValue, \"error\"));\n  const [selectedCrumb, setSelectedCrumb] = useState();\n  const [editingCrumb, setEditingCrumb] = useState(false);\n  const [localHtml, setLocalHtml] = useState(initialHtmlValue);\n  const [localSlate, setLocalSlate] = useState(\n    has(initialSlateValue, \"error\")\n      ? initialSlateValue.default\n      : initialSlateValue\n  );\n\n  // The value prop on the Slate provider component is unhelpfully named. It is really initialSlateValue and is only read once, so it's easy for Slate to get out of sync when waiting for data from the api. This resets the editor each time the form model changes.\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!htmlMode && !isEqual(prevSlate.current, initialSlateValue)) {\n      clearSlate(editor);\n      Transforms.insertNodes(editor, initialSlateValue);\n      return;\n    }\n    if (!isEqual(prevHtml.current, initialHtmlValue)) {\n      setLocalHtml(initialHtmlValue);\n    }\n  }, [initialSlateValue, initialHtmlValue]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const setFormValueFromSlate = throttle(\n    val => setFormValue(serializeToHtml(val)),\n    500\n  );\n\n  const onChangeSlate = val => {\n    setLocalSlate(val);\n    const changes = editor?.history?.undos ?? [];\n    const shouldUpdateFormValue =\n      changes.length > 1 || changes[0]?.selectionBefore;\n    if (shouldUpdateFormValue) setFormValueFromSlate(val);\n  };\n\n  const setFormValueFromHtml = throttle(\n    val => setFormValue(removeFormatting(val)),\n    500\n  );\n\n  const onChangeHtml = val => {\n    setLocalHtml(val);\n    setFormValueFromHtml(val);\n  };\n\n  const handleError = ({ resetErrorBoundary }) => {\n    HistoryEditor.undo(editor);\n    resetErrorBoundary();\n    return null;\n  };\n\n  return (\n    <FieldWrapper className=\"wide\">\n      <Styled.EditorSecondary\n        className={hasErrors && warnErrors ? \"error\" : undefined}\n      >\n        <ErrorBoundary fallbackRender={handleError}>\n          <HtmlBreadcrumbsContext.Provider\n            value={{\n              selectedCrumb,\n              setSelectedCrumb,\n              editingCrumb,\n              setEditingCrumb\n            }}\n          >\n            <Slate editor={editor} value={localSlate} onChange={onChangeSlate}>\n              <Editor\n                localHtml={localHtml}\n                setLocalHtml={setLocalHtml}\n                onChangeHtml={onChangeHtml}\n                localSlate={localSlate}\n                setLocalSlate={setLocalSlate}\n                stylesheets={stylesheets}\n                htmlMode={htmlMode}\n                toggleHtmlMode={toggleHtmlMode}\n                hasErrors={hasErrors}\n                setHasErrors={setHasErrors}\n                warnErrors={warnErrors}\n                setWarnErrors={setWarnErrors}\n                nextRef={nextRef}\n              />\n            </Slate>\n          </HtmlBreadcrumbsContext.Provider>\n        </ErrorBoundary>\n      </Styled.EditorSecondary>\n    </FieldWrapper>\n  );\n}\n\nEditorWrapper.displayName = \"Global.Form.ContentEditor.Wrapper\";\n\nEditorWrapper.propTypes = {\n  set: PropTypes.func,\n  stylesheets: PropTypes.arrayOf(PropTypes.object),\n  sectionId: PropTypes.string,\n  sectionBody: PropTypes.string\n};\n"],"sourceRoot":""}